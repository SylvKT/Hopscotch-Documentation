function sendToApp(a, b, c) { void 0 === c && (c = "hopscotch"); var d = window.webkit; if (d && d.messageHandlers) { d.messageHandlers[c].postMessage((e = {}, e[a] = b, e)); var e } } function hasEmoji(a) { var b = /[\uD800-\uDBFF\uDC00-\uDFFF]/; return null != a && "" !== a && (b.test(a) || RegExp("" + emoji.regex.source).test(a)) } function onlyEmoji(a) { return null != a && "" !== a && RegExp("^(" + emoji.regex.source + ")+$").test(a) } function requestTextureFromApp(a, b) { if (void 0 === b && (b = JSON.stringify(a)), !appRequestCache.get(b)) { var c = appRequestCounter++; appRequestCache.set(b, new Promise(function(b) { appRequestCallbacks[c] = b, window.webkit.messageHandlers.renderer.postMessage(Object.assign({}, a, { replyTo: "appRequestCallbacks[" + c + "]" })) }).then(function(a) { return delete appRequestCallbacks[c], a })) } return appRequestCache.get(b) } function log() { for (var a = [], b = 0; b < arguments.length; b++) a[b] = arguments[b]; console.log.apply(console, arguments), sendToApp("log", Array.prototype.join.call(arguments, " ")) } function clamp(a, b, c) { var d = Math.max(b, a); return Math.min(d, c) } function mean(a) { return a.reduce(function(a, b) { return a + b }, 0) / a.length } function variance(a) { var b = mean(a); return a.reduce(function(a, c) { return a + Math.pow(c - b, 2) }, 0) / a.length } function findLast(a, b) { for (var c = a.length - 1; c >= 0; c--) if (b(a[c], c, a)) return a[c] } function benchmarkStart() { startTime = performance.now() } function benchmarkEnd() { var a = performance.now(); if (benchmarks.length >= 100) { for (var b = 0, c = 0; c < benchmarks.length; c++) b += benchmarks[c]; var d = document.getElementById("time").innerText; d.length > 130 && (d = d.substring(50, 130)); var e = Math.round(b / benchmarks.length * 1e3) / 1e3; document.getElementById("time").innerText = d + " " + e + "ms", benchmarks = [] } var f = a - startTime; benchmarks.push(f) } function makeDebugCanvas(a, b) { var c = document.createElement("canvas"); return c.style.position = "fixed", c.style.top = a + "px", c.style.left = b + "px", c.style.border = "1px solid blue", c.style.zIndex = "99999", document.body.appendChild(c), c.width = HSVisualContext.collisionResolution, c.height = HSVisualContext.collisionResolution, c } function hs_plane(a, b) { return Math.abs(a) >= Math.abs(b) ? HSPlane.horizontal : HSPlane.vertical } function hs_magnitude(a, b) { return Math.abs(a) < b ? HSMagnitude.none : a > 0 ? HSMagnitude.positive : HSMagnitude.negative } function hs_direction(a, b, c) { var d, e = hs_plane(a, b); switch (e) { case HSPlane.horizontal: d = hs_magnitude(a, c); break; case HSPlane.vertical: d = hs_magnitude(b, c) } return hs_directionForMagnitudeAndPlane(d, e) } function hs_directionForMagnitudeAndPlane(a, b) { switch (a) { case HSMagnitude.positive: switch (b) { case HSPlane.horizontal: return HSDirection.right; case HSPlane.vertical: return HSDirection.up } case HSMagnitude.negative: switch (b) { case HSPlane.horizontal: return HSDirection.left; case HSPlane.vertical: return HSDirection.down } case HSMagnitude.none: return null } } function isFullscreen() { return !!document.fullscreenElement || (!!document.webkitFullscreenElement || (!!document.mozFullScreenElement || (!!document.msFullScreenElement || main.isMaximized))) } function enterFullscreen(a, b, c) { var d = b || window.innerWidth, e = c || window.innerHeight; if (main.resizeRoot(d, e), a = a, a.requestFullscreen) a.requestFullscreen(); else if (a.mozRequestFullScreen) a.mozRequestFullScreen(); else if (a.webkitRequestFullscreen) a.webkitRequestFullscreen(); else if (a.msRequestFullscreen) a.msRequestFullscreen(); else { main.isMaximized = !0, main.resizeRoot(d, e), main.root.style.position = "absolute", main.centerOnScreen(d, e); for (var f = 0; f < document.body.children.length; f++) document.body.children[f].style.visibility = "hidden"; document.body.style.backgroundColor = "black", main.root.style.visibility = "visible", document.dispatchEvent(new Event("fullscreenchange")) } } function exitFullscreen() { if (main.setSizeFromDataAttrs(), document.exitFullscreen) document.exitFullscreen(); else if (document.msExitFullscreen) document.msExitFullscreen(); else if (document.mozCancelFullScreen) document.mozCancelFullScreen(); else if (document.webkitExitFullscreen) document.webkitExitFullscreen(); else { main.isMaximized = !1, main.root.style.position = "", main.root.style.top = "", main.root.style.left = ""; for (var a = 0; a < document.body.children.length; a++) document.body.children[a].style.visibility = ""; document.body.style.backgroundColor = "", main.root.style.visibility = "", document.dispatchEvent(new Event("fullscreenchange")) } } function getImageFromUri(a) { var b = new Image; return a.startsWith("data:") || (b.crossOrigin = "Anonymous"), new Promise(function(c, d) { b.onload = function() { return c(b) }, b.onerror = d, b.src = a }) } function degreesToRadians(a) { return a * Math.PI / 180 } function radiansToDegrees(a) { return a / Math.PI * 180 } function blockTypeForLegacyEventType(a) { switch (a) { case HSEventType.HSEventOnStart: return HSBlockType.EventOperatorStart; case HSEventType.HSEventShake: return HSBlockType.EventOperatorShake; case HSEventType.HSEventTiltUp: return HSBlockType.EventOperatorTiltUp; case HSEventType.HSEventTiltDown: return HSBlockType.EventOperatorTiltDown; case HSEventType.HSEventTiltRight: return HSBlockType.EventOperatorTiltRight; case HSEventType.HSEventTiltLeft: return HSBlockType.EventOperatorTiltLeft; case HSEventType.HSEventTapStage: case HSEventType.HSEventTouchedObject: return HSBlockType.EventOperatorTap; case HSEventType.HSEventLoudNoise: return HSBlockType.EventOperatorLoudNoise; case HSEventType.HSEventCollision: return HSBlockType.EventOperatorIsTouching; case HSEventType.HSEventHeldObject: return HSBlockType.EventOperatorHold; case HSEventType.HSEventEnteredWorld: return HSBlockType.EventOperatorEnterTheWorld } return HSBlockType.EventOperatorStart } function UIRegisterEventCallbacks(a, b) { function c(a, b, c) { return new UIEventListener(a, b, function(a) { a.preventDefault(), c(a) }) } function d(a, b) { var c = a.target.getBoundingClientRect(); Array.from(a.changedTouches).forEach(function(a) { b(new UIPointerEvent(a, [a.clientX - c.left, a.clientY - c.top])) }) } function e(a, b, d) { return c(a, b, function(a) { var b = [a.offsetX, a.offsetY], c = new UIPointerEvent(a, b); d(c) }) } function f(a, b, e) { return c(a, b, function(a) { return d(a, e) }) } var g = !1; return new UIEventListeners([e(a, "mousedown", function(a) { g && b.pointerUp(a), g = !0, b.pointerDown(a) }), e(a, "mousemove", function(a) { g && b.pointerDrag(a) }), e(window, "mouseup", function(a) { b.pointerUp(a), g = !1 }), f(a, "touchstart", b.pointerDown), f(a, "touchmove", b.pointerDrag), f(window, "touchend", b.pointerUp), f(window, "touchcancel", b.pointerCancel)]) }! function a(b, c, d) { function e(g, h) { if (!c[g]) { if (!b[g]) { var i = "function" == typeof require && require; if (!h && i) return i(g, !0); if (f) return f(g, !0); var j = new Error("Cannot find module '" + g + "'"); throw j.code = "MODULE_NOT_FOUND", j } var k = c[g] = { exports: {} }; b[g][0].call(k.exports, function(a) { var c = b[g][1][a]; return e(c || a) }, k, k.exports, a, b, c, d) } return c[g].exports } for (var f = "function" == typeof require && require, g = 0; g < d.length; g++) e(d[g]); return e }({ 1: [function(a, b, c) { (function(b) { "use strict"; function c(a, b, c) { a[b] || Object[d](a, b, { writable: !0, configurable: !0, value: c }) } if (a(327), a(328), a(2), b._babelPolyfill) throw new Error("only one instance of babel-polyfill is allowed"); b._babelPolyfill = !0; var d = "defineProperty"; c(String.prototype, "padLeft", "".padStart), c(String.prototype, "padRight", "".padEnd), "pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(a) { [][a] && c(Array, a, Function.call.bind([][a])) }) }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, { 2: 2, 327: 327, 328: 328 }], 2: [function(a, b, c) { a(130), b.exports = a(23).RegExp.escape }, { 130: 130, 23: 23 }], 3: [function(a, b, c) { b.exports = function(a) { if ("function" != typeof a) throw TypeError(a + " is not a function!"); return a } }, {}], 4: [function(a, b, c) { var d = a(18); b.exports = function(a, b) { if ("number" != typeof a && "Number" != d(a)) throw TypeError(b); return +a } }, { 18: 18 }], 5: [function(a, b, c) { var d = a(128)("unscopables"), e = Array.prototype; void 0 == e[d] && a(42)(e, d, {}), b.exports = function(a) { e[d][a] = !0 } }, { 128: 128, 42: 42 }], 6: [function(a, b, c) { b.exports = function(a, b, c, d) { if (!(a instanceof b) || void 0 !== d && d in a) throw TypeError(c + ": incorrect invocation!"); return a } }, {}], 7: [function(a, b, c) { var d = a(51); b.exports = function(a) { if (!d(a)) throw TypeError(a + " is not an object!"); return a } }, { 51: 51 }], 8: [function(a, b, c) { "use strict"; var d = a(119), e = a(114), f = a(118); b.exports = [].copyWithin || function(a, b) { var c = d(this), g = f(c.length), h = e(a, g), i = e(b, g), j = arguments.length > 2 ? arguments[2] : void 0, k = Math.min((void 0 === j ? g : e(j, g)) - i, g - h), l = 1; for (i < h && h < i + k && (l = -1, i += k - 1, h += k - 1); k-- > 0;) i in c ? c[h] = c[i] : delete c[h], h += l, i += l; return c } }, { 114: 114, 118: 118, 119: 119 }], 9: [function(a, b, c) { "use strict"; var d = a(119), e = a(114), f = a(118); b.exports = function(a) { for (var b = d(this), c = f(b.length), g = arguments.length, h = e(g > 1 ? arguments[1] : void 0, c), i = g > 2 ? arguments[2] : void 0, j = void 0 === i ? c : e(i, c); j > h;) b[h++] = a; return b } }, { 114: 114, 118: 118, 119: 119 }], 10: [function(a, b, c) { var d = a(39); b.exports = function(a, b) { var c = []; return d(a, !1, c.push, c, b), c } }, { 39: 39 }], 11: [function(a, b, c) { var d = a(117), e = a(118), f = a(114); b.exports = function(a) { return function(b, c, g) { var h, i = d(b), j = e(i.length), k = f(g, j); if (a && c != c) { for (; j > k;) if ((h = i[k++]) != h) return !0 } else for (; j > k; k++) if ((a || k in i) && i[k] === c) return a || k || 0; return !a && -1 } } }, { 114: 114, 117: 117, 118: 118 }], 12: [function(a, b, c) { var d = a(25), e = a(47), f = a(119), g = a(118), h = a(15); b.exports = function(a, b) { var c = 1 == a, i = 2 == a, j = 3 == a, k = 4 == a, l = 6 == a, m = 5 == a || l, n = b || h; return function(b, h, o) { for (var p, q, r = f(b), s = e(r), t = d(h, o, 3), u = g(s.length), v = 0, w = c ? n(b, u) : i ? n(b, 0) : void 0; u > v; v++) if ((m || v in s) && (p = s[v], q = t(p, v, r), a)) if (c) w[v] = q; else if (q) switch (a) { case 3: return !0; case 5: return p; case 6: return v; case 2: w.push(p) } else if (k) return !1; return l ? -1 : j || k ? k : w } } }, { 118: 118, 119: 119, 15: 15, 25: 25, 47: 47 }], 13: [function(a, b, c) { var d = a(3), e = a(119), f = a(47), g = a(118); b.exports = function(a, b, c, h, i) { d(b); var j = e(a), k = f(j), l = g(j.length), m = i ? l - 1 : 0, n = i ? -1 : 1; if (c < 2) for (;;) { if (m in k) { h = k[m], m += n; break } if (m += n, i ? m < 0 : l <= m) throw TypeError("Reduce of empty array with no initial value") } for (; i ? m >= 0 : l > m; m += n) m in k && (h = b(h, k[m], m, j)); return h } }, { 118: 118, 119: 119, 3: 3, 47: 47 }], 14: [function(a, b, c) { var d = a(51), e = a(49), f = a(128)("species"); b.exports = function(a) { var b; return e(a) && (b = a.constructor, "function" != typeof b || b !== Array && !e(b.prototype) || (b = void 0), d(b) && null === (b = b[f]) && (b = void 0)), void 0 === b ? Array : b } }, { 128: 128, 49: 49, 51: 51 }], 15: [function(a, b, c) { var d = a(14); b.exports = function(a, b) { return new(d(a))(b) } }, { 14: 14 }], 16: [function(a, b, c) { "use strict"; var d = a(3), e = a(51), f = a(46), g = [].slice, h = {}, i = function(a, b, c) { if (!(b in h)) { for (var d = [], e = 0; e < b; e++) d[e] = "a[" + e + "]"; h[b] = Function("F,a", "return new F(" + d.join(",") + ")") } return h[b](a, c) }; b.exports = Function.bind || function(a) { var b = d(this), c = g.call(arguments, 1), h = function() { var d = c.concat(g.call(arguments)); return this instanceof h ? i(b, d.length, d) : f(b, d, a) }; return e(b.prototype) && (h.prototype = b.prototype), h } }, { 3: 3, 46: 46, 51: 51 }], 17: [function(a, b, c) { var d = a(18), e = a(128)("toStringTag"), f = "Arguments" == d(function() { return arguments }()), g = function(a, b) { try { return a[b] } catch (a) {} }; b.exports = function(a) { var b, c, h; return void 0 === a ? "Undefined" : null === a ? "Null" : "string" == typeof(c = g(b = Object(a), e)) ? c : f ? d(b) : "Object" == (h = d(b)) && "function" == typeof b.callee ? "Arguments" : h } }, { 128: 128, 18: 18 }], 18: [function(a, b, c) { var d = {}.toString; b.exports = function(a) { return d.call(a).slice(8, -1) } }, {}], 19: [function(a, b, c) { "use strict"; var d = a(72).f, e = a(71), f = a(93), g = a(25), h = a(6), i = a(39), j = a(55), k = a(57), l = a(100), m = a(29), n = a(66).fastKey, o = a(125), p = m ? "_s" : "size", q = function(a, b) { var c, d = n(b); if ("F" !== d) return a._i[d]; for (c = a._f; c; c = c.n) if (c.k == b) return c }; b.exports = { getConstructor: function(a, b, c, j) { var k = a(function(a, d) { h(a, k, b, "_i"), a._t = b, a._i = e(null), a._f = void 0, a._l = void 0, a[p] = 0, void 0 != d && i(d, c, a[j], a) }); return f(k.prototype, { clear: function() { for (var a = o(this, b), c = a._i, d = a._f; d; d = d.n) d.r = !0, d.p && (d.p = d.p.n = void 0), delete c[d.i]; a._f = a._l = void 0, a[p] = 0 }, delete: function(a) { var c = o(this, b), d = q(c, a); if (d) { var e = d.n, f = d.p; delete c._i[d.i], d.r = !0, f && (f.n = e), e && (e.p = f), c._f == d && (c._f = e), c._l == d && (c._l = f), c[p]-- } return !!d }, forEach: function(a) { o(this, b); for (var c, d = g(a, arguments.length > 1 ? arguments[1] : void 0, 3); c = c ? c.n : this._f;) for (d(c.v, c.k, this); c && c.r;) c = c.p }, has: function(a) { return !!q(o(this, b), a) } }), m && d(k.prototype, "size", { get: function() { return o(this, b)[p] } }), k }, def: function(a, b, c) { var d, e, f = q(a, b); return f ? f.v = c : (a._l = f = { i: e = n(b, !0), k: b, v: c, p: d = a._l, n: void 0, r: !1 }, a._f || (a._f = f), d && (d.n = f), a[p]++, "F" !== e && (a._i[e] = f)), a }, getEntry: q, setStrong: function(a, b, c) { j(a, b, function(a, c) { this._t = o(a, b), this._k = c, this._l = void 0 }, function() { for (var a = this, b = a._k, c = a._l; c && c.r;) c = c.p; return a._t && (a._l = c = c ? c.n : a._t._f) ? "keys" == b ? k(0, c.k) : "values" == b ? k(0, c.v) : k(0, [c.k, c.v]) : (a._t = void 0, k(1)) }, c ? "entries" : "values", !c, !0), l(b) } } }, { 100: 100, 125: 125, 25: 25, 29: 29, 39: 39, 55: 55, 57: 57, 6: 6, 66: 66, 71: 71, 72: 72, 93: 93 }], 20: [function(a, b, c) { var d = a(17), e = a(10); b.exports = function(a) { return function() { if (d(this) != a) throw TypeError(a + "#toJSON isn't generic"); return e(this) } } }, { 10: 10, 17: 17 }], 21: [function(a, b, c) { "use strict"; var d = a(93), e = a(66).getWeak, f = a(7), g = a(51), h = a(6), i = a(39), j = a(12), k = a(41), l = a(125), m = j(5), n = j(6), o = 0, p = function(a) { return a._l || (a._l = new q) }, q = function() { this.a = [] }, r = function(a, b) { return m(a.a, function(a) { return a[0] === b }) }; q.prototype = { get: function(a) { var b = r(this, a); if (b) return b[1] }, has: function(a) { return !!r(this, a) }, set: function(a, b) { var c = r(this, a); c ? c[1] = b : this.a.push([a, b]) }, delete: function(a) { var b = n(this.a, function(b) { return b[0] === a }); return ~b && this.a.splice(b, 1), !!~b } }, b.exports = { getConstructor: function(a, b, c, f) { var j = a(function(a, d) { h(a, j, b, "_i"), a._t = b, a._i = o++, a._l = void 0, void 0 != d && i(d, c, a[f], a) }); return d(j.prototype, { delete: function(a) { if (!g(a)) return !1; var c = e(a); return !0 === c ? p(l(this, b)).delete(a) : c && k(c, this._i) && delete c[this._i] }, has: function(a) { if (!g(a)) return !1; var c = e(a); return !0 === c ? p(l(this, b)).has(a) : c && k(c, this._i) } }), j }, def: function(a, b, c) { var d = e(f(b), !0); return !0 === d ? p(a).set(b, c) : d[a._i] = c, a }, ufstore: p } }, { 12: 12, 125: 125, 39: 39, 41: 41, 51: 51, 6: 6, 66: 66, 7: 7, 93: 93 }], 22: [function(a, b, c) { "use strict"; var d = a(40), e = a(33), f = a(94), g = a(93), h = a(66), i = a(39), j = a(6), k = a(51), l = a(35), m = a(56), n = a(101), o = a(45); b.exports = function(a, b, c, p, q, r) { var s = d[a], t = s, u = q ? "set" : "add", v = t && t.prototype, w = {}, x = function(a) { var b = v[a]; f(v, a, "delete" == a ? function(a) { return !(r && !k(a)) && b.call(this, 0 === a ? 0 : a) } : "has" == a ? function(a) { return !(r && !k(a)) && b.call(this, 0 === a ? 0 : a) } : "get" == a ? function(a) { return r && !k(a) ? void 0 : b.call(this, 0 === a ? 0 : a) } : "add" == a ? function(a) { return b.call(this, 0 === a ? 0 : a), this } : function(a, c) { return b.call(this, 0 === a ? 0 : a, c), this }) }; if ("function" == typeof t && (r || v.forEach && !l(function() { (new t).entries().next() }))) { var y = new t, z = y[u](r ? {} : -0, 1) != y, A = l(function() { y.has(1) }), B = m(function(a) { new t(a) }), C = !r && l(function() { for (var a = new t, b = 5; b--;) a[u](b, b); return !a.has(-0) }); B || (t = b(function(b, c) { j(b, t, a); var d = o(new s, b, t); return void 0 != c && i(c, q, d[u], d), d }), t.prototype = v, v.constructor = t), (A || C) && (x("delete"), x("has"), q && x("get")), (C || z) && x(u), r && v.clear && delete v.clear } else t = p.getConstructor(b, a, q, u), g(t.prototype, c), h.NEED = !0; return n(t, a), w[a] = t, e(e.G + e.W + e.F * (t != s), w), r || p.setStrong(t, a, q), t } }, { 101: 101, 33: 33, 35: 35, 39: 39, 40: 40, 45: 45, 51: 51, 56: 56, 6: 6, 66: 66, 93: 93, 94: 94 }], 23: [function(a, b, c) { var d = b.exports = { version: "2.5.0" }; "number" == typeof __e && (__e = d) }, {}], 24: [function(a, b, c) { "use strict"; var d = a(72), e = a(92); b.exports = function(a, b, c) { b in a ? d.f(a, b, e(0, c)) : a[b] = c } }, { 72: 72, 92: 92 }], 25: [function(a, b, c) { var d = a(3); b.exports = function(a, b, c) { if (d(a), void 0 === b) return a; switch (c) { case 1: return function(c) { return a.call(b, c) }; case 2: return function(c, d) { return a.call(b, c, d) }; case 3: return function(c, d, e) { return a.call(b, c, d, e) } } return function() { return a.apply(b, arguments) } } }, { 3: 3 }], 26: [function(a, b, c) { "use strict"; var d = a(35), e = Date.prototype.getTime, f = Date.prototype.toISOString, g = function(a) { return a > 9 ? a : "0" + a }; b.exports = d(function() { return "0385-07-25T07:06:39.999Z" != f.call(new Date(-5e13 - 1)) }) || !d(function() { f.call(new Date(NaN)) }) ? function() { if (!isFinite(e.call(this))) throw RangeError("Invalid time value"); var a = this, b = a.getUTCFullYear(), c = a.getUTCMilliseconds(), d = b < 0 ? "-" : b > 9999 ? "+" : ""; return d + ("00000" + Math.abs(b)).slice(d ? -6 : -4) + "-" + g(a.getUTCMonth() + 1) + "-" + g(a.getUTCDate()) + "T" + g(a.getUTCHours()) + ":" + g(a.getUTCMinutes()) + ":" + g(a.getUTCSeconds()) + "." + (c > 99 ? c : "0" + g(c)) + "Z" } : f }, { 35: 35 }], 27: [function(a, b, c) { "use strict"; var d = a(7), e = a(120); b.exports = function(a) { if ("string" !== a && "number" !== a && "default" !== a) throw TypeError("Incorrect hint"); return e(d(this), "number" != a) } }, { 120: 120, 7: 7 }], 28: [function(a, b, c) { b.exports = function(a) { if (void 0 == a) throw TypeError("Can't call method on " + a); return a } }, {}], 29: [function(a, b, c) { b.exports = !a(35)(function() { return 7 != Object.defineProperty({}, "a", { get: function() { return 7 } }).a }) }, { 35: 35 }], 30: [function(a, b, c) { var d = a(51), e = a(40).document, f = d(e) && d(e.createElement); b.exports = function(a) { return f ? e.createElement(a) : {} } }, { 40: 40, 51: 51 }], 31: [function(a, b, c) { b.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",") }, {}], 32: [function(a, b, c) { var d = a(81), e = a(78), f = a(82); b.exports = function(a) { var b = d(a), c = e.f; if (c) for (var g, h = c(a), i = f.f, j = 0; h.length > j;) i.call(a, g = h[j++]) && b.push(g); return b } }, { 78: 78, 81: 81, 82: 82 }], 33: [function(a, b, c) { var d = a(40), e = a(23), f = a(42), g = a(94), h = a(25), i = function(a, b, c) { var j, k, l, m, n = a & i.F, o = a & i.G, p = a & i.S, q = a & i.P, r = a & i.B, s = o ? d : p ? d[b] || (d[b] = {}) : (d[b] || {}).prototype, t = o ? e : e[b] || (e[b] = {}), u = t.prototype || (t.prototype = {}); o && (c = b); for (j in c) k = !n && s && void 0 !== s[j], l = (k ? s : c)[j], m = r && k ? h(l, d) : q && "function" == typeof l ? h(Function.call, l) : l, s && g(s, j, l, a & i.U), t[j] != l && f(t, j, m), q && u[j] != l && (u[j] = l) }; d.core = e, i.F = 1, i.G = 2, i.S = 4, i.P = 8, i.B = 16, i.W = 32, i.U = 64, i.R = 128, b.exports = i }, { 23: 23, 25: 25, 40: 40, 42: 42, 94: 94 }], 34: [function(a, b, c) { var d = a(128)("match"); b.exports = function(a) { var b = /./; try { "/./" [a](b) } catch (c) { try { return b[d] = !1, !"/./" [a](b) } catch (a) {} } return !0 } }, { 128: 128 }], 35: [function(a, b, c) { b.exports = function(a) { try { return !!a() } catch (a) { return !0 } } }, {}], 36: [function(a, b, c) { "use strict"; var d = a(42), e = a(94), f = a(35), g = a(28), h = a(128); b.exports = function(a, b, c) { var i = h(a), j = c(g, i, "" [a]), k = j[0], l = j[1]; f(function() { var b = {}; return b[i] = function() { return 7 }, 7 != "" [a](b) }) && (e(String.prototype, a, k), d(RegExp.prototype, i, 2 == b ? function(a, b) { return l.call(a, this, b) } : function(a) { return l.call(a, this) })) } }, { 128: 128, 28: 28, 35: 35, 42: 42, 94: 94 }], 37: [function(a, b, c) { "use strict"; var d = a(7); b.exports = function() { var a = d(this), b = ""; return a.global && (b += "g"), a.ignoreCase && (b += "i"), a.multiline && (b += "m"), a.unicode && (b += "u"), a.sticky && (b += "y"), b } }, { 7: 7 }], 38: [function(a, b, c) { "use strict"; function d(a, b, c, j, k, l, m, n) { for (var o, p, q = k, r = 0, s = !!m && h(m, n, 3); r < j;) { if (r in c) { if (o = s ? s(c[r], r, b) : c[r], p = !1, f(o) && (p = o[i], p = void 0 !== p ? !!p : e(o)), p && l > 0) q = d(a, b, o, g(o.length), q, l - 1) - 1; else { if (q >= 9007199254740991) throw TypeError(); a[q] = o } q++ } r++ } return q } var e = a(49), f = a(51), g = a(118), h = a(25), i = a(128)("isConcatSpreadable"); b.exports = d }, { 118: 118, 128: 128, 25: 25, 49: 49, 51: 51 }], 39: [function(a, b, c) { var d = a(25), e = a(53), f = a(48), g = a(7), h = a(118), i = a(129), j = {}, k = {}, c = b.exports = function(a, b, c, l, m) { var n, o, p, q, r = m ? function() { return a } : i(a), s = d(c, l, b ? 2 : 1), t = 0; if ("function" != typeof r) throw TypeError(a + " is not iterable!"); if (f(r)) { for (n = h(a.length); n > t; t++) if ((q = b ? s(g(o = a[t])[0], o[1]) : s(a[t])) === j || q === k) return q } else for (p = r.call(a); !(o = p.next()).done;) if ((q = e(p, s, o.value, b)) === j || q === k) return q }; c.BREAK = j, c.RETURN = k }, { 118: 118, 129: 129, 25: 25, 48: 48, 53: 53, 7: 7 }], 40: [function(a, b, c) { var d = b.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")(); "number" == typeof __g && (__g = d) }, {}], 41: [function(a, b, c) { var d = {}.hasOwnProperty; b.exports = function(a, b) { return d.call(a, b) } }, {}], 42: [function(a, b, c) { var d = a(72), e = a(92); b.exports = a(29) ? function(a, b, c) { return d.f(a, b, e(1, c)) } : function(a, b, c) { return a[b] = c, a } }, { 29: 29, 72: 72, 92: 92 }], 43: [function(a, b, c) { var d = a(40).document; b.exports = d && d.documentElement }, { 40: 40 }], 44: [function(a, b, c) { b.exports = !a(29) && !a(35)(function() { return 7 != Object.defineProperty(a(30)("div"), "a", { get: function() { return 7 } }).a }) }, { 29: 29, 30: 30, 35: 35 }], 45: [function(a, b, c) { var d = a(51), e = a(99).set; b.exports = function(a, b, c) { var f, g = b.constructor; return g !== c && "function" == typeof g && (f = g.prototype) !== c.prototype && d(f) && e && e(a, f), a } }, { 51: 51, 99: 99 }], 46: [function(a, b, c) { b.exports = function(a, b, c) { var d = void 0 === c; switch (b.length) { case 0: return d ? a() : a.call(c); case 1: return d ? a(b[0]) : a.call(c, b[0]); case 2: return d ? a(b[0], b[1]) : a.call(c, b[0], b[1]); case 3: return d ? a(b[0], b[1], b[2]) : a.call(c, b[0], b[1], b[2]); case 4: return d ? a(b[0], b[1], b[2], b[3]) : a.call(c, b[0], b[1], b[2], b[3]) } return a.apply(c, b) } }, {}], 47: [function(a, b, c) { var d = a(18); b.exports = Object("z").propertyIsEnumerable(0) ? Object : function(a) { return "String" == d(a) ? a.split("") : Object(a) } }, { 18: 18 }], 48: [function(a, b, c) { var d = a(58), e = a(128)("iterator"), f = Array.prototype; b.exports = function(a) { return void 0 !== a && (d.Array === a || f[e] === a) } }, { 128: 128, 58: 58 }], 49: [function(a, b, c) { var d = a(18); b.exports = Array.isArray || function(a) { return "Array" == d(a) } }, { 18: 18 }], 50: [function(a, b, c) { var d = a(51), e = Math.floor; b.exports = function(a) { return !d(a) && isFinite(a) && e(a) === a } }, { 51: 51 }], 51: [function(a, b, c) { b.exports = function(a) { return "object" == typeof a ? null !== a : "function" == typeof a } }, {}], 52: [function(a, b, c) { var d = a(51), e = a(18), f = a(128)("match"); b.exports = function(a) { var b; return d(a) && (void 0 !== (b = a[f]) ? !!b : "RegExp" == e(a)) } }, { 128: 128, 18: 18, 51: 51 }], 53: [function(a, b, c) { var d = a(7); b.exports = function(a, b, c, e) { try { return e ? b(d(c)[0], c[1]) : b(c) } catch (b) { var f = a.return; throw void 0 !== f && d(f.call(a)), b } } }, { 7: 7 }], 54: [function(a, b, c) { "use strict"; var d = a(71), e = a(92), f = a(101), g = {}; a(42)(g, a(128)("iterator"), function() { return this }), b.exports = function(a, b, c) { a.prototype = d(g, { next: e(1, c) }), f(a, b + " Iterator") } }, { 101: 101, 128: 128, 42: 42, 71: 71, 92: 92 }], 55: [function(a, b, c) { "use strict"; var d = a(60), e = a(33), f = a(94), g = a(42), h = a(41), i = a(58), j = a(54), k = a(101), l = a(79), m = a(128)("iterator"), n = !([].keys && "next" in [].keys()), o = function() { return this }; b.exports = function(a, b, c, p, q, r, s) { j(c, b, p); var t, u, v, w = function(a) { if (!n && a in A) return A[a]; switch (a) { case "keys": case "values": return function() { return new c(this, a) } } return function() { return new c(this, a) } }, x = b + " Iterator", y = "values" == q, z = !1, A = a.prototype, B = A[m] || A["@@iterator"] || q && A[q], C = B || w(q), D = q ? y ? w("entries") : C : void 0, E = "Array" == b ? A.entries || B : B; if (E && (v = l(E.call(new a))) !== Object.prototype && v.next && (k(v, x, !0), d || h(v, m) || g(v, m, o)), y && B && "values" !== B.name && (z = !0, C = function() { return B.call(this) }), d && !s || !n && !z && A[m] || g(A, m, C), i[b] = C, i[x] = o, q) if (t = { values: y ? C : w("values"), keys: r ? C : w("keys"), entries: D }, s) for (u in t) u in A || f(A, u, t[u]); else e(e.P + e.F * (n || z), b, t); return t } }, { 101: 101, 128: 128, 33: 33, 41: 41, 42: 42, 54: 54, 58: 58, 60: 60, 79: 79, 94: 94 }], 56: [function(a, b, c) { var d = a(128)("iterator"), e = !1; try { var f = [7][d](); f.return = function() { e = !0 }, Array.from(f, function() { throw 2 }) } catch (a) {} b.exports = function(a, b) { if (!b && !e) return !1; var c = !1; try { var f = [7], g = f[d](); g.next = function() { return { done: c = !0 } }, f[d] = function() { return g }, a(f) } catch (a) {} return c } }, { 128: 128 }], 57: [function(a, b, c) { b.exports = function(a, b) { return { value: b, done: !!a } } }, {}], 58: [function(a, b, c) { b.exports = {} }, {}], 59: [function(a, b, c) { var d = a(81), e = a(117); b.exports = function(a, b) { for (var c, f = e(a), g = d(f), h = g.length, i = 0; h > i;) if (f[c = g[i++]] === b) return c } }, { 117: 117, 81: 81 }], 60: [function(a, b, c) { b.exports = !1 }, {}], 61: [function(a, b, c) { var d = Math.expm1; b.exports = !d || d(10) > 22025.465794806718 || d(10) < 22025.465794806718 || -2e-17 != d(-2e-17) ? function(a) { return 0 == (a = +a) ? a : a > -1e-6 && a < 1e-6 ? a + a * a / 2 : Math.exp(a) - 1 } : d }, {}], 62: [function(a, b, c) { var d = a(65), e = Math.pow, f = e(2, -52), g = e(2, -23), h = e(2, 127) * (2 - g), i = e(2, -126), j = function(a) { return a + 1 / f - 1 / f }; b.exports = Math.fround || function(a) { var b, c, e = Math.abs(a), k = d(a); return e < i ? k * j(e / i / g) * i * g : (b = (1 + g / f) * e, c = b - (b - e), c > h || c != c ? k * (1 / 0) : k * c) } }, { 65: 65 }], 63: [function(a, b, c) { b.exports = Math.log1p || function(a) { return (a = +a) > -1e-8 && a < 1e-8 ? a - a * a / 2 : Math.log(1 + a) } }, {}], 64: [function(a, b, c) { b.exports = Math.scale || function(a, b, c, d, e) { return 0 === arguments.length || a != a || b != b || c != c || d != d || e != e ? NaN : a === 1 / 0 || a === -1 / 0 ? a : (a - b) * (e - d) / (c - b) + d } }, {}], 65: [function(a, b, c) { b.exports = Math.sign || function(a) { return 0 == (a = +a) || a != a ? a : a < 0 ? -1 : 1 } }, {}], 66: [function(a, b, c) { var d = a(124)("meta"), e = a(51), f = a(41), g = a(72).f, h = 0, i = Object.isExtensible || function() { return !0 }, j = !a(35)(function() { return i(Object.preventExtensions({})) }), k = function(a) { g(a, d, { value: { i: "O" + ++h, w: {} } }) }, l = function(a, b) { if (!e(a)) return "symbol" == typeof a ? a : ("string" == typeof a ? "S" : "P") + a; if (!f(a, d)) { if (!i(a)) return "F"; if (!b) return "E"; k(a) } return a[d].i }, m = function(a, b) { if (!f(a, d)) { if (!i(a)) return !0; if (!b) return !1; k(a) } return a[d].w }, n = function(a) { return j && o.NEED && i(a) && !f(a, d) && k(a), a }, o = b.exports = { KEY: d, NEED: !1, fastKey: l, getWeak: m, onFreeze: n } }, { 124: 124, 35: 35, 41: 41, 51: 51, 72: 72 }], 67: [function(a, b, c) { var d = a(160), e = a(33), f = a(103)("metadata"), g = f.store || (f.store = new(a(266))), h = function(a, b, c) { var e = g.get(a); if (!e) { if (!c) return; g.set(a, e = new d) } var f = e.get(b); if (!f) { if (!c) return; e.set(b, f = new d) } return f }, i = function(a, b, c) { var d = h(b, c, !1); return void 0 !== d && d.has(a) }, j = function(a, b, c) { var d = h(b, c, !1); return void 0 === d ? void 0 : d.get(a) }, k = function(a, b, c, d) { h(c, d, !0).set(a, b) }, l = function(a, b) { var c = h(a, b, !1), d = []; return c && c.forEach(function(a, b) { d.push(b) }), d }, m = function(a) { return void 0 === a || "symbol" == typeof a ? a : String(a) }, n = function(a) { e(e.S, "Reflect", a) }; b.exports = { store: g, map: h, has: i, get: j, set: k, keys: l, key: m, exp: n } }, { 103: 103, 160: 160, 266: 266, 33: 33 }], 68: [function(a, b, c) { var d = a(40), e = a(113).set, f = d.MutationObserver || d.WebKitMutationObserver, g = d.process, h = d.Promise, i = "process" == a(18)(g); b.exports = function() { var a, b, c, j = function() { var d, e; for (i && (d = g.domain) && d.exit(); a;) { e = a.fn, a = a.next; try { e() } catch (d) { throw a ? c() : b = void 0, d } } b = void 0, d && d.enter() }; if (i) c = function() { g.nextTick(j) }; else if (f) { var k = !0, l = document.createTextNode(""); new f(j).observe(l, { characterData: !0 }), c = function() { l.data = k = !k } } else if (h && h.resolve) { var m = h.resolve(); c = function() { m.then(j) } } else c = function() { e.call(d, j) }; return function(d) { var e = { fn: d, next: void 0 }; b && (b.next = e), a || (a = e, c()), b = e } } }, { 113: 113, 18: 18, 40: 40 }], 69: [function(a, b, c) { "use strict"; function d(a) { var b, c; this.promise = new a(function(a, d) { if (void 0 !== b || void 0 !== c) throw TypeError("Bad Promise constructor"); b = a, c = d }), this.resolve = e(b), this.reject = e(c) } var e = a(3); b.exports.f = function(a) { return new d(a) } }, { 3: 3 }], 70: [function(a, b, c) { "use strict"; var d = a(81), e = a(78), f = a(82), g = a(119), h = a(47), i = Object.assign; b.exports = !i || a(35)(function() { var a = {}, b = {}, c = Symbol(), d = "abcdefghijklmnopqrst"; return a[c] = 7, d.split("").forEach(function(a) { b[a] = a }), 7 != i({}, a)[c] || Object.keys(i({}, b)).join("") != d }) ? function(a, b) { for (var c = g(a), i = arguments.length, j = 1, k = e.f, l = f.f; i > j;) for (var m, n = h(arguments[j++]), o = k ? d(n).concat(k(n)) : d(n), p = o.length, q = 0; p > q;) l.call(n, m = o[q++]) && (c[m] = n[m]); return c } : i }, { 119: 119, 35: 35, 47: 47, 78: 78, 81: 81, 82: 82 }], 71: [function(a, b, c) { var d = a(7), e = a(73), f = a(31), g = a(102)("IE_PROTO"), h = function() {}, i = function() { var b, c = a(30)("iframe"), d = f.length; for (c.style.display = "none", a(43).appendChild(c), c.src = "javascript:", b = c.contentWindow.document, b.open(), b.write("<script>document.F=Object<\/script>"), b.close(), i = b.F; d--;) delete i.prototype[f[d]]; return i() }; b.exports = Object.create || function(a, b) { var c; return null !== a ? (h.prototype = d(a), c = new h, h.prototype = null, c[g] = a) : c = i(), void 0 === b ? c : e(c, b) } }, { 102: 102, 30: 30, 31: 31, 43: 43, 7: 7, 73: 73 }], 72: [function(a, b, c) { var d = a(7), e = a(44), f = a(120), g = Object.defineProperty; c.f = a(29) ? Object.defineProperty : function(a, b, c) { if (d(a), b = f(b, !0), d(c), e) try { return g(a, b, c) } catch (a) {} if ("get" in c || "set" in c) throw TypeError("Accessors not supported!"); return "value" in c && (a[b] = c.value), a } }, { 120: 120, 29: 29, 44: 44, 7: 7 }], 73: [function(a, b, c) { var d = a(72), e = a(7), f = a(81); b.exports = a(29) ? Object.defineProperties : function(a, b) { e(a); for (var c, g = f(b), h = g.length, i = 0; h > i;) d.f(a, c = g[i++], b[c]); return a } }, { 29: 29, 7: 7, 72: 72, 81: 81 }], 74: [function(a, b, c) { "use strict"; b.exports = a(60) || !a(35)(function() { var b = Math.random(); __defineSetter__.call(null, b, function() {}), delete a(40)[b] }) }, { 35: 35, 40: 40, 60: 60 }], 75: [function(a, b, c) { var d = a(82), e = a(92), f = a(117), g = a(120), h = a(41), i = a(44), j = Object.getOwnPropertyDescriptor; c.f = a(29) ? j : function(a, b) { if (a = f(a), b = g(b, !0), i) try { return j(a, b) } catch (a) {} if (h(a, b)) return e(!d.f.call(a, b), a[b]) } }, { 117: 117, 120: 120, 29: 29, 41: 41, 44: 44, 82: 82, 92: 92 }], 76: [function(a, b, c) { var d = a(117), e = a(77).f, f = {}.toString, g = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [], h = function(a) { try { return e(a) } catch (a) { return g.slice() } }; b.exports.f = function(a) { return g && "[object Window]" == f.call(a) ? h(a) : e(d(a)) } }, { 117: 117, 77: 77 }], 77: [function(a, b, c) { var d = a(80), e = a(31).concat("length", "prototype"); c.f = Object.getOwnPropertyNames || function(a) { return d(a, e) } }, { 31: 31, 80: 80 }], 78: [function(a, b, c) { c.f = Object.getOwnPropertySymbols }, {}], 79: [function(a, b, c) { var d = a(41), e = a(119), f = a(102)("IE_PROTO"), g = Object.prototype; b.exports = Object.getPrototypeOf || function(a) { return a = e(a), d(a, f) ? a[f] : "function" == typeof a.constructor && a instanceof a.constructor ? a.constructor.prototype : a instanceof Object ? g : null } }, { 102: 102, 119: 119, 41: 41 }], 80: [function(a, b, c) { var d = a(41), e = a(117), f = a(11)(!1), g = a(102)("IE_PROTO"); b.exports = function(a, b) { var c, h = e(a), i = 0, j = []; for (c in h) c != g && d(h, c) && j.push(c); for (; b.length > i;) d(h, c = b[i++]) && (~f(j, c) || j.push(c)); return j } }, { 102: 102, 11: 11, 117: 117, 41: 41 }], 81: [function(a, b, c) { var d = a(80), e = a(31); b.exports = Object.keys || function(a) { return d(a, e) } }, { 31: 31, 80: 80 }], 82: [function(a, b, c) { c.f = {}.propertyIsEnumerable }, {}], 83: [function(a, b, c) { var d = a(33), e = a(23), f = a(35); b.exports = function(a, b) { var c = (e.Object || {})[a] || Object[a], g = {}; g[a] = b(c), d(d.S + d.F * f(function() { c(1) }), "Object", g) } }, { 23: 23, 33: 33, 35: 35 }], 84: [function(a, b, c) { var d = a(81), e = a(117), f = a(82).f; b.exports = function(a) { return function(b) { for (var c, g = e(b), h = d(g), i = h.length, j = 0, k = []; i > j;) f.call(g, c = h[j++]) && k.push(a ? [c, g[c]] : g[c]); return k } } }, { 117: 117, 81: 81, 82: 82 }], 85: [function(a, b, c) { var d = a(77), e = a(78), f = a(7), g = a(40).Reflect; b.exports = g && g.ownKeys || function(a) { var b = d.f(f(a)), c = e.f; return c ? b.concat(c(a)) : b } }, { 40: 40, 7: 7, 77: 77, 78: 78 }], 86: [function(a, b, c) { var d = a(40).parseFloat, e = a(111).trim; b.exports = 1 / d(a(112) + "-0") != -1 / 0 ? function(a) { var b = e(String(a), 3), c = d(b); return 0 === c && "-" == b.charAt(0) ? -0 : c } : d }, { 111: 111, 112: 112, 40: 40 }], 87: [function(a, b, c) { var d = a(40).parseInt, e = a(111).trim, f = a(112), g = /^[-+]?0[xX]/; b.exports = 8 !== d(f + "08") || 22 !== d(f + "0x16") ? function(a, b) { var c = e(String(a), 3); return d(c, b >>> 0 || (g.test(c) ? 16 : 10)) } : d }, { 111: 111, 112: 112, 40: 40 }], 88: [function(a, b, c) { "use strict"; var d = a(89), e = a(46), f = a(3); b.exports = function() { for (var a = f(this), b = arguments.length, c = Array(b), g = 0, h = d._, i = !1; b > g;)(c[g] = arguments[g++]) === h && (i = !0); return function() { var d, f = this, g = arguments.length, j = 0, k = 0; if (!i && !g) return e(a, c, f); if (d = c.slice(), i) for (; b > j; j++) d[j] === h && (d[j] = arguments[k++]); for (; g > k;) d.push(arguments[k++]); return e(a, d, f) } } }, { 3: 3, 46: 46, 89: 89 }], 89: [function(a, b, c) { b.exports = a(40) }, { 40: 40 }], 90: [function(a, b, c) { b.exports = function(a) { try { return { e: !1, v: a() } } catch (a) { return { e: !0, v: a } } } }, {}], 91: [function(a, b, c) { var d = a(69); b.exports = function(a, b) { var c = d.f(a); return (0, c.resolve)(b), c.promise } }, { 69: 69 }], 92: [function(a, b, c) { b.exports = function(a, b) { return { enumerable: !(1 & a), configurable: !(2 & a), writable: !(4 & a), value: b } } }, {}], 93: [function(a, b, c) { var d = a(94); b.exports = function(a, b, c) { for (var e in b) d(a, e, b[e], c); return a } }, { 94: 94 }], 94: [function(a, b, c) { var d = a(40), e = a(42), f = a(41), g = a(124)("src"), h = Function.toString, i = ("" + h).split("toString"); a(23).inspectSource = function(a) { return h.call(a) }, (b.exports = function(a, b, c, h) { var j = "function" == typeof c; j && (f(c, "name") || e(c, "name", b)), a[b] !== c && (j && (f(c, g) || e(c, g, a[b] ? "" + a[b] : i.join(String(b)))), a === d ? a[b] = c : h ? a[b] ? a[b] = c : e(a, b, c) : (delete a[b], e(a, b, c))) })(Function.prototype, "toString", function() { return "function" == typeof this && this[g] || h.call(this) }) }, { 124: 124, 23: 23, 40: 40, 41: 41, 42: 42 }], 95: [function(a, b, c) { b.exports = function(a, b) { var c = b === Object(b) ? function(a) { return b[a] } : b; return function(b) { return String(b).replace(a, c) } } }, {}], 96: [function(a, b, c) { b.exports = Object.is || function(a, b) { return a === b ? 0 !== a || 1 / a == 1 / b : a != a && b != b } }, {}], 97: [function(a, b, c) { "use strict"; var d = a(33), e = a(3), f = a(25), g = a(39); b.exports = function(a) { d(d.S, a, { from: function(a) { var b, c, d, h, i = arguments[1]; return e(this), b = void 0 !== i, b && e(i), void 0 == a ? new this : (c = [], b ? (d = 0, h = f(i, arguments[2], 2), g(a, !1, function(a) { c.push(h(a, d++)) })) : g(a, !1, c.push, c), new this(c)) } }) } }, { 25: 25, 3: 3, 33: 33, 39: 39 }], 98: [function(a, b, c) { "use strict"; var d = a(33); b.exports = function(a) { d(d.S, a, { of: function() { for (var a = arguments.length, b = Array(a); a--;) b[a] = arguments[a]; return new this(b) } }) } }, { 33: 33 }], 99: [function(a, b, c) { var d = a(51), e = a(7), f = function(a, b) { if (e(a), !d(b) && null !== b) throw TypeError(b + ": can't set as prototype!") }; b.exports = { set: Object.setPrototypeOf || ("__proto__" in {} ? function(b, c, d) { try { d = a(25)(Function.call, a(75).f(Object.prototype, "__proto__").set, 2), d(b, []), c = !(b instanceof Array) } catch (a) { c = !0 } return function(a, b) { return f(a, b), c ? a.__proto__ = b : d(a, b), a } }({}, !1) : void 0), check: f } }, { 25: 25, 51: 51, 7: 7, 75: 75 }], 100: [function(a, b, c) { "use strict"; var d = a(40), e = a(72), f = a(29), g = a(128)("species"); b.exports = function(a) { var b = d[a]; f && b && !b[g] && e.f(b, g, { configurable: !0, get: function() { return this } }) } }, { 128: 128, 29: 29, 40: 40, 72: 72 }], 101: [function(a, b, c) { var d = a(72).f, e = a(41), f = a(128)("toStringTag"); b.exports = function(a, b, c) { a && !e(a = c ? a : a.prototype, f) && d(a, f, { configurable: !0, value: b }) } }, { 128: 128, 41: 41, 72: 72 }], 102: [function(a, b, c) { var d = a(103)("keys"), e = a(124); b.exports = function(a) { return d[a] || (d[a] = e(a)) } }, { 103: 103, 124: 124 }], 103: [function(a, b, c) { var d = a(40), e = d["__core-js_shared__"] || (d["__core-js_shared__"] = {}); b.exports = function(a) { return e[a] || (e[a] = {}) } }, { 40: 40 }], 104: [function(a, b, c) { var d = a(7), e = a(3), f = a(128)("species"); b.exports = function(a, b) { var c, g = d(a).constructor; return void 0 === g || void 0 == (c = d(g)[f]) ? b : e(c) } }, { 128: 128, 3: 3, 7: 7 }], 105: [function(a, b, c) { "use strict"; var d = a(35); b.exports = function(a, b) { return !!a && d(function() { b ? a.call(null, function() {}, 1) : a.call(null) }) } }, { 35: 35 }], 106: [function(a, b, c) { var d = a(116), e = a(28); b.exports = function(a) { return function(b, c) { var f, g, h = String(e(b)), i = d(c), j = h.length; return i < 0 || i >= j ? a ? "" : void 0 : (f = h.charCodeAt(i), f < 55296 || f > 56319 || i + 1 === j || (g = h.charCodeAt(i + 1)) < 56320 || g > 57343 ? a ? h.charAt(i) : f : a ? h.slice(i, i + 2) : g - 56320 + (f - 55296 << 10) + 65536) } } }, { 116: 116, 28: 28 }], 107: [function(a, b, c) { var d = a(52), e = a(28); b.exports = function(a, b, c) { if (d(b)) throw TypeError("String#" + c + " doesn't accept regex!"); return String(e(a)) } }, { 28: 28, 52: 52 }], 108: [function(a, b, c) { var d = a(33), e = a(35), f = a(28), g = /"/g, h = function(a, b, c, d) { var e = String(f(a)), h = "<" + b; return "" !== c && (h += " " + c + '="' + String(d).replace(g, "&quot;") + '"'), h + ">" + e + "</" + b + ">" }; b.exports = function(a, b) { var c = {}; c[a] = b(h), d(d.P + d.F * e(function() { var b = "" [a]('"'); return b !== b.toLowerCase() || b.split('"').length > 3 }), "String", c) } }, { 28: 28, 33: 33, 35: 35 }], 109: [function(a, b, c) { var d = a(118), e = a(110), f = a(28); b.exports = function(a, b, c, g) { var h = String(f(a)), i = h.length, j = void 0 === c ? " " : String(c), k = d(b); if (k <= i || "" == j) return h; var l = k - i, m = e.call(j, Math.ceil(l / j.length)); return m.length > l && (m = m.slice(0, l)), g ? m + h : h + m } }, { 110: 110, 118: 118, 28: 28 }], 110: [function(a, b, c) { "use strict"; var d = a(116), e = a(28); b.exports = function(a) { var b = String(e(this)), c = "", f = d(a); if (f < 0 || f == 1 / 0) throw RangeError("Count can't be negative"); for (; f > 0; (f >>>= 1) && (b += b)) 1 & f && (c += b); return c } }, { 116: 116, 28: 28 }], 111: [function(a, b, c) { var d = a(33), e = a(28), f = a(35), g = a(112), h = "[" + g + "]", i = "​ ", j = RegExp("^" + h + h + "*"), k = RegExp(h + h + "*$"), l = function(a, b, c) { var e = {}, h = f(function() { return !!g[a]() || i[a]() != i }), j = e[a] = h ? b(m) : g[a]; c && (e[c] = j), d(d.P + d.F * h, "String", e) }, m = l.trim = function(a, b) { return a = String(e(a)), 1 & b && (a = a.replace(j, "")), 2 & b && (a = a.replace(k, "")), a }; b.exports = l }, { 112: 112, 28: 28, 33: 33, 35: 35 }], 112: [function(a, b, c) { b.exports = "\t\n\v\f\r \u2028\u2029\ufeff" }, {}], 113: [function(a, b, c) { var d, e, f, g = a(25), h = a(46), i = a(43), j = a(30), k = a(40), l = k.process, m = k.setImmediate, n = k.clearImmediate, o = k.MessageChannel, p = k.Dispatch, q = 0, r = {}, s = function() { var a = +this; if (r.hasOwnProperty(a)) { var b = r[a]; delete r[a], b() } }, t = function(a) { s.call(a.data) }; m && n || (m = function(a) { for (var b = [], c = 1; arguments.length > c;) b.push(arguments[c++]); return r[++q] = function() { h("function" == typeof a ? a : Function(a), b) }, d(q), q }, n = function(a) { delete r[a] }, "process" == a(18)(l) ? d = function(a) { l.nextTick(g(s, a, 1)) } : p && p.now ? d = function(a) { p.now(g(s, a, 1)) } : o ? (e = new o, f = e.port2, e.port1.onmessage = t, d = g(f.postMessage, f, 1)) : k.addEventListener && "function" == typeof postMessage && !k.importScripts ? (d = function(a) { k.postMessage(a + "", "*") }, k.addEventListener("message", t, !1)) : d = "onreadystatechange" in j("script") ? function(a) { i.appendChild(j("script")).onreadystatechange = function() { i.removeChild(this), s.call(a) } } : function(a) { setTimeout(g(s, a, 1), 0) }), b.exports = { set: m, clear: n } }, { 18: 18, 25: 25, 30: 30, 40: 40, 43: 43, 46: 46 }], 114: [function(a, b, c) { var d = a(116), e = Math.max, f = Math.min; b.exports = function(a, b) { return a = d(a), a < 0 ? e(a + b, 0) : f(a, b) } }, { 116: 116 }], 115: [function(a, b, c) { var d = a(116), e = a(118); b.exports = function(a) { if (void 0 === a) return 0; var b = d(a), c = e(b); if (b !== c) throw RangeError("Wrong length!"); return c } }, { 116: 116, 118: 118 }], 116: [function(a, b, c) { var d = Math.ceil, e = Math.floor; b.exports = function(a) { return isNaN(a = +a) ? 0 : (a > 0 ? e : d)(a) } }, {}], 117: [function(a, b, c) { var d = a(47), e = a(28); b.exports = function(a) { return d(e(a)) } }, { 28: 28, 47: 47 }], 118: [function(a, b, c) { var d = a(116), e = Math.min; b.exports = function(a) { return a > 0 ? e(d(a), 9007199254740991) : 0 } }, { 116: 116 }], 119: [function(a, b, c) { var d = a(28); b.exports = function(a) { return Object(d(a)) } }, { 28: 28 }], 120: [function(a, b, c) { var d = a(51); b.exports = function(a, b) { if (!d(a)) return a; var c, e; if (b && "function" == typeof(c = a.toString) && !d(e = c.call(a))) return e; if ("function" == typeof(c = a.valueOf) && !d(e = c.call(a))) return e; if (!b && "function" == typeof(c = a.toString) && !d(e = c.call(a))) return e; throw TypeError("Can't convert object to primitive value") } }, { 51: 51 }], 121: [function(a, b, c) { "use strict"; if (a(29)) { var d = a(60), e = a(40), f = a(35), g = a(33), h = a(123), i = a(122), j = a(25), k = a(6), l = a(92), m = a(42), n = a(93), o = a(116), p = a(118), q = a(115), r = a(114), s = a(120), t = a(41), u = a(17), v = a(51), w = a(119), x = a(48), y = a(71), z = a(79), A = a(77).f, B = a(129), C = a(124), D = a(128), E = a(12), F = a(11), G = a(104), H = a(141), I = a(58), J = a(56), K = a(100), L = a(9), M = a(8), N = a(72), O = a(75), P = N.f, Q = O.f, R = e.RangeError, S = e.TypeError, T = e.Uint8Array, U = Array.prototype, V = i.ArrayBuffer, W = i.DataView, X = E(0), Y = E(2), Z = E(3), $ = E(4), _ = E(5), aa = E(6), ba = F(!0), ca = F(!1), da = H.values, ea = H.keys, fa = H.entries, ga = U.lastIndexOf, ha = U.reduce, ia = U.reduceRight, ja = U.join, ka = U.sort, la = U.slice, ma = U.toString, na = U.toLocaleString, oa = D("iterator"), pa = D("toStringTag"), qa = C("typed_constructor"), ra = C("def_constructor"), sa = h.CONSTR, ta = h.TYPED, ua = h.VIEW, va = E(1, function(a, b) { return Aa(G(a, a[ra]), b) }), wa = f(function() { return 1 === new T(new Uint16Array([1]).buffer)[0] }), xa = !!T && !!T.prototype.set && f(function() { new T(1).set({}) }), ya = function(a, b) { var c = o(a); if (c < 0 || c % b) throw R("Wrong offset!"); return c }, za = function(a) { if (v(a) && ta in a) return a; throw S(a + " is not a typed array!") }, Aa = function(a, b) { if (!(v(a) && qa in a)) throw S("It is not a typed array constructor!"); return new a(b) }, Ba = function(a, b) { return Ca(G(a, a[ra]), b) }, Ca = function(a, b) { for (var c = 0, d = b.length, e = Aa(a, d); d > c;) e[c] = b[c++]; return e }, Da = function(a, b, c) { P(a, b, { get: function() { return this._d[c] } }) }, Ea = function(a) { var b, c, d, e, f, g, h = w(a), i = arguments.length, k = i > 1 ? arguments[1] : void 0, l = void 0 !== k, m = B(h); if (void 0 != m && !x(m)) { for (g = m.call(h), d = [], b = 0; !(f = g.next()).done; b++) d.push(f.value); h = d } for (l && i > 2 && (k = j(k, arguments[2], 2)), b = 0, c = p(h.length), e = Aa(this, c); c > b; b++) e[b] = l ? k(h[b], b) : h[b]; return e }, Fa = function() { for (var a = 0, b = arguments.length, c = Aa(this, b); b > a;) c[a] = arguments[a++]; return c }, Ga = !!T && f(function() { na.call(new T(1)) }), Ha = function() { return na.apply(Ga ? la.call(za(this)) : za(this), arguments) }, Ia = { copyWithin: function(a, b) { return M.call(za(this), a, b, arguments.length > 2 ? arguments[2] : void 0) }, every: function(a) { return $(za(this), a, arguments.length > 1 ? arguments[1] : void 0) }, fill: function(a) { return L.apply(za(this), arguments) }, filter: function(a) { return Ba(this, Y(za(this), a, arguments.length > 1 ? arguments[1] : void 0)) }, find: function(a) { return _(za(this), a, arguments.length > 1 ? arguments[1] : void 0) }, findIndex: function(a) { return aa(za(this), a, arguments.length > 1 ? arguments[1] : void 0) }, forEach: function(a) { X(za(this), a, arguments.length > 1 ? arguments[1] : void 0) }, indexOf: function(a) { return ca(za(this), a, arguments.length > 1 ? arguments[1] : void 0) }, includes: function(a) { return ba(za(this), a, arguments.length > 1 ? arguments[1] : void 0) }, join: function(a) { return ja.apply(za(this), arguments) }, lastIndexOf: function(a) { return ga.apply(za(this), arguments) }, map: function(a) { return va(za(this), a, arguments.length > 1 ? arguments[1] : void 0) }, reduce: function(a) { return ha.apply(za(this), arguments) }, reduceRight: function(a) { return ia.apply(za(this), arguments) }, reverse: function() { for (var a, b = this, c = za(b).length, d = Math.floor(c / 2), e = 0; e < d;) a = b[e], b[e++] = b[--c], b[c] = a; return b }, some: function(a) { return Z(za(this), a, arguments.length > 1 ? arguments[1] : void 0) }, sort: function(a) { return ka.call(za(this), a) }, subarray: function(a, b) { var c = za(this), d = c.length, e = r(a, d); return new(G(c, c[ra]))(c.buffer, c.byteOffset + e * c.BYTES_PER_ELEMENT, p((void 0 === b ? d : r(b, d)) - e)) } }, Ja = function(a, b) { return Ba(this, la.call(za(this), a, b)) }, Ka = function(a) { za(this); var b = ya(arguments[1], 1), c = this.length, d = w(a), e = p(d.length), f = 0; if (e + b > c) throw R("Wrong length!"); for (; f < e;) this[b + f] = d[f++] }, La = { entries: function() { return fa.call(za(this)) }, keys: function() { return ea.call(za(this)) }, values: function() { return da.call(za(this)) } }, Ma = function(a, b) { return v(a) && a[ta] && "symbol" != typeof b && b in a && String(+b) == String(b) }, Na = function(a, b) { return Ma(a, b = s(b, !0)) ? l(2, a[b]) : Q(a, b) }, Oa = function(a, b, c) { return !(Ma(a, b = s(b, !0)) && v(c) && t(c, "value")) || t(c, "get") || t(c, "set") || c.configurable || t(c, "writable") && !c.writable || t(c, "enumerable") && !c.enumerable ? P(a, b, c) : (a[b] = c.value, a) }; sa || (O.f = Na, N.f = Oa), g(g.S + g.F * !sa, "Object", { getOwnPropertyDescriptor: Na, defineProperty: Oa }), f(function() { ma.call({}) }) && (ma = na = function() { return ja.call(this) }); var Pa = n({}, Ia); n(Pa, La), m(Pa, oa, La.values), n(Pa, { slice: Ja, set: Ka, constructor: function() {}, toString: ma, toLocaleString: Ha }), Da(Pa, "buffer", "b"), Da(Pa, "byteOffset", "o"), Da(Pa, "byteLength", "l"), Da(Pa, "length", "e"), P(Pa, pa, { get: function() { return this[ta] } }), b.exports = function(a, b, c, i) { i = !!i; var j = a + (i ? "Clamped" : "") + "Array", l = "get" + a, n = "set" + a, o = e[j], r = o || {}, s = o && z(o), t = !o || !h.ABV, w = {}, x = o && o.prototype, B = function(a, c) { var d = a._d; return d.v[l](c * b + d.o, wa) }, C = function(a, c, d) { var e = a._d; i && (d = (d = Math.round(d)) < 0 ? 0 : d > 255 ? 255 : 255 & d), e.v[n](c * b + e.o, d, wa) }, D = function(a, b) { P(a, b, { get: function() { return B(this, b) }, set: function(a) { return C(this, b, a) }, enumerable: !0 }) }; t ? (o = c(function(a, c, d, e) { k(a, o, j, "_d"); var f, g, h, i, l = 0, n = 0; if (v(c)) { if (!(c instanceof V || "ArrayBuffer" == (i = u(c)) || "SharedArrayBuffer" == i)) return ta in c ? Ca(o, c) : Ea.call(o, c); f = c, n = ya(d, b); var r = c.byteLength; if (void 0 === e) { if (r % b) throw R("Wrong length!"); if ((g = r - n) < 0) throw R("Wrong length!") } else if ((g = p(e) * b) + n > r) throw R("Wrong length!"); h = g / b } else h = q(c), g = h * b, f = new V(g); for (m(a, "_d", { b: f, o: n, l: g, e: h, v: new W(f) }); l < h;) D(a, l++) }), x = o.prototype = y(Pa), m(x, "constructor", o)) : f(function() { o(1) }) && f(function() { new o(-1) }) && J(function(a) { new o, new o(null), new o(1.5), new o(a) }, !0) || (o = c(function(a, c, d, e) { k(a, o, j); var f; return v(c) ? c instanceof V || "ArrayBuffer" == (f = u(c)) || "SharedArrayBuffer" == f ? void 0 !== e ? new r(c, ya(d, b), e) : void 0 !== d ? new r(c, ya(d, b)) : new r(c) : ta in c ? Ca(o, c) : Ea.call(o, c) : new r(q(c)) }), X(s !== Function.prototype ? A(r).concat(A(s)) : A(r), function(a) { a in o || m(o, a, r[a]) }), o.prototype = x, d || (x.constructor = o)); var E = x[oa], F = !!E && ("values" == E.name || void 0 == E.name), G = La.values; m(o, qa, !0), m(x, ta, j), m(x, ua, !0), m(x, ra, o), (i ? new o(1)[pa] == j : pa in x) || P(x, pa, { get: function() { return j } }), w[j] = o, g(g.G + g.W + g.F * (o != r), w), g(g.S, j, { BYTES_PER_ELEMENT: b }), g(g.S + g.F * f(function() { r.of.call(o, 1) }), j, { from: Ea, of: Fa }), "BYTES_PER_ELEMENT" in x || m(x, "BYTES_PER_ELEMENT", b), g(g.P, j, Ia), K(j), g(g.P + g.F * xa, j, { set: Ka }), g(g.P + g.F * !F, j, La), d || x.toString == ma || (x.toString = ma), g(g.P + g.F * f(function() { new o(1).slice() }), j, { slice: Ja }), g(g.P + g.F * (f(function() { return [1, 2].toLocaleString() != new o([1, 2]).toLocaleString() }) || !f(function() { x.toLocaleString.call([1, 2]) })), j, { toLocaleString: Ha }), I[j] = F ? E : G, d || F || m(x, oa, G) } } else b.exports = function() {} }, { 100: 100, 104: 104, 11: 11, 114: 114, 115: 115, 116: 116, 118: 118, 119: 119, 12: 12, 120: 120, 122: 122, 123: 123, 124: 124, 128: 128, 129: 129, 141: 141, 17: 17, 25: 25, 29: 29, 33: 33, 35: 35, 40: 40, 41: 41, 42: 42, 48: 48, 51: 51, 56: 56, 58: 58, 6: 6, 60: 60, 71: 71, 72: 72, 75: 75, 77: 77, 79: 79, 8: 8, 9: 9, 92: 92, 93: 93 }], 122: [function(a, b, c) { "use strict"; function d(a, b, c) { var d, e, f, g = Array(c), h = 8 * c - b - 1, i = (1 << h) - 1, j = i >> 1, k = 23 === b ? M(2, -24) - M(2, -77) : 0, l = 0, m = a < 0 || 0 === a && 1 / a < 0 ? 1 : 0; for (a = L(a), a != a || a === J ? (e = a != a ? 1 : 0, d = i) : (d = N(O(a) / P), a * (f = M(2, -d)) < 1 && (d--, f *= 2), a += d + j >= 1 ? k / f : k * M(2, 1 - j), a * f >= 2 && (d++, f /= 2), d + j >= i ? (e = 0, d = i) : d + j >= 1 ? (e = (a * f - 1) * M(2, b), d += j) : (e = a * M(2, j - 1) * M(2, b), d = 0)); b >= 8; g[l++] = 255 & e, e /= 256, b -= 8); for (d = d << b | e, h += b; h > 0; g[l++] = 255 & d, d /= 256, h -= 8); return g[--l] |= 128 * m, g } function e(a, b, c) { var d, e = 8 * c - b - 1, f = (1 << e) - 1, g = f >> 1, h = e - 7, i = c - 1, j = a[i--], k = 127 & j; for (j >>= 7; h > 0; k = 256 * k + a[i], i--, h -= 8); for (d = k & (1 << -h) - 1, k >>= -h, h += b; h > 0; d = 256 * d + a[i], i--, h -= 8); if (0 === k) k = 1 - g; else { if (k === f) return d ? NaN : j ? -J : J; d += M(2, b), k -= g } return (j ? -1 : 1) * d * M(2, k - b) } function f(a) { return a[3] << 24 | a[2] << 16 | a[1] << 8 | a[0] } function g(a) { return [255 & a] } function h(a) { return [255 & a, a >> 8 & 255] } function i(a) { return [255 & a, a >> 8 & 255, a >> 16 & 255, a >> 24 & 255] } function j(a) { return d(a, 52, 8) } function k(a) { return d(a, 23, 4) } function l(a, b, c) { A(a[D], b, { get: function() { return this[c] } }) } function m(a, b, c, d) { var e = +c, f = y(e); if (f + b > a[R]) throw I(E); var g = a[Q]._b, h = f + a[S], i = g.slice(h, h + b); return d ? i : i.reverse() } function n(a, b, c, d, e, f) { var g = +c, h = y(g); if (h + b > a[R]) throw I(E); for (var i = a[Q]._b, j = h + a[S], k = d(+e), l = 0; l < b; l++) i[j + l] = k[f ? l : b - l - 1] } var o = a(40), p = a(29), q = a(60), r = a(123), s = a(42), t = a(93), u = a(35), v = a(6), w = a(116), x = a(118), y = a(115), z = a(77).f, A = a(72).f, B = a(9), C = a(101), D = "prototype", E = "Wrong index!", F = o.ArrayBuffer, G = o.DataView, H = o.Math, I = o.RangeError, J = o.Infinity, K = F, L = H.abs, M = H.pow, N = H.floor, O = H.log, P = H.LN2, Q = p ? "_b" : "buffer", R = p ? "_l" : "byteLength", S = p ? "_o" : "byteOffset"; if (r.ABV) { if (!u(function() { F(1) }) || !u(function() { new F(-1) }) || u(function() { return new F, new F(1.5), new F(NaN), "ArrayBuffer" != F.name })) { F = function(a) { return v(this, F), new K(y(a)) }; for (var T, U = F[D] = K[D], V = z(K), W = 0; V.length > W;)(T = V[W++]) in F || s(F, T, K[T]); q || (U.constructor = F) } var X = new G(new F(2)), Y = G[D].setInt8; X.setInt8(0, 2147483648), X.setInt8(1, 2147483649), !X.getInt8(0) && X.getInt8(1) || t(G[D], { setInt8: function(a, b) { Y.call(this, a, b << 24 >> 24) }, setUint8: function(a, b) { Y.call(this, a, b << 24 >> 24) } }, !0) } else F = function(a) { v(this, F, "ArrayBuffer"); var b = y(a); this._b = B.call(Array(b), 0), this[R] = b }, G = function(a, b, c) { v(this, G, "DataView"), v(a, F, "DataView"); var d = a[R], e = w(b); if (e < 0 || e > d) throw I("Wrong offset!"); if (c = void 0 === c ? d - e : x(c), e + c > d) throw I("Wrong length!"); this[Q] = a, this[S] = e, this[R] = c }, p && (l(F, "byteLength", "_l"), l(G, "buffer", "_b"), l(G, "byteLength", "_l"), l(G, "byteOffset", "_o")), t(G[D], { getInt8: function(a) { return m(this, 1, a)[0] << 24 >> 24 }, getUint8: function(a) { return m(this, 1, a)[0] }, getInt16: function(a) { var b = m(this, 2, a, arguments[1]); return (b[1] << 8 | b[0]) << 16 >> 16 }, getUint16: function(a) { var b = m(this, 2, a, arguments[1]); return b[1] << 8 | b[0] }, getInt32: function(a) { return f(m(this, 4, a, arguments[1])) }, getUint32: function(a) { return f(m(this, 4, a, arguments[1])) >>> 0 }, getFloat32: function(a) { return e(m(this, 4, a, arguments[1]), 23, 4) }, getFloat64: function(a) { return e(m(this, 8, a, arguments[1]), 52, 8) }, setInt8: function(a, b) { n(this, 1, a, g, b) }, setUint8: function(a, b) { n(this, 1, a, g, b) }, setInt16: function(a, b) { n(this, 2, a, h, b, arguments[2]) }, setUint16: function(a, b) { n(this, 2, a, h, b, arguments[2]) }, setInt32: function(a, b) { n(this, 4, a, i, b, arguments[2]) }, setUint32: function(a, b) { n(this, 4, a, i, b, arguments[2]) }, setFloat32: function(a, b) { n(this, 4, a, k, b, arguments[2]) }, setFloat64: function(a, b) { n(this, 8, a, j, b, arguments[2]) } }); C(F, "ArrayBuffer"), C(G, "DataView"), s(G[D], r.VIEW, !0), c.ArrayBuffer = F, c.DataView = G }, { 101: 101, 115: 115, 116: 116, 118: 118, 123: 123, 29: 29, 35: 35, 40: 40, 42: 42, 6: 6, 60: 60, 72: 72, 77: 77, 9: 9, 93: 93 }], 123: [function(a, b, c) { for (var d, e = a(40), f = a(42), g = a(124), h = g("typed_array"), i = g("view"), j = !(!e.ArrayBuffer || !e.DataView), k = j, l = 0, m = "Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(","); l < 9;)(d = e[m[l++]]) ? (f(d.prototype, h, !0), f(d.prototype, i, !0)) : k = !1; b.exports = { ABV: j, CONSTR: k, TYPED: h, VIEW: i } }, { 124: 124, 40: 40, 42: 42 }], 124: [function(a, b, c) { var d = 0, e = Math.random(); b.exports = function(a) { return "Symbol(".concat(void 0 === a ? "" : a, ")_", (++d + e).toString(36)) } }, {}], 125: [function(a, b, c) { var d = a(51); b.exports = function(a, b) { if (!d(a) || a._t !== b) throw TypeError("Incompatible receiver, " + b + " required!"); return a } }, { 51: 51 }], 126: [function(a, b, c) { var d = a(40), e = a(23), f = a(60), g = a(127), h = a(72).f; b.exports = function(a) { var b = e.Symbol || (e.Symbol = f ? {} : d.Symbol || {}); "_" == a.charAt(0) || a in b || h(b, a, { value: g.f(a) }) } }, { 127: 127, 23: 23, 40: 40, 60: 60, 72: 72 }], 127: [function(a, b, c) { c.f = a(128) }, { 128: 128 }], 128: [function(a, b, c) { var d = a(103)("wks"), e = a(124), f = a(40).Symbol, g = "function" == typeof f; (b.exports = function(a) { return d[a] || (d[a] = g && f[a] || (g ? f : e)("Symbol." + a)) }).store = d }, { 103: 103, 124: 124, 40: 40 }], 129: [function(a, b, c) { var d = a(17), e = a(128)("iterator"), f = a(58); b.exports = a(23).getIteratorMethod = function(a) { if (void 0 != a) return a[e] || a["@@iterator"] || f[d(a)] } }, { 128: 128, 17: 17, 23: 23, 58: 58 }], 130: [function(a, b, c) { var d = a(33), e = a(95)(/[\\^$*+?.()|[\]{}]/g, "\\$&"); d(d.S, "RegExp", { escape: function(a) { return e(a) } }) }, { 33: 33, 95: 95 }], 131: [function(a, b, c) { var d = a(33); d(d.P, "Array", { copyWithin: a(8) }), a(5)("copyWithin") }, { 33: 33, 5: 5, 8: 8 }], 132: [function(a, b, c) { "use strict"; var d = a(33), e = a(12)(4); d(d.P + d.F * !a(105)([].every, !0), "Array", { every: function(a) { return e(this, a, arguments[1]) } }) }, { 105: 105, 12: 12, 33: 33 }], 133: [function(a, b, c) { var d = a(33); d(d.P, "Array", { fill: a(9) }), a(5)("fill") }, { 33: 33, 5: 5, 9: 9 }], 134: [function(a, b, c) { "use strict"; var d = a(33), e = a(12)(2); d(d.P + d.F * !a(105)([].filter, !0), "Array", { filter: function(a) { return e(this, a, arguments[1]) } }) }, { 105: 105, 12: 12, 33: 33 }], 135: [function(a, b, c) { "use strict"; var d = a(33), e = a(12)(6), f = "findIndex", g = !0; f in [] && Array(1)[f](function() { g = !1 }), d(d.P + d.F * g, "Array", { findIndex: function(a) { return e(this, a, arguments.length > 1 ? arguments[1] : void 0) } }), a(5)(f) }, { 12: 12, 33: 33, 5: 5 }], 136: [function(a, b, c) { "use strict"; var d = a(33), e = a(12)(5), f = !0; "find" in [] && Array(1).find(function() { f = !1 }), d(d.P + d.F * f, "Array", { find: function(a) { return e(this, a, arguments.length > 1 ? arguments[1] : void 0) } }), a(5)("find") }, { 12: 12, 33: 33, 5: 5 }], 137: [function(a, b, c) { "use strict"; var d = a(33), e = a(12)(0), f = a(105)([].forEach, !0); d(d.P + d.F * !f, "Array", { forEach: function(a) { return e(this, a, arguments[1]) } }) }, { 105: 105, 12: 12, 33: 33 }], 138: [function(a, b, c) { "use strict"; var d = a(25), e = a(33), f = a(119), g = a(53), h = a(48), i = a(118), j = a(24), k = a(129); e(e.S + e.F * !a(56)(function(a) { Array.from(a) }), "Array", { from: function(a) { var b, c, e, l, m = f(a), n = "function" == typeof this ? this : Array, o = arguments.length, p = o > 1 ? arguments[1] : void 0, q = void 0 !== p, r = 0, s = k(m); if (q && (p = d(p, o > 2 ? arguments[2] : void 0, 2)), void 0 == s || n == Array && h(s)) for (b = i(m.length), c = new n(b); b > r; r++) j(c, r, q ? p(m[r], r) : m[r]); else for (l = s.call(m), c = new n; !(e = l.next()).done; r++) j(c, r, q ? g(l, p, [e.value, r], !0) : e.value); return c.length = r, c } }) }, { 118: 118, 119: 119, 129: 129, 24: 24, 25: 25, 33: 33, 48: 48, 53: 53, 56: 56 }], 139: [function(a, b, c) { "use strict"; var d = a(33), e = a(11)(!1), f = [].indexOf, g = !!f && 1 / [1].indexOf(1, -0) < 0; d(d.P + d.F * (g || !a(105)(f)), "Array", { indexOf: function(a) { return g ? f.apply(this, arguments) || 0 : e(this, a, arguments[1]) } }) }, { 105: 105, 11: 11, 33: 33 }], 140: [function(a, b, c) { var d = a(33); d(d.S, "Array", { isArray: a(49) }) }, { 33: 33, 49: 49 }], 141: [function(a, b, c) { "use strict"; var d = a(5), e = a(57), f = a(58), g = a(117); b.exports = a(55)(Array, "Array", function(a, b) { this._t = g(a), this._i = 0, this._k = b }, function() { var a = this._t, b = this._k, c = this._i++; return !a || c >= a.length ? (this._t = void 0, e(1)) : "keys" == b ? e(0, c) : "values" == b ? e(0, a[c]) : e(0, [c, a[c]]) }, "values"), f.Arguments = f.Array, d("keys"), d("values"), d("entries") }, { 117: 117, 5: 5, 55: 55, 57: 57, 58: 58 }], 142: [function(a, b, c) { "use strict"; var d = a(33), e = a(117), f = [].join; d(d.P + d.F * (a(47) != Object || !a(105)(f)), "Array", { join: function(a) { return f.call(e(this), void 0 === a ? "," : a) } }) }, { 105: 105, 117: 117, 33: 33, 47: 47 }], 143: [function(a, b, c) { "use strict"; var d = a(33), e = a(117), f = a(116), g = a(118), h = [].lastIndexOf, i = !!h && 1 / [1].lastIndexOf(1, -0) < 0; d(d.P + d.F * (i || !a(105)(h)), "Array", { lastIndexOf: function(a) { if (i) return h.apply(this, arguments) || 0; var b = e(this), c = g(b.length), d = c - 1; for (arguments.length > 1 && (d = Math.min(d, f(arguments[1]))), d < 0 && (d = c + d); d >= 0; d--) if (d in b && b[d] === a) return d || 0; return -1 } }) }, { 105: 105, 116: 116, 117: 117, 118: 118, 33: 33 }], 144: [function(a, b, c) { "use strict"; var d = a(33), e = a(12)(1); d(d.P + d.F * !a(105)([].map, !0), "Array", { map: function(a) { return e(this, a, arguments[1]) } }) }, { 105: 105, 12: 12, 33: 33 }], 145: [function(a, b, c) { "use strict"; var d = a(33), e = a(24); d(d.S + d.F * a(35)(function() { function a() {} return !(Array.of.call(a) instanceof a) }), "Array", { of: function() { for (var a = 0, b = arguments.length, c = new("function" == typeof this ? this : Array)(b); b > a;) e(c, a, arguments[a++]); return c.length = b, c } }) }, { 24: 24, 33: 33, 35: 35 }], 146: [function(a, b, c) { "use strict"; var d = a(33), e = a(13); d(d.P + d.F * !a(105)([].reduceRight, !0), "Array", { reduceRight: function(a) { return e(this, a, arguments.length, arguments[1], !0) } }) }, { 105: 105, 13: 13, 33: 33 }], 147: [function(a, b, c) { "use strict"; var d = a(33), e = a(13); d(d.P + d.F * !a(105)([].reduce, !0), "Array", { reduce: function(a) { return e(this, a, arguments.length, arguments[1], !1) } }) }, { 105: 105, 13: 13, 33: 33 }], 148: [function(a, b, c) { "use strict"; var d = a(33), e = a(43), f = a(18), g = a(114), h = a(118), i = [].slice; d(d.P + d.F * a(35)(function() { e && i.call(e) }), "Array", { slice: function(a, b) { var c = h(this.length), d = f(this); if (b = void 0 === b ? c : b, "Array" == d) return i.call(this, a, b); for (var e = g(a, c), j = g(b, c), k = h(j - e), l = Array(k), m = 0; m < k; m++) l[m] = "String" == d ? this.charAt(e + m) : this[e + m]; return l } }) }, { 114: 114, 118: 118, 18: 18, 33: 33, 35: 35, 43: 43 }], 149: [function(a, b, c) { "use strict"; var d = a(33), e = a(12)(3); d(d.P + d.F * !a(105)([].some, !0), "Array", { some: function(a) { return e(this, a, arguments[1]) } }) }, { 105: 105, 12: 12, 33: 33 }], 150: [function(a, b, c) { "use strict"; var d = a(33), e = a(3), f = a(119), g = a(35), h = [].sort, i = [1, 2, 3]; d(d.P + d.F * (g(function() { i.sort(void 0) }) || !g(function() { i.sort(null) }) || !a(105)(h)), "Array", { sort: function(a) { return void 0 === a ? h.call(f(this)) : h.call(f(this), e(a)) } }) }, { 105: 105, 119: 119, 3: 3, 33: 33, 35: 35 }], 151: [function(a, b, c) { a(100)("Array") }, { 100: 100 }], 152: [function(a, b, c) { var d = a(33); d(d.S, "Date", { now: function() { return (new Date).getTime() } }) }, { 33: 33 }], 153: [function(a, b, c) { var d = a(33), e = a(26); d(d.P + d.F * (Date.prototype.toISOString !== e), "Date", { toISOString: e }) }, { 26: 26, 33: 33 }], 154: [function(a, b, c) { "use strict"; var d = a(33), e = a(119), f = a(120); d(d.P + d.F * a(35)(function() { return null !== new Date(NaN).toJSON() || 1 !== Date.prototype.toJSON.call({ toISOString: function() { return 1 } }) }), "Date", { toJSON: function(a) { var b = e(this), c = f(b); return "number" != typeof c || isFinite(c) ? b.toISOString() : null } }) }, { 119: 119, 120: 120, 33: 33, 35: 35 }], 155: [function(a, b, c) { var d = a(128)("toPrimitive"), e = Date.prototype; d in e || a(42)(e, d, a(27)) }, { 128: 128, 27: 27, 42: 42 }], 156: [function(a, b, c) { var d = Date.prototype, e = d.toString, f = d.getTime; new Date(NaN) + "" != "Invalid Date" && a(94)(d, "toString", function() { var a = f.call(this); return a === a ? e.call(this) : "Invalid Date" }) }, { 94: 94 }], 157: [function(a, b, c) { var d = a(33); d(d.P, "Function", { bind: a(16) }) }, { 16: 16, 33: 33 }], 158: [function(a, b, c) { "use strict"; var d = a(51), e = a(79), f = a(128)("hasInstance"), g = Function.prototype; f in g || a(72).f(g, f, { value: function(a) { if ("function" != typeof this || !d(a)) return !1; if (!d(this.prototype)) return a instanceof this; for (; a = e(a);) if (this.prototype === a) return !0; return !1 } }) }, { 128: 128, 51: 51, 72: 72, 79: 79 }], 159: [function(a, b, c) { var d = a(72).f, e = Function.prototype, f = /^\s*function ([^ (]*)/; "name" in e || a(29) && d(e, "name", { configurable: !0, get: function() { try { return ("" + this).match(f)[1] } catch (a) { return "" } } }) }, { 29: 29, 72: 72 }], 160: [function(a, b, c) { "use strict"; var d = a(19), e = a(125); b.exports = a(22)("Map", function(a) { return function() { return a(this, arguments.length > 0 ? arguments[0] : void 0) } }, { get: function(a) { var b = d.getEntry(e(this, "Map"), a); return b && b.v }, set: function(a, b) { return d.def(e(this, "Map"), 0 === a ? 0 : a, b) } }, d, !0) }, { 125: 125, 19: 19, 22: 22 }], 161: [function(a, b, c) { var d = a(33), e = a(63), f = Math.sqrt, g = Math.acosh; d(d.S + d.F * !(g && 710 == Math.floor(g(Number.MAX_VALUE)) && g(1 / 0) == 1 / 0), "Math", { acosh: function(a) { return (a = +a) < 1 ? NaN : a > 94906265.62425156 ? Math.log(a) + Math.LN2 : e(a - 1 + f(a - 1) * f(a + 1)) } }) }, { 33: 33, 63: 63 }], 162: [function(a, b, c) { function d(a) { return isFinite(a = +a) && 0 != a ? a < 0 ? -d(-a) : Math.log(a + Math.sqrt(a * a + 1)) : a } var e = a(33), f = Math.asinh; e(e.S + e.F * !(f && 1 / f(0) > 0), "Math", { asinh: d }) }, { 33: 33 }], 163: [function(a, b, c) { var d = a(33), e = Math.atanh; d(d.S + d.F * !(e && 1 / e(-0) < 0), "Math", { atanh: function(a) { return 0 == (a = +a) ? a : Math.log((1 + a) / (1 - a)) / 2 } }) }, { 33: 33 }], 164: [function(a, b, c) { var d = a(33), e = a(65); d(d.S, "Math", { cbrt: function(a) { return e(a = +a) * Math.pow(Math.abs(a), 1 / 3) } }) }, { 33: 33, 65: 65 }], 165: [function(a, b, c) { var d = a(33); d(d.S, "Math", { clz32: function(a) { return (a >>>= 0) ? 31 - Math.floor(Math.log(a + .5) * Math.LOG2E) : 32 } }) }, { 33: 33 }], 166: [function(a, b, c) { var d = a(33), e = Math.exp; d(d.S, "Math", { cosh: function(a) { return (e(a = +a) + e(-a)) / 2 } }) }, { 33: 33 }], 167: [function(a, b, c) { var d = a(33), e = a(61); d(d.S + d.F * (e != Math.expm1), "Math", { expm1: e }) }, { 33: 33, 61: 61 }], 168: [function(a, b, c) { var d = a(33); d(d.S, "Math", { fround: a(62) }) }, { 33: 33, 62: 62 }], 169: [function(a, b, c) { var d = a(33), e = Math.abs; d(d.S, "Math", { hypot: function(a, b) { for (var c, d, f = 0, g = 0, h = arguments.length, i = 0; g < h;) c = e(arguments[g++]), i < c ? (d = i / c, f = f * d * d + 1, i = c) : c > 0 ? (d = c / i, f += d * d) : f += c; return i === 1 / 0 ? 1 / 0 : i * Math.sqrt(f) } }) }, { 33: 33 }], 170: [function(a, b, c) { var d = a(33), e = Math.imul; d(d.S + d.F * a(35)(function() { return -5 != e(4294967295, 5) || 2 != e.length }), "Math", { imul: function(a, b) { var c = +a, d = +b, e = 65535 & c, f = 65535 & d; return 0 | e * f + ((65535 & c >>> 16) * f + e * (65535 & d >>> 16) << 16 >>> 0) } }) }, { 33: 33, 35: 35 }], 171: [function(a, b, c) { var d = a(33); d(d.S, "Math", { log10: function(a) { return Math.log(a) * Math.LOG10E } }) }, { 33: 33 }], 172: [function(a, b, c) { var d = a(33); d(d.S, "Math", { log1p: a(63) }) }, { 33: 33, 63: 63 }], 173: [function(a, b, c) { var d = a(33); d(d.S, "Math", { log2: function(a) { return Math.log(a) / Math.LN2 } }) }, { 33: 33 }], 174: [function(a, b, c) { var d = a(33); d(d.S, "Math", { sign: a(65) }) }, { 33: 33, 65: 65 }], 175: [function(a, b, c) { var d = a(33), e = a(61), f = Math.exp; d(d.S + d.F * a(35)(function() { return -2e-17 != !Math.sinh(-2e-17) }), "Math", { sinh: function(a) { return Math.abs(a = +a) < 1 ? (e(a) - e(-a)) / 2 : (f(a - 1) - f(-a - 1)) * (Math.E / 2) } }) }, { 33: 33, 35: 35, 61: 61 }], 176: [function(a, b, c) { var d = a(33), e = a(61), f = Math.exp; d(d.S, "Math", { tanh: function(a) { var b = e(a = +a), c = e(-a); return b == 1 / 0 ? 1 : c == 1 / 0 ? -1 : (b - c) / (f(a) + f(-a)) } }) }, { 33: 33, 61: 61 }], 177: [function(a, b, c) { var d = a(33); d(d.S, "Math", { trunc: function(a) { return (a > 0 ? Math.floor : Math.ceil)(a) } }) }, { 33: 33 }], 178: [function(a, b, c) { "use strict"; var d = a(40), e = a(41), f = a(18), g = a(45), h = a(120), i = a(35), j = a(77).f, k = a(75).f, l = a(72).f, m = a(111).trim, n = d.Number, o = n, p = n.prototype, q = "Number" == f(a(71)(p)), r = "trim" in String.prototype, s = function(a) { var b = h(a, !1); if ("string" == typeof b && b.length > 2) { b = r ? b.trim() : m(b, 3); var c, d, e, f = b.charCodeAt(0); if (43 === f || 45 === f) { if (88 === (c = b.charCodeAt(2)) || 120 === c) return NaN } else if (48 === f) { switch (b.charCodeAt(1)) { case 66: case 98: d = 2, e = 49; break; case 79: case 111: d = 8, e = 55; break; default: return +b } for (var g, i = b.slice(2), j = 0, k = i.length; j < k; j++) if ((g = i.charCodeAt(j)) < 48 || g > e) return NaN; return parseInt(i, d) } } return +b }; if (!n(" 0o1") || !n("0b1") || n("+0x1")) { n = function(a) { var b = arguments.length < 1 ? 0 : a, c = this; return c instanceof n && (q ? i(function() { p.valueOf.call(c) }) : "Number" != f(c)) ? g(new o(s(b)), c, n) : s(b) }; for (var t, u = a(29) ? j(o) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), v = 0; u.length > v; v++) e(o, t = u[v]) && !e(n, t) && l(n, t, k(o, t)); n.prototype = p, p.constructor = n, a(94)(d, "Number", n) } }, { 111: 111, 120: 120, 18: 18, 29: 29, 35: 35, 40: 40, 41: 41, 45: 45, 71: 71, 72: 72, 75: 75, 77: 77, 94: 94 }], 179: [function(a, b, c) { var d = a(33); d(d.S, "Number", { EPSILON: Math.pow(2, -52) }) }, { 33: 33 }], 180: [function(a, b, c) { var d = a(33), e = a(40).isFinite; d(d.S, "Number", { isFinite: function(a) { return "number" == typeof a && e(a) } }) }, { 33: 33, 40: 40 }], 181: [function(a, b, c) { var d = a(33); d(d.S, "Number", { isInteger: a(50) }) }, { 33: 33, 50: 50 }], 182: [function(a, b, c) { var d = a(33); d(d.S, "Number", { isNaN: function(a) { return a != a } }) }, { 33: 33 }], 183: [function(a, b, c) { var d = a(33), e = a(50), f = Math.abs; d(d.S, "Number", { isSafeInteger: function(a) { return e(a) && f(a) <= 9007199254740991 } }) }, { 33: 33, 50: 50 }], 184: [function(a, b, c) { var d = a(33); d(d.S, "Number", { MAX_SAFE_INTEGER: 9007199254740991 }) }, { 33: 33 }], 185: [function(a, b, c) { var d = a(33); d(d.S, "Number", { MIN_SAFE_INTEGER: -9007199254740991 }) }, { 33: 33 }], 186: [function(a, b, c) { var d = a(33), e = a(86); d(d.S + d.F * (Number.parseFloat != e), "Number", { parseFloat: e }) }, { 33: 33, 86: 86 }], 187: [function(a, b, c) { var d = a(33), e = a(87); d(d.S + d.F * (Number.parseInt != e), "Number", { parseInt: e }) }, { 33: 33, 87: 87 }], 188: [function(a, b, c) { "use strict"; var d = a(33), e = a(116), f = a(4), g = a(110), h = 1..toFixed, i = Math.floor, j = [0, 0, 0, 0, 0, 0], k = "Number.toFixed: incorrect invocation!", l = function(a, b) { for (var c = -1, d = b; ++c < 6;) d += a * j[c], j[c] = d % 1e7, d = i(d / 1e7) }, m = function(a) { for (var b = 6, c = 0; --b >= 0;) c += j[b], j[b] = i(c / a), c = c % a * 1e7 }, n = function() { for (var a = 6, b = ""; --a >= 0;) if ("" !== b || 0 === a || 0 !== j[a]) { var c = String(j[a]); b = "" === b ? c : b + g.call("0", 7 - c.length) + c } return b }, o = function(a, b, c) { return 0 === b ? c : b % 2 == 1 ? o(a, b - 1, c * a) : o(a * a, b / 2, c) }, p = function(a) { for (var b = 0, c = a; c >= 4096;) b += 12, c /= 4096; for (; c >= 2;) b += 1, c /= 2; return b }; d(d.P + d.F * (!!h && ("0.000" !== 8e-5.toFixed(3) || "1" !== .9.toFixed(0) || "1.25" !== 1.255.toFixed(2) || "1000000000000000128" !== (0xde0b6b3a7640080).toFixed(0)) || !a(35)(function() { h.call({}) })), "Number", { toFixed: function(a) { var b, c, d, h, i = f(this, k), j = e(a), q = "", r = "0"; if (j < 0 || j > 20) throw RangeError(k); if (i != i) return "NaN"; if (i <= -1e21 || i >= 1e21) return String(i); if (i < 0 && (q = "-", i = -i), i > 1e-21) if (b = p(i * o(2, 69, 1)) - 69, c = b < 0 ? i * o(2, -b, 1) : i / o(2, b, 1), c *= 4503599627370496, (b = 52 - b) > 0) { for (l(0, c), d = j; d >= 7;) l(1e7, 0), d -= 7; for (l(o(10, d, 1), 0), d = b - 1; d >= 23;) m(1 << 23), d -= 23; m(1 << d), l(1, 1), m(2), r = n() } else l(0, c), l(1 << -b, 0), r = n() + g.call("0", j); return j > 0 ? (h = r.length, r = q + (h <= j ? "0." + g.call("0", j - h) + r : r.slice(0, h - j) + "." + r.slice(h - j))) : r = q + r, r } }) }, { 110: 110, 116: 116, 33: 33, 35: 35, 4: 4 }], 189: [function(a, b, c) { "use strict"; var d = a(33), e = a(35), f = a(4), g = 1..toPrecision; d(d.P + d.F * (e(function() { return "1" !== g.call(1, void 0) }) || !e(function() { g.call({}) })), "Number", { toPrecision: function(a) { var b = f(this, "Number#toPrecision: incorrect invocation!"); return void 0 === a ? g.call(b) : g.call(b, a) } }) }, { 33: 33, 35: 35, 4: 4 }], 190: [function(a, b, c) { var d = a(33); d(d.S + d.F, "Object", { assign: a(70) }) }, { 33: 33, 70: 70 }], 191: [function(a, b, c) { var d = a(33); d(d.S, "Object", { create: a(71) }) }, { 33: 33, 71: 71 }], 192: [function(a, b, c) { var d = a(33); d(d.S + d.F * !a(29), "Object", { defineProperties: a(73) }) }, { 29: 29, 33: 33, 73: 73 }], 193: [function(a, b, c) { var d = a(33); d(d.S + d.F * !a(29), "Object", { defineProperty: a(72).f }) }, { 29: 29, 33: 33, 72: 72 }], 194: [function(a, b, c) { var d = a(51), e = a(66).onFreeze; a(83)("freeze", function(a) { return function(b) { return a && d(b) ? a(e(b)) : b } }) }, { 51: 51, 66: 66, 83: 83 }], 195: [function(a, b, c) { var d = a(117), e = a(75).f; a(83)("getOwnPropertyDescriptor", function() { return function(a, b) { return e(d(a), b) } }) }, { 117: 117, 75: 75, 83: 83 }], 196: [function(a, b, c) { a(83)("getOwnPropertyNames", function() { return a(76).f }) }, { 76: 76, 83: 83 }], 197: [function(a, b, c) { var d = a(119), e = a(79); a(83)("getPrototypeOf", function() { return function(a) { return e(d(a)) } }) }, { 119: 119, 79: 79, 83: 83 }], 198: [function(a, b, c) { var d = a(51); a(83)("isExtensible", function(a) { return function(b) { return !!d(b) && (!a || a(b)) } }) }, { 51: 51, 83: 83 }], 199: [function(a, b, c) { var d = a(51); a(83)("isFrozen", function(a) { return function(b) { return !d(b) || !!a && a(b) } }) }, { 51: 51, 83: 83 }], 200: [function(a, b, c) { var d = a(51); a(83)("isSealed", function(a) { return function(b) { return !d(b) || !!a && a(b) } }) }, { 51: 51, 83: 83 }], 201: [function(a, b, c) { var d = a(33); d(d.S, "Object", { is: a(96) }) }, { 33: 33, 96: 96 }], 202: [function(a, b, c) { var d = a(119), e = a(81); a(83)("keys", function() { return function(a) { return e(d(a)) } }) }, { 119: 119, 81: 81, 83: 83 }], 203: [function(a, b, c) { var d = a(51), e = a(66).onFreeze; a(83)("preventExtensions", function(a) { return function(b) { return a && d(b) ? a(e(b)) : b } }) }, { 51: 51, 66: 66, 83: 83 }], 204: [function(a, b, c) { var d = a(51), e = a(66).onFreeze; a(83)("seal", function(a) { return function(b) { return a && d(b) ? a(e(b)) : b } }) }, { 51: 51, 66: 66, 83: 83 }], 205: [function(a, b, c) { var d = a(33); d(d.S, "Object", { setPrototypeOf: a(99).set }) }, { 33: 33, 99: 99 }], 206: [function(a, b, c) { "use strict"; var d = a(17), e = {}; e[a(128)("toStringTag")] = "z", e + "" != "[object z]" && a(94)(Object.prototype, "toString", function() { return "[object " + d(this) + "]" }, !0) }, { 128: 128, 17: 17, 94: 94 }], 207: [function(a, b, c) { var d = a(33), e = a(86); d(d.G + d.F * (parseFloat != e), { parseFloat: e }) }, { 33: 33, 86: 86 }], 208: [function(a, b, c) { var d = a(33), e = a(87); d(d.G + d.F * (parseInt != e), { parseInt: e }) }, { 33: 33, 87: 87 }], 209: [function(a, b, c) { "use strict"; var d, e, f, g, h = a(60), i = a(40), j = a(25), k = a(17), l = a(33), m = a(51), n = a(3), o = a(6), p = a(39), q = a(104), r = a(113).set, s = a(68)(), t = a(69), u = a(90), v = a(91), w = i.TypeError, x = i.process, y = i.Promise, z = "process" == k(x), A = function() {}, B = e = t.f, C = !! function() { try { var b = y.resolve(1), c = (b.constructor = {})[a(128)("species")] = function(a) { a(A, A) }; return (z || "function" == typeof PromiseRejectionEvent) && b.then(A) instanceof c } catch (a) {} }(), D = h ? function(a, b) { return a === b || a === y && b === g } : function(a, b) { return a === b }, E = function(a) { var b; return !(!m(a) || "function" != typeof(b = a.then)) && b }, F = function(a, b) { if (!a._n) { a._n = !0; var c = a._c; s(function() { for (var d = a._v, e = 1 == a._s, f = 0; c.length > f;) ! function(b) { var c, f, g = e ? b.ok : b.fail, h = b.resolve, i = b.reject, j = b.domain; try { g ? (e || (2 == a._h && I(a), a._h = 1), !0 === g ? c = d : (j && j.enter(), c = g(d), j && j.exit()), c === b.promise ? i(w("Promise-chain cycle")) : (f = E(c)) ? f.call(c, h, i) : h(c)) : i(d) } catch (a) { i(a) } }(c[f++]); a._c = [], a._n = !1, b && !a._h && G(a) }) } }, G = function(a) { r.call(i, function() { var b, c, d, e = a._v, f = H(a); if (f && (b = u(function() { z ? x.emit("unhandledRejection", e, a) : (c = i.onunhandledrejection) ? c({ promise: a, reason: e }) : (d = i.console) && d.error && d.error("Unhandled promise rejection", e) }), a._h = z || H(a) ? 2 : 1), a._a = void 0, f && b.e) throw b.v }) }, H = function(a) { if (1 == a._h) return !1; for (var b, c = a._a || a._c, d = 0; c.length > d;) if (b = c[d++], b.fail || !H(b.promise)) return !1; return !0 }, I = function(a) { r.call(i, function() { var b; z ? x.emit("rejectionHandled", a) : (b = i.onrejectionhandled) && b({ promise: a, reason: a._v }) }) }, J = function(a) { var b = this; b._d || (b._d = !0, b = b._w || b, b._v = a, b._s = 2, b._a || (b._a = b._c.slice()), F(b, !0)) }, K = function(a) { var b, c = this; if (!c._d) { c._d = !0, c = c._w || c; try { if (c === a) throw w("Promise can't be resolved itself"); (b = E(a)) ? s(function() { var d = { _w: c, _d: !1 }; try { b.call(a, j(K, d, 1), j(J, d, 1)) } catch (a) { J.call(d, a) } }): (c._v = a, c._s = 1, F(c, !1)) } catch (a) { J.call({ _w: c, _d: !1 }, a) } } }; C || (y = function(a) { o(this, y, "Promise", "_h"), n(a), d.call(this); try { a(j(K, this, 1), j(J, this, 1)) } catch (a) { J.call(this, a) } }, d = function(a) { this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1 }, d.prototype = a(93)(y.prototype, { then: function(a, b) { var c = B(q(this, y)); return c.ok = "function" != typeof a || a, c.fail = "function" == typeof b && b, c.domain = z ? x.domain : void 0, this._c.push(c), this._a && this._a.push(c), this._s && F(this, !1), c.promise }, catch: function(a) { return this.then(void 0, a) } }), f = function() { var a = new d; this.promise = a, this.resolve = j(K, a, 1), this.reject = j(J, a, 1) }, t.f = B = function(a) { return D(y, a) ? new f(a) : e(a) }), l(l.G + l.W + l.F * !C, { Promise: y }), a(101)(y, "Promise"), a(100)("Promise"), g = a(23).Promise, l(l.S + l.F * !C, "Promise", { reject: function(a) { var b = B(this); return (0, b.reject)(a), b.promise } }), l(l.S + l.F * (h || !C), "Promise", { resolve: function(a) { return a instanceof y && D(a.constructor, this) ? a : v(this, a) } }), l(l.S + l.F * !(C && a(56)(function(a) { y.all(a).catch(A) })), "Promise", { all: function(a) { var b = this, c = B(b), d = c.resolve, e = c.reject, f = u(function() { var c = [], f = 0, g = 1; p(a, !1, function(a) { var h = f++, i = !1; c.push(void 0), g++, b.resolve(a).then(function(a) { i || (i = !0, c[h] = a, --g || d(c)) }, e) }), --g || d(c) }); return f.e && e(f.v), c.promise }, race: function(a) { var b = this, c = B(b), d = c.reject, e = u(function() { p(a, !1, function(a) { b.resolve(a).then(c.resolve, d) }) }); return e.e && d(e.v), c.promise } }) }, { 100: 100, 101: 101, 104: 104, 113: 113, 128: 128, 17: 17, 23: 23, 25: 25, 3: 3, 33: 33, 39: 39, 40: 40, 51: 51, 56: 56, 6: 6, 60: 60, 68: 68, 69: 69, 90: 90, 91: 91, 93: 93 }], 210: [function(a, b, c) { var d = a(33), e = a(3), f = a(7), g = (a(40).Reflect || {}).apply, h = Function.apply; d(d.S + d.F * !a(35)(function() { g(function() {}) }), "Reflect", { apply: function(a, b, c) { var d = e(a), i = f(c); return g ? g(d, b, i) : h.call(d, b, i) } }) }, { 3: 3, 33: 33, 35: 35, 40: 40, 7: 7 }], 211: [function(a, b, c) { var d = a(33), e = a(71), f = a(3), g = a(7), h = a(51), i = a(35), j = a(16), k = (a(40).Reflect || {}).construct, l = i(function() { function a() {} return !(k(function() {}, [], a) instanceof a) }), m = !i(function() { k(function() {}) }); d(d.S + d.F * (l || m), "Reflect", { construct: function(a, b) { f(a), g(b); var c = arguments.length < 3 ? a : f(arguments[2]); if (m && !l) return k(a, b, c); if (a == c) { switch (b.length) { case 0: return new a; case 1: return new a(b[0]); case 2: return new a(b[0], b[1]); case 3: return new a(b[0], b[1], b[2]); case 4: return new a(b[0], b[1], b[2], b[3]) } var d = [null]; return d.push.apply(d, b), new(j.apply(a, d)) } var i = c.prototype, n = e(h(i) ? i : Object.prototype), o = Function.apply.call(a, n, b); return h(o) ? o : n } }) }, { 16: 16, 3: 3, 33: 33, 35: 35, 40: 40, 51: 51, 7: 7, 71: 71 }], 212: [function(a, b, c) { var d = a(72), e = a(33), f = a(7), g = a(120); e(e.S + e.F * a(35)(function() { Reflect.defineProperty(d.f({}, 1, { value: 1 }), 1, { value: 2 }) }), "Reflect", { defineProperty: function(a, b, c) { f(a), b = g(b, !0), f(c); try { return d.f(a, b, c), !0 } catch (a) { return !1 } } }) }, { 120: 120, 33: 33, 35: 35, 7: 7, 72: 72 }], 213: [function(a, b, c) { var d = a(33), e = a(75).f, f = a(7); d(d.S, "Reflect", { deleteProperty: function(a, b) { var c = e(f(a), b); return !(c && !c.configurable) && delete a[b] } }) }, { 33: 33, 7: 7, 75: 75 }], 214: [function(a, b, c) { "use strict"; var d = a(33), e = a(7), f = function(a) { this._t = e(a), this._i = 0; var b, c = this._k = []; for (b in a) c.push(b) }; a(54)(f, "Object", function() { var a, b = this, c = b._k; do { if (b._i >= c.length) return { value: void 0, done: !0 } } while (!((a = c[b._i++]) in b._t)); return { value: a, done: !1 } }), d(d.S, "Reflect", { enumerate: function(a) { return new f(a) } }) }, { 33: 33, 54: 54, 7: 7 }], 215: [function(a, b, c) { var d = a(75), e = a(33), f = a(7); e(e.S, "Reflect", { getOwnPropertyDescriptor: function(a, b) { return d.f(f(a), b) } }) }, { 33: 33, 7: 7, 75: 75 }], 216: [function(a, b, c) { var d = a(33), e = a(79), f = a(7); d(d.S, "Reflect", { getPrototypeOf: function(a) { return e(f(a)) } }) }, { 33: 33, 7: 7, 79: 79 }], 217: [function(a, b, c) { function d(a, b) { var c, h, k = arguments.length < 3 ? a : arguments[2]; return j(a) === k ? a[b] : (c = e.f(a, b)) ? g(c, "value") ? c.value : void 0 !== c.get ? c.get.call(k) : void 0 : i(h = f(a)) ? d(h, b, k) : void 0 } var e = a(75), f = a(79), g = a(41), h = a(33), i = a(51), j = a(7); h(h.S, "Reflect", { get: d }) }, { 33: 33, 41: 41, 51: 51, 7: 7, 75: 75, 79: 79 }], 218: [function(a, b, c) { var d = a(33); d(d.S, "Reflect", { has: function(a, b) { return b in a } }) }, { 33: 33 }], 219: [function(a, b, c) { var d = a(33), e = a(7), f = Object.isExtensible; d(d.S, "Reflect", { isExtensible: function(a) { return e(a), !f || f(a) } }) }, { 33: 33, 7: 7 }], 220: [function(a, b, c) { var d = a(33); d(d.S, "Reflect", { ownKeys: a(85) }) }, { 33: 33, 85: 85 }], 221: [function(a, b, c) { var d = a(33), e = a(7), f = Object.preventExtensions; d(d.S, "Reflect", { preventExtensions: function(a) { e(a); try { return f && f(a), !0 } catch (a) { return !1 } } }) }, { 33: 33, 7: 7 }], 222: [function(a, b, c) { var d = a(33), e = a(99); e && d(d.S, "Reflect", { setPrototypeOf: function(a, b) { e.check(a, b); try { return e.set(a, b), !0 } catch (a) { return !1 } } }) }, { 33: 33, 99: 99 }], 223: [function(a, b, c) { function d(a, b, c) { var i, m, n = arguments.length < 4 ? a : arguments[3], o = f.f(k(a), b); if (!o) { if (l(m = g(a))) return d(m, b, c, n); o = j(0) } return h(o, "value") ? !(!1 === o.writable || !l(n)) && (i = f.f(n, b) || j(0), i.value = c, e.f(n, b, i), !0) : void 0 !== o.set && (o.set.call(n, c), !0) } var e = a(72), f = a(75), g = a(79), h = a(41), i = a(33), j = a(92), k = a(7), l = a(51); i(i.S, "Reflect", { set: d }) }, { 33: 33, 41: 41, 51: 51, 7: 7, 72: 72, 75: 75, 79: 79, 92: 92 }], 224: [function(a, b, c) { var d = a(40), e = a(45), f = a(72).f, g = a(77).f, h = a(52), i = a(37), j = d.RegExp, k = j, l = j.prototype, m = /a/g, n = /a/g, o = new j(m) !== m; if (a(29) && (!o || a(35)(function() { return n[a(128)("match")] = !1, j(m) != m || j(n) == n || "/a/i" != j(m, "i") }))) { j = function(a, b) { var c = this instanceof j, d = h(a), f = void 0 === b; return !c && d && a.constructor === j && f ? a : e(o ? new k(d && !f ? a.source : a, b) : k((d = a instanceof j) ? a.source : a, d && f ? i.call(a) : b), c ? this : l, j) }; for (var p = g(k), q = 0; p.length > q;) ! function(a) { a in j || f(j, a, { configurable: !0, get: function() { return k[a] }, set: function(b) { k[a] = b } }) }(p[q++]); l.constructor = j, j.prototype = l, a(94)(d, "RegExp", j) } a(100)("RegExp") }, { 100: 100, 128: 128, 29: 29, 35: 35, 37: 37, 40: 40, 45: 45, 52: 52, 72: 72, 77: 77, 94: 94 }], 225: [function(a, b, c) { a(29) && "g" != /./g.flags && a(72).f(RegExp.prototype, "flags", { configurable: !0, get: a(37) }) }, { 29: 29, 37: 37, 72: 72 }], 226: [function(a, b, c) { a(36)("match", 1, function(a, b, c) { return [function(c) { "use strict"; var d = a(this), e = void 0 == c ? void 0 : c[b]; return void 0 !== e ? e.call(c, d) : new RegExp(c)[b](String(d)) }, c] }) }, { 36: 36 }], 227: [function(a, b, c) { a(36)("replace", 2, function(a, b, c) { return [function(d, e) { "use strict"; var f = a(this), g = void 0 == d ? void 0 : d[b]; return void 0 !== g ? g.call(d, f, e) : c.call(String(f), d, e) }, c] }) }, { 36: 36 }], 228: [function(a, b, c) { a(36)("search", 1, function(a, b, c) { return [function(c) { "use strict"; var d = a(this), e = void 0 == c ? void 0 : c[b]; return void 0 !== e ? e.call(c, d) : new RegExp(c)[b](String(d)) }, c] }) }, { 36: 36 }], 229: [function(a, b, c) { a(36)("split", 2, function(b, c, d) { "use strict"; var e = a(52), f = d, g = [].push, h = "length"; if ("c" == "abbc".split(/(b)*/)[1] || 4 != "test".split(/(?:)/, -1)[h] || 2 != "ab".split(/(?:ab)*/)[h] || 4 != ".".split(/(.?)(.?)/)[h] || ".".split(/()()/)[h] > 1 || "".split(/.?/)[h]) { var i = void 0 === /()??/.exec("")[1]; d = function(a, b) { var c = String(this); if (void 0 === a && 0 === b) return []; if (!e(a)) return f.call(c, a, b); var d, j, k, l, m, n = [], o = (a.ignoreCase ? "i" : "") + (a.multiline ? "m" : "") + (a.unicode ? "u" : "") + (a.sticky ? "y" : ""), p = 0, q = void 0 === b ? 4294967295 : b >>> 0, r = new RegExp(a.source, o + "g"); for (i || (d = new RegExp("^" + r.source + "$(?!\\s)", o)); (j = r.exec(c)) && !((k = j.index + j[0][h]) > p && (n.push(c.slice(p, j.index)), !i && j[h] > 1 && j[0].replace(d, function() { for (m = 1; m < arguments[h] - 2; m++) void 0 === arguments[m] && (j[m] = void 0) }), j[h] > 1 && j.index < c[h] && g.apply(n, j.slice(1)), l = j[0][h], p = k, n[h] >= q));) r.lastIndex === j.index && r.lastIndex++; return p === c[h] ? !l && r.test("") || n.push("") : n.push(c.slice(p)), n[h] > q ? n.slice(0, q) : n } } else "0".split(void 0, 0)[h] && (d = function(a, b) { return void 0 === a && 0 === b ? [] : f.call(this, a, b) }); return [function(a, e) { var f = b(this), g = void 0 == a ? void 0 : a[c]; return void 0 !== g ? g.call(a, f, e) : d.call(String(f), a, e) }, d] }) }, { 36: 36, 52: 52 }], 230: [function(a, b, c) { "use strict"; a(225); var d = a(7), e = a(37), f = a(29), g = /./.toString, h = function(b) { a(94)(RegExp.prototype, "toString", b, !0) }; a(35)(function() { return "/a/b" != g.call({ source: "a", flags: "b" }) }) ? h(function() { var a = d(this); return "/".concat(a.source, "/", "flags" in a ? a.flags : !f && a instanceof RegExp ? e.call(a) : void 0) }) : "toString" != g.name && h(function() { return g.call(this) }) }, { 225: 225, 29: 29, 35: 35, 37: 37, 7: 7, 94: 94 }], 231: [function(a, b, c) { "use strict"; var d = a(19), e = a(125); b.exports = a(22)("Set", function(a) { return function() { return a(this, arguments.length > 0 ? arguments[0] : void 0) } }, { add: function(a) { return d.def(e(this, "Set"), a = 0 === a ? 0 : a, a) } }, d) }, { 125: 125, 19: 19, 22: 22 }], 232: [function(a, b, c) { "use strict"; a(108)("anchor", function(a) { return function(b) { return a(this, "a", "name", b) } }) }, { 108: 108 }], 233: [function(a, b, c) { "use strict"; a(108)("big", function(a) { return function() { return a(this, "big", "", "") } }) }, { 108: 108 }], 234: [function(a, b, c) { "use strict"; a(108)("blink", function(a) { return function() { return a(this, "blink", "", "") } }) }, { 108: 108 }], 235: [function(a, b, c) { "use strict"; a(108)("bold", function(a) { return function() { return a(this, "b", "", "") } }) }, { 108: 108 }], 236: [function(a, b, c) { "use strict"; var d = a(33), e = a(106)(!1); d(d.P, "String", { codePointAt: function(a) { return e(this, a) } }) }, { 106: 106, 33: 33 }], 237: [function(a, b, c) { "use strict"; var d = a(33), e = a(118), f = a(107), g = "".endsWith; d(d.P + d.F * a(34)("endsWith"), "String", { endsWith: function(a) { var b = f(this, a, "endsWith"), c = arguments.length > 1 ? arguments[1] : void 0, d = e(b.length), h = void 0 === c ? d : Math.min(e(c), d), i = String(a); return g ? g.call(b, i, h) : b.slice(h - i.length, h) === i } }) }, { 107: 107, 118: 118, 33: 33, 34: 34 }], 238: [function(a, b, c) { "use strict"; a(108)("fixed", function(a) { return function() { return a(this, "tt", "", "") } }) }, { 108: 108 }], 239: [function(a, b, c) { "use strict"; a(108)("fontcolor", function(a) { return function(b) { return a(this, "font", "color", b) } }) }, { 108: 108 }], 240: [function(a, b, c) { "use strict"; a(108)("fontsize", function(a) { return function(b) { return a(this, "font", "size", b) } }) }, { 108: 108 }], 241: [function(a, b, c) { var d = a(33), e = a(114), f = String.fromCharCode, g = String.fromCodePoint; d(d.S + d.F * (!!g && 1 != g.length), "String", { fromCodePoint: function(a) { for (var b, c = [], d = arguments.length, g = 0; d > g;) { if (b = +arguments[g++], e(b, 1114111) !== b) throw RangeError(b + " is not a valid code point"); c.push(b < 65536 ? f(b) : f(55296 + ((b -= 65536) >> 10), b % 1024 + 56320)) } return c.join("") } }) }, { 114: 114, 33: 33 }], 242: [function(a, b, c) { "use strict"; var d = a(33), e = a(107); d(d.P + d.F * a(34)("includes"), "String", { includes: function(a) { return !!~e(this, a, "includes").indexOf(a, arguments.length > 1 ? arguments[1] : void 0) } }) }, { 107: 107, 33: 33, 34: 34 }], 243: [function(a, b, c) { "use strict"; a(108)("italics", function(a) { return function() { return a(this, "i", "", "") } }) }, { 108: 108 }], 244: [function(a, b, c) { "use strict"; var d = a(106)(!0); a(55)(String, "String", function(a) { this._t = String(a), this._i = 0 }, function() { var a, b = this._t, c = this._i; return c >= b.length ? { value: void 0, done: !0 } : (a = d(b, c), this._i += a.length, { value: a, done: !1 }) }) }, { 106: 106, 55: 55 }], 245: [function(a, b, c) { "use strict"; a(108)("link", function(a) { return function(b) { return a(this, "a", "href", b) } }) }, { 108: 108 }], 246: [function(a, b, c) { var d = a(33), e = a(117), f = a(118); d(d.S, "String", { raw: function(a) { for (var b = e(a.raw), c = f(b.length), d = arguments.length, g = [], h = 0; c > h;) g.push(String(b[h++])), h < d && g.push(String(arguments[h])); return g.join("") } }) }, { 117: 117, 118: 118, 33: 33 }], 247: [function(a, b, c) { var d = a(33); d(d.P, "String", { repeat: a(110) }) }, { 110: 110, 33: 33 }], 248: [function(a, b, c) { "use strict"; a(108)("small", function(a) { return function() { return a(this, "small", "", "") } }) }, { 108: 108 }], 249: [function(a, b, c) { "use strict"; var d = a(33), e = a(118), f = a(107), g = "".startsWith; d(d.P + d.F * a(34)("startsWith"), "String", { startsWith: function(a) { var b = f(this, a, "startsWith"), c = e(Math.min(arguments.length > 1 ? arguments[1] : void 0, b.length)), d = String(a); return g ? g.call(b, d, c) : b.slice(c, c + d.length) === d } }) }, { 107: 107, 118: 118, 33: 33, 34: 34 }], 250: [function(a, b, c) { "use strict"; a(108)("strike", function(a) { return function() { return a(this, "strike", "", "") } }) }, { 108: 108 }], 251: [function(a, b, c) { "use strict"; a(108)("sub", function(a) { return function() { return a(this, "sub", "", "") } }) }, { 108: 108 }], 252: [function(a, b, c) { "use strict"; a(108)("sup", function(a) { return function() { return a(this, "sup", "", "") } }) }, { 108: 108 }], 253: [function(a, b, c) { "use strict"; a(111)("trim", function(a) { return function() { return a(this, 3) } }) }, { 111: 111 }], 254: [function(a, b, c) { "use strict"; var d = a(40), e = a(41), f = a(29), g = a(33), h = a(94), i = a(66).KEY, j = a(35), k = a(103), l = a(101), m = a(124), n = a(128), o = a(127), p = a(126), q = a(59), r = a(32), s = a(49), t = a(7), u = a(117), v = a(120), w = a(92), x = a(71), y = a(76), z = a(75), A = a(72), B = a(81), C = z.f, D = A.f, E = y.f, F = d.Symbol, G = d.JSON, H = G && G.stringify, I = n("_hidden"), J = n("toPrimitive"), K = {}.propertyIsEnumerable, L = k("symbol-registry"), M = k("symbols"), N = k("op-symbols"), O = Object.prototype, P = "function" == typeof F, Q = d.QObject, R = !Q || !Q.prototype || !Q.prototype.findChild, S = f && j(function() { return 7 != x(D({}, "a", { get: function() { return D(this, "a", { value: 7 }).a } })).a }) ? function(a, b, c) { var d = C(O, b); d && delete O[b], D(a, b, c), d && a !== O && D(O, b, d) } : D, T = function(a) { var b = M[a] = x(F.prototype); return b._k = a, b }, U = P && "symbol" == typeof F.iterator ? function(a) { return "symbol" == typeof a } : function(a) { return a instanceof F }, V = function(a, b, c) { return a === O && V(N, b, c), t(a), b = v(b, !0), t(c), e(M, b) ? (c.enumerable ? (e(a, I) && a[I][b] && (a[I][b] = !1), c = x(c, { enumerable: w(0, !1) })) : (e(a, I) || D(a, I, w(1, {})), a[I][b] = !0), S(a, b, c)) : D(a, b, c) }, W = function(a, b) { t(a); for (var c, d = r(b = u(b)), e = 0, f = d.length; f > e;) V(a, c = d[e++], b[c]); return a }, X = function(a, b) { return void 0 === b ? x(a) : W(x(a), b) }, Y = function(a) { var b = K.call(this, a = v(a, !0)); return !(this === O && e(M, a) && !e(N, a)) && (!(b || !e(this, a) || !e(M, a) || e(this, I) && this[I][a]) || b) }, Z = function(a, b) { if (a = u(a), b = v(b, !0), a !== O || !e(M, b) || e(N, b)) { var c = C(a, b); return !c || !e(M, b) || e(a, I) && a[I][b] || (c.enumerable = !0), c } }, $ = function(a) { for (var b, c = E(u(a)), d = [], f = 0; c.length > f;) e(M, b = c[f++]) || b == I || b == i || d.push(b); return d }, _ = function(a) { for (var b, c = a === O, d = E(c ? N : u(a)), f = [], g = 0; d.length > g;) !e(M, b = d[g++]) || c && !e(O, b) || f.push(M[b]); return f }; P || (F = function() { if (this instanceof F) throw TypeError("Symbol is not a constructor!"); var a = m(arguments.length > 0 ? arguments[0] : void 0), b = function(c) { this === O && b.call(N, c), e(this, I) && e(this[I], a) && (this[I][a] = !1), S(this, a, w(1, c)) }; return f && R && S(O, a, { configurable: !0, set: b }), T(a) }, h(F.prototype, "toString", function() { return this._k }), z.f = Z, A.f = V, a(77).f = y.f = $, a(82).f = Y, a(78).f = _, f && !a(60) && h(O, "propertyIsEnumerable", Y, !0), o.f = function(a) { return T(n(a)) }), g(g.G + g.W + g.F * !P, { Symbol: F }); for (var aa = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), ba = 0; aa.length > ba;) n(aa[ba++]); for (var ca = B(n.store), da = 0; ca.length > da;) p(ca[da++]); g(g.S + g.F * !P, "Symbol", { for: function(a) { return e(L, a += "") ? L[a] : L[a] = F(a) }, keyFor: function(a) { if (U(a)) return q(L, a); throw TypeError(a + " is not a symbol!") }, useSetter: function() { R = !0 }, useSimple: function() { R = !1 } }), g(g.S + g.F * !P, "Object", { create: X, defineProperty: V, defineProperties: W, getOwnPropertyDescriptor: Z, getOwnPropertyNames: $, getOwnPropertySymbols: _ }), G && g(g.S + g.F * (!P || j(function() { var a = F(); return "[null]" != H([a]) || "{}" != H({ a: a }) || "{}" != H(Object(a)) })), "JSON", { stringify: function(a) { if (void 0 !== a && !U(a)) { for (var b, c, d = [a], e = 1; arguments.length > e;) d.push(arguments[e++]); return b = d[1], "function" == typeof b && (c = b), !c && s(b) || (b = function(a, b) { if (c && (b = c.call(this, a, b)), !U(b)) return b }), d[1] = b, H.apply(G, d) } } }), F.prototype[J] || a(42)(F.prototype, J, F.prototype.valueOf), l(F, "Symbol"), l(Math, "Math", !0), l(d.JSON, "JSON", !0) }, { 101: 101, 103: 103, 117: 117, 120: 120, 124: 124, 126: 126, 127: 127, 128: 128, 29: 29, 32: 32, 33: 33, 35: 35, 40: 40, 41: 41, 42: 42, 49: 49, 59: 59, 60: 60, 66: 66, 7: 7, 71: 71, 72: 72, 75: 75, 76: 76, 77: 77, 78: 78, 81: 81, 82: 82, 92: 92, 94: 94 }], 255: [function(a, b, c) { "use strict"; var d = a(33), e = a(123), f = a(122), g = a(7), h = a(114), i = a(118), j = a(51), k = a(40).ArrayBuffer, l = a(104), m = f.ArrayBuffer, n = f.DataView, o = e.ABV && k.isView, p = m.prototype.slice, q = e.VIEW; d(d.G + d.W + d.F * (k !== m), { ArrayBuffer: m }), d(d.S + d.F * !e.CONSTR, "ArrayBuffer", { isView: function(a) { return o && o(a) || j(a) && q in a } }), d(d.P + d.U + d.F * a(35)(function() { return !new m(2).slice(1, void 0).byteLength }), "ArrayBuffer", { slice: function(a, b) { if (void 0 !== p && void 0 === b) return p.call(g(this), a); for (var c = g(this).byteLength, d = h(a, c), e = h(void 0 === b ? c : b, c), f = new(l(this, m))(i(e - d)), j = new n(this), k = new n(f), o = 0; d < e;) k.setUint8(o++, j.getUint8(d++)); return f } }), a(100)("ArrayBuffer") }, { 100: 100, 104: 104, 114: 114, 118: 118, 122: 122, 123: 123, 33: 33, 35: 35, 40: 40, 51: 51, 7: 7 }], 256: [function(a, b, c) { var d = a(33); d(d.G + d.W + d.F * !a(123).ABV, { DataView: a(122).DataView }) }, { 122: 122, 123: 123, 33: 33 }], 257: [function(a, b, c) { a(121)("Float32", 4, function(a) { return function(b, c, d) { return a(this, b, c, d) } }) }, { 121: 121 }], 258: [function(a, b, c) { a(121)("Float64", 8, function(a) { return function(b, c, d) { return a(this, b, c, d) } }) }, { 121: 121 }], 259: [function(a, b, c) { a(121)("Int16", 2, function(a) { return function(b, c, d) { return a(this, b, c, d) } }) }, { 121: 121 }], 260: [function(a, b, c) { a(121)("Int32", 4, function(a) { return function(b, c, d) { return a(this, b, c, d) } }) }, { 121: 121 }], 261: [function(a, b, c) { a(121)("Int8", 1, function(a) { return function(b, c, d) { return a(this, b, c, d) } }) }, { 121: 121 }], 262: [function(a, b, c) { a(121)("Uint16", 2, function(a) { return function(b, c, d) { return a(this, b, c, d) } }) }, { 121: 121 }], 263: [function(a, b, c) { a(121)("Uint32", 4, function(a) { return function(b, c, d) { return a(this, b, c, d) } }) }, { 121: 121 }], 264: [function(a, b, c) { a(121)("Uint8", 1, function(a) { return function(b, c, d) { return a(this, b, c, d) } }) }, { 121: 121 }], 265: [function(a, b, c) { a(121)("Uint8", 1, function(a) { return function(b, c, d) { return a(this, b, c, d) } }, !0) }, { 121: 121 }], 266: [function(a, b, c) { "use strict"; var d, e = a(12)(0), f = a(94), g = a(66), h = a(70), i = a(21), j = a(51), k = a(35), l = a(125), m = g.getWeak, n = Object.isExtensible, o = i.ufstore, p = {}, q = function(a) { return function() { return a(this, arguments.length > 0 ? arguments[0] : void 0) } }, r = { get: function(a) { if (j(a)) { var b = m(a); return !0 === b ? o(l(this, "WeakMap")).get(a) : b ? b[this._i] : void 0 } }, set: function(a, b) { return i.def(l(this, "WeakMap"), a, b) } }, s = b.exports = a(22)("WeakMap", q, r, i, !0, !0); k(function() { return 7 != (new s).set((Object.freeze || Object)(p), 7).get(p) }) && (d = i.getConstructor(q, "WeakMap"), h(d.prototype, r), g.NEED = !0, e(["delete", "has", "get", "set"], function(a) { var b = s.prototype, c = b[a]; f(b, a, function(b, e) { if (j(b) && !n(b)) { this._f || (this._f = new d); var f = this._f[a](b, e); return "set" == a ? this : f } return c.call(this, b, e) }) })) }, { 12: 12, 125: 125, 21: 21, 22: 22, 35: 35, 51: 51, 66: 66, 70: 70, 94: 94 }], 267: [function(a, b, c) { "use strict"; var d = a(21), e = a(125); a(22)("WeakSet", function(a) { return function() { return a(this, arguments.length > 0 ? arguments[0] : void 0) } }, { add: function(a) { return d.def(e(this, "WeakSet"), a, !0) } }, d, !1, !0) }, { 125: 125, 21: 21, 22: 22 }], 268: [function(a, b, c) { "use strict"; var d = a(33), e = a(38), f = a(119), g = a(118), h = a(3), i = a(15); d(d.P, "Array", { flatMap: function(a) { var b, c, d = f(this); return h(a), b = g(d.length), c = i(d, 0), e(c, d, d, b, 0, 1, a, arguments[1]), c } }), a(5)("flatMap") }, { 118: 118, 119: 119, 15: 15, 3: 3, 33: 33, 38: 38, 5: 5 }], 269: [function(a, b, c) { "use strict"; var d = a(33), e = a(38), f = a(119), g = a(118), h = a(116), i = a(15); d(d.P, "Array", { flatten: function() { var a = arguments[0], b = f(this), c = g(b.length), d = i(b, 0); return e(d, b, b, c, 0, void 0 === a ? 1 : h(a)), d } }), a(5)("flatten") }, { 116: 116, 118: 118, 119: 119, 15: 15, 33: 33, 38: 38, 5: 5 }], 270: [function(a, b, c) { "use strict"; var d = a(33), e = a(11)(!0); d(d.P, "Array", { includes: function(a) { return e(this, a, arguments.length > 1 ? arguments[1] : void 0) } }), a(5)("includes") }, { 11: 11, 33: 33, 5: 5 }], 271: [function(a, b, c) { var d = a(33), e = a(68)(), f = a(40).process, g = "process" == a(18)(f); d(d.G, { asap: function(a) { var b = g && f.domain; e(b ? b.bind(a) : a) } }) }, { 18: 18, 33: 33, 40: 40, 68: 68 }], 272: [function(a, b, c) { var d = a(33), e = a(18); d(d.S, "Error", { isError: function(a) { return "Error" === e(a) } }) }, { 18: 18, 33: 33 }], 273: [function(a, b, c) { var d = a(33); d(d.G, { global: a(40) }) }, { 33: 33, 40: 40 }], 274: [function(a, b, c) { a(97)("Map") }, { 97: 97 }], 275: [function(a, b, c) { a(98)("Map") }, { 98: 98 }], 276: [function(a, b, c) { var d = a(33); d(d.P + d.R, "Map", { toJSON: a(20)("Map") }) }, { 20: 20, 33: 33 }], 277: [function(a, b, c) { var d = a(33); d(d.S, "Math", { clamp: function(a, b, c) { return Math.min(c, Math.max(b, a)) } }) }, { 33: 33 }], 278: [function(a, b, c) { var d = a(33); d(d.S, "Math", { DEG_PER_RAD: Math.PI / 180 }) }, { 33: 33 }], 279: [function(a, b, c) { var d = a(33), e = 180 / Math.PI; d(d.S, "Math", { degrees: function(a) { return a * e } }) }, { 33: 33 }], 280: [function(a, b, c) { var d = a(33), e = a(64), f = a(62); d(d.S, "Math", { fscale: function(a, b, c, d, g) { return f(e(a, b, c, d, g)) } }) }, { 33: 33, 62: 62, 64: 64 }], 281: [function(a, b, c) { var d = a(33); d(d.S, "Math", { iaddh: function(a, b, c, d) { var e = a >>> 0, f = b >>> 0, g = c >>> 0; return f + (d >>> 0) + ((e & g | (e | g) & ~(e + g >>> 0)) >>> 31) | 0 } }) }, { 33: 33 }], 282: [function(a, b, c) { var d = a(33); d(d.S, "Math", { imulh: function(a, b) { var c = +a, d = +b, e = 65535 & c, f = 65535 & d, g = c >> 16, h = d >> 16, i = (g * f >>> 0) + (e * f >>> 16); return g * h + (i >> 16) + ((e * h >>> 0) + (65535 & i) >> 16) } }) }, { 33: 33 }], 283: [function(a, b, c) { var d = a(33); d(d.S, "Math", { isubh: function(a, b, c, d) { var e = a >>> 0, f = b >>> 0, g = c >>> 0; return f - (d >>> 0) - ((~e & g | ~(e ^ g) & e - g >>> 0) >>> 31) | 0 } }) }, { 33: 33 }], 284: [function(a, b, c) { var d = a(33); d(d.S, "Math", { RAD_PER_DEG: 180 / Math.PI }) }, { 33: 33 }], 285: [function(a, b, c) { var d = a(33), e = Math.PI / 180; d(d.S, "Math", { radians: function(a) { return a * e } }) }, { 33: 33 }], 286: [function(a, b, c) { var d = a(33); d(d.S, "Math", { scale: a(64) }) }, { 33: 33, 64: 64 }], 287: [function(a, b, c) { var d = a(33); d(d.S, "Math", { signbit: function(a) { return (a = +a) != a ? a : 0 == a ? 1 / a == 1 / 0 : a > 0 } }) }, { 33: 33 }], 288: [function(a, b, c) { var d = a(33); d(d.S, "Math", { umulh: function(a, b) { var c = +a, d = +b, e = 65535 & c, f = 65535 & d, g = c >>> 16, h = d >>> 16, i = (g * f >>> 0) + (e * f >>> 16); return g * h + (i >>> 16) + ((e * h >>> 0) + (65535 & i) >>> 16) } }) }, { 33: 33 }], 289: [function(a, b, c) { "use strict"; var d = a(33), e = a(119), f = a(3), g = a(72); a(29) && d(d.P + a(74), "Object", { __defineGetter__: function(a, b) { g.f(e(this), a, { get: f(b), enumerable: !0, configurable: !0 }) } }) }, { 119: 119, 29: 29, 3: 3, 33: 33, 72: 72, 74: 74 }], 290: [function(a, b, c) { "use strict"; var d = a(33), e = a(119), f = a(3), g = a(72); a(29) && d(d.P + a(74), "Object", { __defineSetter__: function(a, b) { g.f(e(this), a, { set: f(b), enumerable: !0, configurable: !0 }) } }) }, { 119: 119, 29: 29, 3: 3, 33: 33, 72: 72, 74: 74 }], 291: [function(a, b, c) { var d = a(33), e = a(84)(!0); d(d.S, "Object", { entries: function(a) { return e(a) } }) }, { 33: 33, 84: 84 }], 292: [function(a, b, c) { var d = a(33), e = a(85), f = a(117), g = a(75), h = a(24); d(d.S, "Object", { getOwnPropertyDescriptors: function(a) { for (var b, c, d = f(a), i = g.f, j = e(d), k = {}, l = 0; j.length > l;) void 0 !== (c = i(d, b = j[l++])) && h(k, b, c); return k } }) }, { 117: 117, 24: 24, 33: 33, 75: 75, 85: 85 }], 293: [function(a, b, c) { "use strict"; var d = a(33), e = a(119), f = a(120), g = a(79), h = a(75).f; a(29) && d(d.P + a(74), "Object", { __lookupGetter__: function(a) { var b, c = e(this), d = f(a, !0); do { if (b = h(c, d)) return b.get } while (c = g(c)) } }) }, { 119: 119, 120: 120, 29: 29, 33: 33, 74: 74, 75: 75, 79: 79 }], 294: [function(a, b, c) { "use strict"; var d = a(33), e = a(119), f = a(120), g = a(79), h = a(75).f; a(29) && d(d.P + a(74), "Object", { __lookupSetter__: function(a) { var b, c = e(this), d = f(a, !0); do { if (b = h(c, d)) return b.set } while (c = g(c)) } }) }, { 119: 119, 120: 120, 29: 29, 33: 33, 74: 74, 75: 75, 79: 79 }], 295: [function(a, b, c) { var d = a(33), e = a(84)(!1); d(d.S, "Object", { values: function(a) { return e(a) } }) }, { 33: 33, 84: 84 }], 296: [function(a, b, c) { "use strict"; var d = a(33), e = a(40), f = a(23), g = a(68)(), h = a(128)("observable"), i = a(3), j = a(7), k = a(6), l = a(93), m = a(42), n = a(39), o = n.RETURN, p = function(a) { return null == a ? void 0 : i(a) }, q = function(a) { var b = a._c; b && (a._c = void 0, b()) }, r = function(a) { return void 0 === a._o }, s = function(a) { r(a) || (a._o = void 0, q(a)) }, t = function(a, b) { j(a), this._c = void 0, this._o = a, a = new u(this); try { var c = b(a), d = c; null != c && ("function" == typeof c.unsubscribe ? c = function() { d.unsubscribe() } : i(c), this._c = c) } catch (b) { return void a.error(b) } r(this) && q(this) }; t.prototype = l({}, { unsubscribe: function() { s(this) } }); var u = function(a) { this._s = a }; u.prototype = l({}, { next: function(a) { var b = this._s; if (!r(b)) { var c = b._o; try { var d = p(c.next); if (d) return d.call(c, a) } catch (a) { try { s(b) } finally { throw a } } } }, error: function(a) { var b = this._s; if (r(b)) throw a; var c = b._o; b._o = void 0; try { var d = p(c.error); if (!d) throw a; a = d.call(c, a) } catch (a) { try { q(b) } finally { throw a } } return q(b), a }, complete: function(a) { var b = this._s; if (!r(b)) { var c = b._o; b._o = void 0; try { var d = p(c.complete); a = d ? d.call(c, a) : void 0 } catch (a) { try { q(b) } finally { throw a } } return q(b), a } } }); var v = function(a) { k(this, v, "Observable", "_f")._f = i(a) }; l(v.prototype, { subscribe: function(a) { return new t(a, this._f) }, forEach: function(a) { var b = this; return new(f.Promise || e.Promise)(function(c, d) { i(a); var e = b.subscribe({ next: function(b) { try { return a(b) } catch (a) { d(a), e.unsubscribe() } }, error: d, complete: c }) }) } }), l(v, { from: function(a) { var b = "function" == typeof this ? this : v, c = p(j(a)[h]); if (c) { var d = j(c.call(a)); return d.constructor === b ? d : new b(function(a) { return d.subscribe(a) }) } return new b(function(b) { var c = !1; return g(function() { if (!c) { try { if (n(a, !1, function(a) { if (b.next(a), c) return o }) === o) return } catch (a) { if (c) throw a; return void b.error(a) } b.complete() } }), function() { c = !0 } }) }, of: function() { for (var a = 0, b = arguments.length, c = Array(b); a < b;) c[a] = arguments[a++]; return new("function" == typeof this ? this : v)(function(a) { var b = !1; return g(function() { if (!b) { for (var d = 0; d < c.length; ++d) if (a.next(c[d]), b) return; a.complete() } }), function() { b = !0 } }) } }), m(v.prototype, h, function() { return this }), d(d.G, { Observable: v }), a(100)("Observable") }, { 100: 100, 128: 128, 23: 23, 3: 3, 33: 33, 39: 39, 40: 40, 42: 42, 6: 6, 68: 68, 7: 7, 93: 93 }], 297: [function(a, b, c) { "use strict"; var d = a(33), e = a(23), f = a(40), g = a(104), h = a(91); d(d.P + d.R, "Promise", { finally: function(a) { var b = g(this, e.Promise || f.Promise), c = "function" == typeof a; return this.then(c ? function(c) { return h(b, a()).then(function() { return c }) } : a, c ? function(c) { return h(b, a()).then(function() { throw c }) } : a) } }) }, { 104: 104, 23: 23, 33: 33, 40: 40, 91: 91 }], 298: [function(a, b, c) { "use strict"; var d = a(33), e = a(69), f = a(90); d(d.S, "Promise", { try: function(a) { var b = e.f(this), c = f(a); return (c.e ? b.reject : b.resolve)(c.v), b.promise } }) }, { 33: 33, 69: 69, 90: 90 }], 299: [function(a, b, c) { var d = a(67), e = a(7), f = d.key, g = d.set; d.exp({ defineMetadata: function(a, b, c, d) { g(a, b, e(c), f(d)) } }) }, { 67: 67, 7: 7 }], 300: [function(a, b, c) { var d = a(67), e = a(7), f = d.key, g = d.map, h = d.store; d.exp({ deleteMetadata: function(a, b) { var c = arguments.length < 3 ? void 0 : f(arguments[2]), d = g(e(b), c, !1); if (void 0 === d || !d.delete(a)) return !1; if (d.size) return !0; var i = h.get(b); return i.delete(c), !!i.size || h.delete(b) } }) }, { 67: 67, 7: 7 }], 301: [function(a, b, c) { var d = a(231), e = a(10), f = a(67), g = a(7), h = a(79), i = f.keys, j = f.key, k = function(a, b) { var c = i(a, b), f = h(a); if (null === f) return c; var g = k(f, b); return g.length ? c.length ? e(new d(c.concat(g))) : g : c }; f.exp({ getMetadataKeys: function(a) { return k(g(a), arguments.length < 2 ? void 0 : j(arguments[1])) } }) }, { 10: 10, 231: 231, 67: 67, 7: 7, 79: 79 }], 302: [function(a, b, c) { var d = a(67), e = a(7), f = a(79), g = d.has, h = d.get, i = d.key, j = function(a, b, c) { if (g(a, b, c)) return h(a, b, c); var d = f(b); return null !== d ? j(a, d, c) : void 0 }; d.exp({ getMetadata: function(a, b) { return j(a, e(b), arguments.length < 3 ? void 0 : i(arguments[2])) } }) }, { 67: 67, 7: 7, 79: 79 }], 303: [function(a, b, c) { var d = a(67), e = a(7), f = d.keys, g = d.key; d.exp({ getOwnMetadataKeys: function(a) { return f(e(a), arguments.length < 2 ? void 0 : g(arguments[1])) } }) }, { 67: 67, 7: 7 }], 304: [function(a, b, c) { var d = a(67), e = a(7), f = d.get, g = d.key; d.exp({ getOwnMetadata: function(a, b) { return f(a, e(b), arguments.length < 3 ? void 0 : g(arguments[2])) } }) }, { 67: 67, 7: 7 }], 305: [function(a, b, c) { var d = a(67), e = a(7), f = a(79), g = d.has, h = d.key, i = function(a, b, c) { if (g(a, b, c)) return !0; var d = f(b); return null !== d && i(a, d, c) }; d.exp({ hasMetadata: function(a, b) { return i(a, e(b), arguments.length < 3 ? void 0 : h(arguments[2])) } }) }, { 67: 67, 7: 7, 79: 79 }], 306: [function(a, b, c) { var d = a(67), e = a(7), f = d.has, g = d.key; d.exp({ hasOwnMetadata: function(a, b) { return f(a, e(b), arguments.length < 3 ? void 0 : g(arguments[2])) } }) }, { 67: 67, 7: 7 }], 307: [function(a, b, c) { var d = a(67), e = a(7), f = a(3), g = d.key, h = d.set; d.exp({ metadata: function(a, b) { return function(c, d) { h(a, b, (void 0 !== d ? e : f)(c), g(d)) } } }) }, { 3: 3, 67: 67, 7: 7 }], 308: [function(a, b, c) { a(97)("Set") }, { 97: 97 }], 309: [function(a, b, c) { a(98)("Set") }, { 98: 98 }], 310: [function(a, b, c) { var d = a(33); d(d.P + d.R, "Set", { toJSON: a(20)("Set") }) }, { 20: 20, 33: 33 }], 311: [function(a, b, c) { "use strict"; var d = a(33), e = a(106)(!0); d(d.P, "String", { at: function(a) { return e(this, a) } }) }, { 106: 106, 33: 33 }], 312: [function(a, b, c) { "use strict"; var d = a(33), e = a(28), f = a(118), g = a(52), h = a(37), i = RegExp.prototype, j = function(a, b) { this._r = a, this._s = b }; a(54)(j, "RegExp String", function() { var a = this._r.exec(this._s); return { value: a, done: null === a } }), d(d.P, "String", { matchAll: function(a) { if (e(this), !g(a)) throw TypeError(a + " is not a regexp!"); var b = String(this), c = "flags" in i ? String(a.flags) : h.call(a), d = new RegExp(a.source, ~c.indexOf("g") ? c : "g" + c); return d.lastIndex = f(a.lastIndex), new j(d, b) } }) }, { 118: 118, 28: 28, 33: 33, 37: 37, 52: 52, 54: 54 }], 313: [function(a, b, c) { "use strict"; var d = a(33), e = a(109); d(d.P, "String", { padEnd: function(a) { return e(this, a, arguments.length > 1 ? arguments[1] : void 0, !1) } }) }, { 109: 109, 33: 33 }], 314: [function(a, b, c) { "use strict"; var d = a(33), e = a(109); d(d.P, "String", { padStart: function(a) { return e(this, a, arguments.length > 1 ? arguments[1] : void 0, !0) } }) }, { 109: 109, 33: 33 }], 315: [function(a, b, c) { "use strict"; a(111)("trimLeft", function(a) { return function() { return a(this, 1) } }, "trimStart") }, { 111: 111 }], 316: [function(a, b, c) { "use strict"; a(111)("trimRight", function(a) { return function() { return a(this, 2) } }, "trimEnd") }, { 111: 111 }], 317: [function(a, b, c) { a(126)("asyncIterator") }, { 126: 126 }], 318: [function(a, b, c) { a(126)("observable") }, { 126: 126 }], 319: [function(a, b, c) { var d = a(33); d(d.S, "System", { global: a(40) }) }, { 33: 33, 40: 40 }], 320: [function(a, b, c) { a(97)("WeakMap") }, { 97: 97 }], 321: [function(a, b, c) { a(98)("WeakMap") }, { 98: 98 }], 322: [function(a, b, c) { a(97)("WeakSet") }, { 97: 97 }], 323: [function(a, b, c) { a(98)("WeakSet") }, { 98: 98 }], 324: [function(a, b, c) { for (var d = a(141), e = a(81), f = a(94), g = a(40), h = a(42), i = a(58), j = a(128), k = j("iterator"), l = j("toStringTag"), m = i.Array, n = { CSSRuleList: !0, CSSStyleDeclaration: !1, CSSValueList: !1, ClientRectList: !1, DOMRectList: !1, DOMStringList: !1, DOMTokenList: !0, DataTransferItemList: !1, FileList: !1, HTMLAllCollection: !1, HTMLCollection: !1, HTMLFormElement: !1, HTMLSelectElement: !1, MediaList: !0, MimeTypeArray: !1, NamedNodeMap: !1, NodeList: !0, PaintRequestList: !1, Plugin: !1, PluginArray: !1, SVGLengthList: !1, SVGNumberList: !1, SVGPathSegList: !1, SVGPointList: !1, SVGStringList: !1, SVGTransformList: !1, SourceBufferList: !1, StyleSheetList: !0, TextTrackCueList: !1, TextTrackList: !1, TouchList: !1 }, o = e(n), p = 0; p < o.length; p++) { var q, r = o[p], s = n[r], t = g[r], u = t && t.prototype; if (u && (u[k] || h(u, k, m), u[l] || h(u, l, r), i[r] = m, s)) for (q in d) u[q] || f(u, q, d[q], !0) } }, { 128: 128, 141: 141, 40: 40, 42: 42, 58: 58, 81: 81, 94: 94 }], 325: [function(a, b, c) { var d = a(33), e = a(113); d(d.G + d.B, { setImmediate: e.set, clearImmediate: e.clear }) }, { 113: 113, 33: 33 }], 326: [function(a, b, c) { var d = a(40), e = a(33), f = a(46), g = a(88), h = d.navigator, i = !!h && /MSIE .\./.test(h.userAgent), j = function(a) { return i ? function(b, c) { return a(f(g, [].slice.call(arguments, 2), "function" == typeof b ? b : Function(b)), c) } : a }; e(e.G + e.B + e.F * i, { setTimeout: j(d.setTimeout), setInterval: j(d.setInterval) }) }, { 33: 33, 40: 40, 46: 46, 88: 88 }], 327: [function(a, b, c) { a(254), a(191), a(193), a(192), a(195), a(197), a(202), a(196), a(194), a(204), a(203), a(199), a(200), a(198), a(190), a(201), a(205), a(206), a(157), a(159), a(158), a(208), a(207), a(178), a(188), a(189), a(179), a(180), a(181), a(182), a(183), a(184), a(185), a(186), a(187), a(161), a(162), a(163), a(164), a(165), a(166), a(167), a(168), a(169), a(170), a(171), a(172), a(173), a(174), a(175), a(176), a(177), a(241), a(246), a(253), a(244), a(236), a(237), a(242), a(247), a(249), a(232), a(233), a(234), a(235), a(238), a(239), a(240), a(243), a(245), a(248), a(250), a(251), a(252), a(152), a(154), a(153), a(156), a(155), a(140), a(138), a(145), a(142), a(148), a(150), a(137), a(144), a(134), a(149), a(132), a(147), a(146), a(139), a(143), a(131), a(133), a(136), a(135), a(151), a(141), a(224), a(230), a(225), a(226), a(227), a(228), a(229), a(209), a(160), a(231), a(266), a(267), a(255), a(256), a(261), a(264), a(265), a(259), a(262), a(260), a(263), a(257), a(258), a(210), a(211), a(212), a(213), a(214), a(217), a(215), a(216), a(218), a(219), a(220), a(221), a(223), a(222), a(270), a(268), a(269), a(311), a(314), a(313), a(315), a(316), a(312), a(317), a(318), a(292), a(295), a(291), a(289), a(290), a(293), a(294), a(276), a(310), a(275), a(309), a(321), a(323), a(274), a(308), a(320), a(322), a(273), a(319), a(272), a(277), a(278), a(279), a(280), a(281), a(283), a(282), a(284), a(285), a(286), a(288), a(287), a(297), a(298), a(299), a(300), a(302), a(301), a(304), a(303), a(305), a(306), a(307), a(271), a(296), a(326), a(325), a(324), b.exports = a(23) }, { 131: 131, 132: 132, 133: 133, 134: 134, 135: 135, 136: 136, 137: 137, 138: 138, 139: 139, 140: 140, 141: 141, 142: 142, 143: 143, 144: 144, 145: 145, 146: 146, 147: 147, 148: 148, 149: 149, 150: 150, 151: 151, 152: 152, 153: 153, 154: 154, 155: 155, 156: 156, 157: 157, 158: 158, 159: 159, 160: 160, 161: 161, 162: 162, 163: 163, 164: 164, 165: 165, 166: 166, 167: 167, 168: 168, 169: 169, 170: 170, 171: 171, 172: 172, 173: 173, 174: 174, 175: 175, 176: 176, 177: 177, 178: 178, 179: 179, 180: 180, 181: 181, 182: 182, 183: 183, 184: 184, 185: 185, 186: 186, 187: 187, 188: 188, 189: 189, 190: 190, 191: 191, 192: 192, 193: 193, 194: 194, 195: 195, 196: 196, 197: 197, 198: 198, 199: 199, 200: 200, 201: 201, 202: 202, 203: 203, 204: 204, 205: 205, 206: 206, 207: 207, 208: 208, 209: 209, 210: 210, 211: 211, 212: 212, 213: 213, 214: 214, 215: 215, 216: 216, 217: 217, 218: 218, 219: 219, 220: 220, 221: 221, 222: 222, 223: 223, 224: 224, 225: 225, 226: 226, 227: 227, 228: 228, 229: 229, 23: 23, 230: 230, 231: 231, 232: 232, 233: 233, 234: 234, 235: 235, 236: 236, 237: 237, 238: 238, 239: 239, 240: 240, 241: 241, 242: 242, 243: 243, 244: 244, 245: 245, 246: 246, 247: 247, 248: 248, 249: 249, 250: 250, 251: 251, 252: 252, 253: 253, 254: 254, 255: 255, 256: 256, 257: 257, 258: 258, 259: 259, 260: 260, 261: 261, 262: 262, 263: 263, 264: 264, 265: 265, 266: 266, 267: 267, 268: 268, 269: 269, 270: 270, 271: 271, 272: 272, 273: 273, 274: 274, 275: 275, 276: 276, 277: 277, 278: 278, 279: 279, 280: 280, 281: 281, 282: 282, 283: 283, 284: 284, 285: 285, 286: 286, 287: 287, 288: 288, 289: 289, 290: 290, 291: 291, 292: 292, 293: 293, 294: 294, 295: 295, 296: 296, 297: 297, 298: 298, 299: 299, 300: 300, 301: 301, 302: 302, 303: 303, 304: 304, 305: 305, 306: 306, 307: 307, 308: 308, 309: 309, 310: 310, 311: 311, 312: 312, 313: 313, 314: 314, 315: 315, 316: 316, 317: 317, 318: 318, 319: 319, 320: 320, 321: 321, 322: 322, 323: 323, 324: 324, 325: 325, 326: 326 }], 328: [function(a, b, c) { (function(a) { ! function(a) { "use strict"; function c(a, b, c, d) { var f = b && b.prototype instanceof e ? b : e, g = Object.create(f.prototype), h = new n(d || []); return g._invoke = j(a, c, h), g } function d(a, b, c) { try { return { type: "normal", arg: a.call(b, c) } } catch (a) { return { type: "throw", arg: a } } } function e() {} function f() {} function g() {} function h(a) { ["next", "throw", "return"].forEach(function(b) { a[b] = function(a) { return this._invoke(b, a) } }) } function i(b) { function c(a, e, f, g) { var h = d(b[a], b, e); if ("throw" !== h.type) { var i = h.arg, j = i.value; return j && "object" == typeof j && s.call(j, "__await") ? Promise.resolve(j.__await).then(function(a) { c("next", a, f, g) }, function(a) { c("throw", a, f, g) }) : Promise.resolve(j).then(function(a) { i.value = a, f(i) }, g) } g(h.arg) } function e(a, b) { function d() { return new Promise(function(d, e) { c(a, b, d, e) }) } return f = f ? f.then(d, d) : d() } "object" == typeof a.process && a.process.domain && (c = a.process.domain.bind(c)); var f; this._invoke = e } function j(a, b, c) { var e = z; return function(f, g) { if (e === B) throw new Error("Generator is already running"); if (e === C) { if ("throw" === f) throw g; return p() } for (c.method = f, c.arg = g;;) { var h = c.delegate; if (h) { var i = k(h, c); if (i) { if (i === D) continue; return i } } if ("next" === c.method) c.sent = c._sent = c.arg; else if ("throw" === c.method) { if (e === z) throw e = C, c.arg; c.dispatchException(c.arg) } else "return" === c.method && c.abrupt("return", c.arg); e = B; var j = d(a, b, c); if ("normal" === j.type) { if (e = c.done ? C : A, j.arg === D) continue; return { value: j.arg, done: c.done } } "throw" === j.type && (e = C, c.method = "throw", c.arg = j.arg) } } } function k(a, b) { var c = a.iterator[b.method]; if (c === q) { if (b.delegate = null, "throw" === b.method) { if (a.iterator.return && (b.method = "return", b.arg = q, k(a, b), "throw" === b.method)) return D; b.method = "throw", b.arg = new TypeError("The iterator does not provide a 'throw' method") } return D } var e = d(c, a.iterator, b.arg); if ("throw" === e.type) return b.method = "throw", b.arg = e.arg, b.delegate = null, D; var f = e.arg; return f ? f.done ? (b[a.resultName] = f.value, b.next = a.nextLoc, "return" !== b.method && (b.method = "next", b.arg = q), b.delegate = null, D) : f : (b.method = "throw", b.arg = new TypeError("iterator result is not an object"), b.delegate = null, D) } function l(a) { var b = { tryLoc: a[0] }; 1 in a && (b.catchLoc = a[1]), 2 in a && (b.finallyLoc = a[2], b.afterLoc = a[3]), this.tryEntries.push(b) } function m(a) { var b = a.completion || {}; b.type = "normal", delete b.arg, a.completion = b } function n(a) { this.tryEntries = [{ tryLoc: "root" }], a.forEach(l, this), this.reset(!0) } function o(a) { if (a) { var b = a[u]; if (b) return b.call(a); if ("function" == typeof a.next) return a; if (!isNaN(a.length)) { var c = -1, d = function b() { for (; ++c < a.length;) if (s.call(a, c)) return b.value = a[c], b.done = !1, b; return b.value = q, b.done = !0, b }; return d.next = d } } return { next: p } } function p() { return { value: q, done: !0 } } var q, r = Object.prototype, s = r.hasOwnProperty, t = "function" == typeof Symbol ? Symbol : {}, u = t.iterator || "@@iterator", v = t.asyncIterator || "@@asyncIterator", w = t.toStringTag || "@@toStringTag", x = "object" == typeof b, y = a.regeneratorRuntime; if (y) return void(x && (b.exports = y)); y = a.regeneratorRuntime = x ? b.exports : {}, y.wrap = c; var z = "suspendedStart", A = "suspendedYield", B = "executing", C = "completed", D = {}, E = {}; E[u] = function() { return this }; var F = Object.getPrototypeOf, G = F && F(F(o([]))); G && G !== r && s.call(G, u) && (E = G); var H = g.prototype = e.prototype = Object.create(E); f.prototype = H.constructor = g, g.constructor = f, g[w] = f.displayName = "GeneratorFunction", y.isGeneratorFunction = function(a) { var b = "function" == typeof a && a.constructor; return !!b && (b === f || "GeneratorFunction" === (b.displayName || b.name)) }, y.mark = function(a) { return Object.setPrototypeOf ? Object.setPrototypeOf(a, g) : (a.__proto__ = g, w in a || (a[w] = "GeneratorFunction")), a.prototype = Object.create(H), a }, y.awrap = function(a) { return { __await: a } }, h(i.prototype), i.prototype[v] = function() { return this }, y.AsyncIterator = i, y.async = function(a, b, d, e) { var f = new i(c(a, b, d, e)); return y.isGeneratorFunction(b) ? f : f.next().then(function(a) { return a.done ? a.value : f.next() }) }, h(H), H[w] = "Generator", H[u] = function() { return this }, H.toString = function() { return "[object Generator]" }, y.keys = function(a) { var b = []; for (var c in a) b.push(c); return b.reverse(), function c() { for (; b.length;) { var d = b.pop(); if (d in a) return c.value = d, c.done = !1, c } return c.done = !0, c } }, y.values = o, n.prototype = { constructor: n, reset: function(a) { if (this.prev = 0, this.next = 0, this.sent = this._sent = q, this.done = !1, this.delegate = null, this.method = "next", this.arg = q, this.tryEntries.forEach(m), !a) for (var b in this) "t" === b.charAt(0) && s.call(this, b) && !isNaN(+b.slice(1)) && (this[b] = q) }, stop: function() { this.done = !0; var a = this.tryEntries[0], b = a.completion; if ("throw" === b.type) throw b.arg; return this.rval }, dispatchException: function(a) { function b(b, d) { return f.type = "throw", f.arg = a, c.next = b, d && (c.method = "next", c.arg = q), !!d } if (this.done) throw a; for (var c = this, d = this.tryEntries.length - 1; d >= 0; --d) { var e = this.tryEntries[d], f = e.completion; if ("root" === e.tryLoc) return b("end"); if (e.tryLoc <= this.prev) { var g = s.call(e, "catchLoc"), h = s.call(e, "finallyLoc"); if (g && h) { if (this.prev < e.catchLoc) return b(e.catchLoc, !0); if (this.prev < e.finallyLoc) return b(e.finallyLoc) } else if (g) { if (this.prev < e.catchLoc) return b(e.catchLoc, !0) } else { if (!h) throw new Error("try statement without catch or finally"); if (this.prev < e.finallyLoc) return b(e.finallyLoc) } } } }, abrupt: function(a, b) { for (var c = this.tryEntries.length - 1; c >= 0; --c) { var d = this.tryEntries[c]; if (d.tryLoc <= this.prev && s.call(d, "finallyLoc") && this.prev < d.finallyLoc) { var e = d; break } } e && ("break" === a || "continue" === a) && e.tryLoc <= b && b <= e.finallyLoc && (e = null); var f = e ? e.completion : {}; return f.type = a, f.arg = b, e ? (this.method = "next", this.next = e.finallyLoc, D) : this.complete(f) }, complete: function(a, b) { if ("throw" === a.type) throw a.arg; return "break" === a.type || "continue" === a.type ? this.next = a.arg : "return" === a.type ? (this.rval = this.arg = a.arg, this.method = "return", this.next = "end") : "normal" === a.type && b && (this.next = b), D }, finish: function(a) { for (var b = this.tryEntries.length - 1; b >= 0; --b) { var c = this.tryEntries[b]; if (c.finallyLoc === a) return this.complete(c.completion, c.afterLoc), m(c), D } }, catch: function(a) { for (var b = this.tryEntries.length - 1; b >= 0; --b) { var c = this.tryEntries[b]; if (c.tryLoc === a) { var d = c.completion; if ("throw" === d.type) { var e = d.arg; m(c) } return e } } throw new Error("illegal catch attempt") }, delegateYield: function(a, b, c) { return this.delegate = { iterator: o(a), resultName: b, nextLoc: c }, "next" === this.method && (this.arg = q), D } } }("object" == typeof a ? a : "object" == typeof window ? window : "object" == typeof self ? self : this) }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}] }, {}, [1]), function(a) { if ("object" == typeof exports && "undefined" != typeof module) module.exports = a(); else if ("function" == typeof define && define.amd) define([], a); else { var b; b = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, b.PIXI = a() } }(function() { var a; return function() { function a(b, c, d) { function e(g, h) { if (!c[g]) { if (!b[g]) { var i = "function" == typeof require && require; if (!h && i) return i(g, !0); if (f) return f(g, !0); var j = new Error("Cannot find module '" + g + "'"); throw j.code = "MODULE_NOT_FOUND", j } var k = c[g] = { exports: {} }; b[g][0].call(k.exports, function(a) { var c = b[g][1][a]; return e(c || a) }, k, k.exports, a, b, c, d) } return c[g].exports } for (var f = "function" == typeof require && require, g = 0; g < d.length; g++) e(d[g]); return e } return a }()({ 1: [function(a, b, c) { "use strict"; "use restrict"; function d(a) { var b = 32; return a &= -a, a && b--, 65535 & a && (b -= 16), 16711935 & a && (b -= 8), 252645135 & a && (b -= 4), 858993459 & a && (b -= 2), 1431655765 & a && (b -= 1), b } c.INT_BITS = 32, c.INT_MAX = 2147483647, c.INT_MIN = -1 << 31, c.sign = function(a) { return (a > 0) - (a < 0) }, c.abs = function(a) { var b = a >> 31; return (a ^ b) - b }, c.min = function(a, b) { return b ^ (a ^ b) & -(a < b) }, c.max = function(a, b) { return a ^ (a ^ b) & -(a < b) }, c.isPow2 = function(a) { return !(a & a - 1 || !a) }, c.log2 = function(a) { var b, c; return b = (a > 65535) << 4, a >>>= b, c = (a > 255) << 3, a >>>= c, b |= c, c = (a > 15) << 2, a >>>= c, b |= c, c = (a > 3) << 1, a >>>= c, (b |= c) | a >> 1 }, c.log10 = function(a) { return a >= 1e9 ? 9 : a >= 1e8 ? 8 : a >= 1e7 ? 7 : a >= 1e6 ? 6 : a >= 1e5 ? 5 : a >= 1e4 ? 4 : a >= 1e3 ? 3 : a >= 100 ? 2 : a >= 10 ? 1 : 0 }, c.popCount = function(a) { return a -= a >>> 1 & 1431655765, 16843009 * ((a = (858993459 & a) + (a >>> 2 & 858993459)) + (a >>> 4) & 252645135) >>> 24 }, c.countTrailingZeros = d, c.nextPow2 = function(a) { return a += 0 === a, --a, a |= a >>> 1, a |= a >>> 2, a |= a >>> 4, a |= a >>> 8, (a |= a >>> 16) + 1 }, c.prevPow2 = function(a) { return a |= a >>> 1, a |= a >>> 2, a |= a >>> 4, a |= a >>> 8, (a |= a >>> 16) - (a >>> 1) }, c.parity = function(a) { return a ^= a >>> 16, a ^= a >>> 8, a ^= a >>> 4, 27030 >>> (a &= 15) & 1 }; var e = new Array(256); ! function(a) { for (var b = 0; b < 256; ++b) { var c = b, d = b, e = 7; for (c >>>= 1; c; c >>>= 1) d <<= 1, d |= 1 & c, --e; a[b] = d << e & 255 } }(e), c.reverse = function(a) { return e[255 & a] << 24 | e[a >>> 8 & 255] << 16 | e[a >>> 16 & 255] << 8 | e[a >>> 24 & 255] }, c.interleave2 = function(a, b) { return a &= 65535, a = 16711935 & (a | a << 8), a = 252645135 & (a | a << 4), a = 858993459 & (a | a << 2), a = 1431655765 & (a | a << 1), b &= 65535, b = 16711935 & (b | b << 8), b = 252645135 & (b | b << 4), b = 858993459 & (b | b << 2), b = 1431655765 & (b | b << 1), a | b << 1 }, c.deinterleave2 = function(a, b) { return a = a >>> b & 1431655765, a = 858993459 & (a | a >>> 1), a = 252645135 & (a | a >>> 2), a = 16711935 & (a | a >>> 4), (a = 65535 & (a | a >>> 16)) << 16 >> 16 }, c.interleave3 = function(a, b, c) { return a &= 1023, a = 4278190335 & (a | a << 16), a = 251719695 & (a | a << 8), a = 3272356035 & (a | a << 4), a = 1227133513 & (a | a << 2), b &= 1023, b = 4278190335 & (b | b << 16), b = 251719695 & (b | b << 8), b = 3272356035 & (b | b << 4), b = 1227133513 & (b | b << 2), a |= b << 1, c &= 1023, c = 4278190335 & (c | c << 16), c = 251719695 & (c | c << 8), c = 3272356035 & (c | c << 4), c = 1227133513 & (c | c << 2), a | c << 2 }, c.deinterleave3 = function(a, b) { return a = a >>> b & 1227133513, a = 3272356035 & (a | a >>> 2), a = 251719695 & (a | a >>> 4), a = 4278190335 & (a | a >>> 8), (a = 1023 & (a | a >>> 16)) << 22 >> 22 }, c.nextCombination = function(a) { var b = a | a - 1; return b + 1 | (~b & -~b) - 1 >>> d(a) + 1 } }, {}], 2: [function(a, b, c) { "use strict"; function d(a, b, c) { c = c || 2; var d = b && b.length, f = d ? b[0] * c : a.length, h = e(a, 0, f, c, !0), i = []; if (!h) return i; var j, k, m, n, o, p, q; if (d && (h = l(a, b, h, c)), a.length > 80 * c) { j = m = a[0], k = n = a[1]; for (var r = c; r < f; r += c) o = a[r], p = a[r + 1], o < j && (j = o), p < k && (k = p), o > m && (m = o), p > n && (n = p); q = Math.max(m - j, n - k), q = 0 !== q ? 1 / q : 0 } return g(h, i, c, j, k, q), i } function e(a, b, c, d, e) { var f, g; if (e === F(a, b, c, d) > 0) for (f = b; f < c; f += d) g = C(f, a[f], a[f + 1], g); else for (f = c - d; f >= b; f -= d) g = C(f, a[f], a[f + 1], g); return g && w(g, g.next) && (D(g), g = g.next), g } function f(a, b) { if (!a) return a; b || (b = a); var c, d = a; do { if (c = !1, d.steiner || !w(d, d.next) && 0 !== v(d.prev, d, d.next)) d = d.next; else { if (D(d), (d = b = d.prev) === d.next) break; c = !0 } } while (c || d !== b); return b } function g(a, b, c, d, e, l, m) { if (a) { !m && l && p(a, d, e, l); for (var n, o, q = a; a.prev !== a.next;) if (n = a.prev, o = a.next, l ? i(a, d, e, l) : h(a)) b.push(n.i / c), b.push(a.i / c), b.push(o.i / c), D(a), a = o.next, q = o.next; else if ((a = o) === q) { m ? 1 === m ? (a = j(a, b, c), g(a, b, c, d, e, l, 2)) : 2 === m && k(a, b, c, d, e, l) : g(f(a), b, c, d, e, l, 1); break } } } function h(a) { var b = a.prev, c = a, d = a.next; if (v(b, c, d) >= 0) return !1; for (var e = a.next.next; e !== a.prev;) { if (t(b.x, b.y, c.x, c.y, d.x, d.y, e.x, e.y) && v(e.prev, e, e.next) >= 0) return !1; e = e.next } return !0 } function i(a, b, c, d) { var e = a.prev, f = a, g = a.next; if (v(e, f, g) >= 0) return !1; for (var h = e.x < f.x ? e.x < g.x ? e.x : g.x : f.x < g.x ? f.x : g.x, i = e.y < f.y ? e.y < g.y ? e.y : g.y : f.y < g.y ? f.y : g.y, j = e.x > f.x ? e.x > g.x ? e.x : g.x : f.x > g.x ? f.x : g.x, k = e.y > f.y ? e.y > g.y ? e.y : g.y : f.y > g.y ? f.y : g.y, l = r(h, i, b, c, d), m = r(j, k, b, c, d), n = a.prevZ, o = a.nextZ; n && n.z >= l && o && o.z <= m;) { if (n !== a.prev && n !== a.next && t(e.x, e.y, f.x, f.y, g.x, g.y, n.x, n.y) && v(n.prev, n, n.next) >= 0) return !1; if (n = n.prevZ, o !== a.prev && o !== a.next && t(e.x, e.y, f.x, f.y, g.x, g.y, o.x, o.y) && v(o.prev, o, o.next) >= 0) return !1; o = o.nextZ } for (; n && n.z >= l;) { if (n !== a.prev && n !== a.next && t(e.x, e.y, f.x, f.y, g.x, g.y, n.x, n.y) && v(n.prev, n, n.next) >= 0) return !1; n = n.prevZ } for (; o && o.z <= m;) { if (o !== a.prev && o !== a.next && t(e.x, e.y, f.x, f.y, g.x, g.y, o.x, o.y) && v(o.prev, o, o.next) >= 0) return !1; o = o.nextZ } return !0 } function j(a, b, c) { var d = a; do { var e = d.prev, f = d.next.next; !w(e, f) && x(e, d, d.next, f) && z(e, f) && z(f, e) && (b.push(e.i / c), b.push(d.i / c), b.push(f.i / c), D(d), D(d.next), d = a = f), d = d.next } while (d !== a); return d } function k(a, b, c, d, e, h) { var i = a; do { for (var j = i.next.next; j !== i.prev;) { if (i.i !== j.i && u(i, j)) { var k = B(i, j); return i = f(i, i.next), k = f(k, k.next), g(i, b, c, d, e, h), void g(k, b, c, d, e, h) } j = j.next } i = i.next } while (i !== a) } function l(a, b, c, d) { var g, h, i, j, k, l = []; for (g = 0, h = b.length; g < h; g++) i = b[g] * d, j = g < h - 1 ? b[g + 1] * d : a.length, k = e(a, i, j, d, !1), k === k.next && (k.steiner = !0), l.push(s(k)); for (l.sort(m), g = 0; g < l.length; g++) n(l[g], c), c = f(c, c.next); return c } function m(a, b) { return a.x - b.x } function n(a, b) { if (b = o(a, b)) { var c = B(b, a); f(c, c.next) } } function o(a, b) { var c, d = b, e = a.x, f = a.y, g = -1 / 0; do { if (f <= d.y && f >= d.next.y && d.next.y !== d.y) { var h = d.x + (f - d.y) * (d.next.x - d.x) / (d.next.y - d.y); if (h <= e && h > g) { if (g = h, h === e) { if (f === d.y) return d; if (f === d.next.y) return d.next } c = d.x < d.next.x ? d : d.next } } d = d.next } while (d !== b); if (!c) return null; if (e === g) return c.prev; var i, j = c, k = c.x, l = c.y, m = 1 / 0; for (d = c.next; d !== j;) e >= d.x && d.x >= k && e !== d.x && t(f < l ? e : g, f, k, l, f < l ? g : e, f, d.x, d.y) && ((i = Math.abs(f - d.y) / (e - d.x)) < m || i === m && d.x > c.x) && z(d, a) && (c = d, m = i), d = d.next; return c } function p(a, b, c, d) { var e = a; do { null === e.z && (e.z = r(e.x, e.y, b, c, d)), e.prevZ = e.prev, e.nextZ = e.next, e = e.next } while (e !== a); e.prevZ.nextZ = null, e.prevZ = null, q(e) } function q(a) { var b, c, d, e, f, g, h, i, j = 1; do { for (c = a, a = null, f = null, g = 0; c;) { for (g++, d = c, h = 0, b = 0; b < j && (h++, d = d.nextZ); b++); for (i = j; h > 0 || i > 0 && d;) 0 !== h && (0 === i || !d || c.z <= d.z) ? (e = c, c = c.nextZ, h--) : (e = d, d = d.nextZ, i--), f ? f.nextZ = e : a = e, e.prevZ = f, f = e; c = d } f.nextZ = null, j *= 2 } while (g > 1); return a } function r(a, b, c, d, e) { return a = 32767 * (a - c) * e, b = 32767 * (b - d) * e, a = 16711935 & (a | a << 8), a = 252645135 & (a | a << 4), a = 858993459 & (a | a << 2), a = 1431655765 & (a | a << 1), b = 16711935 & (b | b << 8), b = 252645135 & (b | b << 4), b = 858993459 & (b | b << 2), b = 1431655765 & (b | b << 1), a | b << 1 } function s(a) { var b = a, c = a; do { b.x < c.x && (c = b), b = b.next } while (b !== a); return c } function t(a, b, c, d, e, f, g, h) { return (e - g) * (b - h) - (a - g) * (f - h) >= 0 && (a - g) * (d - h) - (c - g) * (b - h) >= 0 && (c - g) * (f - h) - (e - g) * (d - h) >= 0 } function u(a, b) { return a.next.i !== b.i && a.prev.i !== b.i && !y(a, b) && z(a, b) && z(b, a) && A(a, b) } function v(a, b, c) { return (b.y - a.y) * (c.x - b.x) - (b.x - a.x) * (c.y - b.y) } function w(a, b) { return a.x === b.x && a.y === b.y } function x(a, b, c, d) { return !!(w(a, b) && w(c, d) || w(a, d) && w(c, b)) || v(a, b, c) > 0 != v(a, b, d) > 0 && v(c, d, a) > 0 != v(c, d, b) > 0 } function y(a, b) { var c = a; do { if (c.i !== a.i && c.next.i !== a.i && c.i !== b.i && c.next.i !== b.i && x(c, c.next, a, b)) return !0; c = c.next } while (c !== a); return !1 } function z(a, b) { return v(a.prev, a, a.next) < 0 ? v(a, b, a.next) >= 0 && v(a, a.prev, b) >= 0 : v(a, b, a.prev) < 0 || v(a, a.next, b) < 0 } function A(a, b) { var c = a, d = !1, e = (a.x + b.x) / 2, f = (a.y + b.y) / 2; do { c.y > f != c.next.y > f && c.next.y !== c.y && e < (c.next.x - c.x) * (f - c.y) / (c.next.y - c.y) + c.x && (d = !d), c = c.next } while (c !== a); return d } function B(a, b) { var c = new E(a.i, a.x, a.y), d = new E(b.i, b.x, b.y), e = a.next, f = b.prev; return a.next = b, b.prev = a, c.next = e, e.prev = c, d.next = c, c.prev = d, f.next = d, d.prev = f, d } function C(a, b, c, d) { var e = new E(a, b, c); return d ? (e.next = d.next, e.prev = d, d.next.prev = e, d.next = e) : (e.prev = e, e.next = e), e } function D(a) { a.next.prev = a.prev, a.prev.next = a.next, a.prevZ && (a.prevZ.nextZ = a.nextZ), a.nextZ && (a.nextZ.prevZ = a.prevZ) } function E(a, b, c) { this.i = a, this.x = b, this.y = c, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1 } function F(a, b, c, d) { for (var e = 0, f = b, g = c - d; f < c; f += d) e += (a[g] - a[f]) * (a[f + 1] + a[g + 1]), g = f; return e } b.exports = d, b.exports.default = d, d.deviation = function(a, b, c, d) { var e = b && b.length, f = e ? b[0] * c : a.length, g = Math.abs(F(a, 0, f, c)); if (e) for (var h = 0, i = b.length; h < i; h++) { var j = b[h] * c, k = h < i - 1 ? b[h + 1] * c : a.length; g -= Math.abs(F(a, j, k, c)) } var l = 0; for (h = 0; h < d.length; h += 3) { var m = d[h] * c, n = d[h + 1] * c, o = d[h + 2] * c; l += Math.abs((a[m] - a[o]) * (a[n + 1] - a[m + 1]) - (a[m] - a[n]) * (a[o + 1] - a[m + 1])) } return 0 === g && 0 === l ? 0 : Math.abs((l - g) / g) }, d.flatten = function(a) { for (var b = a[0][0].length, c = { vertices: [], holes: [], dimensions: b }, d = 0, e = 0; e < a.length; e++) { for (var f = 0; f < a[e].length; f++) for (var g = 0; g < b; g++) c.vertices.push(a[e][f][g]); e > 0 && (d += a[e - 1].length, c.holes.push(d)) } return c } }, {}], 3: [function(a, b, c) { "use strict"; function d() {} function e(a, b, c) { this.fn = a, this.context = b, this.once = c || !1 } function f() { this._events = new d, this._eventsCount = 0 } var g = Object.prototype.hasOwnProperty, h = "~"; Object.create && (d.prototype = Object.create(null), (new d).__proto__ || (h = !1)), f.prototype.eventNames = function() { var a, b, c = []; if (0 === this._eventsCount) return c; for (b in a = this._events) g.call(a, b) && c.push(h ? b.slice(1) : b); return Object.getOwnPropertySymbols ? c.concat(Object.getOwnPropertySymbols(a)) : c }, f.prototype.listeners = function(a, b) { var c = h ? h + a : a, d = this._events[c]; if (b) return !!d; if (!d) return []; if (d.fn) return [d.fn]; for (var e = 0, f = d.length, g = new Array(f); e < f; e++) g[e] = d[e].fn; return g }, f.prototype.emit = function(a, b, c, d, e, f) { var g = h ? h + a : a; if (!this._events[g]) return !1; var i, j, k = this._events[g], l = arguments.length; if (k.fn) { switch (k.once && this.removeListener(a, k.fn, void 0, !0), l) { case 1: return k.fn.call(k.context), !0; case 2: return k.fn.call(k.context, b), !0; case 3: return k.fn.call(k.context, b, c), !0; case 4: return k.fn.call(k.context, b, c, d), !0; case 5: return k.fn.call(k.context, b, c, d, e), !0; case 6: return k.fn.call(k.context, b, c, d, e, f), !0 } for (j = 1, i = new Array(l - 1); j < l; j++) i[j - 1] = arguments[j]; k.fn.apply(k.context, i) } else { var m, n = k.length; for (j = 0; j < n; j++) switch (k[j].once && this.removeListener(a, k[j].fn, void 0, !0), l) { case 1: k[j].fn.call(k[j].context); break; case 2: k[j].fn.call(k[j].context, b); break; case 3: k[j].fn.call(k[j].context, b, c); break; case 4: k[j].fn.call(k[j].context, b, c, d); break; default: if (!i) for (m = 1, i = new Array(l - 1); m < l; m++) i[m - 1] = arguments[m]; k[j].fn.apply(k[j].context, i) } } return !0 }, f.prototype.on = function(a, b, c) { var d = new e(b, c || this), f = h ? h + a : a; return this._events[f] ? this._events[f].fn ? this._events[f] = [this._events[f], d] : this._events[f].push(d) : (this._events[f] = d, this._eventsCount++), this }, f.prototype.once = function(a, b, c) { var d = new e(b, c || this, !0), f = h ? h + a : a; return this._events[f] ? this._events[f].fn ? this._events[f] = [this._events[f], d] : this._events[f].push(d) : (this._events[f] = d, this._eventsCount++), this }, f.prototype.removeListener = function(a, b, c, e) { var f = h ? h + a : a; if (!this._events[f]) return this; if (!b) return 0 == --this._eventsCount ? this._events = new d : delete this._events[f], this; var g = this._events[f]; if (g.fn) g.fn !== b || e && !g.once || c && g.context !== c || (0 == --this._eventsCount ? this._events = new d : delete this._events[f]); else { for (var i = 0, j = [], k = g.length; i < k; i++)(g[i].fn !== b || e && !g[i].once || c && g[i].context !== c) && j.push(g[i]); j.length ? this._events[f] = 1 === j.length ? j[0] : j : 0 == --this._eventsCount ? this._events = new d : delete this._events[f] } return this }, f.prototype.removeAllListeners = function(a) { var b; return a ? (b = h ? h + a : a, this._events[b] && (0 == --this._eventsCount ? this._events = new d : delete this._events[b])) : (this._events = new d, this._eventsCount = 0), this }, f.prototype.off = f.prototype.removeListener, f.prototype.addListener = f.prototype.on, f.prototype.setMaxListeners = function() { return this }, f.prefixed = h, f.EventEmitter = f, void 0 !== b && (b.exports = f) }, {}], 4: [function(b, c, d) { ! function(b) { var d = /iPhone/i, e = /iPod/i, f = /iPad/i, g = /(?=.*\bAndroid\b)(?=.*\bMobile\b)/i, h = /Android/i, i = /(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i, j = /(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i, k = /Windows Phone/i, l = /(?=.*\bWindows\b)(?=.*\bARM\b)/i, m = /BlackBerry/i, n = /BB10/i, o = /Opera Mini/i, p = /(CriOS|Chrome)(?=.*\bMobile\b)/i, q = /(?=.*\bFirefox\b)(?=.*\bMobile\b)/i, r = new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)", "i"), s = function(a, b) { return a.test(b) }, t = function(a) { var b = a || navigator.userAgent, c = b.split("[FBAN"); if (void 0 !== c[1] && (b = c[0]), c = b.split("Twitter"), void 0 !== c[1] && (b = c[0]), this.apple = { phone: s(d, b), ipod: s(e, b), tablet: !s(d, b) && s(f, b), device: s(d, b) || s(e, b) || s(f, b) }, this.amazon = { phone: s(i, b), tablet: !s(i, b) && s(j, b), device: s(i, b) || s(j, b) }, this.android = { phone: s(i, b) || s(g, b), tablet: !s(i, b) && !s(g, b) && (s(j, b) || s(h, b)), device: s(i, b) || s(j, b) || s(g, b) || s(h, b) }, this.windows = { phone: s(k, b), tablet: s(l, b), device: s(k, b) || s(l, b) }, this.other = { blackberry: s(m, b), blackberry10: s(n, b), opera: s(o, b), firefox: s(q, b), chrome: s(p, b), device: s(m, b) || s(n, b) || s(o, b) || s(q, b) || s(p, b) }, this.seven_inch = s(r, b), this.any = this.apple.device || this.android.device || this.windows.device || this.other.device || this.seven_inch, this.phone = this.apple.phone || this.android.phone || this.windows.phone, this.tablet = this.apple.tablet || this.android.tablet || this.windows.tablet, "undefined" == typeof window) return this }, u = function() { var a = new t; return a.Class = t, a }; void 0 !== c && c.exports && "undefined" == typeof window ? c.exports = t : void 0 !== c && c.exports && "undefined" != typeof window ? c.exports = u() : "function" == typeof a && a.amd ? a("isMobile", [], b.isMobile = u()) : b.isMobile = u() }(this) }, {}], 5: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { return a._head ? (a._tail._next = b, b._prev = a._tail, a._tail = b) : (a._head = b, a._tail = b), b._owner = a, b } Object.defineProperty(c, "__esModule", { value: !0 }); var f = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), g = function() { function a(b, c, e) { void 0 === c && (c = !1), d(this, a), this._fn = b, this._once = c, this._thisArg = e, this._next = this._prev = this._owner = null } return f(a, [{ key: "detach", value: function() { return null !== this._owner && (this._owner.detach(this), !0) } }]), a }(), h = function() { function a() { d(this, a), this._head = this._tail = void 0 } return f(a, [{ key: "handlers", value: function() { var a = !(arguments.length <= 0 || void 0 === arguments[0]) && arguments[0], b = this._head; if (a) return !!b; for (var c = []; b;) c.push(b), b = b._next; return c } }, { key: "has", value: function(a) { if (!(a instanceof g)) throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object."); return a._owner === this } }, { key: "dispatch", value: function() { var a = this._head; if (!a) return !1; for (; a;) a._once && this.detach(a), a._fn.apply(a._thisArg, arguments), a = a._next; return !0 } }, { key: "add", value: function(a) { var b = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1]; if ("function" != typeof a) throw new Error("MiniSignal#add(): First arg must be a Function."); return e(this, new g(a, !1, b)) } }, { key: "once", value: function(a) { var b = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1]; if ("function" != typeof a) throw new Error("MiniSignal#once(): First arg must be a Function."); return e(this, new g(a, !0, b)) } }, { key: "detach", value: function(a) { if (!(a instanceof g)) throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object."); return a._owner !== this ? this : (a._prev && (a._prev._next = a._next), a._next && (a._next._prev = a._prev), a === this._head ? (this._head = a._next, null === a._next && (this._tail = null)) : a === this._tail && (this._tail = a._prev, this._tail._next = null), a._owner = null, this) } }, { key: "detachAll", value: function() { var a = this._head; if (!a) return this; for (this._head = this._tail = null; a;) a._owner = null, a = a._next; return this } }]), a }(); h.MiniSignalBinding = g, c.default = h, b.exports = c.default }, {}], 6: [function(a, b, c) { "use strict"; function d(a) { if (null === a || void 0 === a) throw new TypeError("Object.assign cannot be called with null or undefined"); return Object(a) } var e = Object.getOwnPropertySymbols, f = Object.prototype.hasOwnProperty, g = Object.prototype.propertyIsEnumerable; b.exports = function() { try { if (!Object.assign) return !1; var a = new String("abc"); if (a[5] = "de", "5" === Object.getOwnPropertyNames(a)[0]) return !1; for (var b = {}, c = 0; c < 10; c++) b["_" + String.fromCharCode(c)] = c; if ("0123456789" !== Object.getOwnPropertyNames(b).map(function(a) { return b[a] }).join("")) return !1; var d = {}; return "abcdefghijklmnopqrst".split("").forEach(function(a) { d[a] = a }), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, d)).join("") } catch (a) { return !1 } }() ? Object.assign : function(a, b) { for (var c, h, i = d(a), j = 1; j < arguments.length; j++) { c = Object(arguments[j]); for (var k in c) f.call(c, k) && (i[k] = c[k]); if (e) { h = e(c); for (var l = 0; l < h.length; l++) g.call(c, h[l]) && (i[h[l]] = c[h[l]]) } } return i } }, {}], 7: [function(a, b, c) { "use strict"; b.exports = function(a, b) { b = b || {}; for (var c = { key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"], q: { name: "queryKey", parser: /(?:^|&)([^&=]*)=?([^&]*)/g }, parser: { strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/, loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/ } }, d = c.parser[b.strictMode ? "strict" : "loose"].exec(a), e = {}, f = 14; f--;) e[c.key[f]] = d[f] || ""; return e[c.q.name] = {}, e[c.key[12]].replace(c.q.parser, function(a, b, d) { b && (e[c.q.name][b] = d) }), e } }, {}], 8: [function(a, b, c) { (function(a) { function b(a, b) { for (var c = 0, d = a.length - 1; d >= 0; d--) { var e = a[d]; "." === e ? a.splice(d, 1) : ".." === e ? (a.splice(d, 1), c++) : c && (a.splice(d, 1), c--) } if (b) for (; c--; c) a.unshift(".."); return a } function d(a, b) { if (a.filter) return a.filter(b); for (var c = [], d = 0; d < a.length; d++) b(a[d], d, a) && c.push(a[d]); return c } var e = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/, f = function(a) { return e.exec(a).slice(1) }; c.resolve = function() { for (var c = "", e = !1, f = arguments.length - 1; f >= -1 && !e; f--) { var g = f >= 0 ? arguments[f] : a.cwd(); if ("string" != typeof g) throw new TypeError("Arguments to path.resolve must be strings"); g && (c = g + "/" + c, e = "/" === g.charAt(0)) } return c = b(d(c.split("/"), function(a) { return !!a }), !e).join("/"), (e ? "/" : "") + c || "." }, c.normalize = function(a) { var e = c.isAbsolute(a), f = "/" === g(a, -1); return a = b(d(a.split("/"), function(a) { return !!a }), !e).join("/"), a || e || (a = "."), a && f && (a += "/"), (e ? "/" : "") + a }, c.isAbsolute = function(a) { return "/" === a.charAt(0) }, c.join = function() { var a = Array.prototype.slice.call(arguments, 0); return c.normalize(d(a, function(a, b) { if ("string" != typeof a) throw new TypeError("Arguments to path.join must be strings"); return a }).join("/")) }, c.relative = function(a, b) { function d(a) { for (var b = 0; b < a.length && "" === a[b]; b++); for (var c = a.length - 1; c >= 0 && "" === a[c]; c--); return b > c ? [] : a.slice(b, c - b + 1) } a = c.resolve(a).substr(1), b = c.resolve(b).substr(1); for (var e = d(a.split("/")), f = d(b.split("/")), g = Math.min(e.length, f.length), h = g, i = 0; i < g; i++) if (e[i] !== f[i]) { h = i; break } for (var j = [], i = h; i < e.length; i++) j.push(".."); return j = j.concat(f.slice(h)), j.join("/") }, c.sep = "/", c.delimiter = ":", c.dirname = function(a) { var b = f(a), c = b[0], d = b[1]; return c || d ? (d && (d = d.substr(0, d.length - 1)), c + d) : "." }, c.basename = function(a, b) { var c = f(a)[2]; return b && c.substr(-1 * b.length) === b && (c = c.substr(0, c.length - b.length)), c }, c.extname = function(a) { return f(a)[3] }; var g = "b" === "ab".substr(-1) ? function(a, b, c) { return a.substr(b, c) } : function(a, b, c) { return b < 0 && (b = a.length + b), a.substr(b, c) } }).call(this, a("_process")) }, { _process: 26 }], 9: [function(a, b, c) { var d = new ArrayBuffer(0), e = function(a, b, c, e) { this.gl = a, this.buffer = a.createBuffer(), this.type = b || a.ARRAY_BUFFER, this.drawType = e || a.STATIC_DRAW, this.data = d, c && this.upload(c), this._updateID = 0 }; e.prototype.upload = function(a, b, c) { c || this.bind(); var d = this.gl; a = a || this.data, b = b || 0, this.data.byteLength >= a.byteLength ? d.bufferSubData(this.type, b, a) : d.bufferData(this.type, a, this.drawType), this.data = a }, e.prototype.bind = function() { this.gl.bindBuffer(this.type, this.buffer) }, e.createVertexBuffer = function(a, b, c) { return new e(a, a.ARRAY_BUFFER, b, c) }, e.createIndexBuffer = function(a, b, c) { return new e(a, a.ELEMENT_ARRAY_BUFFER, b, c) }, e.create = function(a, b, c, d) { return new e(a, b, c, d) }, e.prototype.destroy = function() { this.gl.deleteBuffer(this.buffer) }, b.exports = e }, {}], 10: [function(a, b, c) { var d = a("./GLTexture"), e = function(a, b, c) { this.gl = a, this.framebuffer = a.createFramebuffer(), this.stencil = null, this.texture = null, this.width = b || 100, this.height = c || 100 }; e.prototype.enableTexture = function(a) { var b = this.gl; this.texture = a || new d(b), this.texture.bind(), this.bind(), b.framebufferTexture2D(b.FRAMEBUFFER, b.COLOR_ATTACHMENT0, b.TEXTURE_2D, this.texture.texture, 0) }, e.prototype.enableStencil = function() { if (!this.stencil) { var a = this.gl; this.stencil = a.createRenderbuffer(), a.bindRenderbuffer(a.RENDERBUFFER, this.stencil), a.framebufferRenderbuffer(a.FRAMEBUFFER, a.DEPTH_STENCIL_ATTACHMENT, a.RENDERBUFFER, this.stencil), a.renderbufferStorage(a.RENDERBUFFER, a.DEPTH_STENCIL, this.width, this.height) } }, e.prototype.clear = function(a, b, c, d) { this.bind(); var e = this.gl; e.clearColor(a, b, c, d), e.clear(e.COLOR_BUFFER_BIT | e.DEPTH_BUFFER_BIT) }, e.prototype.bind = function() { var a = this.gl; a.bindFramebuffer(a.FRAMEBUFFER, this.framebuffer) }, e.prototype.unbind = function() { var a = this.gl; a.bindFramebuffer(a.FRAMEBUFFER, null) }, e.prototype.resize = function(a, b) { var c = this.gl; this.width = a, this.height = b, this.texture && this.texture.uploadData(null, a, b), this.stencil && (c.bindRenderbuffer(c.RENDERBUFFER, this.stencil), c.renderbufferStorage(c.RENDERBUFFER, c.DEPTH_STENCIL, a, b)) }, e.prototype.destroy = function() { var a = this.gl; this.texture && this.texture.destroy(), a.deleteFramebuffer(this.framebuffer), this.gl = null, this.stencil = null, this.texture = null }, e.createRGBA = function(a, b, c, f) { var g = d.fromData(a, null, b, c); g.enableNearestScaling(), g.enableWrapClamp(); var h = new e(a, b, c); return h.enableTexture(g), h.unbind(), h }, e.createFloat32 = function(a, b, c, f) { var g = new d.fromData(a, f, b, c); g.enableNearestScaling(), g.enableWrapClamp(); var h = new e(a, b, c); return h.enableTexture(g), h.unbind(), h }, b.exports = e }, { "./GLTexture": 12 }], 11: [function(a, b, c) { var d = a("./shader/compileProgram"), e = a("./shader/extractAttributes"), f = a("./shader/extractUniforms"), g = a("./shader/setPrecision"), h = a("./shader/generateUniformAccessObject"), i = function(a, b, c, i, j) { this.gl = a, i && (b = g(b, i), c = g(c, i)), this.program = d(a, b, c, j), this.attributes = e(a, this.program), this.uniformData = f(a, this.program), this.uniforms = h(a, this.uniformData) }; i.prototype.bind = function() { return this.gl.useProgram(this.program), this }, i.prototype.destroy = function() { this.attributes = null, this.uniformData = null, this.uniforms = null, this.gl.deleteProgram(this.program) }, b.exports = i }, { "./shader/compileProgram": 17, "./shader/extractAttributes": 19, "./shader/extractUniforms": 20, "./shader/generateUniformAccessObject": 21, "./shader/setPrecision": 25 }], 12: [function(a, b, c) { var d = function(a, b, c, d, e) { this.gl = a, this.texture = a.createTexture(), this.mipmap = !1, this.premultiplyAlpha = !1, this.width = b || -1, this.height = c || -1, this.format = d || a.RGBA, this.type = e || a.UNSIGNED_BYTE }; d.prototype.upload = function(a) { this.bind(); var b = this.gl; b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha); var c = a.videoWidth || a.width, d = a.videoHeight || a.height; d !== this.height || c !== this.width ? b.texImage2D(b.TEXTURE_2D, 0, this.format, this.format, this.type, a) : b.texSubImage2D(b.TEXTURE_2D, 0, 0, 0, this.format, this.type, a), this.width = c, this.height = d }; var e = !1; d.prototype.uploadData = function(a, b, c) { this.bind(); var d = this.gl; if (a instanceof Float32Array) { if (!e) { if (!d.getExtension("OES_texture_float")) throw new Error("floating point textures not available"); e = !0 } this.type = d.FLOAT } else this.type = this.type || d.UNSIGNED_BYTE; d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha), b !== this.width || c !== this.height ? d.texImage2D(d.TEXTURE_2D, 0, this.format, b, c, 0, this.format, this.type, a || null) : d.texSubImage2D(d.TEXTURE_2D, 0, 0, 0, b, c, this.format, this.type, a || null), this.width = b, this.height = c }, d.prototype.bind = function(a) { var b = this.gl; void 0 !== a && b.activeTexture(b.TEXTURE0 + a), b.bindTexture(b.TEXTURE_2D, this.texture) }, d.prototype.unbind = function() { var a = this.gl; a.bindTexture(a.TEXTURE_2D, null) }, d.prototype.minFilter = function(a) { var b = this.gl; this.bind(), this.mipmap ? b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, a ? b.LINEAR_MIPMAP_LINEAR : b.NEAREST_MIPMAP_NEAREST) : b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, a ? b.LINEAR : b.NEAREST) }, d.prototype.magFilter = function(a) { var b = this.gl; this.bind(), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, a ? b.LINEAR : b.NEAREST) }, d.prototype.enableMipmap = function() { var a = this.gl; this.bind(), this.mipmap = !0, a.generateMipmap(a.TEXTURE_2D) }, d.prototype.enableLinearScaling = function() { this.minFilter(!0), this.magFilter(!0) }, d.prototype.enableNearestScaling = function() { this.minFilter(!1), this.magFilter(!1) }, d.prototype.enableWrapClamp = function() { var a = this.gl; this.bind(), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE) }, d.prototype.enableWrapRepeat = function() { var a = this.gl; this.bind(), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.REPEAT), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.REPEAT) }, d.prototype.enableWrapMirrorRepeat = function() { var a = this.gl; this.bind(), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.MIRRORED_REPEAT), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.MIRRORED_REPEAT) }, d.prototype.destroy = function() { this.gl.deleteTexture(this.texture) }, d.fromSource = function(a, b, c) { var e = new d(a); return e.premultiplyAlpha = c || !1, e.upload(b), e }, d.fromData = function(a, b, c, e) { var f = new d(a); return f.uploadData(b, c, e), f }, b.exports = d }, {}], 13: [function(a, b, c) { function d(a, b) { if (this.nativeVaoExtension = null, d.FORCE_NATIVE || (this.nativeVaoExtension = a.getExtension("OES_vertex_array_object") || a.getExtension("MOZ_OES_vertex_array_object") || a.getExtension("WEBKIT_OES_vertex_array_object")), this.nativeState = b, this.nativeVaoExtension) { this.nativeVao = this.nativeVaoExtension.createVertexArrayOES(); var c = a.getParameter(a.MAX_VERTEX_ATTRIBS); this.nativeState = { tempAttribState: new Array(c), attribState: new Array(c) } } this.gl = a, this.attributes = [], this.indexBuffer = null, this.dirty = !1 } var e = a("./setVertexAttribArrays"); d.prototype.constructor = d, b.exports = d, d.FORCE_NATIVE = !1, d.prototype.bind = function() { if (this.nativeVao) { if (this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao), this.dirty) return this.dirty = !1, this.activate(), this; this.indexBuffer && this.indexBuffer.bind() } else this.activate(); return this }, d.prototype.unbind = function() { return this.nativeVao && this.nativeVaoExtension.bindVertexArrayOES(null), this }, d.prototype.activate = function() { for (var a = this.gl, b = null, c = 0; c < this.attributes.length; c++) { var d = this.attributes[c]; b !== d.buffer && (d.buffer.bind(), b = d.buffer), a.vertexAttribPointer(d.attribute.location, d.attribute.size, d.type || a.FLOAT, d.normalized || !1, d.stride || 0, d.start || 0) } return e(a, this.attributes, this.nativeState), this.indexBuffer && this.indexBuffer.bind(), this }, d.prototype.addAttribute = function(a, b, c, d, e, f) { return this.attributes.push({ buffer: a, attribute: b, location: b.location, type: c || this.gl.FLOAT, normalized: d || !1, stride: e || 0, start: f || 0 }), this.dirty = !0, this }, d.prototype.addIndex = function(a) { return this.indexBuffer = a, this.dirty = !0, this }, d.prototype.clear = function() { return this.nativeVao && this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao), this.attributes.length = 0, this.indexBuffer = null, this }, d.prototype.draw = function(a, b, c) { var d = this.gl; return this.indexBuffer ? d.drawElements(a, b || this.indexBuffer.data.length, d.UNSIGNED_SHORT, 2 * (c || 0)) : d.drawArrays(a, c, b || this.getSize()), this }, d.prototype.destroy = function() { this.gl = null, this.indexBuffer = null, this.attributes = null, this.nativeState = null, this.nativeVao && this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao), this.nativeVaoExtension = null, this.nativeVao = null }, d.prototype.getSize = function() { var a = this.attributes[0]; return a.buffer.data.length / (a.stride / 4 || a.attribute.size) } }, { "./setVertexAttribArrays": 16 }], 14: [function(a, b, c) { var d = function(a, b) { var c = a.getContext("webgl", b) || a.getContext("experimental-webgl", b); if (!c) throw new Error("This browser does not support webGL. Try using the canvas renderer"); return c }; b.exports = d }, {}], 15: [function(a, b, c) { var d = { createContext: a("./createContext"), setVertexAttribArrays: a("./setVertexAttribArrays"), GLBuffer: a("./GLBuffer"), GLFramebuffer: a("./GLFramebuffer"), GLShader: a("./GLShader"), GLTexture: a("./GLTexture"), VertexArrayObject: a("./VertexArrayObject"), shader: a("./shader") }; void 0 !== b && b.exports && (b.exports = d), "undefined" != typeof window && (window.PIXI = window.PIXI || {}, window.PIXI.glCore = d) }, { "./GLBuffer": 9, "./GLFramebuffer": 10, "./GLShader": 11, "./GLTexture": 12, "./VertexArrayObject": 13, "./createContext": 14, "./setVertexAttribArrays": 16, "./shader": 22 }], 16: [function(a, b, c) { var d = function(a, b, c) { var d; if (c) { var e = c.tempAttribState, f = c.attribState; for (d = 0; d < e.length; d++) e[d] = !1; for (d = 0; d < b.length; d++) e[b[d].attribute.location] = !0; for (d = 0; d < f.length; d++) f[d] !== e[d] && (f[d] = e[d], c.attribState[d] ? a.enableVertexAttribArray(d) : a.disableVertexAttribArray(d)) } else for (d = 0; d < b.length; d++) { var g = b[d]; a.enableVertexAttribArray(g.attribute.location) } }; b.exports = d }, {}], 17: [function(a, b, c) { var d = function(a, b, c, d) { var f = e(a, a.VERTEX_SHADER, b), g = e(a, a.FRAGMENT_SHADER, c), h = a.createProgram(); if (a.attachShader(h, f), a.attachShader(h, g), d) for (var i in d) a.bindAttribLocation(h, d[i], i); return a.linkProgram(h), a.getProgramParameter(h, a.LINK_STATUS) || (console.error("Pixi.js Error: Could not initialize shader."), console.error("gl.VALIDATE_STATUS", a.getProgramParameter(h, a.VALIDATE_STATUS)), console.error("gl.getError()", a.getError()), "" !== a.getProgramInfoLog(h) && console.warn("Pixi.js Warning: gl.getProgramInfoLog()", a.getProgramInfoLog(h)), a.deleteProgram(h), h = null), a.deleteShader(f), a.deleteShader(g), h }, e = function(a, b, c) { var d = a.createShader(b); return a.shaderSource(d, c), a.compileShader(d), a.getShaderParameter(d, a.COMPILE_STATUS) ? d : (console.log(a.getShaderInfoLog(d)), null) }; b.exports = d }, {}], 18: [function(a, b, c) { var d = function(a, b) { switch (a) { case "float": return 0; case "vec2": return new Float32Array(2 * b); case "vec3": return new Float32Array(3 * b); case "vec4": return new Float32Array(4 * b); case "int": case "sampler2D": return 0; case "ivec2": return new Int32Array(2 * b); case "ivec3": return new Int32Array(3 * b); case "ivec4": return new Int32Array(4 * b); case "bool": return !1; case "bvec2": return e(2 * b); case "bvec3": return e(3 * b); case "bvec4": return e(4 * b); case "mat2": return new Float32Array([1, 0, 0, 1]); case "mat3": return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]); case "mat4": return new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]) } }, e = function(a) { for (var b = new Array(a), c = 0; c < b.length; c++) b[c] = !1; return b }; b.exports = d }, {}], 19: [function(a, b, c) { var d = a("./mapType"), e = a("./mapSize"), f = function(a, b) { for (var c = {}, f = a.getProgramParameter(b, a.ACTIVE_ATTRIBUTES), h = 0; h < f; h++) { var i = a.getActiveAttrib(b, h), j = d(a, i.type); c[i.name] = { type: j, size: e(j), location: a.getAttribLocation(b, i.name), pointer: g } } return c }, g = function(a, b, c, d) { gl.vertexAttribPointer(this.location, this.size, a || gl.FLOAT, b || !1, c || 0, d || 0) }; b.exports = f }, { "./mapSize": 23, "./mapType": 24 }], 20: [function(a, b, c) { var d = a("./mapType"), e = a("./defaultValue"), f = function(a, b) { for (var c = {}, f = a.getProgramParameter(b, a.ACTIVE_UNIFORMS), g = 0; g < f; g++) { var h = a.getActiveUniform(b, g), i = h.name.replace(/\[.*?\]/, ""), j = d(a, h.type); c[i] = { type: j, size: h.size, location: a.getUniformLocation(b, i), value: e(j, h.size) } } return c }; b.exports = f }, { "./defaultValue": 18, "./mapType": 24 }], 21: [function(a, b, c) { function d(a, b) { return function(c) { this.data[a].value = c; var d = this.data[a].location; 1 === b.size ? h[b.type](this.gl, d, c) : i[b.type](this.gl, d, c) } } function e(a, b) { for (var c = b, d = 0; d < a.length - 1; d++) { var e = c[a[d]] || { data: {} }; c[a[d]] = e, c = e } return c } var f = function(a, b) { var c = { data: {} }; c.gl = a; for (var f = Object.keys(b), h = 0; h < f.length; h++) { var i = f[h], j = i.split("."), k = j[j.length - 1], l = e(j, c), m = b[i]; l.data[k] = m, l.gl = a, Object.defineProperty(l, k, { get: g(k), set: d(k, m) }) } return c }, g = function(a) { return function() { return this.data[a].value } }, h = { float: function(a, b, c) { a.uniform1f(b, c) }, vec2: function(a, b, c) { a.uniform2f(b, c[0], c[1]) }, vec3: function(a, b, c) { a.uniform3f(b, c[0], c[1], c[2]) }, vec4: function(a, b, c) { a.uniform4f(b, c[0], c[1], c[2], c[3]) }, int: function(a, b, c) { a.uniform1i(b, c) }, ivec2: function(a, b, c) { a.uniform2i(b, c[0], c[1]) }, ivec3: function(a, b, c) { a.uniform3i(b, c[0], c[1], c[2]) }, ivec4: function(a, b, c) { a.uniform4i(b, c[0], c[1], c[2], c[3]) }, bool: function(a, b, c) { a.uniform1i(b, c) }, bvec2: function(a, b, c) { a.uniform2i(b, c[0], c[1]) }, bvec3: function(a, b, c) { a.uniform3i(b, c[0], c[1], c[2]) }, bvec4: function(a, b, c) { a.uniform4i(b, c[0], c[1], c[2], c[3]) }, mat2: function(a, b, c) { a.uniformMatrix2fv(b, !1, c) }, mat3: function(a, b, c) { a.uniformMatrix3fv(b, !1, c) }, mat4: function(a, b, c) { a.uniformMatrix4fv(b, !1, c) }, sampler2D: function(a, b, c) { a.uniform1i(b, c) } }, i = { float: function(a, b, c) { a.uniform1fv(b, c) }, vec2: function(a, b, c) { a.uniform2fv(b, c) }, vec3: function(a, b, c) { a.uniform3fv(b, c) }, vec4: function(a, b, c) { a.uniform4fv(b, c) }, int: function(a, b, c) { a.uniform1iv(b, c) }, ivec2: function(a, b, c) { a.uniform2iv(b, c) }, ivec3: function(a, b, c) { a.uniform3iv(b, c) }, ivec4: function(a, b, c) { a.uniform4iv(b, c) }, bool: function(a, b, c) { a.uniform1iv(b, c) }, bvec2: function(a, b, c) { a.uniform2iv(b, c) }, bvec3: function(a, b, c) { a.uniform3iv(b, c) }, bvec4: function(a, b, c) { a.uniform4iv(b, c) }, sampler2D: function(a, b, c) { a.uniform1iv(b, c) } }; b.exports = f }, {}], 22: [function(a, b, c) { b.exports = { compileProgram: a("./compileProgram"), defaultValue: a("./defaultValue"), extractAttributes: a("./extractAttributes"), extractUniforms: a("./extractUniforms"), generateUniformAccessObject: a("./generateUniformAccessObject"), setPrecision: a("./setPrecision"), mapSize: a("./mapSize"), mapType: a("./mapType") } }, { "./compileProgram": 17, "./defaultValue": 18, "./extractAttributes": 19, "./extractUniforms": 20, "./generateUniformAccessObject": 21, "./mapSize": 23, "./mapType": 24, "./setPrecision": 25 }], 23: [function(a, b, c) { var d = function(a) { return e[a] }, e = { float: 1, vec2: 2, vec3: 3, vec4: 4, int: 1, ivec2: 2, ivec3: 3, ivec4: 4, bool: 1, bvec2: 2, bvec3: 3, bvec4: 4, mat2: 4, mat3: 9, mat4: 16, sampler2D: 1 }; b.exports = d }, {}], 24: [function(a, b, c) { var d = function(a, b) { if (!e) { var c = Object.keys(f); e = {}; for (var d = 0; d < c.length; ++d) { var g = c[d]; e[a[g]] = f[g] } } return e[b] }, e = null, f = { FLOAT: "float", FLOAT_VEC2: "vec2", FLOAT_VEC3: "vec3", FLOAT_VEC4: "vec4", INT: "int", INT_VEC2: "ivec2", INT_VEC3: "ivec3", INT_VEC4: "ivec4", BOOL: "bool", BOOL_VEC2: "bvec2", BOOL_VEC3: "bvec3", BOOL_VEC4: "bvec4", FLOAT_MAT2: "mat2", FLOAT_MAT3: "mat3", FLOAT_MAT4: "mat4", SAMPLER_2D: "sampler2D" }; b.exports = d }, {}], 25: [function(a, b, c) { var d = function(a, b) { return "precision" !== a.substring(0, 9) ? "precision " + b + " float;\n" + a : a }; b.exports = d }, {}], 26: [function(a, b, c) { function d() { throw new Error("setTimeout has not been defined") } function e() { throw new Error("clearTimeout has not been defined") } function f(a) { if (l === setTimeout) return setTimeout(a, 0); if ((l === d || !l) && setTimeout) return l = setTimeout, setTimeout(a, 0); try { return l(a, 0) } catch (b) { try { return l.call(null, a, 0) } catch (b) { return l.call(this, a, 0) } } } function g(a) { if (m === clearTimeout) return clearTimeout(a); if ((m === e || !m) && clearTimeout) return m = clearTimeout, clearTimeout(a); try { return m(a) } catch (b) { try { return m.call(null, a) } catch (b) { return m.call(this, a) } } } function h() { q && o && (q = !1, o.length ? p = o.concat(p) : r = -1, p.length && i()) } function i() { if (!q) { var a = f(h); q = !0; for (var b = p.length; b;) { for (o = p, p = []; ++r < b;) o && o[r].run(); r = -1, b = p.length } o = null, q = !1, g(a) } } function j(a, b) { this.fun = a, this.array = b } function k() {} var l, m, n = b.exports = {}; ! function() { try { l = "function" == typeof setTimeout ? setTimeout : d } catch (a) { l = d } try { m = "function" == typeof clearTimeout ? clearTimeout : e } catch (a) { m = e } }(); var o, p = [], q = !1, r = -1; n.nextTick = function(a) { var b = new Array(arguments.length - 1); if (arguments.length > 1) for (var c = 1; c < arguments.length; c++) b[c - 1] = arguments[c]; p.push(new j(a, b)), 1 !== p.length || q || f(i) }, j.prototype.run = function() { this.fun.apply(null, this.array) }, n.title = "browser", n.browser = !0, n.env = {}, n.argv = [], n.version = "", n.versions = {}, n.on = k, n.addListener = k, n.once = k, n.off = k, n.removeListener = k, n.removeAllListeners = k, n.emit = k, n.prependListener = k, n.prependOnceListener = k, n.listeners = function(a) { return [] }, n.binding = function(a) { throw new Error("process.binding is not supported") }, n.cwd = function() { return "/" }, n.chdir = function(a) { throw new Error("process.chdir is not supported") }, n.umask = function() { return 0 } }, {}], 27: [function(b, c, d) { (function(b) { ! function(e) { function f(a) { throw new RangeError(I[a]) } function g(a, b) { for (var c = a.length, d = []; c--;) d[c] = b(a[c]); return d } function h(a, b) { var c = a.split("@"), d = ""; return c.length > 1 && (d = c[0] + "@", a = c[1]), a = a.replace(H, "."), d + g(a.split("."), b).join(".") } function i(a) { for (var b, c, d = [], e = 0, f = a.length; e < f;) b = a.charCodeAt(e++), b >= 55296 && b <= 56319 && e < f ? (c = a.charCodeAt(e++), 56320 == (64512 & c) ? d.push(((1023 & b) << 10) + (1023 & c) + 65536) : (d.push(b), e--)) : d.push(b); return d } function j(a) { return g(a, function(a) { var b = ""; return a > 65535 && (a -= 65536, b += L(a >>> 10 & 1023 | 55296), a = 56320 | 1023 & a), b += L(a) }).join("") } function k(a) { return a - 48 < 10 ? a - 22 : a - 65 < 26 ? a - 65 : a - 97 < 26 ? a - 97 : x } function l(a, b) { return a + 22 + 75 * (a < 26) - ((0 != b) << 5) } function m(a, b, c) { var d = 0; for (a = c ? K(a / B) : a >> 1, a += K(a / b); a > J * z >> 1; d += x) a = K(a / J); return K(d + (J + 1) * a / (a + A)) } function n(a) { var b, c, d, e, g, h, i, l, n, o, p = [], q = a.length, r = 0, s = D, t = C; for (c = a.lastIndexOf(E), c < 0 && (c = 0), d = 0; d < c; ++d) a.charCodeAt(d) >= 128 && f("not-basic"), p.push(a.charCodeAt(d)); for (e = c > 0 ? c + 1 : 0; e < q;) { for (g = r, h = 1, i = x; e >= q && f("invalid-input"), l = k(a.charCodeAt(e++)), (l >= x || l > K((w - r) / h)) && f("overflow"), r += l * h, n = i <= t ? y : i >= t + z ? z : i - t, !(l < n); i += x) o = x - n, h > K(w / o) && f("overflow"), h *= o; b = p.length + 1, t = m(r - g, b, 0 == g), K(r / b) > w - s && f("overflow"), s += K(r / b), r %= b, p.splice(r++, 0, s) } return j(p) } function o(a) { var b, c, d, e, g, h, j, k, n, o, p, q, r, s, t, u = []; for (a = i(a), q = a.length, b = D, c = 0, g = C, h = 0; h < q; ++h)(p = a[h]) < 128 && u.push(L(p)); for (d = e = u.length, e && u.push(E); d < q;) { for (j = w, h = 0; h < q; ++h)(p = a[h]) >= b && p < j && (j = p); for (r = d + 1, j - b > K((w - c) / r) && f("overflow"), c += (j - b) * r, b = j, h = 0; h < q; ++h) if (p = a[h], p < b && ++c > w && f("overflow"), p == b) { for (k = c, n = x; o = n <= g ? y : n >= g + z ? z : n - g, !(k < o); n += x) t = k - o, s = x - o, u.push(L(l(o + t % s, 0))), k = K(t / s); u.push(L(l(k, 0))), g = m(c, r, d == e), c = 0, ++d }++ c, ++b } return u.join("") } function p(a) { return h(a, function(a) { return F.test(a) ? n(a.slice(4).toLowerCase()) : a }) } function q(a) { return h(a, function(a) { return G.test(a) ? "xn--" + o(a) : a }) } var r = "object" == typeof d && d && !d.nodeType && d, s = "object" == typeof c && c && !c.nodeType && c, t = "object" == typeof b && b; t.global !== t && t.window !== t && t.self !== t || (e = t); var u, v, w = 2147483647, x = 36, y = 1, z = 26, A = 38, B = 700, C = 72, D = 128, E = "-", F = /^xn--/, G = /[^\x20-\x7E]/, H = /[\x2E\u3002\uFF0E\uFF61]/g, I = { overflow: "Overflow: input needs wider integers to process", "not-basic": "Illegal input >= 0x80 (not a basic code point)", "invalid-input": "Invalid input" }, J = x - y, K = Math.floor, L = String.fromCharCode; if (u = { version: "1.4.1", ucs2: { decode: i, encode: j }, decode: n, encode: o, toASCII: q, toUnicode: p }, "function" == typeof a && "object" == typeof a.amd && a.amd) a("punycode", function() { return u }); else if (r && s) if (c.exports == r) s.exports = u; else for (v in u) u.hasOwnProperty(v) && (r[v] = u[v]); else e.punycode = u }(this) }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}], 28: [function(a, b, c) { "use strict"; function d(a, b) { return Object.prototype.hasOwnProperty.call(a, b) } b.exports = function(a, b, c, f) { b = b || "&", c = c || "="; var g = {}; if ("string" != typeof a || 0 === a.length) return g; var h = /\+/g; a = a.split(b); var i = 1e3; f && "number" == typeof f.maxKeys && (i = f.maxKeys); var j = a.length; i > 0 && j > i && (j = i); for (var k = 0; k < j; ++k) { var l, m, n, o, p = a[k].replace(h, "%20"), q = p.indexOf(c); q >= 0 ? (l = p.substr(0, q), m = p.substr(q + 1)) : (l = p, m = ""), n = decodeURIComponent(l), o = decodeURIComponent(m), d(g, n) ? e(g[n]) ? g[n].push(o) : g[n] = [g[n], o] : g[n] = o } return g }; var e = Array.isArray || function(a) { return "[object Array]" === Object.prototype.toString.call(a) } }, {}], 29: [function(a, b, c) { "use strict"; function d(a, b) { if (a.map) return a.map(b); for (var c = [], d = 0; d < a.length; d++) c.push(b(a[d], d)); return c } var e = function(a) { switch (typeof a) { case "string": return a; case "boolean": return a ? "true" : "false"; case "number": return isFinite(a) ? a : ""; default: return "" } }; b.exports = function(a, b, c, h) { return b = b || "&", c = c || "=", null === a && (a = void 0), "object" == typeof a ? d(g(a), function(g) { var h = encodeURIComponent(e(g)) + c; return f(a[g]) ? d(a[g], function(a) { return h + encodeURIComponent(e(a)) }).join(b) : h + encodeURIComponent(e(a[g])) }).join(b) : h ? encodeURIComponent(e(h)) + c + encodeURIComponent(e(a)) : "" }; var f = Array.isArray || function(a) { return "[object Array]" === Object.prototype.toString.call(a) }, g = Object.keys || function(a) { var b = []; for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && b.push(c); return b } }, {}], 30: [function(a, b, c) { "use strict"; c.decode = c.parse = a("./decode"), c.encode = c.stringify = a("./encode") }, { "./decode": 28, "./encode": 29 }], 31: [function(a, b, c) { "use strict"; b.exports = function(a, b, c) { var d, e = a.length; if (!(b >= e || 0 === c)) { c = b + c > e ? e - b : c; var f = e - c; for (d = b; d < f; ++d) a[d] = a[d + c]; a.length = f } } }, {}], 32: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var f = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) { return typeof a } : function(a) { return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a }, g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("mini-signals"), i = d(h), j = a("parse-uri"), k = d(j), l = a("./async"), m = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(l), n = a("./Resource"), o = d(n), p = /(#[\w-]+)?$/, q = function() { function a() { var b = this, c = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "", d = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10; e(this, a), this.baseUrl = c, this.progress = 0, this.loading = !1, this.defaultQueryString = "", this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(a, c) { return b._loadResource(a, c) }, this._queue = m.queue(this._boundLoadResource, d), this._queue.pause(), this.resources = {}, this.onProgress = new i.default, this.onError = new i.default, this.onLoad = new i.default, this.onStart = new i.default, this.onComplete = new i.default } return a.prototype.add = function(a, b, c, d) { if (Array.isArray(a)) { for (var e = 0; e < a.length; ++e) this.add(a[e]); return this } if ("object" === (void 0 === a ? "undefined" : f(a)) && (d = b || a.callback || a.onComplete, c = a, b = a.url, a = a.name || a.key || a.url), "string" != typeof b && (d = c, c = b, b = a), "string" != typeof b) throw new Error("No url passed to add resource to loader."); if ("function" == typeof c && (d = c, c = null), this.loading && (!c || !c.parentResource)) throw new Error("Cannot add resources while the loader is running."); if (this.resources[a]) throw new Error('Resource named "' + a + '" already exists.'); if (b = this._prepareUrl(b), this.resources[a] = new o.default(a, b, c), "function" == typeof d && this.resources[a].onAfterMiddleware.once(d), this.loading) { for (var g = c.parentResource, h = [], i = 0; i < g.children.length; ++i) g.children[i].isComplete || h.push(g.children[i]); var j = g.progressChunk * (h.length + 1), k = j / (h.length + 2); g.children.push(this.resources[a]), g.progressChunk = k; for (var l = 0; l < h.length; ++l) h[l].progressChunk = k; this.resources[a].progressChunk = k } return this._queue.push(this.resources[a]), this }, a.prototype.pre = function(a) { return this._beforeMiddleware.push(a), this }, a.prototype.use = function(a) { return this._afterMiddleware.push(a), this }, a.prototype.reset = function() { this.progress = 0, this.loading = !1, this._queue.kill(), this._queue.pause(); for (var a in this.resources) { var b = this.resources[a]; b._onLoadBinding && b._onLoadBinding.detach(), b.isLoading && b.abort() } return this.resources = {}, this }, a.prototype.load = function(a) { if ("function" == typeof a && this.onComplete.once(a), this.loading) return this; if (this._queue.idle()) this._onStart(), this._onComplete(); else { for (var b = this._queue._tasks.length, c = 100 / b, d = 0; d < this._queue._tasks.length; ++d) this._queue._tasks[d].data.progressChunk = c; this._onStart(), this._queue.resume() } return this }, a.prototype._prepareUrl = function(a) { var b = (0, k.default)(a, { strictMode: !0 }), c = void 0; if (c = b.protocol || !b.path || 0 === a.indexOf("//") ? a : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && "/" !== a.charAt(0) ? this.baseUrl + "/" + a : this.baseUrl + a, this.defaultQueryString) { var d = p.exec(c)[0]; c = c.substr(0, c.length - d.length), -1 !== c.indexOf("?") ? c += "&" + this.defaultQueryString : c += "?" + this.defaultQueryString, c += d } return c }, a.prototype._loadResource = function(a, b) { var c = this; a._dequeue = b, m.eachSeries(this._beforeMiddleware, function(b, d) { b.call(c, a, function() { d(a.isComplete ? {} : null) }) }, function() { a.isComplete ? c._onLoad(a) : (a._onLoadBinding = a.onComplete.once(c._onLoad, c), a.load()) }, !0) }, a.prototype._onStart = function() { this.progress = 0, this.loading = !0, this.onStart.dispatch(this) }, a.prototype._onComplete = function() { this.progress = 100, this.loading = !1, this.onComplete.dispatch(this, this.resources) }, a.prototype._onLoad = function(a) { var b = this; a._onLoadBinding = null, this._resourcesParsing.push(a), a._dequeue(), m.eachSeries(this._afterMiddleware, function(c, d) { c.call(b, a, d) }, function() { a.onAfterMiddleware.dispatch(a), b.progress += a.progressChunk, b.onProgress.dispatch(b, a), a.error ? b.onError.dispatch(a.error, b, a) : b.onLoad.dispatch(b, a), b._resourcesParsing.splice(b._resourcesParsing.indexOf(a), 1), b._queue.idle() && 0 === b._resourcesParsing.length && b._onComplete() }, !0) }, g(a, [{ key: "concurrency", get: function() { return this._queue.concurrency }, set: function(a) { this._queue.concurrency = a } }]), a }(); c.default = q }, { "./Resource": 33, "./async": 34, "mini-signals": 5, "parse-uri": 7 }], 33: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f() {} function g(a, b, c) { b && 0 === b.indexOf(".") && (b = b.substring(1)), b && (a[b] = c) } function h(a) { return a.toString().replace("object ", "") } c.__esModule = !0; var i = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), j = a("parse-uri"), k = d(j), l = a("mini-signals"), m = d(l), n = !(!window.XDomainRequest || "withCredentials" in new XMLHttpRequest), o = null, p = function() { function a(b, c, d) { if (e(this, a), "string" != typeof b || "string" != typeof c) throw new Error("Both name and url are required for constructing a resource."); d = d || {}, this._flags = 0, this._setFlag(a.STATUS_FLAGS.DATA_URL, 0 === c.indexOf("data:")), this.name = b, this.url = c, this.extension = this._getExtension(), this.data = null, this.crossOrigin = !0 === d.crossOrigin ? "anonymous" : d.crossOrigin, this.loadType = d.loadType || this._determineLoadType(), this.xhrType = d.xhrType, this.metadata = d.metadata || {}, this.error = null, this.xhr = null, this.children = [], this.type = a.TYPE.UNKNOWN, this.progressChunk = 0, this._dequeue = f, this._onLoadBinding = null, this._boundComplete = this.complete.bind(this), this._boundOnError = this._onError.bind(this), this._boundOnProgress = this._onProgress.bind(this), this._boundXhrOnError = this._xhrOnError.bind(this), this._boundXhrOnAbort = this._xhrOnAbort.bind(this), this._boundXhrOnLoad = this._xhrOnLoad.bind(this), this._boundXdrOnTimeout = this._xdrOnTimeout.bind(this), this.onStart = new m.default, this.onProgress = new m.default, this.onComplete = new m.default, this.onAfterMiddleware = new m.default } return a.setExtensionLoadType = function(b, c) { g(a._loadTypeMap, b, c) }, a.setExtensionXhrType = function(b, c) { g(a._xhrTypeMap, b, c) }, a.prototype.complete = function() { if (this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError, !1), this.data.removeEventListener("load", this._boundComplete, !1), this.data.removeEventListener("progress", this._boundOnProgress, !1), this.data.removeEventListener("canplaythrough", this._boundComplete, !1)), this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError, !1), this.xhr.removeEventListener("abort", this._boundXhrOnAbort, !1), this.xhr.removeEventListener("progress", this._boundOnProgress, !1), this.xhr.removeEventListener("load", this._boundXhrOnLoad, !1)) : (this.xhr.onerror = null, this.xhr.ontimeout = null, this.xhr.onprogress = null, this.xhr.onload = null)), this.isComplete) throw new Error("Complete called again for an already completed resource."); this._setFlag(a.STATUS_FLAGS.COMPLETE, !0), this._setFlag(a.STATUS_FLAGS.LOADING, !1), this.onComplete.dispatch(this) }, a.prototype.abort = function(b) { if (!this.error) { if (this.error = new Error(b), this.xhr) this.xhr.abort(); else if (this.xdr) this.xdr.abort(); else if (this.data) if (this.data.src) this.data.src = a.EMPTY_GIF; else for (; this.data.firstChild;) this.data.removeChild(this.data.firstChild); this.complete() } }, a.prototype.load = function(b) { var c = this; if (!this.isLoading) { if (this.isComplete) return void(b && setTimeout(function() { return b(c) }, 1)); switch (b && this.onComplete.once(b), this._setFlag(a.STATUS_FLAGS.LOADING, !0), this.onStart.dispatch(this), !1 !== this.crossOrigin && "string" == typeof this.crossOrigin || (this.crossOrigin = this._determineCrossOrigin(this.url)), this.loadType) { case a.LOAD_TYPE.IMAGE: this.type = a.TYPE.IMAGE, this._loadElement("image"); break; case a.LOAD_TYPE.AUDIO: this.type = a.TYPE.AUDIO, this._loadSourceElement("audio"); break; case a.LOAD_TYPE.VIDEO: this.type = a.TYPE.VIDEO, this._loadSourceElement("video"); break; case a.LOAD_TYPE.XHR: default: n && this.crossOrigin ? this._loadXdr() : this._loadXhr() } } }, a.prototype._hasFlag = function(a) { return !!(this._flags & a) }, a.prototype._setFlag = function(a, b) { this._flags = b ? this._flags | a : this._flags & ~a }, a.prototype._loadElement = function(a) { this.metadata.loadElement ? this.data = this.metadata.loadElement : "image" === a && void 0 !== window.Image ? this.data = new Image : this.data = document.createElement(a), this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), this.metadata.skipSource || (this.data.src = this.url), this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1) }, a.prototype._loadSourceElement = function(a) { if (this.metadata.loadElement ? this.data = this.metadata.loadElement : "audio" === a && void 0 !== window.Audio ? this.data = new Audio : this.data = document.createElement(a), null === this.data) return void this.abort("Unsupported element: " + a); if (!this.metadata.skipSource) if (navigator.isCocoonJS) this.data.src = Array.isArray(this.url) ? this.url[0] : this.url; else if (Array.isArray(this.url)) for (var b = this.metadata.mimeType, c = 0; c < this.url.length; ++c) this.data.appendChild(this._createSource(a, this.url[c], Array.isArray(b) ? b[c] : b)); else { var d = this.metadata.mimeType; this.data.appendChild(this._createSource(a, this.url, Array.isArray(d) ? d[0] : d)) } this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.data.addEventListener("canplaythrough", this._boundComplete, !1), this.data.load() }, a.prototype._loadXhr = function() { "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType()); var b = this.xhr = new XMLHttpRequest; b.open("GET", this.url, !0), this.xhrType === a.XHR_RESPONSE_TYPE.JSON || this.xhrType === a.XHR_RESPONSE_TYPE.DOCUMENT ? b.responseType = a.XHR_RESPONSE_TYPE.TEXT : b.responseType = this.xhrType, b.addEventListener("error", this._boundXhrOnError, !1), b.addEventListener("abort", this._boundXhrOnAbort, !1), b.addEventListener("progress", this._boundOnProgress, !1), b.addEventListener("load", this._boundXhrOnLoad, !1), b.send() }, a.prototype._loadXdr = function() { "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType()); var a = this.xhr = new XDomainRequest; a.timeout = 5e3, a.onerror = this._boundXhrOnError, a.ontimeout = this._boundXdrOnTimeout, a.onprogress = this._boundOnProgress, a.onload = this._boundXhrOnLoad, a.open("GET", this.url, !0), setTimeout(function() { return a.send() }, 1) }, a.prototype._createSource = function(a, b, c) { c || (c = a + "/" + this._getExtension(b)); var d = document.createElement("source"); return d.src = b, d.type = c, d }, a.prototype._onError = function(a) { this.abort("Failed to load element using: " + a.target.nodeName) }, a.prototype._onProgress = function(a) { a && a.lengthComputable && this.onProgress.dispatch(this, a.loaded / a.total) }, a.prototype._xhrOnError = function() { var a = this.xhr; this.abort(h(a) + " Request failed. Status: " + a.status + ', text: "' + a.statusText + '"') }, a.prototype._xhrOnAbort = function() { this.abort(h(this.xhr) + " Request was aborted by the user.") }, a.prototype._xdrOnTimeout = function() { this.abort(h(this.xhr) + " Request timed out.") }, a.prototype._xhrOnLoad = function() { var b = this.xhr, c = "", d = void 0 === b.status ? 200 : b.status; if ("" !== b.responseType && "text" !== b.responseType && void 0 !== b.responseType || (c = b.responseText), 0 === d && (c.length > 0 || b.responseType === a.XHR_RESPONSE_TYPE.BUFFER) ? d = 200 : 1223 === d && (d = 204), 2 != (d / 100 | 0)) return void this.abort("[" + b.status + "] " + b.statusText + ": " + b.responseURL); if (this.xhrType === a.XHR_RESPONSE_TYPE.TEXT) this.data = c, this.type = a.TYPE.TEXT; else if (this.xhrType === a.XHR_RESPONSE_TYPE.JSON) try { this.data = JSON.parse(c), this.type = a.TYPE.JSON } catch (a) { return void this.abort("Error trying to parse loaded json: " + a) } else if (this.xhrType === a.XHR_RESPONSE_TYPE.DOCUMENT) try { if (window.DOMParser) { var e = new DOMParser; this.data = e.parseFromString(c, "text/xml") } else { var f = document.createElement("div"); f.innerHTML = c, this.data = f } this.type = a.TYPE.XML } catch (a) { return void this.abort("Error trying to parse loaded xml: " + a) } else this.data = b.response || c; this.complete() }, a.prototype._determineCrossOrigin = function(a, b) { if (0 === a.indexOf("data:")) return ""; b = b || window.location, o || (o = document.createElement("a")), o.href = a, a = (0, k.default)(o.href, { strictMode: !0 }); var c = !a.port && "" === b.port || a.port === b.port, d = a.protocol ? a.protocol + ":" : ""; return a.host === b.hostname && c && d === b.protocol ? "" : "anonymous" }, a.prototype._determineXhrType = function() { return a._xhrTypeMap[this.extension] || a.XHR_RESPONSE_TYPE.TEXT }, a.prototype._determineLoadType = function() { return a._loadTypeMap[this.extension] || a.LOAD_TYPE.XHR }, a.prototype._getExtension = function() { var a = this.url, b = ""; if (this.isDataUrl) { var c = a.indexOf("/"); b = a.substring(c + 1, a.indexOf(";", c)) } else { var d = a.indexOf("?"), e = a.indexOf("#"), f = Math.min(d > -1 ? d : a.length, e > -1 ? e : a.length); a = a.substring(0, f), b = a.substring(a.lastIndexOf(".") + 1) } return b.toLowerCase() }, a.prototype._getMimeFromXhrType = function(b) { switch (b) { case a.XHR_RESPONSE_TYPE.BUFFER: return "application/octet-binary"; case a.XHR_RESPONSE_TYPE.BLOB: return "application/blob"; case a.XHR_RESPONSE_TYPE.DOCUMENT: return "application/xml"; case a.XHR_RESPONSE_TYPE.JSON: return "application/json"; case a.XHR_RESPONSE_TYPE.DEFAULT: case a.XHR_RESPONSE_TYPE.TEXT: default: return "text/plain" } }, i(a, [{ key: "isDataUrl", get: function() { return this._hasFlag(a.STATUS_FLAGS.DATA_URL) } }, { key: "isComplete", get: function() { return this._hasFlag(a.STATUS_FLAGS.COMPLETE) } }, { key: "isLoading", get: function() { return this._hasFlag(a.STATUS_FLAGS.LOADING) } }]), a }(); c.default = p, p.STATUS_FLAGS = { NONE: 0, DATA_URL: 1, COMPLETE: 2, LOADING: 4 }, p.TYPE = { UNKNOWN: 0, JSON: 1, XML: 2, IMAGE: 3, AUDIO: 4, VIDEO: 5, TEXT: 6 }, p.LOAD_TYPE = { XHR: 1, IMAGE: 2, AUDIO: 3, VIDEO: 4 }, p.XHR_RESPONSE_TYPE = { DEFAULT: "text", BUFFER: "arraybuffer", BLOB: "blob", DOCUMENT: "document", JSON: "json", TEXT: "text" }, p._loadTypeMap = { gif: p.LOAD_TYPE.IMAGE, png: p.LOAD_TYPE.IMAGE, bmp: p.LOAD_TYPE.IMAGE, jpg: p.LOAD_TYPE.IMAGE, jpeg: p.LOAD_TYPE.IMAGE, tif: p.LOAD_TYPE.IMAGE, tiff: p.LOAD_TYPE.IMAGE, webp: p.LOAD_TYPE.IMAGE, tga: p.LOAD_TYPE.IMAGE, svg: p.LOAD_TYPE.IMAGE, "svg+xml": p.LOAD_TYPE.IMAGE, mp3: p.LOAD_TYPE.AUDIO, ogg: p.LOAD_TYPE.AUDIO, wav: p.LOAD_TYPE.AUDIO, mp4: p.LOAD_TYPE.VIDEO, webm: p.LOAD_TYPE.VIDEO }, p._xhrTypeMap = { xhtml: p.XHR_RESPONSE_TYPE.DOCUMENT, html: p.XHR_RESPONSE_TYPE.DOCUMENT, htm: p.XHR_RESPONSE_TYPE.DOCUMENT, xml: p.XHR_RESPONSE_TYPE.DOCUMENT, tmx: p.XHR_RESPONSE_TYPE.DOCUMENT, svg: p.XHR_RESPONSE_TYPE.DOCUMENT, tsx: p.XHR_RESPONSE_TYPE.DOCUMENT, gif: p.XHR_RESPONSE_TYPE.BLOB, png: p.XHR_RESPONSE_TYPE.BLOB, bmp: p.XHR_RESPONSE_TYPE.BLOB, jpg: p.XHR_RESPONSE_TYPE.BLOB, jpeg: p.XHR_RESPONSE_TYPE.BLOB, tif: p.XHR_RESPONSE_TYPE.BLOB, tiff: p.XHR_RESPONSE_TYPE.BLOB, webp: p.XHR_RESPONSE_TYPE.BLOB, tga: p.XHR_RESPONSE_TYPE.BLOB, json: p.XHR_RESPONSE_TYPE.JSON, text: p.XHR_RESPONSE_TYPE.TEXT, txt: p.XHR_RESPONSE_TYPE.TEXT, ttf: p.XHR_RESPONSE_TYPE.BUFFER, otf: p.XHR_RESPONSE_TYPE.BUFFER }, p.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" }, { "mini-signals": 5, "parse-uri": 7 }], 34: [function(a, b, c) { "use strict"; function d() {} function e(a, b, c, d) { var e = 0, f = a.length; ! function g(h) { if (h || e === f) return void(c && c(h)); d ? setTimeout(function() { b(a[e++], g) }, 1) : b(a[e++], g) }() } function f(a) { return function() { if (null === a) throw new Error("Callback was already called."); var b = a; a = null, b.apply(this, arguments) } } function g(a, b) { function c(a, b, c) { if (null != c && "function" != typeof c) throw new Error("task callback must be a function"); if (h.started = !0, null == a && h.idle()) return void setTimeout(function() { return h.drain() }, 1); var e = { data: a, callback: "function" == typeof c ? c : d }; b ? h._tasks.unshift(e) : h._tasks.push(e), setTimeout(function() { return h.process() }, 1) } function e(a) { return function() { g -= 1, a.callback.apply(a, arguments), null != arguments[0] && h.error(arguments[0], a.data), g <= h.concurrency - h.buffer && h.unsaturated(), h.idle() && h.drain(), h.process() } } if (null == b) b = 1; else if (0 === b) throw new Error("Concurrency must not be zero"); var g = 0, h = { _tasks: [], concurrency: b, saturated: d, unsaturated: d, buffer: b / 4, empty: d, drain: d, error: d, started: !1, paused: !1, push: function(a, b) { c(a, !1, b) }, kill: function() { g = 0, h.drain = d, h.started = !1, h._tasks = [] }, unshift: function(a, b) { c(a, !0, b) }, process: function() { for (; !h.paused && g < h.concurrency && h._tasks.length;) { var b = h._tasks.shift(); 0 === h._tasks.length && h.empty(), g += 1, g === h.concurrency && h.saturated(), a(b.data, f(e(b))) } }, length: function() { return h._tasks.length }, running: function() { return g }, idle: function() { return h._tasks.length + g === 0 }, pause: function() { !0 !== h.paused && (h.paused = !0) }, resume: function() { if (!1 !== h.paused) { h.paused = !1; for (var a = 1; a <= h.concurrency; a++) h.process() } } }; return h } c.__esModule = !0, c.eachSeries = e, c.queue = g }, {}], 35: [function(a, b, c) { "use strict"; function d(a) { for (var b = "", c = 0; c < a.length;) { for (var d = [0, 0, 0], f = [0, 0, 0, 0], g = 0; g < d.length; ++g) c < a.length ? d[g] = 255 & a.charCodeAt(c++) : d[g] = 0; f[0] = d[0] >> 2, f[1] = (3 & d[0]) << 4 | d[1] >> 4, f[2] = (15 & d[1]) << 2 | d[2] >> 6, f[3] = 63 & d[2]; switch (c - (a.length - 1)) { case 2: f[3] = 64, f[2] = 64; break; case 1: f[3] = 64 } for (var h = 0; h < f.length; ++h) b += e.charAt(f[h]) } return b } c.__esModule = !0, c.encodeBinary = d; var e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, {}], 36: [function(a, b, c) { "use strict"; var d = a("./Loader").default, e = a("./Resource").default, f = a("./async"), g = a("./b64"); d.Resource = e, d.async = f, d.base64 = g, b.exports = d, b.exports.default = d }, { "./Loader": 32, "./Resource": 33, "./async": 34, "./b64": 35 }], 37: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e() { return function(a, b) { if (!a.data) return void b(); if (a.xhr && a.xhrType === h.default.XHR_RESPONSE_TYPE.BLOB) if (window.Blob && "string" != typeof a.data) { if (0 === a.data.type.indexOf("image")) { var c = function() { var c = k.createObjectURL(a.data); return a.blob = a.data, a.data = new Image, a.data.src = c, a.type = h.default.TYPE.IMAGE, a.data.onload = function() { k.revokeObjectURL(c), a.data.onload = null, b() }, { v: void 0 } }(); if ("object" === (void 0 === c ? "undefined" : f(c))) return c.v } } else { var d = a.xhr.getResponseHeader("content-type"); if (d && 0 === d.indexOf("image")) return a.data = new Image, a.data.src = "data:" + d + ";base64," + j.default.encodeBinary(a.xhr.responseText), a.type = h.default.TYPE.IMAGE, void(a.data.onload = function() { a.data.onload = null, b() }) } b() } } c.__esModule = !0; var f = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) { return typeof a } : function(a) { return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a }; c.blobMiddlewareFactory = e; var g = a("../../Resource"), h = d(g), i = a("../../b64"), j = d(i), k = window.URL || window.webkitURL }, { "../../Resource": 33, "../../b64": 35 }], 38: [function(a, b, c) { "use strict"; function d() { this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null } function e(a, b, c) { if (a && j.isObject(a) && a instanceof d) return a; var e = new d; return e.parse(a, b, c), e } function f(a) { return j.isString(a) && (a = e(a)), a instanceof d ? a.format() : d.prototype.format.call(a) } function g(a, b) { return e(a, !1, !0).resolve(b) } function h(a, b) { return a ? e(a, !1, !0).resolveObject(b) : b } var i = a("punycode"), j = a("./util"); c.parse = e, c.resolve = g, c.resolveObject = h, c.format = f, c.Url = d; var k = /^([a-z0-9.+-]+:)/i, l = /:[0-9]*$/, m = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/, n = ["<", ">", '"', "`", " ", "\r", "\n", "\t"], o = ["{", "}", "|", "\\", "^", "`"].concat(n), p = ["'"].concat(o), q = ["%", "/", "?", ";", "#"].concat(p), r = ["/", "?", "#"], s = /^[+a-z0-9A-Z_-]{0,63}$/, t = /^([+a-z0-9A-Z_-]{0,63})(.*)$/, u = { javascript: !0, "javascript:": !0 }, v = { javascript: !0, "javascript:": !0 }, w = { http: !0, https: !0, ftp: !0, gopher: !0, file: !0, "http:": !0, "https:": !0, "ftp:": !0, "gopher:": !0, "file:": !0 }, x = a("querystring"); d.prototype.parse = function(a, b, c) { if (!j.isString(a)) throw new TypeError("Parameter 'url' must be a string, not " + typeof a); var d = a.indexOf("?"), e = -1 !== d && d < a.indexOf("#") ? "?" : "#", f = a.split(e), g = /\\/g; f[0] = f[0].replace(g, "/"), a = f.join(e); var h = a; if (h = h.trim(), !c && 1 === a.split("#").length) { var l = m.exec(h); if (l) return this.path = h, this.href = h, this.pathname = l[1], l[2] ? (this.search = l[2], this.query = b ? x.parse(this.search.substr(1)) : this.search.substr(1)) : b && (this.search = "", this.query = {}), this } var n = k.exec(h); if (n) { n = n[0]; var o = n.toLowerCase(); this.protocol = o, h = h.substr(n.length) } if (c || n || h.match(/^\/\/[^@\/]+@[^@\/]+/)) { var y = "//" === h.substr(0, 2); !y || n && v[n] || (h = h.substr(2), this.slashes = !0) } if (!v[n] && (y || n && !w[n])) { for (var z = -1, A = 0; A < r.length; A++) { var B = h.indexOf(r[A]); - 1 !== B && (-1 === z || B < z) && (z = B) } var C, D; D = -1 === z ? h.lastIndexOf("@") : h.lastIndexOf("@", z), -1 !== D && (C = h.slice(0, D), h = h.slice(D + 1), this.auth = decodeURIComponent(C)), z = -1; for (var A = 0; A < q.length; A++) { var B = h.indexOf(q[A]); - 1 !== B && (-1 === z || B < z) && (z = B) } - 1 === z && (z = h.length), this.host = h.slice(0, z), h = h.slice(z), this.parseHost(), this.hostname = this.hostname || ""; var E = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1]; if (!E) for (var F = this.hostname.split(/\./), A = 0, G = F.length; A < G; A++) { var H = F[A]; if (H && !H.match(s)) { for (var I = "", J = 0, K = H.length; J < K; J++) H.charCodeAt(J) > 127 ? I += "x" : I += H[J]; if (!I.match(s)) { var L = F.slice(0, A), M = F.slice(A + 1), N = H.match(t); N && (L.push(N[1]), M.unshift(N[2])), M.length && (h = "/" + M.join(".") + h), this.hostname = L.join("."); break } } } this.hostname.length > 255 ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), E || (this.hostname = i.toASCII(this.hostname)); var O = this.port ? ":" + this.port : "", P = this.hostname || ""; this.host = P + O, this.href += this.host, E && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), "/" !== h[0] && (h = "/" + h)) } if (!u[o]) for (var A = 0, G = p.length; A < G; A++) { var Q = p[A]; if (-1 !== h.indexOf(Q)) { var R = encodeURIComponent(Q); R === Q && (R = escape(Q)), h = h.split(Q).join(R) } } var S = h.indexOf("#"); - 1 !== S && (this.hash = h.substr(S), h = h.slice(0, S)); var T = h.indexOf("?"); if (-1 !== T ? (this.search = h.substr(T), this.query = h.substr(T + 1), b && (this.query = x.parse(this.query)), h = h.slice(0, T)) : b && (this.search = "", this.query = {}), h && (this.pathname = h), w[o] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) { var O = this.pathname || "", U = this.search || ""; this.path = O + U } return this.href = this.format(), this }, d.prototype.format = function() { var a = this.auth || ""; a && (a = encodeURIComponent(a), a = a.replace(/%3A/i, ":"), a += "@"); var b = this.protocol || "", c = this.pathname || "", d = this.hash || "", e = !1, f = ""; this.host ? e = a + this.host : this.hostname && (e = a + (-1 === this.hostname.indexOf(":") ? this.hostname : "[" + this.hostname + "]"), this.port && (e += ":" + this.port)), this.query && j.isObject(this.query) && Object.keys(this.query).length && (f = x.stringify(this.query)); var g = this.search || f && "?" + f || ""; return b && ":" !== b.substr(-1) && (b += ":"), this.slashes || (!b || w[b]) && !1 !== e ? (e = "//" + (e || ""), c && "/" !== c.charAt(0) && (c = "/" + c)) : e || (e = ""), d && "#" !== d.charAt(0) && (d = "#" + d), g && "?" !== g.charAt(0) && (g = "?" + g), c = c.replace(/[?#]/g, function(a) { return encodeURIComponent(a) }), g = g.replace("#", "%23"), b + e + c + g + d }, d.prototype.resolve = function(a) { return this.resolveObject(e(a, !1, !0)).format() }, d.prototype.resolveObject = function(a) { if (j.isString(a)) { var b = new d; b.parse(a, !1, !0), a = b } for (var c = new d, e = Object.keys(this), f = 0; f < e.length; f++) { var g = e[f]; c[g] = this[g] } if (c.hash = a.hash, "" === a.href) return c.href = c.format(), c; if (a.slashes && !a.protocol) { for (var h = Object.keys(a), i = 0; i < h.length; i++) { var k = h[i]; "protocol" !== k && (c[k] = a[k]) } return w[c.protocol] && c.hostname && !c.pathname && (c.path = c.pathname = "/"), c.href = c.format(), c } if (a.protocol && a.protocol !== c.protocol) { if (!w[a.protocol]) { for (var l = Object.keys(a), m = 0; m < l.length; m++) { var n = l[m]; c[n] = a[n] } return c.href = c.format(), c } if (c.protocol = a.protocol, a.host || v[a.protocol]) c.pathname = a.pathname; else { for (var o = (a.pathname || "").split("/"); o.length && !(a.host = o.shift());); a.host || (a.host = ""), a.hostname || (a.hostname = ""), "" !== o[0] && o.unshift(""), o.length < 2 && o.unshift(""), c.pathname = o.join("/") } if (c.search = a.search, c.query = a.query, c.host = a.host || "", c.auth = a.auth, c.hostname = a.hostname || a.host, c.port = a.port, c.pathname || c.search) { var p = c.pathname || "", q = c.search || ""; c.path = p + q } return c.slashes = c.slashes || a.slashes, c.href = c.format(), c } var r = c.pathname && "/" === c.pathname.charAt(0), s = a.host || a.pathname && "/" === a.pathname.charAt(0), t = s || r || c.host && a.pathname, u = t, x = c.pathname && c.pathname.split("/") || [], o = a.pathname && a.pathname.split("/") || [], y = c.protocol && !w[c.protocol]; if (y && (c.hostname = "", c.port = null, c.host && ("" === x[0] ? x[0] = c.host : x.unshift(c.host)), c.host = "", a.protocol && (a.hostname = null, a.port = null, a.host && ("" === o[0] ? o[0] = a.host : o.unshift(a.host)), a.host = null), t = t && ("" === o[0] || "" === x[0])), s) c.host = a.host || "" === a.host ? a.host : c.host, c.hostname = a.hostname || "" === a.hostname ? a.hostname : c.hostname, c.search = a.search, c.query = a.query, x = o; else if (o.length) x || (x = []), x.pop(), x = x.concat(o), c.search = a.search, c.query = a.query; else if (!j.isNullOrUndefined(a.search)) { if (y) { c.hostname = c.host = x.shift(); var z = !!(c.host && c.host.indexOf("@") > 0) && c.host.split("@"); z && (c.auth = z.shift(), c.host = c.hostname = z.shift()) } return c.search = a.search, c.query = a.query, j.isNull(c.pathname) && j.isNull(c.search) || (c.path = (c.pathname ? c.pathname : "") + (c.search ? c.search : "")), c.href = c.format(), c } if (!x.length) return c.pathname = null, c.search ? c.path = "/" + c.search : c.path = null, c.href = c.format(), c; for (var A = x.slice(-1)[0], B = (c.host || a.host || x.length > 1) && ("." === A || ".." === A) || "" === A, C = 0, D = x.length; D >= 0; D--) A = x[D], "." === A ? x.splice(D, 1) : ".." === A ? (x.splice(D, 1), C++) : C && (x.splice(D, 1), C--); if (!t && !u) for (; C--; C) x.unshift(".."); !t || "" === x[0] || x[0] && "/" === x[0].charAt(0) || x.unshift(""), B && "/" !== x.join("/").substr(-1) && x.push(""); var E = "" === x[0] || x[0] && "/" === x[0].charAt(0); if (y) { c.hostname = c.host = E ? "" : x.length ? x.shift() : ""; var z = !!(c.host && c.host.indexOf("@") > 0) && c.host.split("@"); z && (c.auth = z.shift(), c.host = c.hostname = z.shift()) } return t = t || c.host && x.length, t && !E && x.unshift(""), x.length ? c.pathname = x.join("/") : (c.pathname = null, c.path = null), j.isNull(c.pathname) && j.isNull(c.search) || (c.path = (c.pathname ? c.pathname : "") + (c.search ? c.search : "")), c.auth = a.auth || c.auth, c.slashes = c.slashes || a.slashes, c.href = c.format(), c }, d.prototype.parseHost = function() { var a = this.host, b = l.exec(a); b && (b = b[0], ":" !== b && (this.port = b.substr(1)), a = a.substr(0, a.length - b.length)), a && (this.hostname = a) } }, { "./util": 39, punycode: 27, querystring: 30 }], 39: [function(a, b, c) { "use strict"; b.exports = { isString: function(a) { return "string" == typeof a }, isObject: function(a) { return "object" == typeof a && null !== a }, isNull: function(a) { return null === a }, isNullOrUndefined: function(a) { return null == a } } }, {}], 40: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var f = a("../core"), g = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(f), h = a("ismobilejs"), i = d(h), j = a("./accessibleTarget"), k = d(j); g.utils.mixins.delayMixin(g.DisplayObject.prototype, k.default); var l = 100, m = 0, n = 0, o = 2, p = function() { function a(b) { e(this, a), !i.default.tablet && !i.default.phone || navigator.isCocoonJS || this.createTouchHook(); var c = document.createElement("div"); c.style.width = l + "px", c.style.height = l + "px", c.style.position = "absolute", c.style.top = m + "px", c.style.left = n + "px", c.style.zIndex = o, this.div = c, this.pool = [], this.renderId = 0, this.debug = !1, this.renderer = b, this.children = [], this._onKeyDown = this._onKeyDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this.isActive = !1, this.isMobileAccessabillity = !1, window.addEventListener("keydown", this._onKeyDown, !1) } return a.prototype.createTouchHook = function() { var a = this, b = document.createElement("button"); b.style.width = "1px", b.style.height = "1px", b.style.position = "absolute", b.style.top = "-1000px", b.style.left = "-1000px", b.style.zIndex = 2, b.style.backgroundColor = "#FF0000", b.title = "HOOK DIV", b.addEventListener("focus", function() { a.isMobileAccessabillity = !0, a.activate(), document.body.removeChild(b) }), document.body.appendChild(b) }, a.prototype.activate = function() { this.isActive || (this.isActive = !0, window.document.addEventListener("mousemove", this._onMouseMove, !0), window.removeEventListener("keydown", this._onKeyDown, !1), this.renderer.on("postrender", this.update, this), this.renderer.view.parentNode && this.renderer.view.parentNode.appendChild(this.div)) }, a.prototype.deactivate = function() { this.isActive && !this.isMobileAccessabillity && (this.isActive = !1, window.document.removeEventListener("mousemove", this._onMouseMove, !0), window.addEventListener("keydown", this._onKeyDown, !1), this.renderer.off("postrender", this.update), this.div.parentNode && this.div.parentNode.removeChild(this.div)) }, a.prototype.updateAccessibleObjects = function(a) { if (a.visible) { a.accessible && a.interactive && (a._accessibleActive || this.addChild(a), a.renderId = this.renderId); for (var b = a.children, c = 0; c < b.length; c++) this.updateAccessibleObjects(b[c]) } }, a.prototype.update = function() { if (this.renderer.renderingToScreen) { this.updateAccessibleObjects(this.renderer._lastObjectRendered); var a = this.renderer.view.getBoundingClientRect(), b = a.width / this.renderer.width, c = a.height / this.renderer.height, d = this.div; d.style.left = a.left + "px", d.style.top = a.top + "px", d.style.width = this.renderer.width + "px", d.style.height = this.renderer.height + "px"; for (var e = 0; e < this.children.length; e++) { var f = this.children[e]; if (f.renderId !== this.renderId) f._accessibleActive = !1, g.utils.removeItems(this.children, e, 1), this.div.removeChild(f._accessibleDiv), this.pool.push(f._accessibleDiv), f._accessibleDiv = null, e--, 0 === this.children.length && this.deactivate(); else { d = f._accessibleDiv; var h = f.hitArea, i = f.worldTransform; f.hitArea ? (d.style.left = (i.tx + h.x * i.a) * b + "px", d.style.top = (i.ty + h.y * i.d) * c + "px", d.style.width = h.width * i.a * b + "px", d.style.height = h.height * i.d * c + "px") : (h = f.getBounds(), this.capHitArea(h), d.style.left = h.x * b + "px", d.style.top = h.y * c + "px", d.style.width = h.width * b + "px", d.style.height = h.height * c + "px", d.title !== f.accessibleTitle && null !== f.accessibleTitle && (d.title = f.accessibleTitle), d.getAttribute("aria-label") !== f.accessibleHint && null !== f.accessibleHint && d.setAttribute("aria-label", f.accessibleHint)) } } this.renderId++ } }, a.prototype.capHitArea = function(a) { a.x < 0 && (a.width += a.x, a.x = 0), a.y < 0 && (a.height += a.y, a.y = 0), a.x + a.width > this.renderer.width && (a.width = this.renderer.width - a.x), a.y + a.height > this.renderer.height && (a.height = this.renderer.height - a.y) }, a.prototype.addChild = function(a) { var b = this.pool.pop(); b || (b = document.createElement("button"), b.style.width = l + "px", b.style.height = l + "px", b.style.backgroundColor = this.debug ? "rgba(255,0,0,0.5)" : "transparent", b.style.position = "absolute", b.style.zIndex = o, b.style.borderStyle = "none", navigator.userAgent.toLowerCase().indexOf("chrome") > -1 ? b.setAttribute("aria-live", "off") : b.setAttribute("aria-live", "polite"), navigator.userAgent.match(/rv:.*Gecko\//) ? b.setAttribute("aria-relevant", "additions") : b.setAttribute("aria-relevant", "text"), b.addEventListener("click", this._onClick.bind(this)), b.addEventListener("focus", this._onFocus.bind(this)), b.addEventListener("focusout", this._onFocusOut.bind(this))), a.accessibleTitle && null !== a.accessibleTitle ? b.title = a.accessibleTitle : a.accessibleHint && null !== a.accessibleHint || (b.title = "displayObject " + a.tabIndex), a.accessibleHint && null !== a.accessibleHint && b.setAttribute("aria-label", a.accessibleHint), a._accessibleActive = !0, a._accessibleDiv = b, b.displayObject = a, this.children.push(a), this.div.appendChild(a._accessibleDiv), a._accessibleDiv.tabIndex = a.tabIndex }, a.prototype._onClick = function(a) { var b = this.renderer.plugins.interaction; b.dispatchEvent(a.target.displayObject, "click", b.eventData) }, a.prototype._onFocus = function(a) { a.target.getAttribute("aria-live", "off") || a.target.setAttribute("aria-live", "assertive"); var b = this.renderer.plugins.interaction; b.dispatchEvent(a.target.displayObject, "mouseover", b.eventData) }, a.prototype._onFocusOut = function(a) { a.target.getAttribute("aria-live", "off") || a.target.setAttribute("aria-live", "polite"); var b = this.renderer.plugins.interaction; b.dispatchEvent(a.target.displayObject, "mouseout", b.eventData) }, a.prototype._onKeyDown = function(a) { 9 === a.keyCode && this.activate() }, a.prototype._onMouseMove = function(a) { 0 === a.movementX && 0 === a.movementY || this.deactivate() }, a.prototype.destroy = function() { this.div = null; for (var a = 0; a < this.children.length; a++) this.children[a].div = null; window.document.removeEventListener("mousemove", this._onMouseMove, !0), window.removeEventListener("keydown", this._onKeyDown), this.pool = null, this.children = null, this.renderer = null }, a }(); c.default = p, g.WebGLRenderer.registerPlugin("accessibility", p), g.CanvasRenderer.registerPlugin("accessibility", p) }, { "../core": 65, "./accessibleTarget": 41, ismobilejs: 4 }], 41: [function(a, b, c) { "use strict"; c.__esModule = !0, c.default = { accessible: !1, accessibleTitle: null, accessibleHint: null, tabIndex: 0, _accessibleActive: !1, _accessibleDiv: !1 } }, {}], 42: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0; var e = a("./accessibleTarget"); Object.defineProperty(c, "accessibleTarget", { enumerable: !0, get: function() { return d(e).default } }); var f = a("./AccessibilityManager"); Object.defineProperty(c, "AccessibilityManager", { enumerable: !0, get: function() { return d(f).default } }) }, { "./AccessibilityManager": 40, "./accessibleTarget": 41 }], 43: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var f = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), g = a("./autoDetectRenderer"), h = a("./display/Container"), i = d(h), j = a("./ticker"), k = a("./settings"), l = d(k), m = a("./const"), n = function() { function a(b, c, d, f, h) { e(this, a), "number" == typeof b && (b = Object.assign({ width: b, height: c || l.default.RENDER_OPTIONS.height, forceCanvas: !!f, sharedTicker: !!h }, d)), this._options = b = Object.assign({ autoStart: !0, sharedTicker: !1, forceCanvas: !1, sharedLoader: !1 }, b), this.renderer = (0, g.autoDetectRenderer)(b), this.stage = new i.default, this._ticker = null, this.ticker = b.sharedTicker ? j.shared : new j.Ticker, b.autoStart && this.start() } return a.prototype.render = function() { this.renderer.render(this.stage) }, a.prototype.stop = function() { this._ticker.stop() }, a.prototype.start = function() { this._ticker.start() }, a.prototype.destroy = function(a, b) { if (this._ticker) { var c = this._ticker; this.ticker = null, c.destroy() } this.stage.destroy(b), this.stage = null, this.renderer.destroy(a), this.renderer = null, this._options = null }, f(a, [{ key: "ticker", set: function(a) { this._ticker && this._ticker.remove(this.render, this), this._ticker = a, a && a.add(this.render, this, m.UPDATE_PRIORITY.LOW) }, get: function() { return this._ticker } }, { key: "view", get: function() { return this.renderer.view } }, { key: "screen", get: function() { return this.renderer.screen } }]), a }(); c.default = n }, { "./autoDetectRenderer": 45, "./const": 46, "./display/Container": 48, "./settings": 101, "./ticker": 121 }], 44: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } function g(a, b) { if (a instanceof Array) { if ("precision" !== a[0].substring(0, 9)) { var c = a.slice(0); return c.unshift("precision " + b + " float;"), c } } else if ("precision" !== a.trim().substring(0, 9)) return "precision " + b + " float;\n" + a; return a } c.__esModule = !0; var h = a("pixi-gl-core"), i = a("./settings"), j = function(a) { return a && a.__esModule ? a : { default: a } }(i), k = function(a) { function b(c, f, h, i, k) { return d(this, b), e(this, a.call(this, c, g(f, k || j.default.PRECISION_VERTEX), g(h, k || j.default.PRECISION_FRAGMENT), void 0, i)) } return f(b, a), b }(h.GLShader); c.default = k }, { "./settings": 101, "pixi-gl-core": 15 }], 45: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b, c, d) { var e = a && a.forceCanvas; return void 0 !== d && (e = d), !e && g.isWebGLSupported() ? new k.default(a, b, c) : new i.default(a, b, c) } c.__esModule = !0, c.autoDetectRenderer = e; var f = a("./utils"), g = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(f), h = a("./renderers/canvas/CanvasRenderer"), i = d(h), j = a("./renderers/webgl/WebGLRenderer"), k = d(j) }, { "./renderers/canvas/CanvasRenderer": 77, "./renderers/webgl/WebGLRenderer": 84, "./utils": 125 }], 46: [function(a, b, c) { "use strict"; c.__esModule = !0; c.VERSION = "4.8.2", c.PI_2 = 2 * Math.PI, c.RAD_TO_DEG = 180 / Math.PI, c.DEG_TO_RAD = Math.PI / 180, c.RENDERER_TYPE = { UNKNOWN: 0, WEBGL: 1, CANVAS: 2 }, c.BLEND_MODES = { NORMAL: 0, ADD: 1, MULTIPLY: 2, SCREEN: 3, OVERLAY: 4, DARKEN: 5, LIGHTEN: 6, COLOR_DODGE: 7, COLOR_BURN: 8, HARD_LIGHT: 9, SOFT_LIGHT: 10, DIFFERENCE: 11, EXCLUSION: 12, HUE: 13, SATURATION: 14, COLOR: 15, LUMINOSITY: 16, NORMAL_NPM: 17, ADD_NPM: 18, SCREEN_NPM: 19 }, c.DRAW_MODES = { POINTS: 0, LINES: 1, LINE_LOOP: 2, LINE_STRIP: 3, TRIANGLES: 4, TRIANGLE_STRIP: 5, TRIANGLE_FAN: 6 }, c.SCALE_MODES = { LINEAR: 0, NEAREST: 1 }, c.WRAP_MODES = { CLAMP: 0, REPEAT: 1, MIRRORED_REPEAT: 2 }, c.GC_MODES = { AUTO: 0, MANUAL: 1 }, c.URL_FILE_EXTENSION = /\.(\w{3,4})(?:$|\?|#)/i, c.DATA_URI = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i, c.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i, c.SHAPES = { POLY: 0, RECT: 1, CIRC: 2, ELIP: 3, RREC: 4 }, c.PRECISION = { LOW: "lowp", MEDIUM: "mediump", HIGH: "highp" }, c.TRANSFORM_MODE = { STATIC: 0, DYNAMIC: 1 }, c.TEXT_GRADIENT = { LINEAR_VERTICAL: 0, LINEAR_HORIZONTAL: 1 }, c.UPDATE_PRIORITY = { INTERACTION: 50, HIGH: 25, NORMAL: 0, LOW: -25, UTILITY: -50 } }, {}], 47: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../math"), f = function() { function a() { d(this, a), this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0, this.rect = null } return a.prototype.isEmpty = function() { return this.minX > this.maxX || this.minY > this.maxY }, a.prototype.clear = function() { this.updateID++, this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0 }, a.prototype.getRectangle = function(a) { return this.minX > this.maxX || this.minY > this.maxY ? e.Rectangle.EMPTY : (a = a || new e.Rectangle(0, 0, 1, 1), a.x = this.minX, a.y = this.minY, a.width = this.maxX - this.minX, a.height = this.maxY - this.minY, a) }, a.prototype.addPoint = function(a) { this.minX = Math.min(this.minX, a.x), this.maxX = Math.max(this.maxX, a.x), this.minY = Math.min(this.minY, a.y), this.maxY = Math.max(this.maxY, a.y) }, a.prototype.addQuad = function(a) { var b = this.minX, c = this.minY, d = this.maxX, e = this.maxY, f = a[0], g = a[1]; b = f < b ? f : b, c = g < c ? g : c, d = f > d ? f : d, e = g > e ? g : e, f = a[2], g = a[3], b = f < b ? f : b, c = g < c ? g : c, d = f > d ? f : d, e = g > e ? g : e, f = a[4], g = a[5], b = f < b ? f : b, c = g < c ? g : c, d = f > d ? f : d, e = g > e ? g : e, f = a[6], g = a[7], b = f < b ? f : b, c = g < c ? g : c, d = f > d ? f : d, e = g > e ? g : e, this.minX = b, this.minY = c, this.maxX = d, this.maxY = e }, a.prototype.addFrame = function(a, b, c, d, e) { var f = a.worldTransform, g = f.a, h = f.b, i = f.c, j = f.d, k = f.tx, l = f.ty, m = this.minX, n = this.minY, o = this.maxX, p = this.maxY, q = g * b + i * c + k, r = h * b + j * c + l; m = q < m ? q : m, n = r < n ? r : n, o = q > o ? q : o, p = r > p ? r : p, q = g * d + i * c + k, r = h * d + j * c + l, m = q < m ? q : m, n = r < n ? r : n, o = q > o ? q : o, p = r > p ? r : p, q = g * b + i * e + k, r = h * b + j * e + l, m = q < m ? q : m, n = r < n ? r : n, o = q > o ? q : o, p = r > p ? r : p, q = g * d + i * e + k, r = h * d + j * e + l, m = q < m ? q : m, n = r < n ? r : n, o = q > o ? q : o, p = r > p ? r : p, this.minX = m, this.minY = n, this.maxX = o, this.maxY = p }, a.prototype.addVertices = function(a, b, c, d) { for (var e = a.worldTransform, f = e.a, g = e.b, h = e.c, i = e.d, j = e.tx, k = e.ty, l = this.minX, m = this.minY, n = this.maxX, o = this.maxY, p = c; p < d; p += 2) { var q = b[p], r = b[p + 1], s = f * q + h * r + j, t = i * r + g * q + k; l = s < l ? s : l, m = t < m ? t : m, n = s > n ? s : n, o = t > o ? t : o } this.minX = l, this.minY = m, this.maxX = n, this.maxY = o }, a.prototype.addBounds = function(a) { var b = this.minX, c = this.minY, d = this.maxX, e = this.maxY; this.minX = a.minX < b ? a.minX : b, this.minY = a.minY < c ? a.minY : c, this.maxX = a.maxX > d ? a.maxX : d, this.maxY = a.maxY > e ? a.maxY : e }, a.prototype.addBoundsMask = function(a, b) { var c = a.minX > b.minX ? a.minX : b.minX, d = a.minY > b.minY ? a.minY : b.minY, e = a.maxX < b.maxX ? a.maxX : b.maxX, f = a.maxY < b.maxY ? a.maxY : b.maxY; if (c <= e && d <= f) { var g = this.minX, h = this.minY, i = this.maxX, j = this.maxY; this.minX = c < g ? c : g, this.minY = d < h ? d : h, this.maxX = e > i ? e : i, this.maxY = f > j ? f : j } }, a.prototype.addBoundsArea = function(a, b) { var c = a.minX > b.x ? a.minX : b.x, d = a.minY > b.y ? a.minY : b.y, e = a.maxX < b.x + b.width ? a.maxX : b.x + b.width, f = a.maxY < b.y + b.height ? a.maxY : b.y + b.height; if (c <= e && d <= f) { var g = this.minX, h = this.minY, i = this.maxX, j = this.maxY; this.minX = c < g ? c : g, this.minY = d < h ? d : h, this.maxX = e > i ? e : i, this.maxY = f > j ? f : j } }, a }(); c.default = f }, { "../math": 70 }], 48: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../utils"), i = a("./DisplayObject"), j = function(a) { return a && a.__esModule ? a : { default: a } }(i), k = function(a) { function b() { d(this, b); var c = e(this, a.call(this)); return c.children = [], c } return f(b, a), b.prototype.onChildrenChange = function() {}, b.prototype.addChild = function(a) { var b = arguments.length; if (b > 1) for (var c = 0; c < b; c++) this.addChild(arguments[c]); else a.parent && a.parent.removeChild(a), a.parent = this, a.transform._parentID = -1, this.children.push(a), this._boundsID++, this.onChildrenChange(this.children.length - 1), a.emit("added", this); return a }, b.prototype.addChildAt = function(a, b) { if (b < 0 || b > this.children.length) throw new Error(a + "addChildAt: The index " + b + " supplied is out of bounds " + this.children.length); return a.parent && a.parent.removeChild(a), a.parent = this, a.transform._parentID = -1, this.children.splice(b, 0, a), this._boundsID++, this.onChildrenChange(b), a.emit("added", this), a }, b.prototype.swapChildren = function(a, b) { if (a !== b) { var c = this.getChildIndex(a), d = this.getChildIndex(b); this.children[c] = b, this.children[d] = a, this.onChildrenChange(c < d ? c : d) } }, b.prototype.getChildIndex = function(a) { var b = this.children.indexOf(a); if (-1 === b) throw new Error("The supplied DisplayObject must be a child of the caller"); return b }, b.prototype.setChildIndex = function(a, b) { if (b < 0 || b >= this.children.length) throw new Error("The index " + b + " supplied is out of bounds " + this.children.length); var c = this.getChildIndex(a); (0, h.removeItems)(this.children, c, 1), this.children.splice(b, 0, a), this.onChildrenChange(b) }, b.prototype.getChildAt = function(a) { if (a < 0 || a >= this.children.length) throw new Error("getChildAt: Index (" + a + ") does not exist."); return this.children[a] }, b.prototype.removeChild = function(a) { var b = arguments.length; if (b > 1) for (var c = 0; c < b; c++) this.removeChild(arguments[c]); else { var d = this.children.indexOf(a); if (-1 === d) return null; a.parent = null, a.transform._parentID = -1, (0, h.removeItems)(this.children, d, 1), this._boundsID++, this.onChildrenChange(d), a.emit("removed", this) } return a }, b.prototype.removeChildAt = function(a) { var b = this.getChildAt(a); return b.parent = null, b.transform._parentID = -1, (0, h.removeItems)(this.children, a, 1), this._boundsID++, this.onChildrenChange(a), b.emit("removed", this), b }, b.prototype.removeChildren = function() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, b = arguments[1], c = a, d = "number" == typeof b ? b : this.children.length, e = d - c, f = void 0; if (e > 0 && e <= d) { f = this.children.splice(c, e); for (var g = 0; g < f.length; ++g) f[g].parent = null, f[g].transform && (f[g].transform._parentID = -1); this._boundsID++, this.onChildrenChange(a); for (var h = 0; h < f.length; ++h) f[h].emit("removed", this); return f } if (0 === e && 0 === this.children.length) return []; throw new RangeError("removeChildren: numeric values are outside the acceptable range.") }, b.prototype.updateTransform = function() { this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha; for (var a = 0, b = this.children.length; a < b; ++a) { var c = this.children[a]; c.visible && c.updateTransform() } }, b.prototype.calculateBounds = function() { this._bounds.clear(), this._calculateBounds(); for (var a = 0; a < this.children.length; a++) { var b = this.children[a]; b.visible && b.renderable && (b.calculateBounds(), b._mask ? (b._mask.calculateBounds(), this._bounds.addBoundsMask(b._bounds, b._mask._bounds)) : b.filterArea ? this._bounds.addBoundsArea(b._bounds, b.filterArea) : this._bounds.addBounds(b._bounds)) } this._lastBoundsID = this._boundsID }, b.prototype._calculateBounds = function() {}, b.prototype.renderWebGL = function(a) { if (this.visible && !(this.worldAlpha <= 0) && this.renderable) if (this._mask || this._filters) this.renderAdvancedWebGL(a); else { this._renderWebGL(a); for (var b = 0, c = this.children.length; b < c; ++b) this.children[b].renderWebGL(a) } }, b.prototype.renderAdvancedWebGL = function(a) { a.flush(); var b = this._filters, c = this._mask; if (b) { this._enabledFilters || (this._enabledFilters = []), this._enabledFilters.length = 0; for (var d = 0; d < b.length; d++) b[d].enabled && this._enabledFilters.push(b[d]); this._enabledFilters.length && a.filterManager.pushFilter(this, this._enabledFilters) } c && a.maskManager.pushMask(this, this._mask), this._renderWebGL(a); for (var e = 0, f = this.children.length; e < f; e++) this.children[e].renderWebGL(a); a.flush(), c && a.maskManager.popMask(this, this._mask), b && this._enabledFilters && this._enabledFilters.length && a.filterManager.popFilter() }, b.prototype._renderWebGL = function(a) {}, b.prototype._renderCanvas = function(a) {}, b.prototype.renderCanvas = function(a) { if (this.visible && !(this.worldAlpha <= 0) && this.renderable) { this._mask && a.maskManager.pushMask(this._mask), this._renderCanvas(a); for (var b = 0, c = this.children.length; b < c; ++b) this.children[b].renderCanvas(a); this._mask && a.maskManager.popMask(a) } }, b.prototype.destroy = function(b) { a.prototype.destroy.call(this); var c = "boolean" == typeof b ? b : b && b.children, d = this.removeChildren(0, this.children.length); if (c) for (var e = 0; e < d.length; ++e) d[e].destroy(b) }, g(b, [{ key: "width", get: function() { return this.scale.x * this.getLocalBounds().width }, set: function(a) { var b = this.getLocalBounds().width; this.scale.x = 0 !== b ? a / b : 1, this._width = a } }, { key: "height", get: function() { return this.scale.y * this.getLocalBounds().height }, set: function(a) { var b = this.getLocalBounds().height; this.scale.y = 0 !== b ? a / b : 1, this._height = a } }]), b }(j.default); c.default = k, k.prototype.containerUpdateTransform = k.prototype.updateTransform }, { "../utils": 125, "./DisplayObject": 49 }], 49: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), i = a("eventemitter3"), j = d(i), k = a("../const"), l = a("../settings"), m = d(l), n = a("./TransformStatic"), o = d(n), p = a("./Transform"), q = d(p), r = a("./Bounds"), s = d(r), t = a("../math"), u = function(a) { function b() { e(this, b); var c = f(this, a.call(this)), d = m.default.TRANSFORM_MODE === k.TRANSFORM_MODE.STATIC ? o.default : q.default; return c.tempDisplayObjectParent = null, c.transform = new d, c.alpha = 1, c.visible = !0, c.renderable = !0, c.parent = null, c.worldAlpha = 1, c.filterArea = null, c._filters = null, c._enabledFilters = null, c._bounds = new s.default, c._boundsID = 0, c._lastBoundsID = -1, c._boundsRect = null, c._localBoundsRect = null, c._mask = null, c._destroyed = !1, c } return g(b, a), b.prototype.updateTransform = function() { this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha, this._bounds.updateID++ }, b.prototype._recursivePostUpdateTransform = function() { this.parent ? (this.parent._recursivePostUpdateTransform(), this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform) }, b.prototype.getBounds = function(a, b) { return a || (this.parent ? (this._recursivePostUpdateTransform(), this.updateTransform()) : (this.parent = this._tempDisplayObjectParent, this.updateTransform(), this.parent = null)), this._boundsID !== this._lastBoundsID && this.calculateBounds(), b || (this._boundsRect || (this._boundsRect = new t.Rectangle), b = this._boundsRect), this._bounds.getRectangle(b) }, b.prototype.getLocalBounds = function(a) { var b = this.transform, c = this.parent; this.parent = null, this.transform = this._tempDisplayObjectParent.transform, a || (this._localBoundsRect || (this._localBoundsRect = new t.Rectangle), a = this._localBoundsRect); var d = this.getBounds(!1, a); return this.parent = c, this.transform = b, d }, b.prototype.toGlobal = function(a, b) { return arguments.length > 2 && void 0 !== arguments[2] && arguments[2] || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.apply(a, b) }, b.prototype.toLocal = function(a, b, c, d) { return b && (a = b.toGlobal(a, c, d)), d || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.applyInverse(a, c) }, b.prototype.renderWebGL = function(a) {}, b.prototype.renderCanvas = function(a) {}, b.prototype.setParent = function(a) { if (!a || !a.addChild) throw new Error("setParent: Argument must be a Container"); return a.addChild(this), a }, b.prototype.setTransform = function() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, c = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, d = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, e = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0, f = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0, g = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : 0, h = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : 0, i = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : 0; return this.position.x = a, this.position.y = b, this.scale.x = c || 1, this.scale.y = d || 1, this.rotation = e, this.skew.x = f, this.skew.y = g, this.pivot.x = h, this.pivot.y = i, this }, b.prototype.destroy = function() { this.removeAllListeners(), this.parent && this.parent.removeChild(this), this.transform = null, this.parent = null, this._bounds = null, this._currentBounds = null, this._mask = null, this.filterArea = null, this.interactive = !1, this.interactiveChildren = !1, this._destroyed = !0 }, h(b, [{ key: "_tempDisplayObjectParent", get: function() { return null === this.tempDisplayObjectParent && (this.tempDisplayObjectParent = new b), this.tempDisplayObjectParent } }, { key: "x", get: function() { return this.position.x }, set: function(a) { this.transform.position.x = a } }, { key: "y", get: function() { return this.position.y }, set: function(a) { this.transform.position.y = a } }, { key: "worldTransform", get: function() { return this.transform.worldTransform } }, { key: "localTransform", get: function() { return this.transform.localTransform } }, { key: "position", get: function() { return this.transform.position }, set: function(a) { this.transform.position.copy(a) } }, { key: "scale", get: function() { return this.transform.scale }, set: function(a) { this.transform.scale.copy(a) } }, { key: "pivot", get: function() { return this.transform.pivot }, set: function(a) { this.transform.pivot.copy(a) } }, { key: "skew", get: function() { return this.transform.skew }, set: function(a) { this.transform.skew.copy(a) } }, { key: "rotation", get: function() { return this.transform.rotation }, set: function(a) { this.transform.rotation = a } }, { key: "worldVisible", get: function() { var a = this; do { if (!a.visible) return !1; a = a.parent } while (a); return !0 } }, { key: "mask", get: function() { return this._mask }, set: function(a) { this._mask && (this._mask.renderable = !0, this._mask.isMask = !1), this._mask = a, this._mask && (this._mask.renderable = !1, this._mask.isMask = !0) } }, { key: "filters", get: function() { return this._filters && this._filters.slice() }, set: function(a) { this._filters = a && a.slice() } }]), b }(j.default); c.default = u, u.prototype.displayObjectUpdateTransform = u.prototype.updateTransform }, { "../const": 46, "../math": 70, "../settings": 101, "./Bounds": 47, "./Transform": 50, "./TransformStatic": 52, eventemitter3: 3 }], 50: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../math"), i = a("./TransformBase"), j = function(a) { return a && a.__esModule ? a : { default: a } }(i), k = function(a) { function b() { d(this, b); var c = e(this, a.call(this)); return c.position = new h.Point(0, 0), c.scale = new h.Point(1, 1), c.skew = new h.ObservablePoint(c.updateSkew, c, 0, 0), c.pivot = new h.Point(0, 0), c._rotation = 0, c._cx = 1, c._sx = 0, c._cy = 0, c._sy = 1, c } return f(b, a), b.prototype.updateSkew = function() { this._cx = Math.cos(this._rotation + this.skew._y), this._sx = Math.sin(this._rotation + this.skew._y), this._cy = -Math.sin(this._rotation - this.skew._x), this._sy = Math.cos(this._rotation - this.skew._x) }, b.prototype.updateLocalTransform = function() { var a = this.localTransform; a.a = this._cx * this.scale.x, a.b = this._sx * this.scale.x, a.c = this._cy * this.scale.y, a.d = this._sy * this.scale.y, a.tx = this.position.x - (this.pivot.x * a.a + this.pivot.y * a.c), a.ty = this.position.y - (this.pivot.x * a.b + this.pivot.y * a.d) }, b.prototype.updateTransform = function(a) { var b = this.localTransform; b.a = this._cx * this.scale.x, b.b = this._sx * this.scale.x, b.c = this._cy * this.scale.y, b.d = this._sy * this.scale.y, b.tx = this.position.x - (this.pivot.x * b.a + this.pivot.y * b.c), b.ty = this.position.y - (this.pivot.x * b.b + this.pivot.y * b.d); var c = a.worldTransform, d = this.worldTransform; d.a = b.a * c.a + b.b * c.c, d.b = b.a * c.b + b.b * c.d, d.c = b.c * c.a + b.d * c.c, d.d = b.c * c.b + b.d * c.d, d.tx = b.tx * c.a + b.ty * c.c + c.tx, d.ty = b.tx * c.b + b.ty * c.d + c.ty, this._worldID++ }, b.prototype.setFromMatrix = function(a) { a.decompose(this) }, g(b, [{ key: "rotation", get: function() { return this._rotation }, set: function(a) { this._rotation = a, this.updateSkew() } }]), b }(j.default); c.default = k }, { "../math": 70, "./TransformBase": 51 }], 51: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../math"), f = function() { function a() { d(this, a), this.worldTransform = new e.Matrix, this.localTransform = new e.Matrix, this._worldID = 0, this._parentID = 0 } return a.prototype.updateLocalTransform = function() {}, a.prototype.updateTransform = function(a) { var b = a.worldTransform, c = this.worldTransform, d = this.localTransform; c.a = d.a * b.a + d.b * b.c, c.b = d.a * b.b + d.b * b.d, c.c = d.c * b.a + d.d * b.c, c.d = d.c * b.b + d.d * b.d, c.tx = d.tx * b.a + d.ty * b.c + b.tx, c.ty = d.tx * b.b + d.ty * b.d + b.ty, this._worldID++ }, a }(); c.default = f, f.prototype.updateWorldTransform = f.prototype.updateTransform, f.IDENTITY = new f }, { "../math": 70 }], 52: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../math"), i = a("./TransformBase"), j = function(a) { return a && a.__esModule ? a : { default: a } }(i), k = function(a) { function b() { d(this, b); var c = e(this, a.call(this)); return c.position = new h.ObservablePoint(c.onChange, c, 0, 0), c.scale = new h.ObservablePoint(c.onChange, c, 1, 1), c.pivot = new h.ObservablePoint(c.onChange, c, 0, 0), c.skew = new h.ObservablePoint(c.updateSkew, c, 0, 0), c._rotation = 0, c._cx = 1, c._sx = 0, c._cy = 0, c._sy = 1, c._localID = 0, c._currentLocalID = 0, c } return f(b, a), b.prototype.onChange = function() { this._localID++ }, b.prototype.updateSkew = function() { this._cx = Math.cos(this._rotation + this.skew._y), this._sx = Math.sin(this._rotation + this.skew._y), this._cy = -Math.sin(this._rotation - this.skew._x), this._sy = Math.cos(this._rotation - this.skew._x), this._localID++ }, b.prototype.updateLocalTransform = function() { var a = this.localTransform; this._localID !== this._currentLocalID && (a.a = this._cx * this.scale._x, a.b = this._sx * this.scale._x, a.c = this._cy * this.scale._y, a.d = this._sy * this.scale._y, a.tx = this.position._x - (this.pivot._x * a.a + this.pivot._y * a.c), a.ty = this.position._y - (this.pivot._x * a.b + this.pivot._y * a.d), this._currentLocalID = this._localID, this._parentID = -1) }, b.prototype.updateTransform = function(a) { var b = this.localTransform; if (this._localID !== this._currentLocalID && (b.a = this._cx * this.scale._x, b.b = this._sx * this.scale._x, b.c = this._cy * this.scale._y, b.d = this._sy * this.scale._y, b.tx = this.position._x - (this.pivot._x * b.a + this.pivot._y * b.c), b.ty = this.position._y - (this.pivot._x * b.b + this.pivot._y * b.d), this._currentLocalID = this._localID, this._parentID = -1), this._parentID !== a._worldID) { var c = a.worldTransform, d = this.worldTransform; d.a = b.a * c.a + b.b * c.c, d.b = b.a * c.b + b.b * c.d, d.c = b.c * c.a + b.d * c.c, d.d = b.c * c.b + b.d * c.d, d.tx = b.tx * c.a + b.ty * c.c + c.tx, d.ty = b.tx * c.b + b.ty * c.d + c.ty, this._parentID = a._worldID, this._worldID++ } }, b.prototype.setFromMatrix = function(a) { a.decompose(this), this._localID++ }, g(b, [{ key: "rotation", get: function() { return this._rotation }, set: function(a) { this._rotation = a, this.updateSkew() } }]), b }(j.default); c.default = k }, { "../math": 70, "./TransformBase": 51 }], 53: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("../display/Container"), i = d(h), j = a("../textures/RenderTexture"), k = d(j), l = a("../textures/Texture"), m = d(l), n = a("./GraphicsData"), o = d(n), p = a("../sprites/Sprite"), q = d(p), r = a("../math"), s = a("../utils"), t = a("../const"), u = a("../display/Bounds"), v = d(u), w = a("./utils/bezierCurveTo"), x = d(w), y = a("../renderers/canvas/CanvasRenderer"), z = d(y), A = void 0, B = new r.Matrix, C = new r.Point, D = new Float32Array(4), E = new Float32Array(4), F = function(a) { function b() { var c = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; e(this, b); var d = f(this, a.call(this)); return d.fillAlpha = 1, d.lineWidth = 0, d.nativeLines = c, d.lineColor = 0, d.lineAlignment = .5, d.graphicsData = [], d.tint = 16777215, d._prevTint = 16777215, d.blendMode = t.BLEND_MODES.NORMAL, d.currentPath = null, d._webGL = {}, d.isMask = !1, d.boundsPadding = 0, d._localBounds = new v.default, d.dirty = 0, d.fastRectDirty = -1, d.clearDirty = 0, d.boundsDirty = -1, d.cachedSpriteDirty = !1, d._spriteRect = null, d._fastRect = !1, d._prevRectTint = null, d._prevRectFillColor = null, d } return g(b, a), b.prototype.clone = function() { var a = new b; a.renderable = this.renderable, a.fillAlpha = this.fillAlpha, a.lineWidth = this.lineWidth, a.lineColor = this.lineColor, a.lineAlignment = this.lineAlignment, a.tint = this.tint, a.blendMode = this.blendMode, a.isMask = this.isMask, a.boundsPadding = this.boundsPadding, a.dirty = 0, a.cachedSpriteDirty = this.cachedSpriteDirty; for (var c = 0; c < this.graphicsData.length; ++c) a.graphicsData.push(this.graphicsData[c].clone()); return a.currentPath = a.graphicsData[a.graphicsData.length - 1], a.updateLocalBounds(), a }, b.prototype._quadraticCurveLength = function(a, b, c, d, e, f) { var g = a - (2 * c + e), h = b - (2 * d + f), i = (c - 2) * a * 2, j = (d - 2) * b * 2, k = 4 * (g * g + h * h), l = 4 * (g * i + h * j), m = i * i + j * j, n = 2 * Math.sqrt(k + l + m), o = Math.sqrt(k), p = 2 * k * o, q = 2 * Math.sqrt(m), r = l / o; return (p * n + o * l * (n - q) + (4 * m * k - l * l) * Math.log((2 * o + r + n) / (r + q))) / (4 * p) }, b.prototype._bezierCurveLength = function(a, b, c, d, e, f, g, h) { for (var i = 0, j = 0, k = 0, l = 0, m = 0, n = 0, o = 0, p = 0, q = 0, r = 0, s = 0, t = a, u = b, v = 1; v <= 10; ++v) j = v / 10, k = j * j, l = k * j, m = 1 - j, n = m * m, o = n * m, p = o * a + 3 * n * j * c + 3 * m * k * e + l * g, q = o * b + 3 * n * j * d + 3 * m * k * f + l * h, r = t - p, s = u - q, t = p, u = q, i += Math.sqrt(r * r + s * s); return i }, b.prototype._segmentsCount = function(a) { var c = Math.ceil(a / b.CURVES.maxLength); return c < b.CURVES.minSegments ? c = b.CURVES.minSegments : c > b.CURVES.maxSegments && (c = b.CURVES.maxSegments), c }, b.prototype.lineStyle = function() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, c = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, d = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : .5; if (this.lineWidth = a, this.lineColor = b, this.lineAlpha = c, this.lineAlignment = d, this.currentPath) if (this.currentPath.shape.points.length) { var e = new r.Polygon(this.currentPath.shape.points.slice(-2)); e.closed = !1, this.drawShape(e) } else this.currentPath.lineWidth = this.lineWidth, this.currentPath.lineColor = this.lineColor, this.currentPath.lineAlpha = this.lineAlpha, this.currentPath.lineAlignment = this.lineAlignment; return this }, b.prototype.moveTo = function(a, b) { var c = new r.Polygon([a, b]); return c.closed = !1, this.drawShape(c), this }, b.prototype.lineTo = function(a, b) { var c = this.currentPath.shape.points, d = c[c.length - 2], e = c[c.length - 1]; return d === a && e === b || (c.push(a, b), this.dirty++), this }, b.prototype.quadraticCurveTo = function(a, c, d, e) { this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0); var f = this.currentPath.shape.points, g = 0, h = 0; 0 === f.length && this.moveTo(0, 0); for (var i = f[f.length - 2], j = f[f.length - 1], k = b.CURVES.adaptive ? this._segmentsCount(this._quadraticCurveLength(i, j, a, c, d, e)) : 20, l = 1; l <= k; ++l) { var m = l / k; g = i + (a - i) * m, h = j + (c - j) * m, f.push(g + (a + (d - a) * m - g) * m, h + (c + (e - c) * m - h) * m) } return this.dirty++, this }, b.prototype.bezierCurveTo = function(a, c, d, e, f, g) { this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0); var h = this.currentPath.shape.points, i = h[h.length - 2], j = h[h.length - 1]; h.length -= 2; var k = b.CURVES.adaptive ? this._segmentsCount(this._bezierCurveLength(i, j, a, c, d, e, f, g)) : 20; return (0, x.default)(i, j, a, c, d, e, f, g, k, h), this.dirty++, this }, b.prototype.arcTo = function(a, b, c, d, e) { this.currentPath ? 0 === this.currentPath.shape.points.length && this.currentPath.shape.points.push(a, b) : this.moveTo(a, b); var f = this.currentPath.shape.points, g = f[f.length - 2], h = f[f.length - 1], i = h - b, j = g - a, k = d - b, l = c - a, m = Math.abs(i * l - j * k); if (m < 1e-8 || 0 === e) f[f.length - 2] === a && f[f.length - 1] === b || f.push(a, b); else { var n = i * i + j * j, o = k * k + l * l, p = i * k + j * l, q = e * Math.sqrt(n) / m, r = e * Math.sqrt(o) / m, s = q * p / n, t = r * p / o, u = q * l + r * j, v = q * k + r * i, w = j * (r + s), x = i * (r + s), y = l * (q + t), z = k * (q + t), A = Math.atan2(x - v, w - u), B = Math.atan2(z - v, y - u); this.arc(u + a, v + b, e, A, B, j * k > l * i) } return this.dirty++, this }, b.prototype.arc = function(a, c, d, e, f) { var g = arguments.length > 5 && void 0 !== arguments[5] && arguments[5]; if (e === f) return this; !g && f <= e ? f += t.PI_2 : g && e <= f && (e += t.PI_2); var h = f - e, i = b.CURVES.adaptive ? this._segmentsCount(Math.abs(h) * d) : 40 * Math.ceil(Math.abs(h) / t.PI_2); if (0 === h) return this; var j = a + Math.cos(e) * d, k = c + Math.sin(e) * d, l = this.currentPath ? this.currentPath.shape.points : null; if (l) { var m = Math.abs(l[l.length - 2] - j), n = Math.abs(l[l.length - 1] - k); m < .001 && n < .001 || l.push(j, k) } else this.moveTo(j, k), l = this.currentPath.shape.points; for (var o = h / (2 * i), p = 2 * o, q = Math.cos(o), r = Math.sin(o), s = i - 1, u = s % 1 / s, v = 0; v <= s; ++v) { var w = v + u * v, x = o + e + p * w, y = Math.cos(x), z = -Math.sin(x); l.push((q * y + r * z) * d + a, (q * -z + r * y) * d + c) } return this.dirty++, this }, b.prototype.beginFill = function() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; return this.filling = !0, this.fillColor = a, this.fillAlpha = b, this.currentPath && this.currentPath.shape.points.length <= 2 && (this.currentPath.fill = this.filling, this.currentPath.fillColor = this.fillColor, this.currentPath.fillAlpha = this.fillAlpha), this }, b.prototype.endFill = function() { return this.filling = !1, this.fillColor = null, this.fillAlpha = 1, this }, b.prototype.drawRect = function(a, b, c, d) { return this.drawShape(new r.Rectangle(a, b, c, d)), this }, b.prototype.drawRoundedRect = function(a, b, c, d, e) { return this.drawShape(new r.RoundedRectangle(a, b, c, d, e)), this }, b.prototype.drawCircle = function(a, b, c) { return this.drawShape(new r.Circle(a, b, c)), this }, b.prototype.drawEllipse = function(a, b, c, d) { return this.drawShape(new r.Ellipse(a, b, c, d)), this }, b.prototype.drawPolygon = function(a) { var b = a, c = !0; if (b instanceof r.Polygon && (c = b.closed, b = b.points), !Array.isArray(b)) { b = new Array(arguments.length); for (var d = 0; d < b.length; ++d) b[d] = arguments[d] } var e = new r.Polygon(b); return e.closed = c, this.drawShape(e), this }, b.prototype.drawStar = function(a, b, c, d, e) { var f = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0; e = e || d / 2; for (var g = -1 * Math.PI / 2 + f, h = 2 * c, i = t.PI_2 / h, j = [], k = 0; k < h; k++) { var l = k % 2 ? e : d, m = k * i + g; j.push(a + l * Math.cos(m), b + l * Math.sin(m)) } return this.drawPolygon(j) }, b.prototype.clear = function() { return (this.lineWidth || this.filling || this.graphicsData.length > 0) && (this.lineWidth = 0, this.lineAlignment = .5, this.filling = !1, this.boundsDirty = -1, this.canvasTintDirty = -1, this.dirty++, this.clearDirty++, this.graphicsData.length = 0), this.currentPath = null, this._spriteRect = null, this }, b.prototype.isFastRect = function() { return 1 === this.graphicsData.length && this.graphicsData[0].shape.type === t.SHAPES.RECT && !this.graphicsData[0].lineWidth }, b.prototype._renderWebGL = function(a) { this.dirty !== this.fastRectDirty && (this.fastRectDirty = this.dirty, this._fastRect = this.isFastRect()), this._fastRect ? this._renderSpriteRect(a) : (a.setObjectRenderer(a.plugins.graphics), a.plugins.graphics.render(this)) }, b.prototype._renderSpriteRect = function(a) { var b = this.graphicsData[0].shape; this._spriteRect || (this._spriteRect = new q.default(new m.default(m.default.WHITE))); var c = this._spriteRect, d = this.graphicsData[0].fillColor; if (16777215 === this.tint) c.tint = d; else if (this.tint !== this._prevRectTint || d !== this._prevRectFillColor) { var e = D, f = E; (0, s.hex2rgb)(d, e), (0, s.hex2rgb)(this.tint, f), e[0] *= f[0], e[1] *= f[1], e[2] *= f[2], c.tint = (0, s.rgb2hex)(e), this._prevRectTint = this.tint, this._prevRectFillColor = d } c.alpha = this.graphicsData[0].fillAlpha, c.worldAlpha = this.worldAlpha * c.alpha, c.blendMode = this.blendMode, c._texture._frame.width = b.width, c._texture._frame.height = b.height, c.transform.worldTransform = this.transform.worldTransform, c.anchor.set(-b.x / b.width, -b.y / b.height), c._onAnchorUpdate(), c._renderWebGL(a) }, b.prototype._renderCanvas = function(a) { !0 !== this.isMask && a.plugins.graphics.render(this) }, b.prototype._calculateBounds = function() { this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty, this.updateLocalBounds(), this.cachedSpriteDirty = !0); var a = this._localBounds; this._bounds.addFrame(this.transform, a.minX, a.minY, a.maxX, a.maxY) }, b.prototype.containsPoint = function(a) { this.worldTransform.applyInverse(a, C); for (var b = this.graphicsData, c = 0; c < b.length; ++c) { var d = b[c]; if (d.fill && (d.shape && d.shape.contains(C.x, C.y))) { if (d.holes) for (var e = 0; e < d.holes.length; e++) { var f = d.holes[e]; if (f.contains(C.x, C.y)) return !1 } return !0 } } return !1 }, b.prototype.updateLocalBounds = function() { var a = 1 / 0, b = -1 / 0, c = 1 / 0, d = -1 / 0; if (this.graphicsData.length) for (var e = 0, f = 0, g = 0, h = 0, i = 0, j = 0; j < this.graphicsData.length; j++) { var k = this.graphicsData[j], l = k.type, m = k.lineWidth; if (e = k.shape, l === t.SHAPES.RECT || l === t.SHAPES.RREC) f = e.x - m / 2, g = e.y - m / 2, h = e.width + m, i = e.height + m, a = f < a ? f : a, b = f + h > b ? f + h : b, c = g < c ? g : c, d = g + i > d ? g + i : d; else if (l === t.SHAPES.CIRC) f = e.x, g = e.y, h = e.radius + m / 2, i = e.radius + m / 2, a = f - h < a ? f - h : a, b = f + h > b ? f + h : b, c = g - i < c ? g - i : c, d = g + i > d ? g + i : d; else if (l === t.SHAPES.ELIP) f = e.x, g = e.y, h = e.width + m / 2, i = e.height + m / 2, a = f - h < a ? f - h : a, b = f + h > b ? f + h : b, c = g - i < c ? g - i : c, d = g + i > d ? g + i : d; else for (var n = e.points, o = 0, p = 0, q = 0, r = 0, s = 0, u = 0, v = 0, w = 0, x = 0; x + 2 < n.length; x += 2) f = n[x], g = n[x + 1], o = n[x + 2], p = n[x + 3], q = Math.abs(o - f), r = Math.abs(p - g), i = m, (h = Math.sqrt(q * q + r * r)) < 1e-9 || (s = (i / h * r + q) / 2, u = (i / h * q + r) / 2, v = (o + f) / 2, w = (p + g) / 2, a = v - s < a ? v - s : a, b = v + s > b ? v + s : b, c = w - u < c ? w - u : c, d = w + u > d ? w + u : d) } else a = 0, b = 0, c = 0, d = 0; var y = this.boundsPadding; this._localBounds.minX = a - y, this._localBounds.maxX = b + y, this._localBounds.minY = c - y, this._localBounds.maxY = d + y }, b.prototype.drawShape = function(a) { this.currentPath && this.currentPath.shape.points.length <= 2 && this.graphicsData.pop(), this.currentPath = null; var b = new o.default(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.filling, this.nativeLines, a, this.lineAlignment); return this.graphicsData.push(b), b.type === t.SHAPES.POLY && (b.shape.closed = b.shape.closed, this.currentPath = b), this.dirty++, b }, b.prototype.generateCanvasTexture = function(a) { var b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, c = this.getLocalBounds(), d = k.default.create(c.width, c.height, a, b); A || (A = new z.default), this.transform.updateLocalTransform(), this.transform.localTransform.copy(B), B.invert(), B.tx -= c.x, B.ty -= c.y, A.render(this, d, !0, B); var e = m.default.fromCanvas(d.baseTexture._canvasRenderTarget.canvas, a, "graphics"); return e.baseTexture.resolution = b, e.baseTexture.update(), e }, b.prototype.closePath = function() { var a = this.currentPath; return a && a.shape && a.shape.close(), this }, b.prototype.addHole = function() { var a = this.graphicsData.pop(); return this.currentPath = this.graphicsData[this.graphicsData.length - 1], this.currentPath.addHole(a.shape), this.currentPath = null, this }, b.prototype.destroy = function(b) { a.prototype.destroy.call(this, b); for (var c = 0; c < this.graphicsData.length; ++c) this.graphicsData[c].destroy(); for (var d in this._webGL) for (var e = 0; e < this._webGL[d].data.length; ++e) this._webGL[d].data[e].destroy(); this._spriteRect && this._spriteRect.destroy(), this.graphicsData = null, this.currentPath = null, this._webGL = null, this._localBounds = null }, b }(i.default); c.default = F, F._SPRITE_TEXTURE = null, F.CURVES = { adaptive: !1, maxLength: 10, minSegments: 8, maxSegments: 2048 } }, { "../const": 46, "../display/Bounds": 47, "../display/Container": 48, "../math": 70, "../renderers/canvas/CanvasRenderer": 77, "../sprites/Sprite": 102, "../textures/RenderTexture": 113, "../textures/Texture": 115, "../utils": 125, "./GraphicsData": 54, "./utils/bezierCurveTo": 56 }], 54: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(b, c, e, f, g, h, i, j, k) { d(this, a), this.lineWidth = b, this.lineAlignment = k, this.nativeLines = i, this.lineColor = c, this.lineAlpha = e, this._lineTint = c, this.fillColor = f, this.fillAlpha = g, this._fillTint = f, this.fill = h, this.holes = [], this.shape = j, this.type = j.type } return a.prototype.clone = function() { return new a(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.fill, this.nativeLines, this.shape) }, a.prototype.addHole = function(a) { this.holes.push(a) }, a.prototype.destroy = function() { this.shape = null, this.holes = null }, a }(); c.default = e }, {}], 55: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../../renderers/canvas/CanvasRenderer"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = a("../../const"), h = function() { function a(b) { d(this, a), this.renderer = b } return a.prototype.render = function(a) { var b = this.renderer, c = b.context, d = a.worldAlpha, e = a.transform.worldTransform, f = b.resolution; c.setTransform(e.a * f, e.b * f, e.c * f, e.d * f, e.tx * f, e.ty * f), a.canvasTintDirty === a.dirty && a._prevTint === a.tint || this.updateGraphicsTint(a), b.setBlendMode(a.blendMode); for (var h = 0; h < a.graphicsData.length; h++) { var i = a.graphicsData[h], j = i.shape, k = i._fillTint, l = i._lineTint; if (c.lineWidth = i.lineWidth, i.type === g.SHAPES.POLY) { c.beginPath(), this.renderPolygon(j.points, j.closed, c); for (var m = 0; m < i.holes.length; m++) this.renderPolygon(i.holes[m].points, !0, c); i.fill && (c.globalAlpha = i.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | k).toString(16)).substr(-6), c.fill()), i.lineWidth && (c.globalAlpha = i.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), c.stroke()) } else if (i.type === g.SHAPES.RECT)(i.fillColor || 0 === i.fillColor) && (c.globalAlpha = i.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | k).toString(16)).substr(-6), c.fillRect(j.x, j.y, j.width, j.height)), i.lineWidth && (c.globalAlpha = i.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), c.strokeRect(j.x, j.y, j.width, j.height)); else if (i.type === g.SHAPES.CIRC) c.beginPath(), c.arc(j.x, j.y, j.radius, 0, 2 * Math.PI), c.closePath(), i.fill && (c.globalAlpha = i.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | k).toString(16)).substr(-6), c.fill()), i.lineWidth && (c.globalAlpha = i.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), c.stroke()); else if (i.type === g.SHAPES.ELIP) { var n = 2 * j.width, o = 2 * j.height, p = j.x - n / 2, q = j.y - o / 2; c.beginPath(); var r = n / 2 * .5522848, s = o / 2 * .5522848, t = p + n, u = q + o, v = p + n / 2, w = q + o / 2; c.moveTo(p, w), c.bezierCurveTo(p, w - s, v - r, q, v, q), c.bezierCurveTo(v + r, q, t, w - s, t, w), c.bezierCurveTo(t, w + s, v + r, u, v, u), c.bezierCurveTo(v - r, u, p, w + s, p, w), c.closePath(), i.fill && (c.globalAlpha = i.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | k).toString(16)).substr(-6), c.fill()), i.lineWidth && (c.globalAlpha = i.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), c.stroke()) } else if (i.type === g.SHAPES.RREC) { var x = j.x, y = j.y, z = j.width, A = j.height, B = j.radius, C = Math.min(z, A) / 2 | 0; B = B > C ? C : B, c.beginPath(), c.moveTo(x, y + B), c.lineTo(x, y + A - B), c.quadraticCurveTo(x, y + A, x + B, y + A), c.lineTo(x + z - B, y + A), c.quadraticCurveTo(x + z, y + A, x + z, y + A - B), c.lineTo(x + z, y + B), c.quadraticCurveTo(x + z, y, x + z - B, y), c.lineTo(x + B, y), c.quadraticCurveTo(x, y, x, y + B), c.closePath(), (i.fillColor || 0 === i.fillColor) && (c.globalAlpha = i.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | k).toString(16)).substr(-6), c.fill()), i.lineWidth && (c.globalAlpha = i.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | l).toString(16)).substr(-6), c.stroke()) } } }, a.prototype.updateGraphicsTint = function(a) { a._prevTint = a.tint, a.canvasTintDirty = a.dirty; for (var b = (a.tint >> 16 & 255) / 255, c = (a.tint >> 8 & 255) / 255, d = (255 & a.tint) / 255, e = 0; e < a.graphicsData.length; ++e) { var f = a.graphicsData[e], g = 0 | f.fillColor, h = 0 | f.lineColor; f._fillTint = ((g >> 16 & 255) / 255 * b * 255 << 16) + ((g >> 8 & 255) / 255 * c * 255 << 8) + (255 & g) / 255 * d * 255, f._lineTint = ((h >> 16 & 255) / 255 * b * 255 << 16) + ((h >> 8 & 255) / 255 * c * 255 << 8) + (255 & h) / 255 * d * 255 } }, a.prototype.renderPolygon = function(a, b, c) { c.moveTo(a[0], a[1]); for (var d = 1; d < a.length / 2; ++d) c.lineTo(a[2 * d], a[2 * d + 1]); b && c.closePath() }, a.prototype.destroy = function() { this.renderer = null }, a }(); c.default = h, f.default.registerPlugin("graphics", h) }, { "../../const": 46, "../../renderers/canvas/CanvasRenderer": 77 }], 56: [function(a, b, c) { "use strict"; function d(a, b, c, d, e, f, g, h, i) { var j = arguments.length > 9 && void 0 !== arguments[9] ? arguments[9] : [], k = 0, l = 0, m = 0, n = 0, o = 0; j.push(a, b); for (var p = 1, q = 0; p <= i; ++p) q = p / i, k = 1 - q, l = k * k, m = l * k, n = q * q, o = n * q, j.push(m * a + 3 * l * q * c + 3 * k * n * e + o * g, m * b + 3 * l * q * d + 3 * k * n * f + o * h); return j } c.__esModule = !0, c.default = d }, {}], 57: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("../../utils"), i = a("../../const"), j = a("../../renderers/webgl/utils/ObjectRenderer"), k = d(j), l = a("../../renderers/webgl/WebGLRenderer"), m = d(l), n = a("./WebGLGraphicsData"), o = d(n), p = a("./shaders/PrimitiveShader"), q = d(p), r = a("./utils/buildPoly"), s = d(r), t = a("./utils/buildRectangle"), u = d(t), v = a("./utils/buildRoundedRectangle"), w = d(v), x = a("./utils/buildCircle"), y = d(x), z = function(a) { function b(c) { e(this, b); var d = f(this, a.call(this, c)); return d.graphicsDataPool = [], d.primitiveShader = null, d.gl = c.gl, d.CONTEXT_UID = 0, d } return g(b, a), b.prototype.onContextChange = function() { this.gl = this.renderer.gl, this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.primitiveShader = new q.default(this.gl) }, b.prototype.destroy = function() { k.default.prototype.destroy.call(this); for (var a = 0; a < this.graphicsDataPool.length; ++a) this.graphicsDataPool[a].destroy(); this.graphicsDataPool = null }, b.prototype.render = function(a) { var b = this.renderer, c = b.gl, d = void 0, e = a._webGL[this.CONTEXT_UID]; e && a.dirty === e.dirty || (this.updateGraphics(a), e = a._webGL[this.CONTEXT_UID]); var f = this.primitiveShader; b.bindShader(f), b.state.setBlendMode(a.blendMode); for (var g = 0, i = e.data.length; g < i; g++) { d = e.data[g]; var j = d.shader; b.bindShader(j), j.uniforms.translationMatrix = a.transform.worldTransform.toArray(!0), j.uniforms.tint = (0, h.hex2rgb)(a.tint), j.uniforms.alpha = a.worldAlpha, b.bindVao(d.vao), d.nativeLines ? c.drawArrays(c.LINES, 0, d.points.length / 6) : d.vao.draw(c.TRIANGLE_STRIP, d.indices.length) } }, b.prototype.updateGraphics = function(a) { var b = this.renderer.gl, c = a._webGL[this.CONTEXT_UID]; if (c || (c = a._webGL[this.CONTEXT_UID] = { lastIndex: 0, data: [], gl: b, clearDirty: -1, dirty: -1 }), c.dirty = a.dirty, a.clearDirty !== c.clearDirty) { c.clearDirty = a.clearDirty; for (var d = 0; d < c.data.length; d++) this.graphicsDataPool.push(c.data[d]); c.data.length = 0, c.lastIndex = 0 } for (var e = void 0, f = void 0, g = c.lastIndex; g < a.graphicsData.length; g++) { var h = a.graphicsData[g]; e = this.getWebGLData(c, 0), h.nativeLines && h.lineWidth && (f = this.getWebGLData(c, 0, !0), c.lastIndex++), h.type === i.SHAPES.POLY && (0, s.default)(h, e, f), h.type === i.SHAPES.RECT ? (0, u.default)(h, e, f) : h.type === i.SHAPES.CIRC || h.type === i.SHAPES.ELIP ? (0, y.default)(h, e, f) : h.type === i.SHAPES.RREC && (0, w.default)(h, e, f), c.lastIndex++ } this.renderer.bindVao(null); for (var j = 0; j < c.data.length; j++) e = c.data[j], e.dirty && e.upload() }, b.prototype.getWebGLData = function(a, b, c) { var d = a.data[a.data.length - 1]; return (!d || d.nativeLines !== c || d.points.length > 32e4) && (d = this.graphicsDataPool.pop() || new o.default(this.renderer.gl, this.primitiveShader, this.renderer.state.attribsState), d.nativeLines = c, d.reset(b), a.data.push(d)), d.dirty = !0, d }, b }(k.default); c.default = z, m.default.registerPlugin("graphics", z) }, { "../../const": 46, "../../renderers/webgl/WebGLRenderer": 84, "../../renderers/webgl/utils/ObjectRenderer": 94, "../../utils": 125, "./WebGLGraphicsData": 58, "./shaders/PrimitiveShader": 59, "./utils/buildCircle": 60, "./utils/buildPoly": 62, "./utils/buildRectangle": 63, "./utils/buildRoundedRectangle": 64 }], 58: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("pixi-gl-core"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = function() { function a(b, c, e) { d(this, a), this.gl = b, this.color = [0, 0, 0], this.points = [], this.indices = [], this.buffer = f.default.GLBuffer.createVertexBuffer(b), this.indexBuffer = f.default.GLBuffer.createIndexBuffer(b), this.dirty = !0, this.nativeLines = !1, this.glPoints = null, this.glIndices = null, this.shader = c, this.vao = new f.default.VertexArrayObject(b, e).addIndex(this.indexBuffer).addAttribute(this.buffer, c.attributes.aVertexPosition, b.FLOAT, !1, 24, 0).addAttribute(this.buffer, c.attributes.aColor, b.FLOAT, !1, 24, 8) } return a.prototype.reset = function() { this.points.length = 0, this.indices.length = 0 }, a.prototype.upload = function() { this.glPoints = new Float32Array(this.points), this.buffer.upload(this.glPoints), this.glIndices = new Uint16Array(this.indices), this.indexBuffer.upload(this.glIndices), this.dirty = !1 }, a.prototype.destroy = function() { this.color = null, this.points = null, this.indices = null, this.vao.destroy(), this.buffer.destroy(), this.indexBuffer.destroy(), this.gl = null, this.buffer = null, this.indexBuffer = null, this.glPoints = null, this.glIndices = null }, a }(); c.default = g }, { "pixi-gl-core": 15 }], 59: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = a("../../../Shader"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = function(a) { function b(c) { return d(this, b), e(this, a.call(this, c, ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform mat3 projectionMatrix;", "uniform float alpha;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void){", " gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);", " vColor = aColor * vec4(tint * alpha, alpha);", "}"].join("\n"), ["varying vec4 vColor;", "void main(void){", " gl_FragColor = vColor;", "}"].join("\n"))) } return f(b, a), b }(h.default); c.default = i }, { "../../../Shader": 44 }], 60: [function(a, b, c) { "use strict"; function d(a, b, c) { var d = a.shape, e = d.x, i = d.y, j = void 0, k = void 0; if (a.type === g.SHAPES.CIRC ? (j = d.radius, k = d.radius) : (j = d.width, k = d.height), 0 !== j && 0 !== k) { var l = Math.floor(30 * Math.sqrt(d.radius)) || Math.floor(15 * Math.sqrt(d.width + d.height)), m = 2 * Math.PI / l; if (a.fill) { var n = (0, h.hex2rgb)(a.fillColor), o = a.fillAlpha, p = n[0] * o, q = n[1] * o, r = n[2] * o, s = b.points, t = b.indices, u = s.length / 6; t.push(u); for (var v = 0; v < l + 1; v++) s.push(e, i, p, q, r, o), s.push(e + Math.sin(m * v) * j, i + Math.cos(m * v) * k, p, q, r, o), t.push(u++, u++); t.push(u - 1) } if (a.lineWidth) { var w = a.points; a.points = []; for (var x = 0; x < l; x++) a.points.push(e + Math.sin(m * -x) * j, i + Math.cos(m * -x) * k); a.points.push(a.points[0], a.points[1]), (0, f.default)(a, b, c), a.points = w } } } c.__esModule = !0, c.default = d; var e = a("./buildLine"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = a("../../../const"), h = a("../../../utils") }, { "../../../const": 46, "../../../utils": 125, "./buildLine": 61 }], 61: [function(a, b, c) { "use strict"; function d(a, b) { var c = a.points; if (0 !== c.length) { var d = new f.Point(c[0], c[1]), e = new f.Point(c[c.length - 2], c[c.length - 1]); if (d.x === e.x && d.y === e.y) { c = c.slice(), c.pop(), c.pop(), e = new f.Point(c[c.length - 2], c[c.length - 1]); var h = e.x + .5 * (d.x - e.x), i = e.y + .5 * (d.y - e.y); c.unshift(h, i), c.push(h, i) } var j = b.points, k = b.indices, l = c.length / 2, m = c.length, n = j.length / 6, o = a.lineWidth / 2, p = (0, g.hex2rgb)(a.lineColor), q = a.lineAlpha, r = p[0] * q, s = p[1] * q, t = p[2] * q, u = c[0], v = c[1], w = c[2], x = c[3], y = 0, z = 0, A = -(v - x), B = u - w, C = 0, D = 0, E = 0, F = 0, G = Math.sqrt(A * A + B * B); A /= G, B /= G, A *= o, B *= o; var H = a.lineAlignment, I = 2 * (1 - H), J = 2 * H; j.push(u - A * I, v - B * I, r, s, t, q), j.push(u + A * J, v + B * J, r, s, t, q); for (var K = 1; K < l - 1; ++K) { u = c[2 * (K - 1)], v = c[2 * (K - 1) + 1], w = c[2 * K], x = c[2 * K + 1], y = c[2 * (K + 1)], z = c[2 * (K + 1) + 1], A = -(v - x), B = u - w, G = Math.sqrt(A * A + B * B), A /= G, B /= G, A *= o, B *= o, C = -(x - z), D = w - y, G = Math.sqrt(C * C + D * D), C /= G, D /= G, C *= o, D *= o; var L = -B + v - (-B + x), M = -A + w - (-A + u), N = (-A + u) * (-B + x) - (-A + w) * (-B + v), O = -D + z - (-D + x), P = -C + w - (-C + y), Q = (-C + y) * (-D + x) - (-C + w) * (-D + z), R = L * P - O * M; if (Math.abs(R) < .1) R += 10.1, j.push(w - A * I, x - B * I, r, s, t, q), j.push(w + A * J, x + B * J, r, s, t, q); else { var S = (M * Q - P * N) / R, T = (O * N - L * Q) / R; (S - w) * (S - w) + (T - x) * (T - x) > 196 * o * o ? (E = A - C, F = B - D, G = Math.sqrt(E * E + F * F), E /= G, F /= G, E *= o, F *= o, j.push(w - E * I, x - F * I), j.push(r, s, t, q), j.push(w + E * J, x + F * J), j.push(r, s, t, q), j.push(w - E * J * I, x - F * I), j.push(r, s, t, q), m++) : (j.push(w + (S - w) * I, x + (T - x) * I), j.push(r, s, t, q), j.push(w - (S - w) * J, x - (T - x) * J), j.push(r, s, t, q)) } } u = c[2 * (l - 2)], v = c[2 * (l - 2) + 1], w = c[2 * (l - 1)], x = c[2 * (l - 1) + 1], A = -(v - x), B = u - w, G = Math.sqrt(A * A + B * B), A /= G, B /= G, A *= o, B *= o, j.push(w - A * I, x - B * I), j.push(r, s, t, q), j.push(w + A * J, x + B * J), j.push(r, s, t, q), k.push(n); for (var U = 0; U < m; ++U) k.push(n++); k.push(n - 1) } } function e(a, b) { var c = 0, d = a.points; if (0 !== d.length) { var e = b.points, f = d.length / 2, h = (0, g.hex2rgb)(a.lineColor), i = a.lineAlpha, j = h[0] * i, k = h[1] * i, l = h[2] * i; for (c = 1; c < f; c++) { var m = d[2 * (c - 1)], n = d[2 * (c - 1) + 1], o = d[2 * c], p = d[2 * c + 1]; e.push(m, n), e.push(j, k, l, i), e.push(o, p), e.push(j, k, l, i) } } } c.__esModule = !0, c.default = function(a, b, c) { a.nativeLines ? e(a, c) : d(a, b) }; var f = a("../../../math"), g = a("../../../utils") }, { "../../../math": 70, "../../../utils": 125 }], 62: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b, c) { a.points = a.shape.points.slice(); var d = a.points; if (a.fill && d.length >= 6) { for (var e = [], f = a.holes, i = 0; i < f.length; i++) { var k = f[i]; e.push(d.length / 2), d = d.concat(k.points) } var l = b.points, m = b.indices, n = d.length / 2, o = (0, h.hex2rgb)(a.fillColor), p = a.fillAlpha, q = o[0] * p, r = o[1] * p, s = o[2] * p, t = (0, j.default)(d, e, 2); if (!t) return; for (var u = l.length / 6, v = 0; v < t.length; v += 3) m.push(t[v] + u), m.push(t[v] + u), m.push(t[v + 1] + u), m.push(t[v + 2] + u), m.push(t[v + 2] + u); for (var w = 0; w < n; w++) l.push(d[2 * w], d[2 * w + 1], q, r, s, p) } a.lineWidth > 0 && (0, g.default)(a, b, c) } c.__esModule = !0, c.default = e; var f = a("./buildLine"), g = d(f), h = a("../../../utils"), i = a("earcut"), j = d(i) }, { "../../../utils": 125, "./buildLine": 61, earcut: 2 }], 63: [function(a, b, c) { "use strict"; function d(a, b, c) { var d = a.shape, e = d.x, h = d.y, i = d.width, j = d.height; if (a.fill) { var k = (0, g.hex2rgb)(a.fillColor), l = a.fillAlpha, m = k[0] * l, n = k[1] * l, o = k[2] * l, p = b.points, q = b.indices, r = p.length / 6; p.push(e, h), p.push(m, n, o, l), p.push(e + i, h), p.push(m, n, o, l), p.push(e, h + j), p.push(m, n, o, l), p.push(e + i, h + j), p.push(m, n, o, l), q.push(r, r, r + 1, r + 2, r + 3, r + 3) } if (a.lineWidth) { var s = a.points; a.points = [e, h, e + i, h, e + i, h + j, e, h + j, e, h], (0, f.default)(a, b, c), a.points = s } } c.__esModule = !0, c.default = d; var e = a("./buildLine"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = a("../../../utils") }, { "../../../utils": 125, "./buildLine": 61 }], 64: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b, c) { var d = a.shape, e = d.x, f = d.y, h = d.width, j = d.height, m = d.radius, n = []; if (n.push(e, f + m), g(e, f + j - m, e, f + j, e + m, f + j, n), g(e + h - m, f + j, e + h, f + j, e + h, f + j - m, n), g(e + h, f + m, e + h, f, e + h - m, f, n), g(e + m, f, e, f, e, f + m + 1e-10, n), a.fill) { for (var o = (0, l.hex2rgb)(a.fillColor), p = a.fillAlpha, q = o[0] * p, r = o[1] * p, s = o[2] * p, t = b.points, u = b.indices, v = t.length / 6, w = (0, i.default)(n, null, 2), x = 0, y = w.length; x < y; x += 3) u.push(w[x] + v), u.push(w[x] + v), u.push(w[x + 1] + v), u.push(w[x + 2] + v), u.push(w[x + 2] + v); for (var z = 0, A = n.length; z < A; z++) t.push(n[z], n[++z], q, r, s, p) } if (a.lineWidth) { var B = a.points; a.points = n, (0, k.default)(a, b, c), a.points = B } } function f(a, b, c) { return a + (b - a) * c } function g(a, b, c, d, e, g) { for (var h = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : [], i = h, j = 0, k = 0, l = 0, m = 0, n = 0, o = 0, p = 0, q = 0; p <= 20; ++p) q = p / 20, j = f(a, c, q), k = f(b, d, q), l = f(c, e, q), m = f(d, g, q), n = f(j, l, q), o = f(k, m, q), i.push(n, o); return i } c.__esModule = !0, c.default = e; var h = a("earcut"), i = d(h), j = a("./buildLine"), k = d(j), l = a("../../../utils") }, { "../../../utils": 125, "./buildLine": 61, earcut: 2 }], 65: [function(a, b, c) { "use strict"; function d(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b } function e(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0, c.autoDetectRenderer = c.Application = c.Filter = c.SpriteMaskFilter = c.Quad = c.RenderTarget = c.ObjectRenderer = c.WebGLManager = c.Shader = c.CanvasRenderTarget = c.TextureUvs = c.VideoBaseTexture = c.BaseRenderTexture = c.RenderTexture = c.BaseTexture = c.TextureMatrix = c.Texture = c.Spritesheet = c.CanvasGraphicsRenderer = c.GraphicsRenderer = c.GraphicsData = c.Graphics = c.TextMetrics = c.TextStyle = c.Text = c.SpriteRenderer = c.CanvasTinter = c.CanvasSpriteRenderer = c.Sprite = c.TransformBase = c.TransformStatic = c.Transform = c.Container = c.DisplayObject = c.Bounds = c.glCore = c.WebGLRenderer = c.CanvasRenderer = c.ticker = c.utils = c.settings = void 0; var f = a("./const"); Object.keys(f).forEach(function(a) { "default" !== a && "__esModule" !== a && Object.defineProperty(c, a, { enumerable: !0, get: function() { return f[a] } }) }); var g = a("./math"); Object.keys(g).forEach(function(a) { "default" !== a && "__esModule" !== a && Object.defineProperty(c, a, { enumerable: !0, get: function() { return g[a] } }) }); var h = a("pixi-gl-core"); Object.defineProperty(c, "glCore", { enumerable: !0, get: function() { return e(h).default } }); var i = a("./display/Bounds"); Object.defineProperty(c, "Bounds", { enumerable: !0, get: function() { return e(i).default } }); var j = a("./display/DisplayObject"); Object.defineProperty(c, "DisplayObject", { enumerable: !0, get: function() { return e(j).default } }); var k = a("./display/Container"); Object.defineProperty(c, "Container", { enumerable: !0, get: function() { return e(k).default } }); var l = a("./display/Transform"); Object.defineProperty(c, "Transform", { enumerable: !0, get: function() { return e(l).default } }); var m = a("./display/TransformStatic"); Object.defineProperty(c, "TransformStatic", { enumerable: !0, get: function() { return e(m).default } }); var n = a("./display/TransformBase"); Object.defineProperty(c, "TransformBase", { enumerable: !0, get: function() { return e(n).default } }); var o = a("./sprites/Sprite"); Object.defineProperty(c, "Sprite", { enumerable: !0, get: function() { return e(o).default } }); var p = a("./sprites/canvas/CanvasSpriteRenderer"); Object.defineProperty(c, "CanvasSpriteRenderer", { enumerable: !0, get: function() { return e(p).default } }); var q = a("./sprites/canvas/CanvasTinter"); Object.defineProperty(c, "CanvasTinter", { enumerable: !0, get: function() { return e(q).default } }); var r = a("./sprites/webgl/SpriteRenderer"); Object.defineProperty(c, "SpriteRenderer", { enumerable: !0, get: function() { return e(r).default } }); var s = a("./text/Text"); Object.defineProperty(c, "Text", { enumerable: !0, get: function() { return e(s).default } }); var t = a("./text/TextStyle"); Object.defineProperty(c, "TextStyle", { enumerable: !0, get: function() { return e(t).default } }); var u = a("./text/TextMetrics"); Object.defineProperty(c, "TextMetrics", { enumerable: !0, get: function() { return e(u).default } }); var v = a("./graphics/Graphics"); Object.defineProperty(c, "Graphics", { enumerable: !0, get: function() { return e(v).default } }); var w = a("./graphics/GraphicsData"); Object.defineProperty(c, "GraphicsData", { enumerable: !0, get: function() { return e(w).default } }); var x = a("./graphics/webgl/GraphicsRenderer"); Object.defineProperty(c, "GraphicsRenderer", { enumerable: !0, get: function() { return e(x).default } }); var y = a("./graphics/canvas/CanvasGraphicsRenderer"); Object.defineProperty(c, "CanvasGraphicsRenderer", { enumerable: !0, get: function() { return e(y).default } }); var z = a("./textures/Spritesheet"); Object.defineProperty(c, "Spritesheet", { enumerable: !0, get: function() { return e(z).default } }); var A = a("./textures/Texture"); Object.defineProperty(c, "Texture", { enumerable: !0, get: function() { return e(A).default } }); var B = a("./textures/TextureMatrix"); Object.defineProperty(c, "TextureMatrix", { enumerable: !0, get: function() { return e(B).default } }); var C = a("./textures/BaseTexture"); Object.defineProperty(c, "BaseTexture", { enumerable: !0, get: function() { return e(C).default } }); var D = a("./textures/RenderTexture"); Object.defineProperty(c, "RenderTexture", { enumerable: !0, get: function() { return e(D).default } }); var E = a("./textures/BaseRenderTexture"); Object.defineProperty(c, "BaseRenderTexture", { enumerable: !0, get: function() { return e(E).default } }); var F = a("./textures/VideoBaseTexture"); Object.defineProperty(c, "VideoBaseTexture", { enumerable: !0, get: function() { return e(F).default } }); var G = a("./textures/TextureUvs"); Object.defineProperty(c, "TextureUvs", { enumerable: !0, get: function() { return e(G).default } }); var H = a("./renderers/canvas/utils/CanvasRenderTarget"); Object.defineProperty(c, "CanvasRenderTarget", { enumerable: !0, get: function() { return e(H).default } }); var I = a("./Shader"); Object.defineProperty(c, "Shader", { enumerable: !0, get: function() { return e(I).default } }); var J = a("./renderers/webgl/managers/WebGLManager"); Object.defineProperty(c, "WebGLManager", { enumerable: !0, get: function() { return e(J).default } }); var K = a("./renderers/webgl/utils/ObjectRenderer"); Object.defineProperty(c, "ObjectRenderer", { enumerable: !0, get: function() { return e(K).default } }); var L = a("./renderers/webgl/utils/RenderTarget"); Object.defineProperty(c, "RenderTarget", { enumerable: !0, get: function() { return e(L).default } }); var M = a("./renderers/webgl/utils/Quad"); Object.defineProperty(c, "Quad", { enumerable: !0, get: function() { return e(M).default } }); var N = a("./renderers/webgl/filters/spriteMask/SpriteMaskFilter"); Object.defineProperty(c, "SpriteMaskFilter", { enumerable: !0, get: function() { return e(N).default } }); var O = a("./renderers/webgl/filters/Filter"); Object.defineProperty(c, "Filter", { enumerable: !0, get: function() { return e(O).default } }); var P = a("./Application"); Object.defineProperty(c, "Application", { enumerable: !0, get: function() { return e(P).default } }); var Q = a("./autoDetectRenderer"); Object.defineProperty(c, "autoDetectRenderer", { enumerable: !0, get: function() { return Q.autoDetectRenderer } }); var R = a("./utils"), S = d(R), T = a("./ticker"), U = d(T), V = a("./settings"), W = e(V), X = a("./renderers/canvas/CanvasRenderer"), Y = e(X), Z = a("./renderers/webgl/WebGLRenderer"), $ = e(Z); c.settings = W.default, c.utils = S, c.ticker = U, c.CanvasRenderer = Y.default, c.WebGLRenderer = $.default }, { "./Application": 43, "./Shader": 44, "./autoDetectRenderer": 45, "./const": 46, "./display/Bounds": 47, "./display/Container": 48, "./display/DisplayObject": 49, "./display/Transform": 50, "./display/TransformBase": 51, "./display/TransformStatic": 52, "./graphics/Graphics": 53, "./graphics/GraphicsData": 54, "./graphics/canvas/CanvasGraphicsRenderer": 55, "./graphics/webgl/GraphicsRenderer": 57, "./math": 70, "./renderers/canvas/CanvasRenderer": 77, "./renderers/canvas/utils/CanvasRenderTarget": 79, "./renderers/webgl/WebGLRenderer": 84, "./renderers/webgl/filters/Filter": 86, "./renderers/webgl/filters/spriteMask/SpriteMaskFilter": 89, "./renderers/webgl/managers/WebGLManager": 93, "./renderers/webgl/utils/ObjectRenderer": 94, "./renderers/webgl/utils/Quad": 95, "./renderers/webgl/utils/RenderTarget": 96, "./settings": 101, "./sprites/Sprite": 102, "./sprites/canvas/CanvasSpriteRenderer": 103, "./sprites/canvas/CanvasTinter": 104, "./sprites/webgl/SpriteRenderer": 106, "./text/Text": 108, "./text/TextMetrics": 109, "./text/TextStyle": 110, "./textures/BaseRenderTexture": 111, "./textures/BaseTexture": 112, "./textures/RenderTexture": 113, "./textures/Spritesheet": 114, "./textures/Texture": 115, "./textures/TextureMatrix": 116, "./textures/TextureUvs": 117, "./textures/VideoBaseTexture": 118, "./ticker": 121, "./utils": 125, "pixi-gl-core": 15 }], 66: [function(a, b, c) { "use strict"; function d(a) { return a < 0 ? -1 : a > 0 ? 1 : 0 } c.__esModule = !0; var e = a("./Matrix"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1], h = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1], i = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1], j = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1], k = [], l = []; ! function() { for (var a = 0; a < 16; a++) { var b = []; l.push(b); for (var c = 0; c < 16; c++) for (var e = d(g[a] * g[c] + i[a] * h[c]), m = d(h[a] * g[c] + j[a] * h[c]), n = d(g[a] * i[c] + i[a] * j[c]), o = d(h[a] * i[c] + j[a] * j[c]), p = 0; p < 16; p++) if (g[p] === e && h[p] === m && i[p] === n && j[p] === o) { b.push(p); break } } for (var q = 0; q < 16; q++) { var r = new f.default; r.set(g[q], h[q], i[q], j[q], 0, 0), k.push(r) } }(); var m = { E: 0, SE: 1, S: 2, SW: 3, W: 4, NW: 5, N: 6, NE: 7, MIRROR_VERTICAL: 8, MIRROR_HORIZONTAL: 12, uX: function(a) { return g[a] }, uY: function(a) { return h[a] }, vX: function(a) { return i[a] }, vY: function(a) { return j[a] }, inv: function(a) { return 8 & a ? 15 & a : 7 & -a }, add: function(a, b) { return l[a][b] }, sub: function(a, b) { return l[a][m.inv(b)] }, rotate180: function(a) { return 4 ^ a }, isVertical: function(a) { return 2 == (3 & a) }, byDirection: function(a, b) { return 2 * Math.abs(a) <= Math.abs(b) ? b >= 0 ? m.S : m.N : 2 * Math.abs(b) <= Math.abs(a) ? a > 0 ? m.E : m.W : b > 0 ? a > 0 ? m.SE : m.SW : a > 0 ? m.NE : m.NW }, matrixAppendRotationInv: function(a, b) { var c = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, d = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, e = k[m.inv(b)]; e.tx = c, e.ty = d, a.append(e) } }; c.default = m }, { "./Matrix": 67 }], 67: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), f = a("./Point"), g = function(a) { return a && a.__esModule ? a : { default: a } }(f), h = a("../const"), i = function() { function a() { var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, f = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, g = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0, h = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0; d(this, a), this.a = b, this.b = c, this.c = e, this.d = f, this.tx = g, this.ty = h, this.array = null } return a.prototype.fromArray = function(a) { this.a = a[0], this.b = a[1], this.c = a[3], this.d = a[4], this.tx = a[2], this.ty = a[5] }, a.prototype.set = function(a, b, c, d, e, f) { return this.a = a, this.b = b, this.c = c, this.d = d, this.tx = e, this.ty = f, this }, a.prototype.toArray = function(a, b) { this.array || (this.array = new Float32Array(9)); var c = b || this.array; return a ? (c[0] = this.a, c[1] = this.b, c[2] = 0, c[3] = this.c, c[4] = this.d, c[5] = 0, c[6] = this.tx, c[7] = this.ty, c[8] = 1) : (c[0] = this.a, c[1] = this.c, c[2] = this.tx, c[3] = this.b, c[4] = this.d, c[5] = this.ty, c[6] = 0, c[7] = 0, c[8] = 1), c }, a.prototype.apply = function(a, b) { b = b || new g.default; var c = a.x, d = a.y; return b.x = this.a * c + this.c * d + this.tx, b.y = this.b * c + this.d * d + this.ty, b }, a.prototype.applyInverse = function(a, b) { b = b || new g.default; var c = 1 / (this.a * this.d + this.c * -this.b), d = a.x, e = a.y; return b.x = this.d * c * d + -this.c * c * e + (this.ty * this.c - this.tx * this.d) * c, b.y = this.a * c * e + -this.b * c * d + (-this.ty * this.a + this.tx * this.b) * c, b }, a.prototype.translate = function(a, b) { return this.tx += a, this.ty += b, this }, a.prototype.scale = function(a, b) { return this.a *= a, this.d *= b, this.c *= a, this.b *= b, this.tx *= a, this.ty *= b, this }, a.prototype.rotate = function(a) { var b = Math.cos(a), c = Math.sin(a), d = this.a, e = this.c, f = this.tx; return this.a = d * b - this.b * c, this.b = d * c + this.b * b, this.c = e * b - this.d * c, this.d = e * c + this.d * b, this.tx = f * b - this.ty * c, this.ty = f * c + this.ty * b, this }, a.prototype.append = function(a) { var b = this.a, c = this.b, d = this.c, e = this.d; return this.a = a.a * b + a.b * d, this.b = a.a * c + a.b * e, this.c = a.c * b + a.d * d, this.d = a.c * c + a.d * e, this.tx = a.tx * b + a.ty * d + this.tx, this.ty = a.tx * c + a.ty * e + this.ty, this }, a.prototype.setTransform = function(a, b, c, d, e, f, g, h, i) { return this.a = Math.cos(g + i) * e, this.b = Math.sin(g + i) * e, this.c = -Math.sin(g - h) * f, this.d = Math.cos(g - h) * f, this.tx = a - (c * this.a + d * this.c), this.ty = b - (c * this.b + d * this.d), this }, a.prototype.prepend = function(a) { var b = this.tx; if (1 !== a.a || 0 !== a.b || 0 !== a.c || 1 !== a.d) { var c = this.a, d = this.c; this.a = c * a.a + this.b * a.c, this.b = c * a.b + this.b * a.d, this.c = d * a.a + this.d * a.c, this.d = d * a.b + this.d * a.d } return this.tx = b * a.a + this.ty * a.c + a.tx, this.ty = b * a.b + this.ty * a.d + a.ty, this }, a.prototype.decompose = function(a) { var b = this.a, c = this.b, d = this.c, e = this.d, f = -Math.atan2(-d, e), g = Math.atan2(c, b), i = Math.abs(f + g); return i < 1e-5 || Math.abs(h.PI_2 - i) < 1e-5 ? (a.rotation = g, b < 0 && e >= 0 && (a.rotation += a.rotation <= 0 ? Math.PI : -Math.PI), a.skew.x = a.skew.y = 0) : (a.rotation = 0, a.skew.x = f, a.skew.y = g), a.scale.x = Math.sqrt(b * b + c * c), a.scale.y = Math.sqrt(d * d + e * e), a.position.x = this.tx, a.position.y = this.ty, a }, a.prototype.invert = function() { var a = this.a, b = this.b, c = this.c, d = this.d, e = this.tx, f = a * d - b * c; return this.a = d / f, this.b = -b / f, this.c = -c / f, this.d = a / f, this.tx = (c * this.ty - d * e) / f, this.ty = -(a * this.ty - b * e) / f, this }, a.prototype.identity = function() { return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this }, a.prototype.clone = function() { var b = new a; return b.a = this.a, b.b = this.b, b.c = this.c, b.d = this.d, b.tx = this.tx, b.ty = this.ty, b }, a.prototype.copy = function(a) { return a.a = this.a, a.b = this.b, a.c = this.c, a.d = this.d, a.tx = this.tx, a.ty = this.ty, a }, e(a, null, [{ key: "IDENTITY", get: function() { return new a } }, { key: "TEMP_MATRIX", get: function() { return new a } }]), a }(); c.default = i }, { "../const": 46, "./Point": 69 }], 68: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), f = function() { function a(b, c) { var e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, f = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; d(this, a), this._x = e, this._y = f, this.cb = b, this.scope = c } return a.prototype.clone = function() { var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return new a(b || this.cb, c || this.scope, this._x, this._y) }, a.prototype.set = function(a, b) { var c = a || 0, d = b || (0 !== b ? c : 0); this._x === c && this._y === d || (this._x = c, this._y = d, this.cb.call(this.scope)) }, a.prototype.copy = function(a) { this._x === a.x && this._y === a.y || (this._x = a.x, this._y = a.y, this.cb.call(this.scope)) }, a.prototype.equals = function(a) { return a.x === this._x && a.y === this._y }, e(a, [{ key: "x", get: function() { return this._x }, set: function(a) { this._x !== a && (this._x = a, this.cb.call(this.scope)) } }, { key: "y", get: function() { return this._y }, set: function(a) { this._y !== a && (this._y = a, this.cb.call(this.scope)) } }]), a }(); c.default = f }, {}], 69: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a() { var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; d(this, a), this.x = b, this.y = c } return a.prototype.clone = function() { return new a(this.x, this.y) }, a.prototype.copy = function(a) { this.set(a.x, a.y) }, a.prototype.equals = function(a) { return a.x === this.x && a.y === this.y }, a.prototype.set = function(a, b) { this.x = a || 0, this.y = b || (0 !== b ? this.x : 0) }, a }(); c.default = e }, {}], 70: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0; var e = a("./Point"); Object.defineProperty(c, "Point", { enumerable: !0, get: function() { return d(e).default } }); var f = a("./ObservablePoint"); Object.defineProperty(c, "ObservablePoint", { enumerable: !0, get: function() { return d(f).default } }); var g = a("./Matrix"); Object.defineProperty(c, "Matrix", { enumerable: !0, get: function() { return d(g).default } }); var h = a("./GroupD8"); Object.defineProperty(c, "GroupD8", { enumerable: !0, get: function() { return d(h).default } }); var i = a("./shapes/Circle"); Object.defineProperty(c, "Circle", { enumerable: !0, get: function() { return d(i).default } }); var j = a("./shapes/Ellipse"); Object.defineProperty(c, "Ellipse", { enumerable: !0, get: function() { return d(j).default } }); var k = a("./shapes/Polygon"); Object.defineProperty(c, "Polygon", { enumerable: !0, get: function() { return d(k).default } }); var l = a("./shapes/Rectangle"); Object.defineProperty(c, "Rectangle", { enumerable: !0, get: function() { return d(l).default } }); var m = a("./shapes/RoundedRectangle"); Object.defineProperty(c, "RoundedRectangle", { enumerable: !0, get: function() { return d(m).default } }) }, { "./GroupD8": 66, "./Matrix": 67, "./ObservablePoint": 68, "./Point": 69, "./shapes/Circle": 71, "./shapes/Ellipse": 72, "./shapes/Polygon": 73, "./shapes/Rectangle": 74, "./shapes/RoundedRectangle": 75 }], 71: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("./Rectangle"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = a("../../const"), h = function() { function a() { var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; d(this, a), this.x = b, this.y = c, this.radius = e, this.type = g.SHAPES.CIRC } return a.prototype.clone = function() { return new a(this.x, this.y, this.radius) }, a.prototype.contains = function(a, b) { if (this.radius <= 0) return !1; var c = this.radius * this.radius, d = this.x - a, e = this.y - b; return d *= d, e *= e, d + e <= c }, a.prototype.getBounds = function() { return new f.default(this.x - this.radius, this.y - this.radius, 2 * this.radius, 2 * this.radius) }, a }(); c.default = h }, { "../../const": 46, "./Rectangle": 74 }], 72: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("./Rectangle"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = a("../../const"), h = function() { function a() { var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, f = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; d(this, a), this.x = b, this.y = c, this.width = e, this.height = f, this.type = g.SHAPES.ELIP } return a.prototype.clone = function() { return new a(this.x, this.y, this.width, this.height) }, a.prototype.contains = function(a, b) { if (this.width <= 0 || this.height <= 0) return !1; var c = (a - this.x) / this.width, d = (b - this.y) / this.height; return c *= c, d *= d, c + d <= 1 }, a.prototype.getBounds = function() { return new f.default(this.x - this.width, this.y - this.height, this.width, this.height) }, a }(); c.default = h }, { "../../const": 46, "./Rectangle": 74 }], 73: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../Point"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = a("../../const"), h = function() { function a() { for (var b = arguments.length, c = Array(b), e = 0; e < b; e++) c[e] = arguments[e]; if (d(this, a), Array.isArray(c[0]) && (c = c[0]), c[0] instanceof f.default) { for (var h = [], i = 0, j = c.length; i < j; i++) h.push(c[i].x, c[i].y); c = h } this.closed = !0, this.points = c, this.type = g.SHAPES.POLY } return a.prototype.clone = function() { return new a(this.points.slice()) }, a.prototype.close = function() { var a = this.points; a[0] === a[a.length - 2] && a[1] === a[a.length - 1] || a.push(a[0], a[1]) }, a.prototype.contains = function(a, b) { for (var c = !1, d = this.points.length / 2, e = 0, f = d - 1; e < d; f = e++) { var g = this.points[2 * e], h = this.points[2 * e + 1], i = this.points[2 * f], j = this.points[2 * f + 1]; h > b != j > b && a < (b - h) / (j - h) * (i - g) + g && (c = !c) } return c }, a }(); c.default = h }, { "../../const": 46, "../Point": 69 }], 74: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), f = a("../../const"), g = function() { function a() { var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, g = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; d(this, a), this.x = Number(b), this.y = Number(c), this.width = Number(e), this.height = Number(g), this.type = f.SHAPES.RECT } return a.prototype.clone = function() { return new a(this.x, this.y, this.width, this.height) }, a.prototype.copy = function(a) { return this.x = a.x, this.y = a.y, this.width = a.width, this.height = a.height, this }, a.prototype.contains = function(a, b) { return !(this.width <= 0 || this.height <= 0) && (a >= this.x && a < this.x + this.width && b >= this.y && b < this.y + this.height) }, a.prototype.pad = function(a, b) { a = a || 0, b = b || (0 !== b ? a : 0), this.x -= a, this.y -= b, this.width += 2 * a, this.height += 2 * b }, a.prototype.fit = function(a) { this.x < a.x && (this.width += this.x, this.width < 0 && (this.width = 0), this.x = a.x), this.y < a.y && (this.height += this.y, this.height < 0 && (this.height = 0), this.y = a.y), this.x + this.width > a.x + a.width && (this.width = a.width - this.x, this.width < 0 && (this.width = 0)), this.y + this.height > a.y + a.height && (this.height = a.height - this.y, this.height < 0 && (this.height = 0)) }, a.prototype.enlarge = function(a) { var b = Math.min(this.x, a.x), c = Math.max(this.x + this.width, a.x + a.width), d = Math.min(this.y, a.y), e = Math.max(this.y + this.height, a.y + a.height); this.x = b, this.width = c - b, this.y = d, this.height = e - d }, e(a, [{ key: "left", get: function() { return this.x } }, { key: "right", get: function() { return this.x + this.width } }, { key: "top", get: function() { return this.y } }, { key: "bottom", get: function() { return this.y + this.height } }], [{ key: "EMPTY", get: function() { return new a(0, 0, 0, 0) } }]), a }(); c.default = g }, { "../../const": 46 }], 75: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../../const"), f = function() { function a() { var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, f = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, g = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, h = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 20; d(this, a), this.x = b, this.y = c, this.width = f, this.height = g, this.radius = h, this.type = e.SHAPES.RREC } return a.prototype.clone = function() { return new a(this.x, this.y, this.width, this.height, this.radius) }, a.prototype.contains = function(a, b) { if (this.width <= 0 || this.height <= 0) return !1; if (a >= this.x && a <= this.x + this.width && b >= this.y && b <= this.y + this.height) { if (b >= this.y + this.radius && b <= this.y + this.height - this.radius || a >= this.x + this.radius && a <= this.x + this.width - this.radius) return !0; var c = a - (this.x + this.radius), d = b - (this.y + this.radius), e = this.radius * this.radius; if (c * c + d * d <= e) return !0; if ((c = a - (this.x + this.width - this.radius)) * c + d * d <= e) return !0; if (d = b - (this.y + this.height - this.radius), c * c + d * d <= e) return !0; if ((c = a - (this.x + this.radius)) * c + d * d <= e) return !0 } return !1 }, a }(); c.default = f }, { "../../const": 46 }], 76: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), i = a("../utils"), j = a("../math"), k = a("../const"), l = a("../settings"), m = d(l), n = a("../display/Container"), o = d(n), p = a("../textures/RenderTexture"), q = d(p), r = a("eventemitter3"), s = d(r), t = new j.Matrix, u = function(a) { function b(c, d, g, h) { e(this, b); var l = f(this, a.call(this)); return (0, i.sayHello)(c), "number" == typeof d && (d = Object.assign({ width: d, height: g || m.default.RENDER_OPTIONS.height }, h)), d = Object.assign({}, m.default.RENDER_OPTIONS, d), l.options = d, l.type = k.RENDERER_TYPE.UNKNOWN, l.screen = new j.Rectangle(0, 0, d.width, d.height), l.view = d.view || document.createElement("canvas"), l.resolution = d.resolution || m.default.RESOLUTION, l.transparent = d.transparent, l.autoResize = d.autoResize || !1, l.blendModes = null, l.preserveDrawingBuffer = d.preserveDrawingBuffer, l.clearBeforeRender = d.clearBeforeRender, l.roundPixels = d.roundPixels, l._backgroundColor = 0, l._backgroundColorRgba = [0, 0, 0, 0], l._backgroundColorString = "#000000", l.backgroundColor = d.backgroundColor || l._backgroundColor, l._tempDisplayObjectParent = new o.default, l._lastObjectRendered = l._tempDisplayObjectParent, l } return g(b, a), b.prototype.resize = function(a, b) { this.screen.width = a, this.screen.height = b, this.view.width = a * this.resolution, this.view.height = b * this.resolution, this.autoResize && (this.view.style.width = a + "px", this.view.style.height = b + "px") }, b.prototype.generateTexture = function(a, b, c, d) { d = d || a.getLocalBounds(); var e = q.default.create(0 | d.width, 0 | d.height, b, c); return t.tx = -d.x, t.ty = -d.y, this.render(a, e, !1, t, !!a.parent), e }, b.prototype.destroy = function(a) { a && this.view.parentNode && this.view.parentNode.removeChild(this.view), this.type = k.RENDERER_TYPE.UNKNOWN, this.view = null, this.screen = null, this.resolution = 0, this.transparent = !1, this.autoResize = !1, this.blendModes = null, this.options = null, this.preserveDrawingBuffer = !1, this.clearBeforeRender = !1, this.roundPixels = !1, this._backgroundColor = 0, this._backgroundColorRgba = null, this._backgroundColorString = null, this._tempDisplayObjectParent = null, this._lastObjectRendered = null }, h(b, [{ key: "width", get: function() { return this.view.width } }, { key: "height", get: function() { return this.view.height } }, { key: "backgroundColor", get: function() { return this._backgroundColor }, set: function(a) { this._backgroundColor = a, this._backgroundColorString = (0, i.hex2string)(a), (0, i.hex2rgb)(a, this._backgroundColorRgba) } }]), b }(s.default); c.default = u }, { "../const": 46, "../display/Container": 48, "../math": 70, "../settings": 101, "../textures/RenderTexture": 113, "../utils": 125, eventemitter3: 3 }], 77: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("../SystemRenderer"), i = d(h), j = a("./utils/CanvasMaskManager"), k = d(j), l = a("./utils/CanvasRenderTarget"), m = d(l), n = a("./utils/mapCanvasBlendModesToPixi"), o = d(n), p = a("../../utils"), q = a("../../const"), r = a("../../settings"), s = d(r), t = function(a) { function b(c, d, g) { e(this, b); var h = f(this, a.call(this, "Canvas", c, d, g)); return h.type = q.RENDERER_TYPE.CANVAS, h.rootContext = h.view.getContext("2d", { alpha: h.transparent }), h.context = h.rootContext, h.refresh = !0, h.maskManager = new k.default(h), h.smoothProperty = "imageSmoothingEnabled", h.rootContext.imageSmoothingEnabled || (h.rootContext.webkitImageSmoothingEnabled ? h.smoothProperty = "webkitImageSmoothingEnabled" : h.rootContext.mozImageSmoothingEnabled ? h.smoothProperty = "mozImageSmoothingEnabled" : h.rootContext.oImageSmoothingEnabled ? h.smoothProperty = "oImageSmoothingEnabled" : h.rootContext.msImageSmoothingEnabled && (h.smoothProperty = "msImageSmoothingEnabled")), h.initPlugins(), h.blendModes = (0, o.default)(), h._activeBlendMode = null, h.renderingToScreen = !1, h.resize(h.options.width, h.options.height), h } return g(b, a), b.prototype.render = function(a, b, c, d, e) { if (this.view) { this.renderingToScreen = !b, this.emit("prerender"); var f = this.resolution; b ? (b = b.baseTexture || b, b._canvasRenderTarget || (b._canvasRenderTarget = new m.default(b.width, b.height, b.resolution), b.source = b._canvasRenderTarget.canvas, b.valid = !0), this.context = b._canvasRenderTarget.context, this.resolution = b._canvasRenderTarget.resolution) : this.context = this.rootContext; var g = this.context; if (b || (this._lastObjectRendered = a), !e) { var h = a.parent, i = this._tempDisplayObjectParent.transform.worldTransform; d ? (d.copy(i), this._tempDisplayObjectParent.transform._worldID = -1) : i.identity(), a.parent = this._tempDisplayObjectParent, a.updateTransform(), a.parent = h } g.save(), g.setTransform(1, 0, 0, 1, 0, 0), g.globalAlpha = 1, this._activeBlendMode = q.BLEND_MODES.NORMAL, g.globalCompositeOperation = this.blendModes[q.BLEND_MODES.NORMAL], navigator.isCocoonJS && this.view.screencanvas && (g.fillStyle = "black", g.clear()), (void 0 !== c ? c : this.clearBeforeRender) && this.renderingToScreen && (this.transparent ? g.clearRect(0, 0, this.width, this.height) : (g.fillStyle = this._backgroundColorString, g.fillRect(0, 0, this.width, this.height))); var j = this.context; this.context = g, a.renderCanvas(this), this.context = j, g.restore(), this.resolution = f, this.emit("postrender") } }, b.prototype.clear = function(a) { var b = this.context; a = a || this._backgroundColorString, !this.transparent && a ? (b.fillStyle = a, b.fillRect(0, 0, this.width, this.height)) : b.clearRect(0, 0, this.width, this.height) }, b.prototype.setBlendMode = function(a) { this._activeBlendMode !== a && (this._activeBlendMode = a, this.context.globalCompositeOperation = this.blendModes[a]) }, b.prototype.destroy = function(b) { this.destroyPlugins(), a.prototype.destroy.call(this, b), this.context = null, this.refresh = !0, this.maskManager.destroy(), this.maskManager = null, this.smoothProperty = null }, b.prototype.resize = function(b, c) { a.prototype.resize.call(this, b, c), this.smoothProperty && (this.rootContext[this.smoothProperty] = s.default.SCALE_MODE === q.SCALE_MODES.LINEAR) }, b.prototype.invalidateBlendMode = function() { this._activeBlendMode = this.blendModes.indexOf(this.context.globalCompositeOperation) }, b }(i.default); c.default = t, p.pluginTarget.mixin(t) }, { "../../const": 46, "../../settings": 101, "../../utils": 125, "../SystemRenderer": 76, "./utils/CanvasMaskManager": 78, "./utils/CanvasRenderTarget": 79, "./utils/mapCanvasBlendModesToPixi": 81 }], 78: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../../../const"), f = function() { function a(b) { d(this, a), this.renderer = b } return a.prototype.pushMask = function(a) { var b = this.renderer; b.context.save(); var c = a.alpha, d = a.transform.worldTransform, e = b.resolution; b.context.setTransform(d.a * e, d.b * e, d.c * e, d.d * e, d.tx * e, d.ty * e), a._texture || (this.renderGraphicsShape(a), b.context.clip()), a.worldAlpha = c }, a.prototype.renderGraphicsShape = function(a) { var b = this.renderer.context, c = a.graphicsData.length; if (0 !== c) { b.beginPath(); for (var d = 0; d < c; d++) { var f = a.graphicsData[d], g = f.shape; if (f.type === e.SHAPES.POLY) { var h = g.points; b.moveTo(h[0], h[1]); for (var i = 1; i < h.length / 2; i++) b.lineTo(h[2 * i], h[2 * i + 1]); h[0] === h[h.length - 2] && h[1] === h[h.length - 1] && b.closePath() } else if (f.type === e.SHAPES.RECT) b.rect(g.x, g.y, g.width, g.height), b.closePath(); else if (f.type === e.SHAPES.CIRC) b.arc(g.x, g.y, g.radius, 0, 2 * Math.PI), b.closePath(); else if (f.type === e.SHAPES.ELIP) { var j = 2 * g.width, k = 2 * g.height, l = g.x - j / 2, m = g.y - k / 2, n = j / 2 * .5522848, o = k / 2 * .5522848, p = l + j, q = m + k, r = l + j / 2, s = m + k / 2; b.moveTo(l, s), b.bezierCurveTo(l, s - o, r - n, m, r, m), b.bezierCurveTo(r + n, m, p, s - o, p, s), b.bezierCurveTo(p, s + o, r + n, q, r, q), b.bezierCurveTo(r - n, q, l, s + o, l, s), b.closePath() } else if (f.type === e.SHAPES.RREC) { var t = g.x, u = g.y, v = g.width, w = g.height, x = g.radius, y = Math.min(v, w) / 2 | 0; x = x > y ? y : x, b.moveTo(t, u + x), b.lineTo(t, u + w - x), b.quadraticCurveTo(t, u + w, t + x, u + w), b.lineTo(t + v - x, u + w), b.quadraticCurveTo(t + v, u + w, t + v, u + w - x), b.lineTo(t + v, u + x), b.quadraticCurveTo(t + v, u, t + v - x, u), b.lineTo(t + x, u), b.quadraticCurveTo(t, u, t, u + x), b.closePath() } } } }, a.prototype.popMask = function(a) { a.context.restore(), a.invalidateBlendMode() }, a.prototype.destroy = function() {}, a }(); c.default = f }, { "../../../const": 46 }], 79: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), f = a("../../../settings"), g = function(a) { return a && a.__esModule ? a : { default: a } }(f), h = function() { function a(b, c, e) { d(this, a), this.canvas = document.createElement("canvas"), this.context = this.canvas.getContext("2d"), this.resolution = e || g.default.RESOLUTION, this.resize(b, c) } return a.prototype.clear = function() { this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height) }, a.prototype.resize = function(a, b) { this.canvas.width = a * this.resolution, this.canvas.height = b * this.resolution }, a.prototype.destroy = function() { this.context = null, this.canvas = null }, e(a, [{ key: "width", get: function() { return this.canvas.width }, set: function(a) { this.canvas.width = a } }, { key: "height", get: function() { return this.canvas.height }, set: function(a) { this.canvas.height = a } }]), a }(); c.default = h }, { "../../../settings": 101 }], 80: [function(a, b, c) { "use strict"; function d(a) { var b = document.createElement("canvas"); b.width = 6, b.height = 1; var c = b.getContext("2d"); return c.fillStyle = a, c.fillRect(0, 0, 6, 1), b } function e() { if ("undefined" == typeof document) return !1; var a = d("#ff00ff"), b = d("#ffff00"), c = document.createElement("canvas"); c.width = 6, c.height = 1; var e = c.getContext("2d"); e.globalCompositeOperation = "multiply", e.drawImage(a, 0, 0), e.drawImage(b, 2, 0); var f = e.getImageData(2, 0, 1, 1); if (!f) return !1; var g = f.data; return 255 === g[0] && 0 === g[1] && 0 === g[2] } c.__esModule = !0, c.default = e }, {}], 81: [function(a, b, c) { "use strict"; function d() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; return (0, g.default)() ? (a[e.BLEND_MODES.NORMAL] = "source-over", a[e.BLEND_MODES.ADD] = "lighter", a[e.BLEND_MODES.MULTIPLY] = "multiply", a[e.BLEND_MODES.SCREEN] = "screen", a[e.BLEND_MODES.OVERLAY] = "overlay", a[e.BLEND_MODES.DARKEN] = "darken", a[e.BLEND_MODES.LIGHTEN] = "lighten", a[e.BLEND_MODES.COLOR_DODGE] = "color-dodge", a[e.BLEND_MODES.COLOR_BURN] = "color-burn", a[e.BLEND_MODES.HARD_LIGHT] = "hard-light", a[e.BLEND_MODES.SOFT_LIGHT] = "soft-light", a[e.BLEND_MODES.DIFFERENCE] = "difference", a[e.BLEND_MODES.EXCLUSION] = "exclusion", a[e.BLEND_MODES.HUE] = "hue", a[e.BLEND_MODES.SATURATION] = "saturate", a[e.BLEND_MODES.COLOR] = "color", a[e.BLEND_MODES.LUMINOSITY] = "luminosity") : (a[e.BLEND_MODES.NORMAL] = "source-over", a[e.BLEND_MODES.ADD] = "lighter", a[e.BLEND_MODES.MULTIPLY] = "source-over", a[e.BLEND_MODES.SCREEN] = "source-over", a[e.BLEND_MODES.OVERLAY] = "source-over", a[e.BLEND_MODES.DARKEN] = "source-over", a[e.BLEND_MODES.LIGHTEN] = "source-over", a[e.BLEND_MODES.COLOR_DODGE] = "source-over", a[e.BLEND_MODES.COLOR_BURN] = "source-over", a[e.BLEND_MODES.HARD_LIGHT] = "source-over", a[e.BLEND_MODES.SOFT_LIGHT] = "source-over", a[e.BLEND_MODES.DIFFERENCE] = "source-over", a[e.BLEND_MODES.EXCLUSION] = "source-over", a[e.BLEND_MODES.HUE] = "source-over", a[e.BLEND_MODES.SATURATION] = "source-over", a[e.BLEND_MODES.COLOR] = "source-over", a[e.BLEND_MODES.LUMINOSITY] = "source-over"), a[e.BLEND_MODES.NORMAL_NPM] = a[e.BLEND_MODES.NORMAL], a[e.BLEND_MODES.ADD_NPM] = a[e.BLEND_MODES.ADD], a[e.BLEND_MODES.SCREEN_NPM] = a[e.BLEND_MODES.SCREEN], a } c.__esModule = !0, c.default = d; var e = a("../../../const"), f = a("./canUseNewCanvasBlendModes"), g = function(a) { return a && a.__esModule ? a : { default: a } }(f) }, { "../../../const": 46, "./canUseNewCanvasBlendModes": 80 }], 82: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../../const"), f = a("../../settings"), g = function(a) { return a && a.__esModule ? a : { default: a } }(f), h = function() { function a(b) { d(this, a), this.renderer = b, this.count = 0, this.checkCount = 0, this.maxIdle = g.default.GC_MAX_IDLE, this.checkCountMax = g.default.GC_MAX_CHECK_COUNT, this.mode = g.default.GC_MODE } return a.prototype.update = function() { this.count++, this.mode !== e.GC_MODES.MANUAL && ++this.checkCount > this.checkCountMax && (this.checkCount = 0, this.run()) }, a.prototype.run = function() { for (var a = this.renderer.textureManager, b = a._managedTextures, c = !1, d = 0; d < b.length; d++) { var e = b[d]; !e._glRenderTargets && this.count - e.touched > this.maxIdle && (a.destroyTexture(e, !0), b[d] = null, c = !0) } if (c) { for (var f = 0, g = 0; g < b.length; g++) null !== b[g] && (b[f++] = b[g]); b.length = f } }, a.prototype.unload = function(a) { var b = this.renderer.textureManager; a._texture && a._texture._glRenderTargets && b.destroyTexture(a._texture, !0); for (var c = a.children.length - 1; c >= 0; c--) this.unload(a.children[c]) }, a }(); c.default = h }, { "../../const": 46, "../../settings": 101 }], 83: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("pixi-gl-core"), f = a("../../const"), g = a("./utils/RenderTarget"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = a("../../utils"), j = function() { function a(b) { d(this, a), this.renderer = b, this.gl = b.gl, this._managedTextures = [] } return a.prototype.bindTexture = function() {}, a.prototype.getTexture = function() {}, a.prototype.updateTexture = function(a, b) { var c = this.gl, d = !!a._glRenderTargets; if (!a.hasLoaded) return null; var g = this.renderer.boundTextures; if (void 0 === b) { b = 0; for (var i = 0; i < g.length; ++i) if (g[i] === a) { b = i; break } } g[b] = a, c.activeTexture(c.TEXTURE0 + b); var j = a._glTextures[this.renderer.CONTEXT_UID]; if (j) d ? a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width, a.height) : j.upload(a.source); else { if (d) { var k = new h.default(this.gl, a.width, a.height, a.scaleMode, a.resolution); k.resize(a.width, a.height), a._glRenderTargets[this.renderer.CONTEXT_UID] = k, j = k.texture } else j = new e.GLTexture(this.gl, null, null, null, null), j.bind(b), j.premultiplyAlpha = !0, j.upload(a.source); a._glTextures[this.renderer.CONTEXT_UID] = j, a.on("update", this.updateTexture, this), a.on("dispose", this.destroyTexture, this), this._managedTextures.push(a), a.isPowerOfTwo ? (a.mipmap && j.enableMipmap(), a.wrapMode === f.WRAP_MODES.CLAMP ? j.enableWrapClamp() : a.wrapMode === f.WRAP_MODES.REPEAT ? j.enableWrapRepeat() : j.enableWrapMirrorRepeat()) : j.enableWrapClamp(), a.scaleMode === f.SCALE_MODES.NEAREST ? j.enableNearestScaling() : j.enableLinearScaling() } return j }, a.prototype.destroyTexture = function(a, b) { if (a = a.baseTexture || a, a.hasLoaded) { var c = this.renderer.CONTEXT_UID, d = a._glTextures, e = a._glRenderTargets; if (d[c] && (this.renderer.unbindTexture(a), d[c].destroy(), a.off("update", this.updateTexture, this), a.off("dispose", this.destroyTexture, this), delete d[c], !b)) { var f = this._managedTextures.indexOf(a); - 1 !== f && (0, i.removeItems)(this._managedTextures, f, 1) } e && e[c] && (e[c].destroy(), delete e[c]) } }, a.prototype.removeAll = function() { for (var a = 0; a < this._managedTextures.length; ++a) { var b = this._managedTextures[a]; b._glTextures[this.renderer.CONTEXT_UID] && delete b._glTextures[this.renderer.CONTEXT_UID] } }, a.prototype.destroy = function() { for (var a = 0; a < this._managedTextures.length; ++a) { var b = this._managedTextures[a]; this.destroyTexture(b, !0), b.off("update", this.updateTexture, this), b.off("dispose", this.destroyTexture, this) } this._managedTextures = null }, a }(); c.default = j }, { "../../const": 46, "../../utils": 125, "./utils/RenderTarget": 96, "pixi-gl-core": 15 }], 84: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("../SystemRenderer"), i = d(h), j = a("./managers/MaskManager"), k = d(j), l = a("./managers/StencilManager"), m = d(l), n = a("./managers/FilterManager"), o = d(n), p = a("./utils/RenderTarget"), q = d(p), r = a("./utils/ObjectRenderer"), s = d(r), t = a("./TextureManager"), u = d(t), v = a("../../textures/BaseTexture"), w = d(v), x = a("./TextureGarbageCollector"), y = d(x), z = a("./WebGLState"), A = d(z), B = a("./utils/mapWebGLDrawModesToPixi"), C = d(B), D = a("./utils/validateContext"), E = d(D), F = a("../../utils"), G = a("pixi-gl-core"), H = d(G), I = a("../../const"), J = 0, K = function(a) { function b(c, d, g) { e(this, b); var h = f(this, a.call(this, "WebGL", c, d, g)); return h.legacy = h.options.legacy, h.legacy && (H.default.VertexArrayObject.FORCE_NATIVE = !0), h.type = I.RENDERER_TYPE.WEBGL, h.handleContextLost = h.handleContextLost.bind(h), h.handleContextRestored = h.handleContextRestored.bind(h), h.view.addEventListener("webglcontextlost", h.handleContextLost, !1), h.view.addEventListener("webglcontextrestored", h.handleContextRestored, !1), h._contextOptions = { alpha: h.transparent, antialias: h.options.antialias, premultipliedAlpha: h.transparent && "notMultiplied" !== h.transparent, stencil: !0, preserveDrawingBuffer: h.options.preserveDrawingBuffer, powerPreference: h.options.powerPreference }, h._backgroundColorRgba[3] = h.transparent ? 0 : 1, h.maskManager = new k.default(h), h.stencilManager = new m.default(h), h.emptyRenderer = new s.default(h), h.currentRenderer = h.emptyRenderer, h.textureManager = null, h.filterManager = null, h.initPlugins(), h.options.context && (0, E.default)(h.options.context), h.gl = h.options.context || H.default.createContext(h.view, h._contextOptions), h.CONTEXT_UID = J++, h.state = new A.default(h.gl), h.renderingToScreen = !0, h.boundTextures = null, h._activeShader = null, h._activeVao = null, h._activeRenderTarget = null, h._initContext(), h.drawModes = (0, C.default)(h.gl), h._nextTextureLocation = 0, h.setBlendMode(0), h } return g(b, a), b.prototype._initContext = function() { var a = this.gl; a.isContextLost() && a.getExtension("WEBGL_lose_context") && a.getExtension("WEBGL_lose_context").restoreContext(); var b = a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS); this._activeShader = null, this._activeVao = null, this.boundTextures = new Array(b), this.emptyTextures = new Array(b), this.textureManager = new u.default(this), this.filterManager = new o.default(this), this.textureGC = new y.default(this), this.state.resetToDefault(), this.rootRenderTarget = new q.default(a, this.width, this.height, null, this.resolution, !0), this.rootRenderTarget.clearColor = this._backgroundColorRgba, this.bindRenderTarget(this.rootRenderTarget); var c = new H.default.GLTexture.fromData(a, null, 1, 1), d = { _glTextures: {} }; d._glTextures[this.CONTEXT_UID] = {}; for (var e = 0; e < b; e++) { var f = new w.default; f._glTextures[this.CONTEXT_UID] = c, this.boundTextures[e] = d, this.emptyTextures[e] = f, this.bindTexture(null, e) } this.emit("context", a), this.resize(this.screen.width, this.screen.height) }, b.prototype.render = function(a, b, c, d, e) { if (this.renderingToScreen = !b, this.emit("prerender"), this.gl && !this.gl.isContextLost()) { if (this._nextTextureLocation = 0, b || (this._lastObjectRendered = a), !e) { var f = a.parent; a.parent = this._tempDisplayObjectParent, a.updateTransform(), a.parent = f } this.bindRenderTexture(b, d), this.currentRenderer.start(), (void 0 !== c ? c : this.clearBeforeRender) && this._activeRenderTarget.clear(), a.renderWebGL(this), this.currentRenderer.flush(), this.textureGC.update(), this.emit("postrender") } }, b.prototype.setObjectRenderer = function(a) { this.currentRenderer !== a && (this.currentRenderer.stop(), this.currentRenderer = a, this.currentRenderer.start()) }, b.prototype.flush = function() { this.setObjectRenderer(this.emptyRenderer) }, b.prototype.resize = function(a, b) { i.default.prototype.resize.call(this, a, b), this.rootRenderTarget.resize(a, b), this._activeRenderTarget === this.rootRenderTarget && (this.rootRenderTarget.activate(), this._activeShader && (this._activeShader.uniforms.projectionMatrix = this.rootRenderTarget.projectionMatrix.toArray(!0))) }, b.prototype.setBlendMode = function(a) { this.state.setBlendMode(a) }, b.prototype.clear = function(a) { this._activeRenderTarget.clear(a) }, b.prototype.setTransform = function(a) { this._activeRenderTarget.transform = a }, b.prototype.clearRenderTexture = function(a, b) { var c = a.baseTexture, d = c._glRenderTargets[this.CONTEXT_UID]; return d && d.clear(b), this }, b.prototype.bindRenderTexture = function(a, b) { var c = void 0; if (a) { var d = a.baseTexture; d._glRenderTargets[this.CONTEXT_UID] || this.textureManager.updateTexture(d, 0), this.unbindTexture(d), c = d._glRenderTargets[this.CONTEXT_UID], c.setFrame(a.frame) } else c = this.rootRenderTarget; return c.transform = b, this.bindRenderTarget(c), this }, b.prototype.bindRenderTarget = function(a) { return a !== this._activeRenderTarget && (this._activeRenderTarget = a, a.activate(), this._activeShader && (this._activeShader.uniforms.projectionMatrix = a.projectionMatrix.toArray(!0)), this.stencilManager.setMaskStack(a.stencilMaskStack)), this }, b.prototype.bindShader = function(a, b) { return this._activeShader !== a && (this._activeShader = a, a.bind(), !1 !== b && (a.uniforms.projectionMatrix = this._activeRenderTarget.projectionMatrix.toArray(!0))), this }, b.prototype.bindTexture = function(a, b, c) { if (a = a || this.emptyTextures[b], a = a.baseTexture || a, a.touched = this.textureGC.count, c) b = b || 0; else { for (var d = 0; d < this.boundTextures.length; d++) if (this.boundTextures[d] === a) return d; void 0 === b && (this._nextTextureLocation++, this._nextTextureLocation %= this.boundTextures.length, b = this.boundTextures.length - this._nextTextureLocation - 1) } var e = this.gl, f = a._glTextures[this.CONTEXT_UID]; return f ? (this.boundTextures[b] = a, e.activeTexture(e.TEXTURE0 + b), e.bindTexture(e.TEXTURE_2D, f.texture)) : this.textureManager.updateTexture(a, b), b }, b.prototype.unbindTexture = function(a) { var b = this.gl; a = a.baseTexture || a; for (var c = 0; c < this.boundTextures.length; c++) this.boundTextures[c] === a && (this.boundTextures[c] = this.emptyTextures[c], b.activeTexture(b.TEXTURE0 + c), b.bindTexture(b.TEXTURE_2D, this.emptyTextures[c]._glTextures[this.CONTEXT_UID].texture)); return this }, b.prototype.createVao = function() { return new H.default.VertexArrayObject(this.gl, this.state.attribState) }, b.prototype.bindVao = function(a) { return this._activeVao === a ? this : (a ? a.bind() : this._activeVao && this._activeVao.unbind(), this._activeVao = a, this) }, b.prototype.reset = function() { this.setObjectRenderer(this.emptyRenderer), this.bindVao(null), this._activeShader = null, this._activeRenderTarget = this.rootRenderTarget; for (var a = 0; a < this.boundTextures.length; a++) this.boundTextures[a] = this.emptyTextures[a]; return this.rootRenderTarget.activate(), this.state.resetToDefault(), this }, b.prototype.handleContextLost = function(a) { a.preventDefault() }, b.prototype.handleContextRestored = function() { this.textureManager.removeAll(), this.filterManager.destroy(!0), this._initContext() }, b.prototype.destroy = function(b) { this.destroyPlugins(), this.view.removeEventListener("webglcontextlost", this.handleContextLost), this.view.removeEventListener("webglcontextrestored", this.handleContextRestored), this.textureManager.destroy(), a.prototype.destroy.call(this, b), this.uid = 0, this.maskManager.destroy(), this.stencilManager.destroy(), this.filterManager.destroy(), this.maskManager = null, this.filterManager = null, this.textureManager = null, this.currentRenderer = null, this.handleContextLost = null, this.handleContextRestored = null, this._contextOptions = null, this.gl.useProgram(null), this.gl.getExtension("WEBGL_lose_context") && this.gl.getExtension("WEBGL_lose_context").loseContext(), this.gl = null }, b }(i.default); c.default = K, F.pluginTarget.mixin(K) }, { "../../const": 46, "../../textures/BaseTexture": 112, "../../utils": 125, "../SystemRenderer": 76, "./TextureGarbageCollector": 82, "./TextureManager": 83, "./WebGLState": 85, "./managers/FilterManager": 90, "./managers/MaskManager": 91, "./managers/StencilManager": 92, "./utils/ObjectRenderer": 94, "./utils/RenderTarget": 96, "./utils/mapWebGLDrawModesToPixi": 99, "./utils/validateContext": 100, "pixi-gl-core": 15 }], 85: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("./utils/mapWebGLBlendModesToPixi"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = function() { function a(b) { d(this, a), this.activeState = new Uint8Array(16), this.defaultState = new Uint8Array(16), this.defaultState[0] = 1, this.stackIndex = 0, this.stack = [], this.gl = b, this.maxAttribs = b.getParameter(b.MAX_VERTEX_ATTRIBS), this.attribState = { tempAttribState: new Array(this.maxAttribs), attribState: new Array(this.maxAttribs) }, this.blendModes = (0, f.default)(b), this.nativeVaoExtension = b.getExtension("OES_vertex_array_object") || b.getExtension("MOZ_OES_vertex_array_object") || b.getExtension("WEBKIT_OES_vertex_array_object") } return a.prototype.push = function() { var a = this.stack[this.stackIndex]; a || (a = this.stack[this.stackIndex] = new Uint8Array(16)), ++this.stackIndex; for (var b = 0; b < this.activeState.length; b++) a[b] = this.activeState[b] }, a.prototype.pop = function() { var a = this.stack[--this.stackIndex]; this.setState(a) }, a.prototype.setState = function(a) { this.setBlend(a[0]), this.setDepthTest(a[1]), this.setFrontFace(a[2]), this.setCullFace(a[3]), this.setBlendMode(a[4]) }, a.prototype.setBlend = function(a) { a = a ? 1 : 0, this.activeState[0] !== a && (this.activeState[0] = a, this.gl[a ? "enable" : "disable"](this.gl.BLEND)) }, a.prototype.setBlendMode = function(a) { if (a !== this.activeState[4]) { this.activeState[4] = a; var b = this.blendModes[a]; 2 === b.length ? this.gl.blendFunc(b[0], b[1]) : this.gl.blendFuncSeparate(b[0], b[1], b[2], b[3]) } }, a.prototype.setDepthTest = function(a) { a = a ? 1 : 0, this.activeState[1] !== a && (this.activeState[1] = a, this.gl[a ? "enable" : "disable"](this.gl.DEPTH_TEST)) }, a.prototype.setCullFace = function(a) { a = a ? 1 : 0, this.activeState[3] !== a && (this.activeState[3] = a, this.gl[a ? "enable" : "disable"](this.gl.CULL_FACE)) }, a.prototype.setFrontFace = function(a) { a = a ? 1 : 0, this.activeState[2] !== a && (this.activeState[2] = a, this.gl.frontFace(this.gl[a ? "CW" : "CCW"])) }, a.prototype.resetAttributes = function() { for (var a = 0; a < this.attribState.tempAttribState.length; a++) this.attribState.tempAttribState[a] = 0; for (var b = 0; b < this.attribState.attribState.length; b++) this.attribState.attribState[b] = 0; for (var c = 1; c < this.maxAttribs; c++) this.gl.disableVertexAttribArray(c) }, a.prototype.resetToDefault = function() { this.nativeVaoExtension && this.nativeVaoExtension.bindVertexArrayOES(null), this.resetAttributes(); for (var a = 0; a < this.activeState.length; ++a) this.activeState[a] = 32; this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1), this.setState(this.defaultState) }, a }(); c.default = g }, { "./utils/mapWebGLBlendModesToPixi": 98 }], 86: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var f = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), g = a("./extractUniformsFromSrc"), h = d(g), i = a("../../../utils"), j = a("../../../const"), k = a("../../../settings"), l = d(k), m = {}, n = function() { function a(b, c, d) { e(this, a), this.vertexSrc = b || a.defaultVertexSrc, this.fragmentSrc = c || a.defaultFragmentSrc, this._blendMode = j.BLEND_MODES.NORMAL, this.uniformData = d || (0, h.default)(this.vertexSrc, this.fragmentSrc, "projectionMatrix|uSampler"), this.uniforms = {}; for (var f in this.uniformData) this.uniforms[f] = this.uniformData[f].value, this.uniformData[f].type && (this.uniformData[f].type = this.uniformData[f].type.toLowerCase()); this.glShaders = {}, m[this.vertexSrc + this.fragmentSrc] || (m[this.vertexSrc + this.fragmentSrc] = (0, i.uid)()), this.glShaderKey = m[this.vertexSrc + this.fragmentSrc], this.padding = 4, this.resolution = l.default.FILTER_RESOLUTION, this.enabled = !0, this.autoFit = !0 } return a.prototype.apply = function(a, b, c, d, e) { a.applyFilter(this, b, c, d) }, f(a, [{ key: "blendMode", get: function() { return this._blendMode }, set: function(a) { this._blendMode = a } }], [{ key: "defaultVertexSrc", get: function() { return ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform mat3 projectionMatrix;", "uniform mat3 filterMatrix;", "varying vec2 vTextureCoord;", "varying vec2 vFilterCoord;", "void main(void){", " gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);", " vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0) ).xy;", " vTextureCoord = aTextureCoord ;", "}"].join("\n") } }, { key: "defaultFragmentSrc", get: function() { return ["varying vec2 vTextureCoord;", "varying vec2 vFilterCoord;", "uniform sampler2D uSampler;", "uniform sampler2D filterSampler;", "void main(void){", " vec4 masky = texture2D(filterSampler, vFilterCoord);", " vec4 sample = texture2D(uSampler, vTextureCoord);", " vec4 color;", " if(mod(vFilterCoord.x, 1.0) > 0.5)", " {", " color = vec4(1.0, 0.0, 0.0, 1.0);", " }", " else", " {", " color = vec4(0.0, 1.0, 0.0, 1.0);", " }", " gl_FragColor = mix(sample, masky, 0.5);", " gl_FragColor *= sample.a;", "}"].join("\n") } }]), a }(); c.default = n }, { "../../../const": 46, "../../../settings": 101, "../../../utils": 125, "./extractUniformsFromSrc": 87 }], 87: [function(a, b, c) { "use strict"; function d(a, b, c) { var d = e(a), f = e(b); return Object.assign(d, f) } function e(a) { for (var b = new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"), c = {}, d = void 0, e = a.replace(/\s+/g, " ").split(/\s*;\s*/), f = 0; f < e.length; f++) { var g = e[f].trim(); if (g.indexOf("uniform") > -1) { var i = g.split(" "), j = i[1], k = i[2], l = 1; k.indexOf("[") > -1 && (d = k.split(/\[|]/), k = d[0], l *= Number(d[1])), k.match(b) || (c[k] = { value: h(j, l), name: k, type: j }) } } return c } c.__esModule = !0, c.default = d; var f = a("pixi-gl-core"), g = function(a) { return a && a.__esModule ? a : { default: a } }(f), h = g.default.shader.defaultValue }, { "pixi-gl-core": 15 }], 88: [function(a, b, c) { "use strict"; function d(a, b, c) { var d = a.identity(); return d.translate(b.x / c.width, b.y / c.height), d.scale(c.width, c.height), d } function e(a, b, c) { var d = a.identity(); d.translate(b.x / c.width, b.y / c.height); var e = c.width / b.width, f = c.height / b.height; return d.scale(e, f), d } function f(a, b, c, d) { var e = d._texture.orig, f = a.set(c.width, 0, 0, c.height, b.x, b.y), h = d.worldTransform.copy(g.Matrix.TEMP_MATRIX); return h.invert(), f.prepend(h), f.scale(1 / e.width, 1 / e.height), f.translate(d.anchor.x, d.anchor.y), f } c.__esModule = !0, c.calculateScreenSpaceMatrix = d, c.calculateNormalizedScreenSpaceMatrix = e, c.calculateSpriteMatrix = f; var g = a("../../../math") }, { "../../../math": 70 }], 89: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("../Filter"), i = d(h), j = a("../../../../math"), k = (a("path"), a("../../../../textures/TextureMatrix")), l = d(k), m = function(a) { function b(c) { e(this, b); var d = new j.Matrix, g = f(this, a.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n vTextureCoord = aTextureCoord;\n vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0) ).xy;\n}\n", "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n float clip = step(3.5,\n step(maskClamp.x, vMaskCoord.x) +\n step(maskClamp.y, vMaskCoord.y) +\n step(vMaskCoord.x, maskClamp.z) +\n step(vMaskCoord.y, maskClamp.w));\n\n vec4 original = texture2D(uSampler, vTextureCoord);\n vec4 masky = texture2D(mask, vMaskCoord);\n\n original *= (masky.r * masky.a * alpha * clip);\n\n gl_FragColor = original;\n}\n")); return c.renderable = !1, g.maskSprite = c, g.maskMatrix = d, g } return g(b, a), b.prototype.apply = function(a, b, c) { var d = this.maskSprite, e = this.maskSprite.texture; e.valid && (e.transform || (e.transform = new l.default(e, 0)), e.transform.update(), this.uniforms.mask = e, this.uniforms.otherMatrix = a.calculateSpriteMatrix(this.maskMatrix, d).prepend(e.transform.mapCoord), this.uniforms.alpha = d.worldAlpha, this.uniforms.maskClamp = e.transform.uClampFrame, a.applyFilter(this, b, c)) }, b }(i.default); c.default = m }, { "../../../../math": 70, "../../../../textures/TextureMatrix": 116, "../Filter": 86, path: 8 }], 90: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } function g(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var h = a("./WebGLManager"), i = d(h), j = a("../utils/RenderTarget"), k = d(j), l = a("../utils/Quad"), m = d(l), n = a("../../../math"), o = a("../../../Shader"), p = d(o), q = a("../filters/filterTransforms"), r = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(q), s = a("bit-twiddle"), t = d(s), u = function() { function a() { g(this, a), this.renderTarget = null, this.target = null, this.resolution = 1, this.sourceFrame = new n.Rectangle, this.destinationFrame = new n.Rectangle, this.filters = [] } return a.prototype.clear = function() { this.filters = null, this.target = null, this.renderTarget = null }, a }(), v = function(a) { function b(c) { g(this, b); var d = e(this, a.call(this, c)); return d.gl = d.renderer.gl, d.quad = new m.default(d.gl, c.state.attribState), d.shaderCache = {}, d.pool = {}, d.filterData = null, d.managedFilters = [], d.renderer.on("prerender", d.onPrerender, d), d._screenWidth = c.view.width, d._screenHeight = c.view.height, d } return f(b, a), b.prototype.pushFilter = function(a, b) { var c = this.renderer, d = this.filterData; if (!d) { d = this.renderer._activeRenderTarget.filterStack; var e = new u; e.sourceFrame = e.destinationFrame = this.renderer._activeRenderTarget.size, e.renderTarget = c._activeRenderTarget, this.renderer._activeRenderTarget.filterData = d = { index: 0, stack: [e] }, this.filterData = d } var f = d.stack[++d.index], g = d.stack[0].destinationFrame; f || (f = d.stack[d.index] = new u); var h = a.filterArea && 0 === a.filterArea.x && 0 === a.filterArea.y && a.filterArea.width === c.screen.width && a.filterArea.height === c.screen.height, i = b[0].resolution, j = 0 | b[0].padding, k = h ? c.screen : a.filterArea || a.getBounds(!0), l = f.sourceFrame, m = f.destinationFrame; l.x = (k.x * i | 0) / i, l.y = (k.y * i | 0) / i, l.width = (k.width * i | 0) / i, l.height = (k.height * i | 0) / i, h || (d.stack[0].renderTarget.transform || b[0].autoFit && l.fit(g), l.pad(j)), m.width = l.width, m.height = l.height; var n = this.getPotRenderTarget(c.gl, l.width, l.height, i); f.target = a, f.filters = b, f.resolution = i, f.renderTarget = n, n.setFrame(m, l), c.bindRenderTarget(n), n.clear() }, b.prototype.popFilter = function() { var a = this.filterData, b = a.stack[a.index - 1], c = a.stack[a.index]; this.quad.map(c.renderTarget.size, c.sourceFrame).upload(); var d = c.filters; if (1 === d.length) d[0].apply(this, c.renderTarget, b.renderTarget, !1, c), this.freePotRenderTarget(c.renderTarget); else { var e = c.renderTarget, f = this.getPotRenderTarget(this.renderer.gl, c.sourceFrame.width, c.sourceFrame.height, c.resolution); f.setFrame(c.destinationFrame, c.sourceFrame), f.clear(); var g = 0; for (g = 0; g < d.length - 1; ++g) { d[g].apply(this, e, f, !0, c); var h = e; e = f, f = h } d[g].apply(this, e, b.renderTarget, !1, c), this.freePotRenderTarget(e), this.freePotRenderTarget(f) } c.clear(), 0 === --a.index && (this.filterData = null) }, b.prototype.applyFilter = function(a, b, c, d) { var e = this.renderer, f = e.gl, g = a.glShaders[e.CONTEXT_UID]; g || (a.glShaderKey ? (g = this.shaderCache[a.glShaderKey]) || (g = new p.default(this.gl, a.vertexSrc, a.fragmentSrc), a.glShaders[e.CONTEXT_UID] = this.shaderCache[a.glShaderKey] = g, this.managedFilters.push(a)) : (g = a.glShaders[e.CONTEXT_UID] = new p.default(this.gl, a.vertexSrc, a.fragmentSrc), this.managedFilters.push(a)), e.bindVao(null), this.quad.initVao(g)), e.bindVao(this.quad.vao), e.bindRenderTarget(c), d && (f.disable(f.SCISSOR_TEST), e.clear(), f.enable(f.SCISSOR_TEST)), c === e.maskManager.scissorRenderTarget && e.maskManager.pushScissorMask(null, e.maskManager.scissorData), e.bindShader(g); var h = this.renderer.emptyTextures[0]; this.renderer.boundTextures[0] = h, this.syncUniforms(g, a), e.state.setBlendMode(a.blendMode), f.activeTexture(f.TEXTURE0), f.bindTexture(f.TEXTURE_2D, b.texture.texture), this.quad.vao.draw(this.renderer.gl.TRIANGLES, 6, 0), f.bindTexture(f.TEXTURE_2D, h._glTextures[this.renderer.CONTEXT_UID].texture) }, b.prototype.syncUniforms = function(a, b) { var c = b.uniformData, d = b.uniforms, e = 1, f = void 0; if (a.uniforms.filterArea) { f = this.filterData.stack[this.filterData.index]; var g = a.uniforms.filterArea; g[0] = f.renderTarget.size.width, g[1] = f.renderTarget.size.height, g[2] = f.sourceFrame.x, g[3] = f.sourceFrame.y, a.uniforms.filterArea = g } if (a.uniforms.filterClamp) { f = f || this.filterData.stack[this.filterData.index]; var h = a.uniforms.filterClamp; h[0] = 0, h[1] = 0, h[2] = (f.sourceFrame.width - 1) / f.renderTarget.size.width, h[3] = (f.sourceFrame.height - 1) / f.renderTarget.size.height, a.uniforms.filterClamp = h } for (var i in c) { var j = c[i].type; if ("sampler2d" === j && 0 !== d[i]) { if (d[i].baseTexture) a.uniforms[i] = this.renderer.bindTexture(d[i].baseTexture, e); else { a.uniforms[i] = e; var k = this.renderer.gl; this.renderer.boundTextures[e] = this.renderer.emptyTextures[e], k.activeTexture(k.TEXTURE0 + e), d[i].texture.bind() } e++ } else if ("mat3" === j) void 0 !== d[i].a ? a.uniforms[i] = d[i].toArray(!0) : a.uniforms[i] = d[i]; else if ("vec2" === j) if (void 0 !== d[i].x) { var l = a.uniforms[i] || new Float32Array(2); l[0] = d[i].x, l[1] = d[i].y, a.uniforms[i] = l } else a.uniforms[i] = d[i]; else "float" === j ? a.uniforms.data[i].value !== c[i] && (a.uniforms[i] = d[i]) : a.uniforms[i] = d[i] } }, b.prototype.getRenderTarget = function(a, b) { var c = this.filterData.stack[this.filterData.index], d = this.getPotRenderTarget(this.renderer.gl, c.sourceFrame.width, c.sourceFrame.height, b || c.resolution); return d.setFrame(c.destinationFrame, c.sourceFrame), d }, b.prototype.returnRenderTarget = function(a) { this.freePotRenderTarget(a) }, b.prototype.calculateScreenSpaceMatrix = function(a) { var b = this.filterData.stack[this.filterData.index]; return r.calculateScreenSpaceMatrix(a, b.sourceFrame, b.renderTarget.size) }, b.prototype.calculateNormalizedScreenSpaceMatrix = function(a) { var b = this.filterData.stack[this.filterData.index]; return r.calculateNormalizedScreenSpaceMatrix(a, b.sourceFrame, b.renderTarget.size, b.destinationFrame) }, b.prototype.calculateSpriteMatrix = function(a, b) { var c = this.filterData.stack[this.filterData.index]; return r.calculateSpriteMatrix(a, c.sourceFrame, c.renderTarget.size, b) }, b.prototype.destroy = function() { var a = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], b = this.renderer, c = this.managedFilters; b.off("prerender", this.onPrerender, this); for (var d = 0; d < c.length; d++) a || c[d].glShaders[b.CONTEXT_UID].destroy(), delete c[d].glShaders[b.CONTEXT_UID]; this.shaderCache = {}, a ? this.pool = {} : this.emptyPool() }, b.prototype.getPotRenderTarget = function(a, b, c, d) { var e = "screen"; b *= d, c *= d, b === this._screenWidth && c === this._screenHeight || (b = t.default.nextPow2(b), c = t.default.nextPow2(c), e = (65535 & b) << 16 | 65535 & c), this.pool[e] || (this.pool[e] = []); var f = this.pool[e].pop(); if (!f) { var g = this.renderer.boundTextures[0]; a.activeTexture(a.TEXTURE0), f = new k.default(a, b, c, null, 1), a.bindTexture(a.TEXTURE_2D, g._glTextures[this.renderer.CONTEXT_UID].texture) } return f.resolution = d, f.defaultFrame.width = f.size.width = b / d, f.defaultFrame.height = f.size.height = c / d, f.filterPoolKey = e, f }, b.prototype.emptyPool = function() { for (var a in this.pool) { var b = this.pool[a]; if (b) for (var c = 0; c < b.length; c++) b[c].destroy(!0) } this.pool = {} }, b.prototype.freePotRenderTarget = function(a) { this.pool[a.filterPoolKey].push(a) }, b.prototype.onPrerender = function() { if (this._screenWidth !== this.renderer.view.width || this._screenHeight !== this.renderer.view.height) { this._screenWidth = this.renderer.view.width, this._screenHeight = this.renderer.view.height; var a = this.pool.screen; if (a) for (var b = 0; b < a.length; b++) a[b].destroy(!0); this.pool.screen = [] } }, b }(i.default); c.default = v }, { "../../../Shader": 44, "../../../math": 70, "../filters/filterTransforms": 88, "../utils/Quad": 95, "../utils/RenderTarget": 96, "./WebGLManager": 93, "bit-twiddle": 1 }], 91: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("./WebGLManager"), i = d(h), j = a("../filters/spriteMask/SpriteMaskFilter"), k = d(j), l = function(a) { function b(c) { e(this, b); var d = f(this, a.call(this, c)); return d.scissor = !1, d.scissorData = null, d.scissorRenderTarget = null, d.enableScissor = !0, d.alphaMaskPool = [], d.alphaMaskIndex = 0, d } return g(b, a), b.prototype.pushMask = function(a, b) { if (b.texture) this.pushSpriteMask(a, b); else if (this.enableScissor && !this.scissor && this.renderer._activeRenderTarget.root && !this.renderer.stencilManager.stencilMaskStack.length && b.isFastRect()) { var c = b.worldTransform, d = Math.atan2(c.b, c.a); d = Math.round(d * (180 / Math.PI)), d % 90 ? this.pushStencilMask(b) : this.pushScissorMask(a, b) } else this.pushStencilMask(b) }, b.prototype.popMask = function(a, b) { b.texture ? this.popSpriteMask(a, b) : this.enableScissor && !this.renderer.stencilManager.stencilMaskStack.length ? this.popScissorMask(a, b) : this.popStencilMask(a, b) }, b.prototype.pushSpriteMask = function(a, b) { var c = this.alphaMaskPool[this.alphaMaskIndex]; c || (c = this.alphaMaskPool[this.alphaMaskIndex] = [new k.default(b)]), c[0].resolution = this.renderer.resolution, c[0].maskSprite = b, a.filterArea = b.getBounds(!0), this.renderer.filterManager.pushFilter(a, c), this.alphaMaskIndex++ }, b.prototype.popSpriteMask = function() { this.renderer.filterManager.popFilter(), this.alphaMaskIndex-- }, b.prototype.pushStencilMask = function(a) { this.renderer.currentRenderer.stop(), this.renderer.stencilManager.pushStencil(a) }, b.prototype.popStencilMask = function() { this.renderer.currentRenderer.stop(), this.renderer.stencilManager.popStencil() }, b.prototype.pushScissorMask = function(a, b) { b.renderable = !0; var c = this.renderer._activeRenderTarget, d = b.getBounds(); d.fit(c.size), b.renderable = !1, this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST); var e = this.renderer.resolution; this.renderer.gl.scissor(d.x * e, (c.root ? c.size.height - d.y - d.height : d.y) * e, d.width * e, d.height * e), this.scissorRenderTarget = c, this.scissorData = b, this.scissor = !0 }, b.prototype.popScissorMask = function() { this.scissorRenderTarget = null, this.scissorData = null, this.scissor = !1; var a = this.renderer.gl; a.disable(a.SCISSOR_TEST) }, b }(i.default); c.default = l }, { "../filters/spriteMask/SpriteMaskFilter": 89, "./WebGLManager": 93 }], 92: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = a("./WebGLManager"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = function(a) { function b(c) { d(this, b); var f = e(this, a.call(this, c)); return f.stencilMaskStack = null, f } return f(b, a), b.prototype.setMaskStack = function(a) { this.stencilMaskStack = a; var b = this.renderer.gl; 0 === a.length ? b.disable(b.STENCIL_TEST) : b.enable(b.STENCIL_TEST) }, b.prototype.pushStencil = function(a) { this.renderer.setObjectRenderer(this.renderer.plugins.graphics), this.renderer._activeRenderTarget.attachStencilBuffer(); var b = this.renderer.gl, c = this.stencilMaskStack.length; 0 === c && b.enable(b.STENCIL_TEST), this.stencilMaskStack.push(a), b.colorMask(!1, !1, !1, !1), b.stencilFunc(b.EQUAL, c, this._getBitwiseMask()), b.stencilOp(b.KEEP, b.KEEP, b.INCR), this.renderer.plugins.graphics.render(a), this._useCurrent() }, b.prototype.popStencil = function() { this.renderer.setObjectRenderer(this.renderer.plugins.graphics); var a = this.renderer.gl, b = this.stencilMaskStack.pop(); 0 === this.stencilMaskStack.length ? (a.disable(a.STENCIL_TEST), a.clear(a.STENCIL_BUFFER_BIT), a.clearStencil(0)) : (a.colorMask(!1, !1, !1, !1), a.stencilOp(a.KEEP, a.KEEP, a.DECR), this.renderer.plugins.graphics.render(b), this._useCurrent()) }, b.prototype._useCurrent = function() { var a = this.renderer.gl; a.colorMask(!0, !0, !0, !0), a.stencilFunc(a.EQUAL, this.stencilMaskStack.length, this._getBitwiseMask()), a.stencilOp(a.KEEP, a.KEEP, a.KEEP) }, b.prototype._getBitwiseMask = function() { return (1 << this.stencilMaskStack.length) - 1 }, b.prototype.destroy = function() { h.default.prototype.destroy.call(this), this.stencilMaskStack.stencilStack = null }, b }(h.default); c.default = i }, { "./WebGLManager": 93 }], 93: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(b) { d(this, a), this.renderer = b, this.renderer.on("context", this.onContextChange, this) } return a.prototype.onContextChange = function() {}, a.prototype.destroy = function() { this.renderer.off("context", this.onContextChange, this), this.renderer = null }, a }(); c.default = e }, {}], 94: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = a("../managers/WebGLManager"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = function(a) { function b() { return d(this, b), e(this, a.apply(this, arguments)) } return f(b, a), b.prototype.start = function() {}, b.prototype.stop = function() { this.flush() }, b.prototype.flush = function() {}, b.prototype.render = function(a) {}, b }(h.default); c.default = i }, { "../managers/WebGLManager": 93 }], 95: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var f = a("pixi-gl-core"), g = d(f), h = a("../../../utils/createIndicesForQuads"), i = d(h), j = function() { function a(b, c) { e(this, a), this.gl = b, this.vertices = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1]), this.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), this.interleaved = new Float32Array(16); for (var d = 0; d < 4; d++) this.interleaved[4 * d] = this.vertices[2 * d], this.interleaved[4 * d + 1] = this.vertices[2 * d + 1], this.interleaved[4 * d + 2] = this.uvs[2 * d], this.interleaved[4 * d + 3] = this.uvs[2 * d + 1]; this.indices = (0, i.default)(1), this.vertexBuffer = g.default.GLBuffer.createVertexBuffer(b, this.interleaved, b.STATIC_DRAW), this.indexBuffer = g.default.GLBuffer.createIndexBuffer(b, this.indices, b.STATIC_DRAW), this.vao = new g.default.VertexArrayObject(b, c) } return a.prototype.initVao = function(a) { this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer, a.attributes.aVertexPosition, this.gl.FLOAT, !1, 16, 0).addAttribute(this.vertexBuffer, a.attributes.aTextureCoord, this.gl.FLOAT, !1, 16, 8) }, a.prototype.map = function(a, b) { var c = 0, d = 0; return this.uvs[0] = c, this.uvs[1] = d, this.uvs[2] = c + b.width / a.width, this.uvs[3] = d, this.uvs[4] = c + b.width / a.width, this.uvs[5] = d + b.height / a.height, this.uvs[6] = c, this.uvs[7] = d + b.height / a.height, c = b.x, d = b.y, this.vertices[0] = c, this.vertices[1] = d, this.vertices[2] = c + b.width, this.vertices[3] = d, this.vertices[4] = c + b.width, this.vertices[5] = d + b.height, this.vertices[6] = c, this.vertices[7] = d + b.height, this }, a.prototype.upload = function() { for (var a = 0; a < 4; a++) this.interleaved[4 * a] = this.vertices[2 * a], this.interleaved[4 * a + 1] = this.vertices[2 * a + 1], this.interleaved[4 * a + 2] = this.uvs[2 * a], this.interleaved[4 * a + 3] = this.uvs[2 * a + 1]; return this.vertexBuffer.upload(this.interleaved), this }, a.prototype.destroy = function() { var a = this.gl; a.deleteBuffer(this.vertexBuffer), a.deleteBuffer(this.indexBuffer) }, a }(); c.default = j }, { "../../../utils/createIndicesForQuads": 123, "pixi-gl-core": 15 }], 96: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../../../math"), f = a("../../../const"), g = a("../../../settings"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = a("pixi-gl-core"), j = function() { function a(b, c, g, j, k, l) { d(this, a), this.gl = b, this.frameBuffer = null, this.texture = null, this.clearColor = [0, 0, 0, 0], this.size = new e.Rectangle(0, 0, 1, 1), this.resolution = k || h.default.RESOLUTION, this.projectionMatrix = new e.Matrix, this.transform = null, this.frame = null, this.defaultFrame = new e.Rectangle, this.destinationFrame = null, this.sourceFrame = null, this.stencilBuffer = null, this.stencilMaskStack = [], this.filterData = null, this.filterPoolKey = "", this.scaleMode = void 0 !== j ? j : h.default.SCALE_MODE, this.root = l, this.root ? (this.frameBuffer = new i.GLFramebuffer(b, 100, 100), this.frameBuffer.framebuffer = null) : (this.frameBuffer = i.GLFramebuffer.createRGBA(b, 100, 100), this.scaleMode === f.SCALE_MODES.NEAREST ? this.frameBuffer.texture.enableNearestScaling() : this.frameBuffer.texture.enableLinearScaling(), this.texture = this.frameBuffer.texture), this.setFrame(), this.resize(c, g) } return a.prototype.clear = function(a) { var b = a || this.clearColor; this.frameBuffer.clear(b[0], b[1], b[2], b[3]) }, a.prototype.attachStencilBuffer = function() { this.root || this.frameBuffer.enableStencil() }, a.prototype.setFrame = function(a, b) { this.destinationFrame = a || this.destinationFrame || this.defaultFrame, this.sourceFrame = b || this.sourceFrame || this.destinationFrame }, a.prototype.activate = function() { var a = this.gl; this.frameBuffer.bind(), this.calculateProjection(this.destinationFrame, this.sourceFrame), this.transform && this.projectionMatrix.append(this.transform), this.destinationFrame !== this.sourceFrame ? (a.enable(a.SCISSOR_TEST), a.scissor(0 | this.destinationFrame.x, 0 | this.destinationFrame.y, this.destinationFrame.width * this.resolution | 0, this.destinationFrame.height * this.resolution | 0)) : a.disable(a.SCISSOR_TEST), a.viewport(0 | this.destinationFrame.x, 0 | this.destinationFrame.y, this.destinationFrame.width * this.resolution | 0, this.destinationFrame.height * this.resolution | 0) }, a.prototype.calculateProjection = function(a, b) { var c = this.projectionMatrix; b = b || a, c.identity(), this.root ? (c.a = 1 / a.width * 2, c.d = -1 / a.height * 2, c.tx = -1 - b.x * c.a, c.ty = 1 - b.y * c.d) : (c.a = 1 / a.width * 2, c.d = 1 / a.height * 2, c.tx = -1 - b.x * c.a, c.ty = -1 - b.y * c.d) }, a.prototype.resize = function(a, b) { if (a |= 0, b |= 0, this.size.width !== a || this.size.height !== b) { this.size.width = a, this.size.height = b, this.defaultFrame.width = a, this.defaultFrame.height = b, this.frameBuffer.resize(a * this.resolution, b * this.resolution); var c = this.frame || this.size; this.calculateProjection(c) } }, a.prototype.destroy = function() { this.frameBuffer.destroy(), this.frameBuffer = null, this.texture = null }, a }(); c.default = j }, { "../../../const": 46, "../../../math": 70, "../../../settings": 101, "pixi-gl-core": 15 }], 97: [function(a, b, c) { "use strict"; function d(a, b) { var c = !b; if (0 === a) throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`"); if (c) { var d = document.createElement("canvas"); d.width = 1, d.height = 1, b = g.default.createContext(d) } for (var f = b.createShader(b.FRAGMENT_SHADER);;) { var i = h.replace(/%forloop%/gi, e(a)); if (b.shaderSource(f, i), b.compileShader(f), b.getShaderParameter(f, b.COMPILE_STATUS)) break; a = a / 2 | 0 } return c && b.getExtension("WEBGL_lose_context") && b.getExtension("WEBGL_lose_context").loseContext(), a } function e(a) { for (var b = "", c = 0; c < a; ++c) c > 0 && (b += "\nelse "), c < a - 1 && (b += "if(test == " + c + ".0){}"); return b } c.__esModule = !0, c.default = d; var f = a("pixi-gl-core"), g = function(a) { return a && a.__esModule ? a : { default: a } }(f), h = ["precision mediump float;", "void main(void){", "float test = 0.1;", "%forloop%", "gl_FragColor = vec4(0.0);", "}"].join("\n") }, { "pixi-gl-core": 15 }], 98: [function(a, b, c) { "use strict"; function d(a) { var b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; return b[e.BLEND_MODES.NORMAL] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.ADD] = [a.ONE, a.DST_ALPHA], b[e.BLEND_MODES.MULTIPLY] = [a.DST_COLOR, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.SCREEN] = [a.ONE, a.ONE_MINUS_SRC_COLOR], b[e.BLEND_MODES.OVERLAY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.DARKEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.LIGHTEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.COLOR_DODGE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.COLOR_BURN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.HARD_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.SOFT_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.DIFFERENCE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.EXCLUSION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.HUE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.SATURATION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.COLOR] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.LUMINOSITY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.NORMAL_NPM] = [a.SRC_ALPHA, a.ONE_MINUS_SRC_ALPHA, a.ONE, a.ONE_MINUS_SRC_ALPHA], b[e.BLEND_MODES.ADD_NPM] = [a.SRC_ALPHA, a.DST_ALPHA, a.ONE, a.DST_ALPHA], b[e.BLEND_MODES.SCREEN_NPM] = [a.SRC_ALPHA, a.ONE_MINUS_SRC_COLOR, a.ONE, a.ONE_MINUS_SRC_COLOR], b } c.__esModule = !0, c.default = d; var e = a("../../../const") }, { "../../../const": 46 }], 99: [function(a, b, c) { "use strict"; function d(a) { var b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return b[e.DRAW_MODES.POINTS] = a.POINTS, b[e.DRAW_MODES.LINES] = a.LINES, b[e.DRAW_MODES.LINE_LOOP] = a.LINE_LOOP, b[e.DRAW_MODES.LINE_STRIP] = a.LINE_STRIP, b[e.DRAW_MODES.TRIANGLES] = a.TRIANGLES, b[e.DRAW_MODES.TRIANGLE_STRIP] = a.TRIANGLE_STRIP, b[e.DRAW_MODES.TRIANGLE_FAN] = a.TRIANGLE_FAN, b } c.__esModule = !0, c.default = d; var e = a("../../../const") }, { "../../../const": 46 }], 100: [function(a, b, c) { "use strict"; function d(a) { a.getContextAttributes().stencil || console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly") } c.__esModule = !0, c.default = d }, {}], 101: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0; var e = a("./utils/maxRecommendedTextures"), f = d(e), g = a("./utils/canUploadSameBuffer"), h = d(g); c.default = { TARGET_FPMS: .06, MIPMAP_TEXTURES: !0, RESOLUTION: 1, FILTER_RESOLUTION: 1, SPRITE_MAX_TEXTURES: (0, f.default)(32), SPRITE_BATCH_SIZE: 4096, RETINA_PREFIX: /@([0-9\.]+)x/, RENDER_OPTIONS: { view: null, antialias: !1, forceFXAA: !1, autoResize: !1, transparent: !1, backgroundColor: 0, clearBeforeRender: !0, preserveDrawingBuffer: !1, roundPixels: !1, width: 800, height: 600, legacy: !1 }, TRANSFORM_MODE: 0, GC_MODE: 0, GC_MAX_IDLE: 3600, GC_MAX_CHECK_COUNT: 600, WRAP_MODE: 0, SCALE_MODE: 0, PRECISION_VERTEX: "highp", PRECISION_FRAGMENT: "mediump", CAN_UPLOAD_SAME_BUFFER: (0, h.default)(), MESH_CANVAS_PADDING: 0 } }, { "./utils/canUploadSameBuffer": 122, "./utils/maxRecommendedTextures": 127 }], 102: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), i = a("../math"), j = a("../utils"), k = a("../const"), l = a("../textures/Texture"), m = d(l), n = a("../display/Container"), o = d(n), p = new i.Point, q = function(a) { function b(c) { e(this, b); var d = f(this, a.call(this)); return d._anchor = new i.ObservablePoint(d._onAnchorUpdate, d, c ? c.defaultAnchor.x : 0, c ? c.defaultAnchor.y : 0), d._texture = null, d._width = 0, d._height = 0, d._tint = null, d._tintRGB = null, d.tint = 16777215, d.blendMode = k.BLEND_MODES.NORMAL, d.shader = null, d.cachedTint = 16777215, d.texture = c || m.default.EMPTY, d.vertexData = new Float32Array(8), d.vertexTrimmedData = null, d._transformID = -1, d._textureID = -1, d._transformTrimmedID = -1, d._textureTrimmedID = -1, d.pluginName = "sprite", d } return g(b, a), b.prototype._onTextureUpdate = function() { this._textureID = -1, this._textureTrimmedID = -1, this.cachedTint = 16777215, this._width && (this.scale.x = (0, j.sign)(this.scale.x) * this._width / this._texture.orig.width), this._height && (this.scale.y = (0, j.sign)(this.scale.y) * this._height / this._texture.orig.height) }, b.prototype._onAnchorUpdate = function() { this._transformID = -1, this._transformTrimmedID = -1 }, b.prototype.calculateVertices = function() { if (this._transformID !== this.transform._worldID || this._textureID !== this._texture._updateID) { this._transformID = this.transform._worldID, this._textureID = this._texture._updateID; var a = this._texture, b = this.transform.worldTransform, c = b.a, d = b.b, e = b.c, f = b.d, g = b.tx, h = b.ty, i = this.vertexData, j = a.trim, k = a.orig, l = this._anchor, m = 0, n = 0, o = 0, p = 0; j ? (n = j.x - l._x * k.width, m = n + j.width, p = j.y - l._y * k.height, o = p + j.height) : (n = -l._x * k.width, m = n + k.width, p = -l._y * k.height, o = p + k.height), i[0] = c * n + e * p + g, i[1] = f * p + d * n + h, i[2] = c * m + e * p + g, i[3] = f * p + d * m + h, i[4] = c * m + e * o + g, i[5] = f * o + d * m + h, i[6] = c * n + e * o + g, i[7] = f * o + d * n + h } }, b.prototype.calculateTrimmedVertices = function() { if (this.vertexTrimmedData) { if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID) return } else this.vertexTrimmedData = new Float32Array(8); this._transformTrimmedID = this.transform._worldID, this._textureTrimmedID = this._texture._updateID; var a = this._texture, b = this.vertexTrimmedData, c = a.orig, d = this._anchor, e = this.transform.worldTransform, f = e.a, g = e.b, h = e.c, i = e.d, j = e.tx, k = e.ty, l = -d._x * c.width, m = l + c.width, n = -d._y * c.height, o = n + c.height; b[0] = f * l + h * n + j, b[1] = i * n + g * l + k, b[2] = f * m + h * n + j, b[3] = i * n + g * m + k, b[4] = f * m + h * o + j, b[5] = i * o + g * m + k, b[6] = f * l + h * o + j, b[7] = i * o + g * l + k }, b.prototype._renderWebGL = function(a) { this.calculateVertices(), a.setObjectRenderer(a.plugins[this.pluginName]), a.plugins[this.pluginName].render(this) }, b.prototype._renderCanvas = function(a) { a.plugins[this.pluginName].render(this) }, b.prototype._calculateBounds = function() { var a = this._texture.trim, b = this._texture.orig; !a || a.width === b.width && a.height === b.height ? (this.calculateVertices(), this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(), this._bounds.addQuad(this.vertexTrimmedData)) }, b.prototype.getLocalBounds = function(b) { return 0 === this.children.length ? (this._bounds.minX = this._texture.orig.width * -this._anchor._x, this._bounds.minY = this._texture.orig.height * -this._anchor._y, this._bounds.maxX = this._texture.orig.width * (1 - this._anchor._x), this._bounds.maxY = this._texture.orig.height * (1 - this._anchor._y), b || (this._localBoundsRect || (this._localBoundsRect = new i.Rectangle), b = this._localBoundsRect), this._bounds.getRectangle(b)) : a.prototype.getLocalBounds.call(this, b) }, b.prototype.containsPoint = function(a) { this.worldTransform.applyInverse(a, p); var b = this._texture.orig.width, c = this._texture.orig.height, d = -b * this.anchor.x, e = 0; return p.x >= d && p.x < d + b && (e = -c * this.anchor.y, p.y >= e && p.y < e + c) }, b.prototype.destroy = function(b) { if (a.prototype.destroy.call(this, b), this._texture.off("update", this._onTextureUpdate, this), this._anchor = null, "boolean" == typeof b ? b : b && b.texture) { var c = "boolean" == typeof b ? b : b && b.baseTexture; this._texture.destroy(!!c) } this._texture = null, this.shader = null }, b.from = function(a) { return new b(m.default.from(a)) }, b.fromFrame = function(a) { var c = j.TextureCache[a]; if (!c) throw new Error('The frameId "' + a + '" does not exist in the texture cache'); return new b(c) }, b.fromImage = function(a, c, d) { return new b(m.default.fromImage(a, c, d)) }, h(b, [{ key: "width", get: function() { return Math.abs(this.scale.x) * this._texture.orig.width }, set: function(a) { var b = (0, j.sign)(this.scale.x) || 1; this.scale.x = b * a / this._texture.orig.width, this._width = a } }, { key: "height", get: function() { return Math.abs(this.scale.y) * this._texture.orig.height }, set: function(a) { var b = (0, j.sign)(this.scale.y) || 1; this.scale.y = b * a / this._texture.orig.height, this._height = a } }, { key: "anchor", get: function() { return this._anchor }, set: function(a) { this._anchor.copy(a) } }, { key: "tint", get: function() { return this._tint }, set: function(a) { this._tint = a, this._tintRGB = (a >> 16) + (65280 & a) + ((255 & a) << 16) } }, { key: "texture", get: function() { return this._texture }, set: function(a) { this._texture !== a && (this._texture = a || m.default.EMPTY, this.cachedTint = 16777215, this._textureID = -1, this._textureTrimmedID = -1, a && (a.baseTexture.hasLoaded ? this._onTextureUpdate() : a.once("update", this._onTextureUpdate, this))) } }]), b }(o.default); c.default = q }, { "../const": 46, "../display/Container": 48, "../math": 70, "../textures/Texture": 115, "../utils": 125 }], 103: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var f = a("../../renderers/canvas/CanvasRenderer"), g = d(f), h = a("../../const"), i = a("../../math"), j = a("./CanvasTinter"), k = d(j), l = new i.Matrix, m = function() { function a(b) { e(this, a), this.renderer = b } return a.prototype.render = function(a) { var b = a._texture, c = this.renderer, d = b._frame.width, e = b._frame.height, f = a.transform.worldTransform, g = 0, j = 0; if (!(b.orig.width <= 0 || b.orig.height <= 0) && b.baseTexture.source && (c.setBlendMode(a.blendMode), b.valid)) { c.context.globalAlpha = a.worldAlpha; var m = b.baseTexture.scaleMode === h.SCALE_MODES.LINEAR; c.smoothProperty && c.context[c.smoothProperty] !== m && (c.context[c.smoothProperty] = m), b.trim ? (g = b.trim.width / 2 + b.trim.x - a.anchor.x * b.orig.width, j = b.trim.height / 2 + b.trim.y - a.anchor.y * b.orig.height) : (g = (.5 - a.anchor.x) * b.orig.width, j = (.5 - a.anchor.y) * b.orig.height), b.rotate && (f.copy(l), f = l, i.GroupD8.matrixAppendRotationInv(f, b.rotate, g, j), g = 0, j = 0), g -= d / 2, j -= e / 2, c.roundPixels ? (c.context.setTransform(f.a, f.b, f.c, f.d, f.tx * c.resolution | 0, f.ty * c.resolution | 0), g |= 0, j |= 0) : c.context.setTransform(f.a, f.b, f.c, f.d, f.tx * c.resolution, f.ty * c.resolution); var n = b.baseTexture.resolution; 16777215 !== a.tint ? (a.cachedTint === a.tint && a.tintedTexture.tintId === a._texture._updateID || (a.cachedTint = a.tint, a.tintedTexture = k.default.getTintedTexture(a, a.tint)), c.context.drawImage(a.tintedTexture, 0, 0, d * n, e * n, g * c.resolution, j * c.resolution, d * c.resolution, e * c.resolution)) : c.context.drawImage(b.baseTexture.source, b._frame.x * n, b._frame.y * n, d * n, e * n, g * c.resolution, j * c.resolution, d * c.resolution, e * c.resolution) } }, a.prototype.destroy = function() { this.renderer = null }, a }(); c.default = m, g.default.registerPlugin("sprite", m) }, { "../../const": 46, "../../math": 70, "../../renderers/canvas/CanvasRenderer": 77, "./CanvasTinter": 104 }], 104: [function(a, b, c) { "use strict"; c.__esModule = !0; var d = a("../../utils"), e = a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = { getTintedTexture: function(a, b) { var c = a._texture; b = g.roundColor(b); var d = "#" + ("00000" + (0 | b).toString(16)).substr(-6); c.tintCache = c.tintCache || {}; var e = c.tintCache[d], f = void 0; if (e) { if (e.tintId === c._updateID) return c.tintCache[d]; f = c.tintCache[d] } else f = g.canvas || document.createElement("canvas"); if (g.tintMethod(c, b, f), f.tintId = c._updateID, g.convertTintToImage) { var h = new Image; h.src = f.toDataURL(), c.tintCache[d] = h } else c.tintCache[d] = f, g.canvas = null; return f }, tintWithMultiply: function(a, b, c) { var d = c.getContext("2d"), e = a._frame.clone(), f = a.baseTexture.resolution; e.x *= f, e.y *= f, e.width *= f, e.height *= f, c.width = Math.ceil(e.width), c.height = Math.ceil(e.height), d.save(), d.fillStyle = "#" + ("00000" + (0 | b).toString(16)).substr(-6), d.fillRect(0, 0, e.width, e.height), d.globalCompositeOperation = "multiply", d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height), d.globalCompositeOperation = "destination-atop", d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height), d.restore() }, tintWithOverlay: function(a, b, c) { var d = c.getContext("2d"), e = a._frame.clone(), f = a.baseTexture.resolution; e.x *= f, e.y *= f, e.width *= f, e.height *= f, c.width = Math.ceil(e.width), c.height = Math.ceil(e.height), d.save(), d.globalCompositeOperation = "copy", d.fillStyle = "#" + ("00000" + (0 | b).toString(16)).substr(-6), d.fillRect(0, 0, e.width, e.height), d.globalCompositeOperation = "destination-atop", d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height), d.restore() }, tintWithPerPixel: function(a, b, c) { var e = c.getContext("2d"), f = a._frame.clone(), g = a.baseTexture.resolution; f.x *= g, f.y *= g, f.width *= g, f.height *= g, c.width = Math.ceil(f.width), c.height = Math.ceil(f.height), e.save(), e.globalCompositeOperation = "copy", e.drawImage(a.baseTexture.source, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height), e.restore(); for (var h = (0, d.hex2rgb)(b), i = h[0], j = h[1], k = h[2], l = e.getImageData(0, 0, f.width, f.height), m = l.data, n = 0; n < m.length; n += 4) m[n + 0] *= i, m[n + 1] *= j, m[n + 2] *= k; e.putImageData(l, 0, 0) }, roundColor: function(a) { var b = g.cacheStepsPerColorChannel, c = (0, d.hex2rgb)(a); return c[0] = Math.min(255, c[0] / b * b), c[1] = Math.min(255, c[1] / b * b), c[2] = Math.min(255, c[2] / b * b), (0, d.rgb2hex)(c) }, cacheStepsPerColorChannel: 8, convertTintToImage: !1, canUseMultiply: (0, f.default)(), tintMethod: 0 }; g.tintMethod = g.canUseMultiply ? g.tintWithMultiply : g.tintWithPerPixel, c.default = g }, { "../../renderers/canvas/utils/canUseNewCanvasBlendModes": 80, "../../utils": 125 }], 105: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(b) { d(this, a), this.vertices = new ArrayBuffer(b), this.float32View = new Float32Array(this.vertices), this.uint32View = new Uint32Array(this.vertices) } return a.prototype.destroy = function() { this.vertices = null, this.positions = null, this.uvs = null, this.colors = null }, a }(); c.default = e }, {}], 106: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("../../renderers/webgl/utils/ObjectRenderer"), i = d(h), j = a("../../renderers/webgl/WebGLRenderer"), k = d(j), l = a("../../utils/createIndicesForQuads"), m = d(l), n = a("./generateMultiTextureShader"), o = d(n), p = a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"), q = d(p), r = a("./BatchBuffer"), s = d(r), t = a("../../settings"), u = d(t), v = a("../../utils"), w = a("pixi-gl-core"), x = d(w), y = a("bit-twiddle"), z = d(y), A = 0, B = 0, C = function(a) { function b(c) { e(this, b); var d = f(this, a.call(this, c)); d.vertSize = 5, d.vertByteSize = 4 * d.vertSize, d.size = u.default.SPRITE_BATCH_SIZE, d.buffers = []; for (var g = 1; g <= z.default.nextPow2(d.size); g *= 2) d.buffers.push(new s.default(4 * g * d.vertByteSize)); d.indices = (0, m.default)(d.size), d.shader = null, d.currentIndex = 0, d.groups = []; for (var h = 0; h < d.size; h++) d.groups[h] = { textures: [], textureCount: 0, ids: [], size: 0, start: 0, blend: 0 }; return d.sprites = [], d.vertexBuffers = [], d.vaos = [], d.vaoMax = 2, d.vertexCount = 0, d.renderer.on("prerender", d.onPrerender, d), d } return g(b, a), b.prototype.onContextChange = function() { var a = this.renderer.gl; this.renderer.legacy ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS), u.default.SPRITE_MAX_TEXTURES), this.MAX_TEXTURES = (0, q.default)(this.MAX_TEXTURES, a)), this.shader = (0, o.default)(a, this.MAX_TEXTURES), this.indexBuffer = x.default.GLBuffer.createIndexBuffer(a, this.indices, a.STATIC_DRAW), this.renderer.bindVao(null); for (var b = this.shader.attributes, c = 0; c < this.vaoMax; c++) { var d = this.vertexBuffers[c] = x.default.GLBuffer.createVertexBuffer(a, null, a.STREAM_DRAW), e = this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(d, b.aVertexPosition, a.FLOAT, !1, this.vertByteSize, 0).addAttribute(d, b.aTextureCoord, a.UNSIGNED_SHORT, !0, this.vertByteSize, 8).addAttribute(d, b.aColor, a.UNSIGNED_BYTE, !0, this.vertByteSize, 12); b.aTextureId && e.addAttribute(d, b.aTextureId, a.FLOAT, !1, this.vertByteSize, 16), this.vaos[c] = e } this.vao = this.vaos[0], this.currentBlendMode = 99999, this.boundTextures = new Array(this.MAX_TEXTURES) }, b.prototype.onPrerender = function() { this.vertexCount = 0 }, b.prototype.render = function(a) { this.currentIndex >= this.size && this.flush(), a._texture._uvs && (this.sprites[this.currentIndex++] = a) }, b.prototype.flush = function() { if (0 !== this.currentIndex) { var a = this.renderer.gl, b = this.MAX_TEXTURES, c = z.default.nextPow2(this.currentIndex), d = z.default.log2(c), e = this.buffers[d], f = this.sprites, g = this.groups, h = e.float32View, i = e.uint32View, j = this.boundTextures, k = this.renderer.boundTextures, l = this.renderer.textureGC.count, m = 0, n = void 0, o = void 0, p = 1, q = 0, r = g[0], s = void 0, t = void 0, w = v.premultiplyBlendMode[f[0]._texture.baseTexture.premultipliedAlpha ? 1 : 0][f[0].blendMode]; r.textureCount = 0, r.start = 0, r.blend = w, A++; var y = void 0; for (y = 0; y < b; ++y) { var C = k[y]; C._enabled !== A ? (j[y] = C, C._virtalBoundId = y, C._enabled = A) : j[y] = this.renderer.emptyTextures[y] } for (A++, y = 0; y < this.currentIndex; ++y) { var D = f[y]; f[y] = null, n = D._texture.baseTexture; var E = v.premultiplyBlendMode[Number(n.premultipliedAlpha)][D.blendMode]; if (w !== E && (w = E, o = null, q = b, A++), o !== n && (o = n, n._enabled !== A)) { if (q === b && (A++, r.size = y - r.start, q = 0, r = g[p++], r.blend = w, r.textureCount = 0, r.start = y), n.touched = l, -1 === n._virtalBoundId) for (var F = 0; F < b; ++F) { var G = (F + B) % b, H = j[G]; if (H._enabled !== A) { B++, H._virtalBoundId = -1, n._virtalBoundId = G, j[G] = n; break } } n._enabled = A, r.textureCount++, r.ids[q] = n._virtalBoundId, r.textures[q++] = n } if (s = D.vertexData, t = D._texture._uvs.uvsUint32, this.renderer.roundPixels) { var I = this.renderer.resolution; h[m] = (s[0] * I | 0) / I, h[m + 1] = (s[1] * I | 0) / I, h[m + 5] = (s[2] * I | 0) / I, h[m + 6] = (s[3] * I | 0) / I, h[m + 10] = (s[4] * I | 0) / I, h[m + 11] = (s[5] * I | 0) / I, h[m + 15] = (s[6] * I | 0) / I, h[m + 16] = (s[7] * I | 0) / I } else h[m] = s[0], h[m + 1] = s[1], h[m + 5] = s[2], h[m + 6] = s[3], h[m + 10] = s[4], h[m + 11] = s[5], h[m + 15] = s[6], h[m + 16] = s[7]; i[m + 2] = t[0], i[m + 7] = t[1], i[m + 12] = t[2], i[m + 17] = t[3]; var J = Math.min(D.worldAlpha, 1), K = J < 1 && n.premultipliedAlpha ? (0, v.premultiplyTint)(D._tintRGB, J) : D._tintRGB + (255 * J << 24); i[m + 3] = i[m + 8] = i[m + 13] = i[m + 18] = K, h[m + 4] = h[m + 9] = h[m + 14] = h[m + 19] = n._virtalBoundId, m += 20 } if (r.size = y - r.start, u.default.CAN_UPLOAD_SAME_BUFFER) this.vertexBuffers[this.vertexCount].upload(e.vertices, 0, !0); else { if (this.vaoMax <= this.vertexCount) { this.vaoMax++; var L = this.shader.attributes, M = this.vertexBuffers[this.vertexCount] = x.default.GLBuffer.createVertexBuffer(a, null, a.STREAM_DRAW), N = this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(M, L.aVertexPosition, a.FLOAT, !1, this.vertByteSize, 0).addAttribute(M, L.aTextureCoord, a.UNSIGNED_SHORT, !0, this.vertByteSize, 8).addAttribute(M, L.aColor, a.UNSIGNED_BYTE, !0, this.vertByteSize, 12); L.aTextureId && N.addAttribute(M, L.aTextureId, a.FLOAT, !1, this.vertByteSize, 16), this.vaos[this.vertexCount] = N } this.renderer.bindVao(this.vaos[this.vertexCount]), this.vertexBuffers[this.vertexCount].upload(e.vertices, 0, !1), this.vertexCount++ } for (y = 0; y < b; ++y) k[y]._virtalBoundId = -1; for (y = 0; y < p; ++y) { for (var O = g[y], P = O.textureCount, Q = 0; Q < P; Q++) o = O.textures[Q], k[O.ids[Q]] !== o && this.renderer.bindTexture(o, O.ids[Q], !0), o._virtalBoundId = -1; this.renderer.state.setBlendMode(O.blend), a.drawElements(a.TRIANGLES, 6 * O.size, a.UNSIGNED_SHORT, 6 * O.start * 2) } this.currentIndex = 0 } }, b.prototype.start = function() { this.renderer.bindShader(this.shader), u.default.CAN_UPLOAD_SAME_BUFFER && (this.renderer.bindVao(this.vaos[this.vertexCount]), this.vertexBuffers[this.vertexCount].bind()) }, b.prototype.stop = function() { this.flush() }, b.prototype.destroy = function() { for (var b = 0; b < this.vaoMax; b++) this.vertexBuffers[b] && this.vertexBuffers[b].destroy(), this.vaos[b] && this.vaos[b].destroy(); this.indexBuffer && this.indexBuffer.destroy(), this.renderer.off("prerender", this.onPrerender, this), a.prototype.destroy.call(this), this.shader && (this.shader.destroy(), this.shader = null), this.vertexBuffers = null, this.vaos = null, this.indexBuffer = null, this.indices = null, this.sprites = null; for (var c = 0; c < this.buffers.length; ++c) this.buffers[c].destroy() }, b }(i.default); c.default = C, k.default.registerPlugin("sprite", C) }, { "../../renderers/webgl/WebGLRenderer": 84, "../../renderers/webgl/utils/ObjectRenderer": 94, "../../renderers/webgl/utils/checkMaxIfStatmentsInShader": 97, "../../settings": 101, "../../utils": 125, "../../utils/createIndicesForQuads": 123, "./BatchBuffer": 105, "./generateMultiTextureShader": 107, "bit-twiddle": 1, "pixi-gl-core": 15 }], 107: [function(a, b, c) { "use strict"; function d(a, b) { var c = h; c = c.replace(/%count%/gi, b), c = c.replace(/%forloop%/gi, e(b)); for (var d = new g.default(a, "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n vTextureCoord = aTextureCoord;\n vTextureId = aTextureId;\n vColor = aColor;\n}\n", c), f = [], i = 0; i < b; i++) f[i] = i; return d.bind(), d.uniforms.uSamplers = f, d } function e(a) { var b = ""; b += "\n", b += "\n"; for (var c = 0; c < a; c++) c > 0 && (b += "\nelse "), c < a - 1 && (b += "if(textureId == " + c + ".0)"), b += "\n{", b += "\n\tcolor = texture2D(uSamplers[" + c + "], vTextureCoord);", b += "\n}"; return b += "\n", b += "\n" } c.__esModule = !0, c.default = d; var f = a("../../Shader"), g = function(a) { return a && a.__esModule ? a : { default: a } }(f), h = (a("path"), ["varying vec2 vTextureCoord;", "varying vec4 vColor;", "varying float vTextureId;", "uniform sampler2D uSamplers[%count%];", "void main(void){", "vec4 color;", "float textureId = floor(vTextureId+0.5);", "%forloop%", "gl_FragColor = color * vColor;", "}"].join("\n")) }, { "../../Shader": 44, path: 8 }], 108: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), i = a("../sprites/Sprite"), j = d(i), k = a("../textures/Texture"), l = d(k), m = a("../math"), n = a("../utils"), o = a("../const"), p = a("../settings"), q = d(p), r = a("./TextStyle"), s = d(r), t = a("./TextMetrics"), u = d(t), v = a("../utils/trimCanvas"), w = d(v), x = { texture: !0, children: !1, baseTexture: !0 }, y = function(a) { function b(c, d, g) { e(this, b), g = g || document.createElement("canvas"), g.width = 3, g.height = 3; var h = l.default.fromCanvas(g, q.default.SCALE_MODE, "text"); h.orig = new m.Rectangle, h.trim = new m.Rectangle; var i = f(this, a.call(this, h)); return l.default.addToCache(i._texture, i._texture.baseTexture.textureCacheIds[0]), i.canvas = g, i.context = i.canvas.getContext("2d"), i.resolution = q.default.RESOLUTION, i._text = null, i._style = null, i._styleListener = null, i._font = "", i.text = c, i.style = d, i.localStyleID = -1, i } return g(b, a), b.prototype.updateText = function(a) { var b = this._style; if (this.localStyleID !== b.styleID && (this.dirty = !0, this.localStyleID = b.styleID), this.dirty || !a) { this._font = this._style.toFontString(); var c = this.context, d = u.default.measureText(this._text, this._style, this._style.wordWrap, this.canvas), e = d.width, f = d.height, g = d.lines, h = d.lineHeight, i = d.lineWidths, j = d.maxLineWidth, k = d.fontProperties; this.canvas.width = Math.ceil((Math.max(1, e) + 2 * b.padding) * this.resolution), this.canvas.height = Math.ceil((Math.max(1, f) + 2 * b.padding) * this.resolution), c.scale(this.resolution, this.resolution), c.clearRect(0, 0, this.canvas.width, this.canvas.height), c.font = this._font, c.strokeStyle = b.stroke, c.lineWidth = b.strokeThickness, c.textBaseline = b.textBaseline, c.lineJoin = b.lineJoin, c.miterLimit = b.miterLimit; var l = void 0, m = void 0; if (b.dropShadow) { c.fillStyle = b.dropShadowColor, c.globalAlpha = b.dropShadowAlpha, c.shadowBlur = b.dropShadowBlur, b.dropShadowBlur > 0 && (c.shadowColor = b.dropShadowColor); for (var n = Math.cos(b.dropShadowAngle) * b.dropShadowDistance, o = Math.sin(b.dropShadowAngle) * b.dropShadowDistance, p = 0; p < g.length; p++) l = b.strokeThickness / 2, m = b.strokeThickness / 2 + p * h + k.ascent, "right" === b.align ? l += j - i[p] : "center" === b.align && (l += (j - i[p]) / 2), b.fill && (this.drawLetterSpacing(g[p], l + n + b.padding, m + o + b.padding), b.stroke && b.strokeThickness && (c.strokeStyle = b.dropShadowColor, this.drawLetterSpacing(g[p], l + n + b.padding, m + o + b.padding, !0), c.strokeStyle = b.stroke)) } c.shadowBlur = 0, c.globalAlpha = 1, c.fillStyle = this._generateFillStyle(b, g); for (var q = 0; q < g.length; q++) l = b.strokeThickness / 2, m = b.strokeThickness / 2 + q * h + k.ascent, "right" === b.align ? l += j - i[q] : "center" === b.align && (l += (j - i[q]) / 2), b.stroke && b.strokeThickness && this.drawLetterSpacing(g[q], l + b.padding, m + b.padding, !0), b.fill && this.drawLetterSpacing(g[q], l + b.padding, m + b.padding); this.updateTexture() } }, b.prototype.drawLetterSpacing = function(a, b, c) { var d = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], e = this._style, f = e.letterSpacing; if (0 === f) return void(d ? this.context.strokeText(a, b, c) : this.context.fillText(a, b, c)); for (var g = String.prototype.split.call(a, ""), h = b, i = 0, j = ""; i < a.length;) j = g[i++], d ? this.context.strokeText(j, h, c) : this.context.fillText(j, h, c), h += this.context.measureText(j).width + f }, b.prototype.updateTexture = function() { var a = this.canvas; if (this._style.trim) { var b = (0, w.default)(a); b.data && (a.width = b.width, a.height = b.height, this.context.putImageData(b.data, 0, 0)) } var c = this._texture, d = this._style, e = d.trim ? 0 : d.padding, f = c.baseTexture; f.hasLoaded = !0, f.resolution = this.resolution, f.realWidth = a.width, f.realHeight = a.height, f.width = a.width / this.resolution, f.height = a.height / this.resolution, c.trim.width = c._frame.width = a.width / this.resolution, c.trim.height = c._frame.height = a.height / this.resolution, c.trim.x = -e, c.trim.y = -e, c.orig.width = c._frame.width - 2 * e, c.orig.height = c._frame.height - 2 * e, this._onTextureUpdate(), f.emit("update", f), this.dirty = !1 }, b.prototype.renderWebGL = function(b) { this.resolution !== b.resolution && (this.resolution = b.resolution, this.dirty = !0), this.updateText(!0), a.prototype.renderWebGL.call(this, b) }, b.prototype._renderCanvas = function(b) { this.resolution !== b.resolution && (this.resolution = b.resolution, this.dirty = !0), this.updateText(!0), a.prototype._renderCanvas.call(this, b) }, b.prototype.getLocalBounds = function(b) { return this.updateText(!0), a.prototype.getLocalBounds.call(this, b) }, b.prototype._calculateBounds = function() { this.updateText(!0), this.calculateVertices(), this._bounds.addQuad(this.vertexData) }, b.prototype._onStyleChange = function() { this.dirty = !0 }, b.prototype._generateFillStyle = function(a, b) { if (!Array.isArray(a.fill)) return a.fill; if (navigator.isCocoonJS) return a.fill[0]; var c = void 0, d = void 0, e = void 0, f = void 0, g = this.canvas.width / this.resolution, h = this.canvas.height / this.resolution, i = a.fill.slice(), j = a.fillGradientStops.slice(); if (!j.length) for (var k = i.length + 1, l = 1; l < k; ++l) j.push(l / k); if (i.unshift(a.fill[0]), j.unshift(0), i.push(a.fill[a.fill.length - 1]), j.push(1), a.fillGradientType === o.TEXT_GRADIENT.LINEAR_VERTICAL) { c = this.context.createLinearGradient(g / 2, 0, g / 2, h), d = (i.length + 1) * b.length, e = 0; for (var m = 0; m < b.length; m++) { e += 1; for (var n = 0; n < i.length; n++) f = "number" == typeof j[n] ? j[n] / b.length + m / b.length : e / d, c.addColorStop(f, i[n]), e++ } } else { c = this.context.createLinearGradient(0, h / 2, g, h / 2), d = i.length + 1, e = 1; for (var p = 0; p < i.length; p++) f = "number" == typeof j[p] ? j[p] : e / d, c.addColorStop(f, i[p]), e++ } return c }, b.prototype.destroy = function(b) { "boolean" == typeof b && (b = { children: b }), b = Object.assign({}, x, b), a.prototype.destroy.call(this, b), this.context = null, this.canvas = null, this._style = null }, h(b, [{ key: "width", get: function() { return this.updateText(!0), Math.abs(this.scale.x) * this._texture.orig.width }, set: function(a) { this.updateText(!0); var b = (0, n.sign)(this.scale.x) || 1; this.scale.x = b * a / this._texture.orig.width, this._width = a } }, { key: "height", get: function() { return this.updateText(!0), Math.abs(this.scale.y) * this._texture.orig.height }, set: function(a) { this.updateText(!0); var b = (0, n.sign)(this.scale.y) || 1; this.scale.y = b * a / this._texture.orig.height, this._height = a } }, { key: "style", get: function() { return this._style }, set: function(a) { a = a || {}, a instanceof s.default ? this._style = a : this._style = new s.default(a), this.localStyleID = -1, this.dirty = !0 } }, { key: "text", get: function() { return this._text }, set: function(a) { a = String("" === a || null === a || void 0 === a ? " " : a), this._text !== a && (this._text = a, this.dirty = !0) } }]), b }(j.default); c.default = y }, { "../const": 46, "../math": 70, "../settings": 101, "../sprites/Sprite": 102, "../textures/Texture": 115, "../utils": 125, "../utils/trimCanvas": 130, "./TextMetrics": 109, "./TextStyle": 110 }], 109: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(b, c, e, f, g, h, i, j, k) { d(this, a), this.text = b, this.style = c, this.width = e, this.height = f, this.lines = g, this.lineWidths = h, this.lineHeight = i, this.maxLineWidth = j, this.fontProperties = k } return a.measureText = function(b, c, d) { var e = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : a._canvas; d = void 0 === d || null === d ? c.wordWrap : d; var f = c.toFontString(), g = a.measureFont(f), h = e.getContext("2d"); h.font = f; for (var i = d ? a.wordWrap(b, c, e) : b, j = i.split(/(?:\r\n|\r|\n)/), k = new Array(j.length), l = 0, m = 0; m < j.length; m++) { var n = h.measureText(j[m]).width + (j[m].length - 1) * c.letterSpacing; k[m] = n, l = Math.max(l, n) } var o = l + c.strokeThickness; c.dropShadow && (o += c.dropShadowDistance); var p = c.lineHeight || g.fontSize + c.strokeThickness, q = Math.max(p, g.fontSize + c.strokeThickness) + (j.length - 1) * (p + c.leading); return c.dropShadow && (q += c.dropShadowDistance), new a(b, c, o, q, j, k, p + c.leading, l, g) }, a.wordWrap = function(b, c) { for (var d = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : a._canvas, e = d.getContext("2d"), f = 0, g = "", h = "", i = {}, j = c.letterSpacing, k = c.whiteSpace, l = a.collapseSpaces(k), m = a.collapseNewlines(k), n = !l, o = c.wordWrapWidth + j, p = a.tokenize(b), q = 0; q < p.length; q++) { var r = p[q]; if (a.isNewline(r)) { if (!m) { h += a.addLine(g), n = !l, g = "", f = 0; continue } r = " " } if (l) { var s = a.isBreakingSpace(r), t = a.isBreakingSpace(g[g.length - 1]); if (s && t) continue } var u = a.getFromCache(r, j, i, e); if (u > o) if ("" !== g && (h += a.addLine(g), g = "", f = 0), a.canBreakWords(r, c.breakWords)) for (var v = r.split(""), w = 0; w < v.length; w++) { for (var x = v[w], y = 1; v[w + y];) { var z = v[w + y], A = x[x.length - 1]; if (a.canBreakChars(A, z, r, w, c.breakWords)) break; x += z, y++ } w += x.length - 1; var B = a.getFromCache(x, j, i, e); B + f > o && (h += a.addLine(g), n = !1, g = "", f = 0), g += x, f += B } else { g.length > 0 && (h += a.addLine(g), g = "", f = 0); var C = q === p.length - 1; h += a.addLine(r, !C), n = !1, g = "", f = 0 } else u + f > o && (n = !1, h += a.addLine(g), g = "", f = 0), (g.length > 0 || !a.isBreakingSpace(r) || n) && (g += r, f += u) } return h += a.addLine(g, !1) }, a.addLine = function(b) { var c = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; return b = a.trimRight(b), b = c ? b + "\n" : b }, a.getFromCache = function(a, b, c, d) { var e = c[a]; if (void 0 === e) { var f = a.length * b; e = d.measureText(a).width + f, c[a] = e } return e }, a.collapseSpaces = function(a) { return "normal" === a || "pre-line" === a }, a.collapseNewlines = function(a) { return "normal" === a }, a.trimRight = function(b) { if ("string" != typeof b) return ""; for (var c = b.length - 1; c >= 0; c--) { var d = b[c]; if (!a.isBreakingSpace(d)) break; b = b.slice(0, -1) } return b }, a.isNewline = function(b) { return "string" == typeof b && a._newlines.indexOf(b.charCodeAt(0)) >= 0 }, a.isBreakingSpace = function(b) { return "string" == typeof b && a._breakingSpaces.indexOf(b.charCodeAt(0)) >= 0 }, a.tokenize = function(b) { var c = [], d = ""; if ("string" != typeof b) return c; for (var e = 0; e < b.length; e++) { var f = b[e]; a.isBreakingSpace(f) || a.isNewline(f) ? ("" !== d && (c.push(d), d = ""), c.push(f)) : d += f } return "" !== d && c.push(d), c }, a.canBreakWords = function(a, b) { return b }, a.canBreakChars = function(a, b, c, d, e) { return !0 }, a.measureFont = function(b) { if (a._fonts[b]) return a._fonts[b]; var c = {}, d = a._canvas, e = a._context; e.font = b; var f = a.METRICS_STRING + a.BASELINE_SYMBOL, g = Math.ceil(e.measureText(f).width), h = Math.ceil(e.measureText(a.BASELINE_SYMBOL).width), i = 2 * h; h = h * a.BASELINE_MULTIPLIER | 0, d.width = g, d.height = i, e.fillStyle = "#f00", e.fillRect(0, 0, g, i), e.font = b, e.textBaseline = "alphabetic", e.fillStyle = "#000", e.fillText(f, 0, h); var j = e.getImageData(0, 0, g, i).data, k = j.length, l = 4 * g, m = 0, n = 0, o = !1; for (m = 0; m < h; ++m) { for (var p = 0; p < l; p += 4) if (255 !== j[n + p]) { o = !0; break } if (o) break; n += l } for (c.ascent = h - m, n = k - l, o = !1, m = i; m > h; --m) { for (var q = 0; q < l; q += 4) if (255 !== j[n + q]) { o = !0; break } if (o) break; n -= l } return c.descent = m - h, c.fontSize = c.ascent + c.descent, a._fonts[b] = c, c }, a.clearMetrics = function() { var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; b ? delete a._fonts[b] : a._fonts = {} }, a }(); c.default = e; var f = document.createElement("canvas"); f.width = f.height = 10, e._canvas = f, e._context = f.getContext("2d"), e._fonts = {}, e.METRICS_STRING = "|Éq", e.BASELINE_SYMBOL = "M", e.BASELINE_MULTIPLIER = 1.4, e._newlines = [10, 13], e._breakingSpaces = [9, 32, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8200, 8201, 8202, 8287, 12288] }, {}], 110: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a) { return "number" == typeof a ? (0, k.hex2string)(a) : ("string" == typeof a && 0 === a.indexOf("0x") && (a = a.replace("0x", "#")), a) } function f(a) { if (Array.isArray(a)) { for (var b = 0; b < a.length; ++b) a[b] = e(a[b]); return a } return e(a) } function g(a, b) { if (!Array.isArray(a) || !Array.isArray(b)) return !1; if (a.length !== b.length) return !1; for (var c = 0; c < a.length; ++c) if (a[c] !== b[c]) return !1; return !0 } function h(a, b, c) { for (var d in c) Array.isArray(b[d]) ? a[d] = b[d].slice() : a[d] = b[d] } c.__esModule = !0; var i = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), j = a("../const"), k = a("../utils"), l = { align: "left", breakWords: !1, dropShadow: !1, dropShadowAlpha: 1, dropShadowAngle: Math.PI / 6, dropShadowBlur: 0, dropShadowColor: "black", dropShadowDistance: 5, fill: "black", fillGradientType: j.TEXT_GRADIENT.LINEAR_VERTICAL, fillGradientStops: [], fontFamily: "Arial", fontSize: 26, fontStyle: "normal", fontVariant: "normal", fontWeight: "normal", letterSpacing: 0, lineHeight: 0, lineJoin: "miter", miterLimit: 10, padding: 0, stroke: "black", strokeThickness: 0, textBaseline: "alphabetic", trim: !1, whiteSpace: "pre", wordWrap: !1, wordWrapWidth: 100, leading: 0 }, m = ["serif", "sans-serif", "monospace", "cursive", "fantasy", "system-ui"], n = function() { function a(b) { d(this, a), this.styleID = 0, this.reset(), h(this, b, b) } return a.prototype.clone = function() { var b = {}; return h(b, this, l), new a(b) }, a.prototype.reset = function() { h(this, l, l) }, a.prototype.toFontString = function() { var a = "number" == typeof this.fontSize ? this.fontSize + "px" : this.fontSize, b = this.fontFamily; Array.isArray(this.fontFamily) || (b = this.fontFamily.split(",")); for (var c = b.length - 1; c >= 0; c--) { var d = b[c].trim(); !/([\"\'])[^\'\"]+\1/.test(d) && m.indexOf(d) < 0 && (d = '"' + d + '"'), b[c] = d } return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + a + " " + b.join(",") }, i(a, [{ key: "align", get: function() { return this._align }, set: function(a) { this._align !== a && (this._align = a, this.styleID++) } }, { key: "breakWords", get: function() { return this._breakWords }, set: function(a) { this._breakWords !== a && (this._breakWords = a, this.styleID++) } }, { key: "dropShadow", get: function() { return this._dropShadow }, set: function(a) { this._dropShadow !== a && (this._dropShadow = a, this.styleID++) } }, { key: "dropShadowAlpha", get: function() { return this._dropShadowAlpha }, set: function(a) { this._dropShadowAlpha !== a && (this._dropShadowAlpha = a, this.styleID++) } }, { key: "dropShadowAngle", get: function() { return this._dropShadowAngle }, set: function(a) { this._dropShadowAngle !== a && (this._dropShadowAngle = a, this.styleID++) } }, { key: "dropShadowBlur", get: function() { return this._dropShadowBlur }, set: function(a) { this._dropShadowBlur !== a && (this._dropShadowBlur = a, this.styleID++) } }, { key: "dropShadowColor", get: function() { return this._dropShadowColor }, set: function(a) { var b = f(a); this._dropShadowColor !== b && (this._dropShadowColor = b, this.styleID++) } }, { key: "dropShadowDistance", get: function() { return this._dropShadowDistance }, set: function(a) { this._dropShadowDistance !== a && (this._dropShadowDistance = a, this.styleID++) } }, { key: "fill", get: function() { return this._fill }, set: function(a) { var b = f(a); this._fill !== b && (this._fill = b, this.styleID++) } }, { key: "fillGradientType", get: function() { return this._fillGradientType }, set: function(a) { this._fillGradientType !== a && (this._fillGradientType = a, this.styleID++) } }, { key: "fillGradientStops", get: function() { return this._fillGradientStops }, set: function(a) { g(this._fillGradientStops, a) || (this._fillGradientStops = a, this.styleID++) } }, { key: "fontFamily", get: function() { return this._fontFamily }, set: function(a) { this.fontFamily !== a && (this._fontFamily = a, this.styleID++) } }, { key: "fontSize", get: function() { return this._fontSize }, set: function(a) { this._fontSize !== a && (this._fontSize = a, this.styleID++) } }, { key: "fontStyle", get: function() { return this._fontStyle }, set: function(a) { this._fontStyle !== a && (this._fontStyle = a, this.styleID++) } }, { key: "fontVariant", get: function() { return this._fontVariant }, set: function(a) { this._fontVariant !== a && (this._fontVariant = a, this.styleID++) } }, { key: "fontWeight", get: function() { return this._fontWeight }, set: function(a) { this._fontWeight !== a && (this._fontWeight = a, this.styleID++) } }, { key: "letterSpacing", get: function() { return this._letterSpacing }, set: function(a) { this._letterSpacing !== a && (this._letterSpacing = a, this.styleID++) } }, { key: "lineHeight", get: function() { return this._lineHeight }, set: function(a) { this._lineHeight !== a && (this._lineHeight = a, this.styleID++) } }, { key: "leading", get: function() { return this._leading }, set: function(a) { this._leading !== a && (this._leading = a, this.styleID++) } }, { key: "lineJoin", get: function() { return this._lineJoin }, set: function(a) { this._lineJoin !== a && (this._lineJoin = a, this.styleID++) } }, { key: "miterLimit", get: function() { return this._miterLimit }, set: function(a) { this._miterLimit !== a && (this._miterLimit = a, this.styleID++) } }, { key: "padding", get: function() { return this._padding }, set: function(a) { this._padding !== a && (this._padding = a, this.styleID++) } }, { key: "stroke", get: function() { return this._stroke }, set: function(a) { var b = f(a); this._stroke !== b && (this._stroke = b, this.styleID++) } }, { key: "strokeThickness", get: function() { return this._strokeThickness }, set: function(a) { this._strokeThickness !== a && (this._strokeThickness = a, this.styleID++) } }, { key: "textBaseline", get: function() { return this._textBaseline }, set: function(a) { this._textBaseline !== a && (this._textBaseline = a, this.styleID++) } }, { key: "trim", get: function() { return this._trim }, set: function(a) { this._trim !== a && (this._trim = a, this.styleID++) } }, { key: "whiteSpace", get: function() { return this._whiteSpace }, set: function(a) { this._whiteSpace !== a && (this._whiteSpace = a, this.styleID++) } }, { key: "wordWrap", get: function() { return this._wordWrap }, set: function(a) { this._wordWrap !== a && (this._wordWrap = a, this.styleID++) } }, { key: "wordWrapWidth", get: function() { return this._wordWrapWidth }, set: function(a) { this._wordWrapWidth !== a && (this._wordWrapWidth = a, this.styleID++) } }]), a }(); c.default = n }, { "../const": 46, "../utils": 125 }], 111: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("./BaseTexture"), i = d(h), j = a("../settings"), k = d(j), l = function(a) { function b() { var c = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 100, d = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 100, g = arguments[2], h = arguments[3]; e(this, b); var i = f(this, a.call(this, null, g)); return i.resolution = h || k.default.RESOLUTION, i.width = Math.ceil(c), i.height = Math.ceil(d), i.realWidth = i.width * i.resolution, i.realHeight = i.height * i.resolution, i.scaleMode = void 0 !== g ? g : k.default.SCALE_MODE, i.hasLoaded = !0, i._glRenderTargets = {}, i._canvasRenderTarget = null, i.valid = !1, i } return g(b, a), b.prototype.resize = function(a, b) { a = Math.ceil(a), b = Math.ceil(b), a === this.width && b === this.height || (this.valid = a > 0 && b > 0, this.width = a, this.height = b, this.realWidth = this.width * this.resolution, this.realHeight = this.height * this.resolution, this.valid && this.emit("update", this)) }, b.prototype.destroy = function() { a.prototype.destroy.call(this, !0), this.renderer = null }, b }(i.default); c.default = l }, { "../settings": 101, "./BaseTexture": 112 }], 112: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("../utils"), i = a("../settings"), j = d(i), k = a("eventemitter3"), l = d(k), m = a("../utils/determineCrossOrigin"), n = d(m), o = a("bit-twiddle"), p = d(o), q = function(a) { function b(c, d, g) { e(this, b); var i = f(this, a.call(this)); return i.uid = (0, h.uid)(), i.touched = 0, i.resolution = g || j.default.RESOLUTION, i.width = 100, i.height = 100, i.realWidth = 100, i.realHeight = 100, i.scaleMode = void 0 !== d ? d : j.default.SCALE_MODE, i.hasLoaded = !1, i.isLoading = !1, i.source = null, i.origSource = null, i.imageType = null, i.sourceScale = 1, i.premultipliedAlpha = !0, i.imageUrl = null, i.isPowerOfTwo = !1, i.mipmap = j.default.MIPMAP_TEXTURES, i.wrapMode = j.default.WRAP_MODE, i._glTextures = {}, i._enabled = 0, i._virtalBoundId = -1, i._destroyed = !1, i.textureCacheIds = [], c && i.loadSource(c), i } return g(b, a), b.prototype.update = function() { "svg" !== this.imageType && (this.realWidth = this.source.naturalWidth || this.source.videoWidth || this.source.width, this.realHeight = this.source.naturalHeight || this.source.videoHeight || this.source.height, this._updateDimensions()), this.emit("update", this) }, b.prototype._updateDimensions = function() { this.width = this.realWidth / this.resolution, this.height = this.realHeight / this.resolution, this.isPowerOfTwo = p.default.isPow2(this.realWidth) && p.default.isPow2(this.realHeight) }, b.prototype.loadSource = function(a) { var b = this.isLoading; this.hasLoaded = !1, this.isLoading = !1, b && this.source && (this.source.onload = null, this.source.onerror = null); var c = !this.source; if (this.source = a, (a.src && a.complete || a.getContext) && a.width && a.height) this._updateImageType(), "svg" === this.imageType ? this._loadSvgSource() : this._sourceLoaded(), c && this.emit("loaded", this); else if (!a.getContext) { this.isLoading = !0; var d = this; if (a.onload = function() { if (d._updateImageType(), a.onload = null, a.onerror = null, d.isLoading) { if (d.isLoading = !1, d._sourceLoaded(), "svg" === d.imageType) return void d._loadSvgSource(); d.emit("loaded", d) } }, a.onerror = function() { a.onload = null, a.onerror = null, d.isLoading && (d.isLoading = !1, d.emit("error", d)) }, a.complete && a.src) { if (a.onload = null, a.onerror = null, "svg" === d.imageType) return void d._loadSvgSource(); this.isLoading = !1, a.width && a.height ? (this._sourceLoaded(), b && this.emit("loaded", this)) : b && this.emit("error", this) } } }, b.prototype._updateImageType = function() { if (this.imageUrl) { var a = (0, h.decomposeDataUri)(this.imageUrl), b = void 0; if (a && "image" === a.mediaType) { var c = a.subType.split("+")[0]; if (!(b = (0, h.getUrlFileExtension)("." + c))) throw new Error("Invalid image type in data URI.") } else(b = (0, h.getUrlFileExtension)(this.imageUrl)) || (b = "png"); this.imageType = b } }, b.prototype._loadSvgSource = function() { if ("svg" === this.imageType) { var a = (0, h.decomposeDataUri)(this.imageUrl); a ? this._loadSvgSourceUsingDataUri(a) : this._loadSvgSourceUsingXhr() } }, b.prototype._loadSvgSourceUsingDataUri = function(a) { var b = void 0; if ("base64" === a.encoding) { if (!atob) throw new Error("Your browser doesn't support base64 conversions."); b = atob(a.data) } else b = a.data; this._loadSvgSourceUsingString(b) }, b.prototype._loadSvgSourceUsingXhr = function() { var a = this, b = new XMLHttpRequest; b.onload = function() { if (b.readyState !== b.DONE || 200 !== b.status) throw new Error("Failed to load SVG using XHR."); a._loadSvgSourceUsingString(b.response) }, b.onerror = function() { return a.emit("error", a) }, b.open("GET", this.imageUrl, !0), b.send() }, b.prototype._loadSvgSourceUsingString = function(a) { var c = (0, h.getSvgSize)(a), d = c.width, e = c.height; if (!d || !e) throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them."); this.realWidth = Math.round(d * this.sourceScale), this.realHeight = Math.round(e * this.sourceScale), this._updateDimensions(); var f = document.createElement("canvas"); f.width = this.realWidth, f.height = this.realHeight, f._pixiId = "canvas_" + (0, h.uid)(), f.getContext("2d").drawImage(this.source, 0, 0, d, e, 0, 0, this.realWidth, this.realHeight), this.origSource = this.source, this.source = f, b.addToCache(this, f._pixiId), this.isLoading = !1, this._sourceLoaded(), this.emit("loaded", this) }, b.prototype._sourceLoaded = function() { this.hasLoaded = !0, this.update() }, b.prototype.destroy = function() { this.imageUrl && (delete h.TextureCache[this.imageUrl], this.imageUrl = null, navigator.isCocoonJS || (this.source.src = "")), this.source = null, this.dispose(), b.removeFromCache(this), this.textureCacheIds = null, this._destroyed = !0 }, b.prototype.dispose = function() { this.emit("dispose", this) }, b.prototype.updateSourceImage = function(a) { this.source.src = a, this.loadSource(this.source) }, b.fromImage = function(a, c, d, e) { var f = h.BaseTextureCache[a]; if (!f) { var g = new Image; void 0 === c && 0 !== a.indexOf("data:") ? g.crossOrigin = (0, n.default)(a) : c && (g.crossOrigin = "string" == typeof c ? c : "anonymous"), f = new b(g, d), f.imageUrl = a, e && (f.sourceScale = e), f.resolution = (0, h.getResolutionOfUrl)(a), g.src = a, b.addToCache(f, a) } return f }, b.fromCanvas = function(a, c) { var d = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "canvas"; a._pixiId || (a._pixiId = d + "_" + (0, h.uid)()); var e = h.BaseTextureCache[a._pixiId]; return e || (e = new b(a, c), b.addToCache(e, a._pixiId)), e }, b.from = function(a, c, d) { if ("string" == typeof a) return b.fromImage(a, void 0, c, d); if (a instanceof HTMLImageElement) { var e = a.src, f = h.BaseTextureCache[e]; return f || (f = new b(a, c), f.imageUrl = e, d && (f.sourceScale = d), f.resolution = (0, h.getResolutionOfUrl)(e), b.addToCache(f, e)), f } return a instanceof HTMLCanvasElement ? b.fromCanvas(a, c) : a }, b.addToCache = function(a, b) { b && (-1 === a.textureCacheIds.indexOf(b) && a.textureCacheIds.push(b), h.BaseTextureCache[b] && console.warn("BaseTexture added to the cache with an id [" + b + "] that already had an entry"), h.BaseTextureCache[b] = a) }, b.removeFromCache = function(a) { if ("string" == typeof a) { var b = h.BaseTextureCache[a]; if (b) { var c = b.textureCacheIds.indexOf(a); return c > -1 && b.textureCacheIds.splice(c, 1), delete h.BaseTextureCache[a], b } } else if (a && a.textureCacheIds) { for (var d = 0; d < a.textureCacheIds.length; ++d) delete h.BaseTextureCache[a.textureCacheIds[d]]; return a.textureCacheIds.length = 0, a } return null }, b }(l.default); c.default = q }, { "../settings": 101, "../utils": 125, "../utils/determineCrossOrigin": 124, "bit-twiddle": 1, eventemitter3: 3 }], 113: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("./BaseRenderTexture"), i = d(h), j = a("./Texture"), k = d(j), l = function(a) { function b(c, d) { e(this, b); var g = null; if (!(c instanceof i.default)) { var h = arguments[1], j = arguments[2], k = arguments[3], l = arguments[4]; console.warn("Please use RenderTexture.create(" + h + ", " + j + ") instead of the ctor directly."), g = arguments[0], d = null, c = new i.default(h, j, k, l) } var m = f(this, a.call(this, c, d)); return m.legacyRenderer = g, m.valid = !0, m._updateUvs(), m } return g(b, a), b.prototype.resize = function(a, b, c) { a = Math.ceil(a), b = Math.ceil(b), this.valid = a > 0 && b > 0, this._frame.width = this.orig.width = a, this._frame.height = this.orig.height = b, c || this.baseTexture.resize(a, b), this._updateUvs() }, b.create = function(a, c, d, e) { return new b(new i.default(a, c, d, e)) }, b }(k.default); c.default = l }, { "./BaseRenderTexture": 111, "./Texture": 115 }], 114: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), f = a("../"), g = a("../utils"), h = function() { function a(b, c) { var e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null; d(this, a), this.baseTexture = b, this.textures = {}, this.animations = {}, this.data = c, this.resolution = this._updateResolution(e || this.baseTexture.imageUrl), this._frames = this.data.frames, this._frameKeys = Object.keys(this._frames), this._batchIndex = 0, this._callback = null } return e(a, null, [{ key: "BATCH_SIZE", get: function() { return 1e3 } }]), a.prototype._updateResolution = function(a) { var b = this.data.meta.scale, c = (0, g.getResolutionOfUrl)(a, null); return null === c && (c = void 0 !== b ? parseFloat(b) : 1), 1 !== c && (this.baseTexture.resolution = c, this.baseTexture.update()), c }, a.prototype.parse = function(b) { this._batchIndex = 0, this._callback = b, this._frameKeys.length <= a.BATCH_SIZE ? (this._processFrames(0), this._processAnimations(), this._parseComplete()) : this._nextBatch() }, a.prototype._processFrames = function(b) { for (var c = b, d = a.BATCH_SIZE, e = this.baseTexture.sourceScale; c - b < d && c < this._frameKeys.length;) { var g = this._frameKeys[c], h = this._frames[g], i = h.frame; if (i) { var j = null, k = null, l = !1 !== h.trimmed && h.sourceSize ? h.sourceSize : h.frame, m = new f.Rectangle(0, 0, Math.floor(l.w * e) / this.resolution, Math.floor(l.h * e) / this.resolution); j = h.rotated ? new f.Rectangle(Math.floor(i.x * e) / this.resolution, Math.floor(i.y * e) / this.resolution, Math.floor(i.h * e) / this.resolution, Math.floor(i.w * e) / this.resolution) : new f.Rectangle(Math.floor(i.x * e) / this.resolution, Math.floor(i.y * e) / this.resolution, Math.floor(i.w * e) / this.resolution, Math.floor(i.h * e) / this.resolution), !1 !== h.trimmed && h.spriteSourceSize && (k = new f.Rectangle(Math.floor(h.spriteSourceSize.x * e) / this.resolution, Math.floor(h.spriteSourceSize.y * e) / this.resolution, Math.floor(i.w * e) / this.resolution, Math.floor(i.h * e) / this.resolution)), this.textures[g] = new f.Texture(this.baseTexture, j, m, k, h.rotated ? 2 : 0, h.anchor), f.Texture.addToCache(this.textures[g], g) } c++ } }, a.prototype._processAnimations = function() { var a = this.data.animations || {}; for (var b in a) { this.animations[b] = []; for (var c = a[b], d = Array.isArray(c), e = 0, c = d ? c : c[Symbol.iterator]();;) { var f; if (d) { if (e >= c.length) break; f = c[e++] } else { if (e = c.next(), e.done) break; f = e.value } var g = f; this.animations[b].push(this.textures[g]) } } }, a.prototype._parseComplete = function() { var a = this._callback; this._callback = null, this._batchIndex = 0, a.call(this, this.textures) }, a.prototype._nextBatch = function() { var b = this; this._processFrames(this._batchIndex * a.BATCH_SIZE), this._batchIndex++, setTimeout(function() { b._batchIndex * a.BATCH_SIZE < b._frameKeys.length ? b._nextBatch() : (b._processAnimations(), b._parseComplete()) }, 0) }, a.prototype.destroy = function() { var a = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; for (var b in this.textures) this.textures[b].destroy(); this._frames = null, this._frameKeys = null, this.data = null, this.textures = null, a && this.baseTexture.destroy(), this.baseTexture = null }, a }(); c.default = h }, { "../": 65, "../utils": 125 }], 115: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } function h(a) { a.destroy = function() {}, a.on = function() {}, a.once = function() {}, a.emit = function() {} } c.__esModule = !0; var i = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), j = a("./BaseTexture"), k = d(j), l = a("./VideoBaseTexture"), m = d(l), n = a("./TextureUvs"), o = d(n), p = a("eventemitter3"), q = d(p), r = a("../math"), s = a("../utils"), t = a("../settings"), u = d(t), v = function(a) { function b(c, d, g, h, i, j) { e(this, b); var k = f(this, a.call(this)); if (k.noFrame = !1, d || (k.noFrame = !0, d = new r.Rectangle(0, 0, 1, 1)), c instanceof b && (c = c.baseTexture), k.baseTexture = c, k._frame = d, k.trim = h, k.valid = !1, k.requiresUpdate = !1, k._uvs = null, k.orig = g || d, k._rotate = Number(i || 0), !0 === i) k._rotate = 2; else if (k._rotate % 2 != 0) throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually"); return c.hasLoaded ? (k.noFrame && (d = new r.Rectangle(0, 0, c.width, c.height), c.on("update", k.onBaseTextureUpdated, k)), k.frame = d) : c.once("loaded", k.onBaseTextureLoaded, k), k.defaultAnchor = j ? new r.Point(j.x, j.y) : new r.Point(0, 0), k._updateID = 0, k.transform = null, k.textureCacheIds = [], k } return g(b, a), b.prototype.update = function() { this.baseTexture.update() }, b.prototype.onBaseTextureLoaded = function(a) { this._updateID++, this.noFrame ? this.frame = new r.Rectangle(0, 0, a.width, a.height) : this.frame = this._frame, this.baseTexture.on("update", this.onBaseTextureUpdated, this), this.emit("update", this) }, b.prototype.onBaseTextureUpdated = function(a) { this._updateID++, this._frame.width = a.width, this._frame.height = a.height, this.emit("update", this) }, b.prototype.destroy = function(a) { this.baseTexture && (a && (s.TextureCache[this.baseTexture.imageUrl] && b.removeFromCache(this.baseTexture.imageUrl), this.baseTexture.destroy()), this.baseTexture.off("update", this.onBaseTextureUpdated, this), this.baseTexture.off("loaded", this.onBaseTextureLoaded, this), this.baseTexture = null), this._frame = null, this._uvs = null, this.trim = null, this.orig = null, this.valid = !1, b.removeFromCache(this), this.textureCacheIds = null }, b.prototype.clone = function() { return new b(this.baseTexture, this.frame, this.orig, this.trim, this.rotate) }, b.prototype._updateUvs = function() { this._uvs || (this._uvs = new o.default), this._uvs.set(this._frame, this.baseTexture, this.rotate), this._updateID++ }, b.fromImage = function(a, c, d, e) { var f = s.TextureCache[a]; return f || (f = new b(k.default.fromImage(a, c, d, e)), b.addToCache(f, a)), f }, b.fromFrame = function(a) { var b = s.TextureCache[a]; if (!b) throw new Error('The frameId "' + a + '" does not exist in the texture cache'); return b }, b.fromCanvas = function(a, c) { var d = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "canvas"; return new b(k.default.fromCanvas(a, c, d)) }, b.fromVideo = function(a, c) { return "string" == typeof a ? b.fromVideoUrl(a, c) : new b(m.default.fromVideo(a, c)) }, b.fromVideoUrl = function(a, c) { return new b(m.default.fromUrl(a, c)) }, b.from = function(a) { if ("string" == typeof a) { var c = s.TextureCache[a]; if (!c) { return null !== a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/) ? b.fromVideoUrl(a) : b.fromImage(a) } return c } return a instanceof HTMLImageElement ? new b(k.default.from(a)) : a instanceof HTMLCanvasElement ? b.fromCanvas(a, u.default.SCALE_MODE, "HTMLCanvasElement") : a instanceof HTMLVideoElement ? b.fromVideo(a) : a instanceof k.default ? new b(a) : a }, b.fromLoader = function(a, c, d) { var e = new k.default(a, void 0, (0, s.getResolutionOfUrl)(c)), f = new b(e); return e.imageUrl = c, d || (d = c), k.default.addToCache(f.baseTexture, d), b.addToCache(f, d), d !== c && (k.default.addToCache(f.baseTexture, c), b.addToCache(f, c)), f }, b.addToCache = function(a, b) { b && (-1 === a.textureCacheIds.indexOf(b) && a.textureCacheIds.push(b), s.TextureCache[b] && console.warn("Texture added to the cache with an id [" + b + "] that already had an entry"), s.TextureCache[b] = a) }, b.removeFromCache = function(a) { if ("string" == typeof a) { var b = s.TextureCache[a]; if (b) { var c = b.textureCacheIds.indexOf(a); return c > -1 && b.textureCacheIds.splice(c, 1), delete s.TextureCache[a], b } } else if (a && a.textureCacheIds) { for (var d = 0; d < a.textureCacheIds.length; ++d) s.TextureCache[a.textureCacheIds[d]] === a && delete s.TextureCache[a.textureCacheIds[d]]; return a.textureCacheIds.length = 0, a } return null }, i(b, [{ key: "frame", get: function() { return this._frame }, set: function(a) { this._frame = a, this.noFrame = !1; var b = a.x, c = a.y, d = a.width, e = a.height, f = b + d > this.baseTexture.width, g = c + e > this.baseTexture.height; if (f || g) { var h = f && g ? "and" : "or", i = "X: " + b + " + " + d + " = " + (b + d) + " > " + this.baseTexture.width, j = "Y: " + c + " + " + e + " = " + (c + e) + " > " + this.baseTexture.height; throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + i + " " + h + " " + j) } this.valid = d && e && this.baseTexture.hasLoaded, this.trim || this.rotate || (this.orig = a), this.valid && this._updateUvs() } }, { key: "rotate", get: function() { return this._rotate }, set: function(a) { this._rotate = a, this.valid && this._updateUvs() } }, { key: "width", get: function() { return this.orig.width } }, { key: "height", get: function() { return this.orig.height } }]), b }(q.default); c.default = v, v.EMPTY = new v(new k.default), h(v.EMPTY), h(v.EMPTY.baseTexture), v.WHITE = function() { var a = document.createElement("canvas"); a.width = 10, a.height = 10; var b = a.getContext("2d"); return b.fillStyle = "white", b.fillRect(0, 0, 10, 10), new v(new k.default(a)) }(), h(v.WHITE), h(v.WHITE.baseTexture) }, { "../math": 70, "../settings": 101, "../utils": 125, "./BaseTexture": 112, "./TextureUvs": 117, "./VideoBaseTexture": 118, eventemitter3: 3 }], 116: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), f = a("../math/Matrix"), g = function(a) { return a && a.__esModule ? a : { default: a } }(f), h = new g.default, i = function() { function a(b, c) { d(this, a), this._texture = b, this.mapCoord = new g.default, this.uClampFrame = new Float32Array(4), this.uClampOffset = new Float32Array(2), this._lastTextureID = -1, this.clampOffset = 0, this.clampMargin = void 0 === c ? .5 : c } return a.prototype.multiplyUvs = function(a, b) { void 0 === b && (b = a); for (var c = this.mapCoord, d = 0; d < a.length; d += 2) { var e = a[d], f = a[d + 1]; b[d] = e * c.a + f * c.c + c.tx, b[d + 1] = e * c.b + f * c.d + c.ty } return b }, a.prototype.update = function(a) { var b = this._texture; if (!b || !b.valid) return !1; if (!a && this._lastTextureID === b._updateID) return !1; this._lastTextureID = b._updateID; var c = b._uvs; this.mapCoord.set(c.x1 - c.x0, c.y1 - c.y0, c.x3 - c.x0, c.y3 - c.y0, c.x0, c.y0); var d = b.orig, e = b.trim; e && (h.set(d.width / e.width, 0, 0, d.height / e.height, -e.x / e.width, -e.y / e.height), this.mapCoord.append(h)); var f = b.baseTexture, g = this.uClampFrame, i = this.clampMargin / f.resolution, j = this.clampOffset; return g[0] = (b._frame.x + i + j) / f.width, g[1] = (b._frame.y + i + j) / f.height, g[2] = (b._frame.x + b._frame.width - i + j) / f.width, g[3] = (b._frame.y + b._frame.height - i + j) / f.height, this.uClampOffset[0] = j / f.realWidth, this.uClampOffset[1] = j / f.realHeight, !0 }, e(a, [{ key: "texture", get: function() { return this._texture }, set: function(a) { this._texture = a, this._lastTextureID = -1 } }]), a }(); c.default = i }, { "../math/Matrix": 67 }], 117: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../math/GroupD8"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = function() { function a() { d(this, a), this.x0 = 0, this.y0 = 0, this.x1 = 1, this.y1 = 0, this.x2 = 1, this.y2 = 1, this.x3 = 0, this.y3 = 1, this.uvsUint32 = new Uint32Array(4) } return a.prototype.set = function(a, b, c) { var d = b.width, e = b.height; if (c) { var g = a.width / 2 / d, h = a.height / 2 / e, i = a.x / d + g, j = a.y / e + h; c = f.default.add(c, f.default.NW), this.x0 = i + g * f.default.uX(c), this.y0 = j + h * f.default.uY(c), c = f.default.add(c, 2), this.x1 = i + g * f.default.uX(c), this.y1 = j + h * f.default.uY(c), c = f.default.add(c, 2), this.x2 = i + g * f.default.uX(c), this.y2 = j + h * f.default.uY(c), c = f.default.add(c, 2), this.x3 = i + g * f.default.uX(c), this.y3 = j + h * f.default.uY(c) } else this.x0 = a.x / d, this.y0 = a.y / e, this.x1 = (a.x + a.width) / d, this.y1 = a.y / e, this.x2 = (a.x + a.width) / d, this.y2 = (a.y + a.height) / e, this.x3 = a.x / d, this.y3 = (a.y + a.height) / e; this.uvsUint32[0] = (65535 * this.y0 & 65535) << 16 | 65535 * this.x0 & 65535, this.uvsUint32[1] = (65535 * this.y1 & 65535) << 16 | 65535 * this.x1 & 65535, this.uvsUint32[2] = (65535 * this.y2 & 65535) << 16 | 65535 * this.x2 & 65535, this.uvsUint32[3] = (65535 * this.y3 & 65535) << 16 | 65535 * this.x3 & 65535 }, a }(); c.default = g }, { "../math/GroupD8": 66 }], 118: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } function h(a, b) { b || (a = a.split("?").shift().toLowerCase(), b = "video/" + a.substr(a.lastIndexOf(".") + 1)); var c = document.createElement("source"); return c.src = a, c.type = b, c } c.__esModule = !0; var i = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), j = a("./BaseTexture"), k = d(j), l = a("../utils"), m = a("../ticker"), n = a("../const"), o = a("../utils/determineCrossOrigin"), p = d(o), q = function(a) { function b(c, d) { if (e(this, b), !c) throw new Error("No video source element specified."); (c.readyState === c.HAVE_ENOUGH_DATA || c.readyState === c.HAVE_FUTURE_DATA) && c.width && c.height && (c.complete = !0); var g = f(this, a.call(this, c, d)); return g.width = c.videoWidth, g.height = c.videoHeight, g._autoUpdate = !0, g._isAutoUpdating = !1, g.autoPlay = !0, g.update = g.update.bind(g), g._onCanPlay = g._onCanPlay.bind(g), c.addEventListener("play", g._onPlayStart.bind(g)), c.addEventListener("pause", g._onPlayStop.bind(g)), g.hasLoaded = !1, g.__loaded = !1, g._isSourceReady() ? g._onCanPlay() : (c.addEventListener("canplay", g._onCanPlay), c.addEventListener("canplaythrough", g._onCanPlay)), g } return g(b, a), b.prototype._isSourcePlaying = function() { var a = this.source; return a.currentTime > 0 && !1 === a.paused && !1 === a.ended && a.readyState > 2 }, b.prototype._isSourceReady = function() { return 3 === this.source.readyState || 4 === this.source.readyState }, b.prototype._onPlayStart = function() { this.hasLoaded || this._onCanPlay(), !this._isAutoUpdating && this.autoUpdate && (m.shared.add(this.update, this, n.UPDATE_PRIORITY.HIGH), this._isAutoUpdating = !0) }, b.prototype._onPlayStop = function() { this._isAutoUpdating && (m.shared.remove(this.update, this), this._isAutoUpdating = !1) }, b.prototype._onCanPlay = function() { this.hasLoaded = !0, this.source && (this.source.removeEventListener("canplay", this._onCanPlay), this.source.removeEventListener("canplaythrough", this._onCanPlay), this.width = this.source.videoWidth, this.height = this.source.videoHeight, this.__loaded || (this.__loaded = !0, this.emit("loaded", this)), this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && this.source.play()) }, b.prototype.destroy = function() { this._isAutoUpdating && m.shared.remove(this.update, this), this.source && this.source._pixiId && (k.default.removeFromCache(this.source._pixiId), delete this.source._pixiId, this.source.pause(), this.source.src = "", this.source.load()), a.prototype.destroy.call(this) }, b.fromVideo = function(a, c) { a._pixiId || (a._pixiId = "video_" + (0, l.uid)()); var d = l.BaseTextureCache[a._pixiId]; return d || (d = new b(a, c), k.default.addToCache(d, a._pixiId)), d }, b.fromUrl = function(a, c, d) { var e = document.createElement("video"); e.setAttribute("webkit-playsinline", ""), e.setAttribute("playsinline", ""); var f = Array.isArray(a) ? a[0].src || a[0] : a.src || a; if (void 0 === d && 0 !== f.indexOf("data:") ? e.crossOrigin = (0, p.default)(f) : d && (e.crossOrigin = "string" == typeof d ? d : "anonymous"), Array.isArray(a)) for (var g = 0; g < a.length; ++g) e.appendChild(h(a[g].src || a[g], a[g].mime)); else e.appendChild(h(f, a.mime)); return e.load(), b.fromVideo(e, c) }, i(b, [{ key: "autoUpdate", get: function() { return this._autoUpdate }, set: function(a) { a !== this._autoUpdate && (this._autoUpdate = a, !this._autoUpdate && this._isAutoUpdating ? (m.shared.remove(this.update, this), this._isAutoUpdating = !1) : this._autoUpdate && !this._isAutoUpdating && (m.shared.add(this.update, this, n.UPDATE_PRIORITY.HIGH), this._isAutoUpdating = !0)) } }]), b }(k.default); c.default = q, q.fromUrls = q.fromUrl }, { "../const": 46, "../ticker": 121, "../utils": 125, "../utils/determineCrossOrigin": 124, "./BaseTexture": 112 }], 119: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var f = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), g = a("../settings"), h = d(g), i = a("../const"), j = a("./TickerListener"), k = d(j), l = function() { function a() { var b = this; e(this, a), this._head = new k.default(null, null, 1 / 0), this._requestId = null, this._maxElapsedMS = 100, this.autoStart = !1, this.deltaTime = 1, this.elapsedMS = 1 / h.default.TARGET_FPMS, this.lastTime = -1, this.speed = 1, this.started = !1, this._tick = function(a) { b._requestId = null, b.started && (b.update(a), b.started && null === b._requestId && b._head.next && (b._requestId = requestAnimationFrame(b._tick))) } } return a.prototype._requestIfNeeded = function() { null === this._requestId && this._head.next && (this.lastTime = performance.now(), this._requestId = requestAnimationFrame(this._tick)) }, a.prototype._cancelIfNeeded = function() { null !== this._requestId && (cancelAnimationFrame(this._requestId), this._requestId = null) }, a.prototype._startIfPossible = function() { this.started ? this._requestIfNeeded() : this.autoStart && this.start() }, a.prototype.add = function(a, b) { var c = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : i.UPDATE_PRIORITY.NORMAL; return this._addListener(new k.default(a, b, c)) }, a.prototype.addOnce = function(a, b) { var c = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : i.UPDATE_PRIORITY.NORMAL; return this._addListener(new k.default(a, b, c, !0)) }, a.prototype._addListener = function(a) { var b = this._head.next, c = this._head; if (b) { for (; b;) { if (a.priority > b.priority) { a.connect(c); break } c = b, b = b.next } a.previous || a.connect(c) } else a.connect(c); return this._startIfPossible(), this }, a.prototype.remove = function(a, b) { for (var c = this._head.next; c;) c = c.match(a, b) ? c.destroy() : c.next; return this._head.next || this._cancelIfNeeded(), this }, a.prototype.start = function() { this.started || (this.started = !0, this._requestIfNeeded()) }, a.prototype.stop = function() { this.started && (this.started = !1, this._cancelIfNeeded()) }, a.prototype.destroy = function() { this.stop(); for (var a = this._head.next; a;) a = a.destroy(!0); this._head.destroy(), this._head = null }, a.prototype.update = function() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : performance.now(), b = void 0; if (a > this.lastTime) { b = this.elapsedMS = a - this.lastTime, b > this._maxElapsedMS && (b = this._maxElapsedMS), this.deltaTime = b * h.default.TARGET_FPMS * this.speed; for (var c = this._head, d = c.next; d;) d = d.emit(this.deltaTime); c.next || this._cancelIfNeeded() } else this.deltaTime = this.elapsedMS = 0; this.lastTime = a }, f(a, [{ key: "FPS", get: function() { return 1e3 / this.elapsedMS } }, { key: "minFPS", get: function() { return 1e3 / this._maxElapsedMS }, set: function(a) { var b = Math.min(Math.max(0, a) / 1e3, h.default.TARGET_FPMS); this._maxElapsedMS = 1 / b } }]), a }(); c.default = l }, { "../const": 46, "../settings": 101, "./TickerListener": 120 }], 120: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(b) { var c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, f = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; d(this, a), this.fn = b, this.context = c, this.priority = e, this.once = f, this.next = null, this.previous = null, this._destroyed = !1 } return a.prototype.match = function(a, b) { return b = b || null, this.fn === a && this.context === b }, a.prototype.emit = function(a) { this.fn && (this.context ? this.fn.call(this.context, a) : this.fn(a)); var b = this.next; return this.once && this.destroy(!0), this._destroyed && (this.next = null), b }, a.prototype.connect = function(a) { this.previous = a, a.next && (a.next.previous = this), this.next = a.next, a.next = this }, a.prototype.destroy = function() { var a = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; this._destroyed = !0, this.fn = null, this.context = null, this.previous && (this.previous.next = this.next), this.next && (this.next.previous = this.previous); var b = this.next; return this.next = a ? null : b, this.previous = null, b }, a }(); c.default = e }, {}], 121: [function(a, b, c) { "use strict"; c.__esModule = !0, c.Ticker = c.shared = void 0; var d = a("./Ticker"), e = function(a) { return a && a.__esModule ? a : { default: a } }(d), f = new e.default; f.autoStart = !0, f.destroy = function() {}, c.shared = f, c.Ticker = e.default }, { "./Ticker": 119 }], 122: [function(a, b, c) { "use strict"; function d() { return !(!!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)) } c.__esModule = !0, c.default = d }, {}], 123: [function(a, b, c) { "use strict"; function d(a) { for (var b = 6 * a, c = new Uint16Array(b), d = 0, e = 0; d < b; d += 6, e += 4) c[d + 0] = e + 0, c[d + 1] = e + 1, c[d + 2] = e + 2, c[d + 3] = e + 0, c[d + 4] = e + 2, c[d + 5] = e + 3; return c } c.__esModule = !0, c.default = d }, {}], 124: [function(a, b, c) { "use strict"; function d(a) { var b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : window.location; if (0 === a.indexOf("data:")) return ""; b = b || window.location, g || (g = document.createElement("a")), g.href = a, a = f.default.parse(g.href); var c = !a.port && "" === b.port || a.port === b.port; return a.hostname === b.hostname && c && a.protocol === b.protocol ? "" : "anonymous" } c.__esModule = !0, c.default = d; var e = a("url"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e), g = void 0 }, { url: 38 }], 125: [function(a, b, c) { "use strict"; function d(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b } function e(a) { return a && a.__esModule ? a : { default: a } } function f() { return ++O } function g(a, b) { return b = b || [], b[0] = (a >> 16 & 255) / 255, b[1] = (a >> 8 & 255) / 255, b[2] = (255 & a) / 255, b } function h(a) { return a = a.toString(16), "#" + (a = "000000".substr(0, 6 - a.length) + a) } function i(a) { return (255 * a[0] << 16) + (255 * a[1] << 8) + (255 * a[2] | 0) } function j(a, b) { var c = z.default.RETINA_PREFIX.exec(a); return c ? parseFloat(c[1]) : void 0 !== b ? b : 1 } function k(a) { var b = x.DATA_URI.exec(a); if (b) return { mediaType: b[1] ? b[1].toLowerCase() : void 0, subType: b[2] ? b[2].toLowerCase() : void 0, charset: b[3] ? b[3].toLowerCase() : void 0, encoding: b[4] ? b[4].toLowerCase() : void 0, data: b[5] } } function l(a) { var b = x.URL_FILE_EXTENSION.exec(a); if (b) return b[1].toLowerCase() } function m(a) { var b = x.SVG_SIZE.exec(a), c = {}; return b && (c[b[1]] = Math.round(parseFloat(b[3])), c[b[5]] = Math.round(parseFloat(b[7]))), c } function n() { P = !0 } function o(a) { if (!P) { if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) { var b = ["\n %c %c %c PixiJS " + x.VERSION + " - ✰ " + a + " ✰ %c %c http://www.pixijs.com/ %c %c ♥%c♥%c♥ \n\n", "background: #ff66a5; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff66a5; background: #030307; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "background: #ffc3dc; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;"]; window.console.log.apply(console, b) } else window.console && window.console.log("PixiJS " + x.VERSION + " - " + a + " - http://www.pixijs.com/"); P = !0 } } function p() { var a = { stencil: !0, failIfMajorPerformanceCaveat: !0 }; try { if (!window.WebGLRenderingContext) return !1; var b = document.createElement("canvas"), c = b.getContext("webgl", a) || b.getContext("experimental-webgl", a), d = !(!c || !c.getContextAttributes().stencil); if (c) { var e = c.getExtension("WEBGL_lose_context"); e && e.loseContext() } return c = null, d } catch (a) { return !1 } } function q(a) { return 0 === a ? 0 : a < 0 ? -1 : 1 } function r() { var a = void 0; for (a in Q) Q[a].destroy(); for (a in R) R[a].destroy() } function s() { var a = void 0; for (a in Q) delete Q[a]; for (a in R) delete R[a] } function t(a, b) { return S[b ? 1 : 0][a] } function u(a, b) { if (1 === b) return (255 * b << 24) + a; if (0 === b) return 0; var c = a >> 16 & 255, d = a >> 8 & 255, e = 255 & a; return c = c * b + .5 | 0, d = d * b + .5 | 0, e = e * b + .5 | 0, (255 * b << 24) + (c << 16) + (d << 8) + e } function v(a, b, c, d) { return c = c || new Float32Array(4), d || void 0 === d ? (c[0] = a[0] * b, c[1] = a[1] * b, c[2] = a[2] * b) : (c[0] = a[0], c[1] = a[1], c[2] = a[2]), c[3] = b, c } function w(a, b, c, d) { return c = c || new Float32Array(4), c[0] = (a >> 16 & 255) / 255, c[1] = (a >> 8 & 255) / 255, c[2] = (255 & a) / 255, (d || void 0 === d) && (c[0] *= b, c[1] *= b, c[2] *= b), c[3] = b, c } c.__esModule = !0, c.premultiplyBlendMode = c.BaseTextureCache = c.TextureCache = c.earcut = c.mixins = c.pluginTarget = c.EventEmitter = c.removeItems = c.isMobile = void 0, c.uid = f, c.hex2rgb = g, c.hex2string = h, c.rgb2hex = i, c.getResolutionOfUrl = j, c.decomposeDataUri = k, c.getUrlFileExtension = l, c.getSvgSize = m, c.skipHello = n, c.sayHello = o, c.isWebGLSupported = p, c.sign = q, c.destroyTextureCache = r, c.clearTextureCache = s, c.correctBlendMode = t, c.premultiplyTint = u, c.premultiplyRgba = v, c.premultiplyTintToRgba = w; var x = a("../const"), y = a("../settings"), z = e(y), A = a("eventemitter3"), B = e(A), C = a("./pluginTarget"), D = e(C), E = a("./mixin"), F = d(E), G = a("ismobilejs"), H = d(G), I = a("remove-array-items"), J = e(I), K = a("./mapPremultipliedBlendModes"), L = e(K), M = a("earcut"), N = e(M), O = 0, P = !1; c.isMobile = H, c.removeItems = J.default, c.EventEmitter = B.default, c.pluginTarget = D.default, c.mixins = F, c.earcut = N.default; var Q = c.TextureCache = Object.create(null), R = c.BaseTextureCache = Object.create(null), S = c.premultiplyBlendMode = (0, L.default)() }, { "../const": 46, "../settings": 101, "./mapPremultipliedBlendModes": 126, "./mixin": 128, "./pluginTarget": 129, earcut: 2, eventemitter3: 3, ismobilejs: 4, "remove-array-items": 31 }], 126: [function(a, b, c) { "use strict"; function d() { for (var a = [], b = [], c = 0; c < 32; c++) a[c] = c, b[c] = c; a[e.BLEND_MODES.NORMAL_NPM] = e.BLEND_MODES.NORMAL, a[e.BLEND_MODES.ADD_NPM] = e.BLEND_MODES.ADD, a[e.BLEND_MODES.SCREEN_NPM] = e.BLEND_MODES.SCREEN, b[e.BLEND_MODES.NORMAL] = e.BLEND_MODES.NORMAL_NPM, b[e.BLEND_MODES.ADD] = e.BLEND_MODES.ADD_NPM, b[e.BLEND_MODES.SCREEN] = e.BLEND_MODES.SCREEN_NPM; var d = []; return d.push(b), d.push(a), d } c.__esModule = !0, c.default = d; var e = a("../const") }, { "../const": 46 }], 127: [function(a, b, c) { "use strict"; function d(a) { return f.default.tablet || f.default.phone ? 4 : a } c.__esModule = !0, c.default = d; var e = a("ismobilejs"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e) }, { ismobilejs: 4 }], 128: [function(a, b, c) { "use strict"; function d(a, b) { if (a && b) for (var c = Object.keys(b), d = 0; d < c.length; ++d) { var e = c[d]; Object.defineProperty(a, e, Object.getOwnPropertyDescriptor(b, e)) } } function e(a, b) { g.push(a, b) } function f() { for (var a = 0; a < g.length; a += 2) d(g[a], g[a + 1]); g.length = 0 } c.__esModule = !0, c.mixin = d, c.delayMixin = e, c.performMixins = f; var g = [] }, {}], 129: [function(a, b, c) { "use strict"; function d(a) { a.__plugins = {}, a.registerPlugin = function(b, c) { a.__plugins[b] = c }, a.prototype.initPlugins = function() { this.plugins = this.plugins || {}; for (var b in a.__plugins) this.plugins[b] = new a.__plugins[b](this) }, a.prototype.destroyPlugins = function() { for (var a in this.plugins) this.plugins[a].destroy(), this.plugins[a] = null; this.plugins = null } } c.__esModule = !0, c.default = { mixin: function(a) { d(a) } } }, {}], 130: [function(a, b, c) { "use strict"; function d(a) { var b = a.width, c = a.height, d = a.getContext("2d"), e = d.getImageData(0, 0, b, c), f = e.data, g = f.length, h = { top: null, left: null, right: null, bottom: null }, i = null, j = void 0, k = void 0, l = void 0; for (j = 0; j < g; j += 4) 0 !== f[j + 3] && (k = j / 4 % b, l = ~~(j / 4 / b), null === h.top && (h.top = l), null === h.left ? h.left = k : k < h.left && (h.left = k), null === h.right ? h.right = k + 1 : h.right < k && (h.right = k + 1), null === h.bottom ? h.bottom = l : h.bottom < l && (h.bottom = l)); return null !== h.top && (b = h.right - h.left, c = h.bottom - h.top + 1, i = d.getImageData(h.left, h.top, b, c)), { height: c, width: b, data: i } } c.__esModule = !0, c.default = d }, {}], 131: [function(a, b, c) { "use strict"; function d(a) { if (!f[a]) { var b = (new Error).stack; void 0 === b ? console.warn("Deprecation Warning: ", a) : (b = b.split("\n").splice(3).join("\n"), console.groupCollapsed ? (console.groupCollapsed("%cDeprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", a), console.warn(b), console.groupEnd()) : (console.warn("Deprecation Warning: ", a), console.warn(b))), f[a] = !0 } } function e(a) { var b = a.mesh, c = a.particles, e = a.extras, f = a.filters, g = a.prepare, h = a.loaders, i = a.interaction; Object.defineProperties(a, { SpriteBatch: { get: function() { throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.") } }, AssetLoader: { get: function() { throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.") } }, Stage: { get: function() { return d("You do not need to use a PIXI Stage any more, you can simply render any container."), a.Container } }, DisplayObjectContainer: { get: function() { return d("DisplayObjectContainer has been shortened to Container, please use Container from now on."), a.Container } }, Strip: { get: function() { return d("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."), b.Mesh } }, Rope: { get: function() { return d("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."), b.Rope } }, ParticleContainer: { get: function() { return d("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."), c.ParticleContainer } }, MovieClip: { get: function() { return d("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."), e.AnimatedSprite } }, TilingSprite: { get: function() { return d("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."), e.TilingSprite } }, BitmapText: { get: function() { return d("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."), e.BitmapText } }, blendModes: { get: function() { return d("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."), a.BLEND_MODES } }, scaleModes: { get: function() { return d("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."), a.SCALE_MODES } }, BaseTextureCache: { get: function() { return d("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."), a.utils.BaseTextureCache } }, TextureCache: { get: function() { return d("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."), a.utils.TextureCache } }, math: { get: function() { return d("The math namespace is deprecated, please access members already accessible on PIXI."), a } }, AbstractFilter: { get: function() { return d("AstractFilter has been renamed to Filter, please use PIXI.Filter"), a.Filter } }, TransformManual: { get: function() { return d("TransformManual has been renamed to TransformBase, please update your pixi-spine"), a.TransformBase } }, TARGET_FPMS: { get: function() { return d("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"), a.settings.TARGET_FPMS }, set: function(b) { d("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"), a.settings.TARGET_FPMS = b } }, FILTER_RESOLUTION: { get: function() { return d("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"), a.settings.FILTER_RESOLUTION }, set: function(b) { d("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"), a.settings.FILTER_RESOLUTION = b } }, RESOLUTION: { get: function() { return d("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"), a.settings.RESOLUTION }, set: function(b) { d("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"), a.settings.RESOLUTION = b } }, MIPMAP_TEXTURES: { get: function() { return d("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"), a.settings.MIPMAP_TEXTURES }, set: function(b) { d("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"), a.settings.MIPMAP_TEXTURES = b } }, SPRITE_BATCH_SIZE: { get: function() { return d("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"), a.settings.SPRITE_BATCH_SIZE }, set: function(b) { d("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"), a.settings.SPRITE_BATCH_SIZE = b } }, SPRITE_MAX_TEXTURES: { get: function() { return d("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"), a.settings.SPRITE_MAX_TEXTURES }, set: function(b) { d("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"), a.settings.SPRITE_MAX_TEXTURES = b } }, RETINA_PREFIX: { get: function() { return d("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"), a.settings.RETINA_PREFIX }, set: function(b) { d("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"), a.settings.RETINA_PREFIX = b } }, DEFAULT_RENDER_OPTIONS: { get: function() { return d("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"), a.settings.RENDER_OPTIONS } } }); for (var j = [{ parent: "TRANSFORM_MODE", target: "TRANSFORM_MODE" }, { parent: "GC_MODES", target: "GC_MODE" }, { parent: "WRAP_MODES", target: "WRAP_MODE" }, { parent: "SCALE_MODES", target: "SCALE_MODE" }, { parent: "PRECISION", target: "PRECISION_FRAGMENT" }], k = 0; k < j.length; k++) ! function(b) { var c = j[b]; Object.defineProperty(a[c.parent], "DEFAULT", { get: function() { return d("PIXI." + c.parent + ".DEFAULT has been deprecated, please use PIXI.settings." + c.target), a.settings[c.target] }, set: function(b) { d("PIXI." + c.parent + ".DEFAULT has been deprecated, please use PIXI.settings." + c.target), a.settings[c.target] = b } }) }(k); Object.defineProperties(a.settings, { PRECISION: { get: function() { return d("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"), a.settings.PRECISION_FRAGMENT }, set: function(b) { d("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"), a.settings.PRECISION_FRAGMENT = b } } }), e.AnimatedSprite && Object.defineProperties(e, { MovieClip: { get: function() { return d("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."), e.AnimatedSprite } } }), e && Object.defineProperties(e, { TextureTransform: { get: function() { return d("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."), a.TextureMatrix } } }), a.DisplayObject.prototype.generateTexture = function(a, b, c) { return d("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"), a.generateTexture(this, b, c) }, a.Graphics.prototype.generateTexture = function(a, b) { return d("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"), this.generateCanvasTexture(a, b) }, a.GroupD8.isSwapWidthHeight = function(b) { return d("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"), a.GroupD8.isVertical(b) }, a.RenderTexture.prototype.render = function(a, b, c, e) { this.legacyRenderer.render(a, this, c, b, !e), d("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)") }, a.RenderTexture.prototype.getImage = function(a) { return d("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"), this.legacyRenderer.extract.image(a) }, a.RenderTexture.prototype.getBase64 = function(a) { return d("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"), this.legacyRenderer.extract.base64(a) }, a.RenderTexture.prototype.getCanvas = function(a) { return d("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"), this.legacyRenderer.extract.canvas(a) }, a.RenderTexture.prototype.getPixels = function(a) { return d("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"), this.legacyRenderer.pixels(a) }, a.Sprite.prototype.setTexture = function(a) { this.texture = a, d("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;") }, e.BitmapText && (e.BitmapText.prototype.setText = function(a) { this.text = a, d("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';") }), a.Text.prototype.setText = function(a) { this.text = a, d("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';") }, a.Text.calculateFontProperties = function(b) { return d("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"), a.TextMetrics.measureFont(b) }, Object.defineProperties(a.Text, { fontPropertiesCache: { get: function() { return d("Text.fontPropertiesCache is deprecated"), a.TextMetrics._fonts } }, fontPropertiesCanvas: { get: function() { return d("Text.fontPropertiesCanvas is deprecated"), a.TextMetrics._canvas } }, fontPropertiesContext: { get: function() { return d("Text.fontPropertiesContext is deprecated"), a.TextMetrics._context } } }), a.Text.prototype.setStyle = function(a) { this.style = a, d("setStyle is now deprecated, please use the style property, e.g : myText.style = style;") }, a.Text.prototype.determineFontProperties = function(b) { return d("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"), a.TextMetrics.measureFont(b) }, a.Text.getFontStyle = function(b) { return d("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"), b = b || {}, b instanceof a.TextStyle || (b = new a.TextStyle(b)), b.toFontString() }, Object.defineProperties(a.TextStyle.prototype, { font: { get: function() { d("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on"); var a = "number" == typeof this._fontSize ? this._fontSize + "px" : this._fontSize; return this._fontStyle + " " + this._fontVariant + " " + this._fontWeight + " " + a + " " + this._fontFamily }, set: function(a) { d("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"), a.indexOf("italic") > 1 ? this._fontStyle = "italic" : a.indexOf("oblique") > -1 ? this._fontStyle = "oblique" : this._fontStyle = "normal", a.indexOf("small-caps") > -1 ? this._fontVariant = "small-caps" : this._fontVariant = "normal"; var b = a.split(" "), c = -1; this._fontSize = 26; for (var e = 0; e < b.length; ++e) if (b[e].match(/(px|pt|em|%)/)) { c = e, this._fontSize = b[e]; break } this._fontWeight = "normal"; for (var f = 0; f < c; ++f) if (b[f].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)) { this._fontWeight = b[f]; break } if (c > -1 && c < b.length - 1) { this._fontFamily = ""; for (var g = c + 1; g < b.length; ++g) this._fontFamily += b[g] + " "; this._fontFamily = this._fontFamily.slice(0, -1) } else this._fontFamily = "Arial"; this.styleID++ } } }), a.Texture.prototype.setFrame = function(a) { this.frame = a, d("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;") }, a.Texture.addTextureToCache = function(b, c) { a.Texture.addToCache(b, c), d("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.") }, a.Texture.removeTextureFromCache = function(b) { return d("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"), a.BaseTexture.removeFromCache(b), a.Texture.removeFromCache(b) }, Object.defineProperties(f, { AbstractFilter: { get: function() { return d("AstractFilter has been renamed to Filter, please use PIXI.Filter"), a.AbstractFilter } }, SpriteMaskFilter: { get: function() { return d("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."), a.SpriteMaskFilter } }, VoidFilter: { get: function() { return d("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"), f.AlphaFilter } } }), a.utils.uuid = function() { return d("utils.uuid() is deprecated, please use utils.uid() from now on."), a.utils.uid() }, a.utils.canUseNewCanvasBlendModes = function() { return d("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"), a.CanvasTinter.canUseMultiply }; var l = !0; if (Object.defineProperty(a.utils, "_saidHello", { set: function(a) { a && (d("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"), this.skipHello()), l = a }, get: function() { return l } }), g.BasePrepare && (g.BasePrepare.prototype.register = function(a, b) { return d("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"), a && this.registerFindHook(a), b && this.registerUploadHook(b), this }), g.canvas && Object.defineProperty(g.canvas, "UPLOADS_PER_FRAME", { set: function() { d("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer") }, get: function() { return d("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"), NaN } }), g.webgl && Object.defineProperty(g.webgl, "UPLOADS_PER_FRAME", { set: function() { d("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer") }, get: function() { return d("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"), NaN } }), h.Loader) { var m = h.Resource, n = h.Loader; Object.defineProperties(m.prototype, { isJson: { get: function() { return d("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."), this.type === m.TYPE.JSON } }, isXml: { get: function() { return d("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."), this.type === m.TYPE.XML } }, isImage: { get: function() { return d("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."), this.type === m.TYPE.IMAGE } }, isAudio: { get: function() { return d("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."), this.type === m.TYPE.AUDIO } }, isVideo: { get: function() { return d("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."), this.type === m.TYPE.VIDEO } } }), Object.defineProperties(n.prototype, { before: { get: function() { return d("The before() method is deprecated, please use pre()."), this.pre } }, after: { get: function() { return d("The after() method is deprecated, please use use()."), this.use } } }) } i.interactiveTarget && Object.defineProperty(i.interactiveTarget, "defaultCursor", { set: function(a) { d("Property defaultCursor has been replaced with 'cursor'. "), this.cursor = a }, get: function() { return d("Property defaultCursor has been replaced with 'cursor'. "), this.cursor } }), i.InteractionManager && (Object.defineProperty(i.InteractionManager, "defaultCursorStyle", { set: function(a) { d("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "), this.cursorStyles.default = a }, get: function() { return d("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "), this.cursorStyles.default } }), Object.defineProperty(i.InteractionManager, "currentCursorStyle", { set: function(a) { d("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."), this.currentCursorMode = a }, get: function() { return d("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."), this.currentCursorMode } })) } c.__esModule = !0, c.default = e; var f = {} }, {}], 132: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../../core"), f = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(e), g = new f.Rectangle, h = function() { function a(b) { d(this, a), this.renderer = b, b.extract = this } return a.prototype.image = function(a) { var b = new Image; return b.src = this.base64(a), b }, a.prototype.base64 = function(a) { return this.canvas(a).toDataURL() }, a.prototype.canvas = function(a) { var b = this.renderer, c = void 0, d = void 0, e = void 0, h = void 0; a && (h = a instanceof f.RenderTexture ? a : b.generateTexture(a)), h ? (c = h.baseTexture._canvasRenderTarget.context, d = h.baseTexture._canvasRenderTarget.resolution, e = h.frame) : (c = b.rootContext, e = g, e.width = this.renderer.width, e.height = this.renderer.height); var i = e.width * d, j = e.height * d, k = new f.CanvasRenderTarget(i, j, 1), l = c.getImageData(e.x * d, e.y * d, i, j); return k.context.putImageData(l, 0, 0), k.canvas }, a.prototype.pixels = function(a) { var b = this.renderer, c = void 0, d = void 0, e = void 0, h = void 0; return a && (h = a instanceof f.RenderTexture ? a : b.generateTexture(a)), h ? (c = h.baseTexture._canvasRenderTarget.context, d = h.baseTexture._canvasRenderTarget.resolution, e = h.frame) : (c = b.rootContext, e = g, e.width = b.width, e.height = b.height), c.getImageData(0, 0, e.width * d, e.height * d).data }, a.prototype.destroy = function() { this.renderer.extract = null, this.renderer = null }, a }(); c.default = h, f.CanvasRenderer.registerPlugin("extract", h) }, { "../../core": 65 }], 133: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0; var e = a("./webgl/WebGLExtract"); Object.defineProperty(c, "webgl", { enumerable: !0, get: function() { return d(e).default } }); var f = a("./canvas/CanvasExtract"); Object.defineProperty(c, "canvas", { enumerable: !0, get: function() { return d(f).default } }) }, { "./canvas/CanvasExtract": 132, "./webgl/WebGLExtract": 134 }], 134: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../../core"), f = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(e), g = new f.Rectangle, h = function() { function a(b) { d(this, a), this.renderer = b, b.extract = this } return a.prototype.image = function(a) { var b = new Image; return b.src = this.base64(a), b }, a.prototype.base64 = function(a) { return this.canvas(a).toDataURL() }, a.prototype.canvas = function(a) { var b = this.renderer, c = void 0, d = void 0, e = void 0, h = !1, i = void 0, j = !1; a && (a instanceof f.RenderTexture ? i = a : (i = this.renderer.generateTexture(a), j = !0)), i ? (c = i.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID], d = c.resolution, e = i.frame, h = !1) : (c = this.renderer.rootRenderTarget, d = c.resolution, h = !0, e = g, e.width = c.size.width, e.height = c.size.height); var k = e.width * d, l = e.height * d, m = new f.CanvasRenderTarget(k, l, 1); if (c) { b.bindRenderTarget(c); var n = new Uint8Array(4 * k * l), o = b.gl; o.readPixels(e.x * d, e.y * d, k, l, o.RGBA, o.UNSIGNED_BYTE, n); var p = m.context.getImageData(0, 0, k, l); p.data.set(n), m.context.putImageData(p, 0, 0), h && (m.context.scale(1, -1), m.context.drawImage(m.canvas, 0, -l)) } return j && i.destroy(!0), m.canvas }, a.prototype.pixels = function(a) { var b = this.renderer, c = void 0, d = void 0, e = void 0, h = void 0, i = !1; a && (a instanceof f.RenderTexture ? h = a : (h = this.renderer.generateTexture(a), i = !0)), h ? (c = h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID], d = c.resolution, e = h.frame) : (c = this.renderer.rootRenderTarget, d = c.resolution, e = g, e.width = c.size.width, e.height = c.size.height); var j = e.width * d, k = e.height * d, l = new Uint8Array(4 * j * k); if (c) { b.bindRenderTarget(c); var m = b.gl; m.readPixels(e.x * d, e.y * d, j, k, m.RGBA, m.UNSIGNED_BYTE, l) } return i && h.destroy(!0), l }, a.prototype.destroy = function() { this.renderer.extract = null, this.renderer = null }, a }(); c.default = h, f.WebGLRenderer.registerPlugin("extract", h) }, { "../../core": 65 }], 135: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = function(a) { function b(c, f) { d(this, b); var g = e(this, a.call(this, c[0] instanceof i.Texture ? c[0] : c[0].texture)); return g._textures = null, g._durations = null, g.textures = c, g._autoUpdate = !1 !== f, g.animationSpeed = 1, g.loop = !0, g.onComplete = null, g.onFrameChange = null, g.onLoop = null, g._currentTime = 0, g.playing = !1, g } return f(b, a), b.prototype.stop = function() { this.playing && (this.playing = !1, this._autoUpdate && i.ticker.shared.remove(this.update, this)) }, b.prototype.play = function() { this.playing || (this.playing = !0, this._autoUpdate && i.ticker.shared.add(this.update, this, i.UPDATE_PRIORITY.HIGH)) }, b.prototype.gotoAndStop = function(a) { this.stop(); var b = this.currentFrame; this._currentTime = a, b !== this.currentFrame && this.updateTexture() }, b.prototype.gotoAndPlay = function(a) { var b = this.currentFrame; this._currentTime = a, b !== this.currentFrame && this.updateTexture(), this.play() }, b.prototype.update = function(a) { var b = this.animationSpeed * a, c = this.currentFrame; if (null !== this._durations) { var d = this._currentTime % 1 * this._durations[this.currentFrame]; for (d += b / 60 * 1e3; d < 0;) this._currentTime--, d += this._durations[this.currentFrame]; var e = Math.sign(this.animationSpeed * a); for (this._currentTime = Math.floor(this._currentTime); d >= this._durations[this.currentFrame];) d -= this._durations[this.currentFrame] * e, this._currentTime += e; this._currentTime += d / this._durations[this.currentFrame] } else this._currentTime += b; this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0), this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1), this.onComplete && this.onComplete()) : c !== this.currentFrame && (this.loop && this.onLoop && (this.animationSpeed > 0 && this.currentFrame < c ? this.onLoop() : this.animationSpeed < 0 && this.currentFrame > c && this.onLoop()), this.updateTexture()) }, b.prototype.updateTexture = function() { this._texture = this._textures[this.currentFrame], this._textureID = -1, this.cachedTint = 16777215, this.onFrameChange && this.onFrameChange(this.currentFrame) }, b.prototype.destroy = function(b) { this.stop(), a.prototype.destroy.call(this, b) }, b.fromFrames = function(a) { for (var c = [], d = 0; d < a.length; ++d) c.push(i.Texture.fromFrame(a[d])); return new b(c) }, b.fromImages = function(a) { for (var c = [], d = 0; d < a.length; ++d) c.push(i.Texture.fromImage(a[d])); return new b(c) }, g(b, [{ key: "totalFrames", get: function() { return this._textures.length } }, { key: "textures", get: function() { return this._textures }, set: function(a) { if (a[0] instanceof i.Texture) this._textures = a, this._durations = null; else { this._textures = [], this._durations = []; for (var b = 0; b < a.length; b++) this._textures.push(a[b].texture), this._durations.push(a[b].time) } this.gotoAndStop(0), this.updateTexture() } }, { key: "currentFrame", get: function() { var a = Math.floor(this._currentTime) % this._textures.length; return a < 0 && (a += this._textures.length), a } }]), b }(i.Sprite); c.default = j }, { "../core": 65 }], 136: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), i = a("../core"), j = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(i), k = a("../core/math/ObservablePoint"), l = d(k), m = a("../core/utils"), n = a("../core/settings"), o = d(n), p = function(a) { function b(c) { var d = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; e(this, b); var g = f(this, a.call(this)); return g._textWidth = 0, g._textHeight = 0, g._glyphs = [], g._font = { tint: void 0 !== d.tint ? d.tint : 16777215, align: d.align || "left", name: null, size: 0 }, g.font = d.font, g._text = c, g._maxWidth = 0, g._maxLineHeight = 0, g._letterSpacing = 0, g._anchor = new l.default(function() { g.dirty = !0 }, g, 0, 0), g.dirty = !1, g.updateText(), g } return g(b, a), b.prototype.updateText = function() { for (var a = b.fonts[this._font.name], c = this._font.size / a.size, d = new j.Point, e = [], f = [], g = this.text.replace(/(?:\r\n|\r)/g, "\n"), h = g.length, i = this._maxWidth * a.size / this._font.size, k = null, l = 0, m = 0, n = 0, o = -1, p = 0, q = 0, r = 0, s = 0; s < h; s++) { var t = g.charCodeAt(s), u = g.charAt(s); if (/(?:\s)/.test(u) && (o = s, p = l), "\r" !== u && "\n" !== u) { var v = a.chars[t]; v && (k && v.kerning[k] && (d.x += v.kerning[k]), e.push({ texture: v.texture, line: n, charCode: t, position: new j.Point(d.x + v.xOffset + this._letterSpacing / 2, d.y + v.yOffset) }), d.x += v.xAdvance + this._letterSpacing, l = d.x, r = Math.max(r, v.yOffset + v.texture.height), k = t, -1 !== o && i > 0 && d.x > i && (++q, j.utils.removeItems(e, 1 + o - q, 1 + s - o), s = o, o = -1, f.push(p), m = Math.max(m, p), n++, d.x = 0, d.y += a.lineHeight, k = null)) } else f.push(l), m = Math.max(m, l), ++n, ++q, d.x = 0, d.y += a.lineHeight, k = null } var w = g.charAt(g.length - 1); "\r" !== w && "\n" !== w && (/(?:\s)/.test(w) && (l = p), f.push(l), m = Math.max(m, l)); for (var x = [], y = 0; y <= n; y++) { var z = 0; "right" === this._font.align ? z = m - f[y] : "center" === this._font.align && (z = (m - f[y]) / 2), x.push(z) } for (var A = e.length, B = this.tint, C = 0; C < A; C++) { var D = this._glyphs[C]; D ? D.texture = e[C].texture : (D = new j.Sprite(e[C].texture), this._glyphs.push(D)), D.position.x = (e[C].position.x + x[e[C].line]) * c, D.position.y = e[C].position.y * c, D.scale.x = D.scale.y = c, D.tint = B, D.parent || this.addChild(D) } for (var E = A; E < this._glyphs.length; ++E) this.removeChild(this._glyphs[E]); if (this._textWidth = m * c, this._textHeight = (d.y + a.lineHeight) * c, 0 !== this.anchor.x || 0 !== this.anchor.y) for (var F = 0; F < A; F++) this._glyphs[F].x -= this._textWidth * this.anchor.x, this._glyphs[F].y -= this._textHeight * this.anchor.y; this._maxLineHeight = r * c }, b.prototype.updateTransform = function() { this.validate(), this.containerUpdateTransform() }, b.prototype.getLocalBounds = function() { return this.validate(), a.prototype.getLocalBounds.call(this) }, b.prototype.validate = function() { this.dirty && (this.updateText(), this.dirty = !1) }, b.registerFont = function(a, c) { var d = {}, e = a.getElementsByTagName("info")[0], f = a.getElementsByTagName("common")[0], g = a.getElementsByTagName("page"), h = (0, m.getResolutionOfUrl)(g[0].getAttribute("file"), o.default.RESOLUTION), i = {}; d.font = e.getAttribute("face"), d.size = parseInt(e.getAttribute("size"), 10), d.lineHeight = parseInt(f.getAttribute("lineHeight"), 10) / h, d.chars = {}, c instanceof j.Texture && (c = [c]); for (var k = 0; k < g.length; k++) { var l = g[k].getAttribute("id"), n = g[k].getAttribute("file"); i[l] = c instanceof Array ? c[k] : c[n] } for (var p = a.getElementsByTagName("char"), q = 0; q < p.length; q++) { var r = p[q], s = parseInt(r.getAttribute("id"), 10), t = r.getAttribute("page") || 0, u = new j.Rectangle(parseInt(r.getAttribute("x"), 10) / h + i[t].frame.x / h, parseInt(r.getAttribute("y"), 10) / h + i[t].frame.y / h, parseInt(r.getAttribute("width"), 10) / h, parseInt(r.getAttribute("height"), 10) / h); d.chars[s] = { xOffset: parseInt(r.getAttribute("xoffset"), 10) / h, yOffset: parseInt(r.getAttribute("yoffset"), 10) / h, xAdvance: parseInt(r.getAttribute("xadvance"), 10) / h, kerning: {}, texture: new j.Texture(i[t].baseTexture, u), page: t } } for (var v = a.getElementsByTagName("kerning"), w = 0; w < v.length; w++) { var x = v[w], y = parseInt(x.getAttribute("first"), 10) / h, z = parseInt(x.getAttribute("second"), 10) / h, A = parseInt(x.getAttribute("amount"), 10) / h; d.chars[z] && (d.chars[z].kerning[y] = A) } return b.fonts[d.font] = d, d }, h(b, [{ key: "tint", get: function() { return this._font.tint }, set: function(a) { this._font.tint = "number" == typeof a && a >= 0 ? a : 16777215, this.dirty = !0 } }, { key: "align", get: function() { return this._font.align }, set: function(a) { this._font.align = a || "left", this.dirty = !0 } }, { key: "anchor", get: function() { return this._anchor }, set: function(a) { "number" == typeof a ? this._anchor.set(a) : this._anchor.copy(a) } }, { key: "font", get: function() { return this._font }, set: function(a) { a && ("string" == typeof a ? (a = a.split(" "), this._font.name = 1 === a.length ? a[0] : a.slice(1).join(" "), this._font.size = a.length >= 2 ? parseInt(a[0], 10) : b.fonts[this._font.name].size) : (this._font.name = a.name, this._font.size = "number" == typeof a.size ? a.size : parseInt(a.size, 10)), this.dirty = !0) } }, { key: "text", get: function() { return this._text }, set: function(a) { a = a.toString() || " ", this._text !== a && (this._text = a, this.dirty = !0) } }, { key: "maxWidth", get: function() { return this._maxWidth }, set: function(a) { this._maxWidth !== a && (this._maxWidth = a, this.dirty = !0) } }, { key: "maxLineHeight", get: function() { return this.validate(), this._maxLineHeight } }, { key: "textWidth", get: function() { return this.validate(), this._textWidth } }, { key: "letterSpacing", get: function() { return this._letterSpacing }, set: function(a) { this._letterSpacing !== a && (this._letterSpacing = a, this.dirty = !0) } }, { key: "textHeight", get: function() { return this.validate(), this._textHeight } }]), b }(j.Container); c.default = p, p.fonts = {} }, { "../core": 65, "../core/math/ObservablePoint": 68, "../core/settings": 101, "../core/utils": 125 }], 137: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = a("../core/sprites/canvas/CanvasTinter"), k = function(a) { return a && a.__esModule ? a : { default: a } }(j), l = new i.Point, m = function(a) { function b(c) { var f = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 100, g = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 100; d(this, b); var h = e(this, a.call(this, c)); return h.tileTransform = new i.TransformStatic, h._width = f, h._height = g, h._canvasPattern = null, h.uvTransform = c.transform || new i.TextureMatrix(c), h.pluginName = "tilingSprite", h.uvRespectAnchor = !1, h } return f(b, a), b.prototype._onTextureUpdate = function() { this.uvTransform && (this.uvTransform.texture = this._texture), this.cachedTint = 16777215 }, b.prototype._renderWebGL = function(a) { var b = this._texture; b && b.valid && (this.tileTransform.updateLocalTransform(), this.uvTransform.update(), a.setObjectRenderer(a.plugins[this.pluginName]), a.plugins[this.pluginName].render(this)) }, b.prototype._renderCanvas = function(a) { var b = this._texture; if (b.baseTexture.hasLoaded) { var c = a.context, d = this.worldTransform, e = a.resolution, f = b.baseTexture, g = f.resolution, h = this.tilePosition.x / this.tileScale.x % b._frame.width * g, j = this.tilePosition.y / this.tileScale.y % b._frame.height * g; if (this._textureID !== this._texture._updateID || this.cachedTint !== this.tint) { this._textureID = this._texture._updateID; var l = new i.CanvasRenderTarget(b._frame.width, b._frame.height, g); 16777215 !== this.tint ? (this.tintedTexture = k.default.getTintedTexture(this, this.tint), l.context.drawImage(this.tintedTexture, 0, 0)) : l.context.drawImage(f.source, -b._frame.x * g, -b._frame.y * g), this.cachedTint = this.tint, this._canvasPattern = l.context.createPattern(l.canvas, "repeat") } c.globalAlpha = this.worldAlpha, c.setTransform(d.a * e, d.b * e, d.c * e, d.d * e, d.tx * e, d.ty * e), a.setBlendMode(this.blendMode), c.fillStyle = this._canvasPattern, c.scale(this.tileScale.x / g, this.tileScale.y / g); var m = this.anchor.x * -this._width, n = this.anchor.y * -this._height; this.uvRespectAnchor ? (c.translate(h, j), c.fillRect(-h + m, -j + n, this._width / this.tileScale.x * g, this._height / this.tileScale.y * g)) : (c.translate(h + m, j + n), c.fillRect(-h, -j, this._width / this.tileScale.x * g, this._height / this.tileScale.y * g)) } }, b.prototype._calculateBounds = function() { var a = this._width * -this._anchor._x, b = this._height * -this._anchor._y, c = this._width * (1 - this._anchor._x), d = this._height * (1 - this._anchor._y); this._bounds.addFrame(this.transform, a, b, c, d) }, b.prototype.getLocalBounds = function(b) { return 0 === this.children.length ? (this._bounds.minX = this._width * -this._anchor._x, this._bounds.minY = this._height * -this._anchor._y, this._bounds.maxX = this._width * (1 - this._anchor._x), this._bounds.maxY = this._height * (1 - this._anchor._y), b || (this._localBoundsRect || (this._localBoundsRect = new i.Rectangle), b = this._localBoundsRect), this._bounds.getRectangle(b)) : a.prototype.getLocalBounds.call(this, b) }, b.prototype.containsPoint = function(a) { this.worldTransform.applyInverse(a, l); var b = this._width, c = this._height, d = -b * this.anchor._x; if (l.x >= d && l.x < d + b) { var e = -c * this.anchor._y; if (l.y >= e && l.y < e + c) return !0 } return !1 }, b.prototype.destroy = function(b) { a.prototype.destroy.call(this, b), this.tileTransform = null, this.uvTransform = null }, b.from = function(a, c, d) { return new b(i.Texture.from(a), c, d) }, b.fromFrame = function(a, c, d) { var e = i.utils.TextureCache[a]; if (!e) throw new Error('The frameId "' + a + '" does not exist in the texture cache ' + this); return new b(e, c, d) }, b.fromImage = function(a, c, d, e, f) { return new b(i.Texture.fromImage(a, e, f), c, d) }, g(b, [{ key: "clampMargin", get: function() { return this.uvTransform.clampMargin }, set: function(a) { this.uvTransform.clampMargin = a, this.uvTransform.update(!0) } }, { key: "tileScale", get: function() { return this.tileTransform.scale }, set: function(a) { this.tileTransform.scale.copy(a) } }, { key: "tilePosition", get: function() { return this.tileTransform.position }, set: function(a) { this.tileTransform.position.copy(a) } }, { key: "width", get: function() { return this._width }, set: function(a) { this._width = a } }, { key: "height", get: function() { return this._height }, set: function(a) { this._height = a } }]), b }(i.Sprite); c.default = m }, { "../core": 65, "../core/sprites/canvas/CanvasTinter": 104 }], 138: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } var f = a("../core"), g = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(f), h = a("../core/textures/Texture"), i = d(h), j = a("../core/textures/BaseTexture"), k = d(j), l = a("../core/utils"), m = g.DisplayObject, n = new g.Matrix; m.prototype._cacheAsBitmap = !1, m.prototype._cacheData = !1; var o = function a() { e(this, a), this.textureCacheId = null, this.originalRenderWebGL = null, this.originalRenderCanvas = null, this.originalCalculateBounds = null, this.originalGetLocalBounds = null, this.originalUpdateTransform = null, this.originalHitTest = null, this.originalDestroy = null, this.originalMask = null, this.originalFilterArea = null, this.sprite = null }; Object.defineProperties(m.prototype, { cacheAsBitmap: { get: function() { return this._cacheAsBitmap }, set: function(a) { if (this._cacheAsBitmap !== a) { this._cacheAsBitmap = a; var b = void 0; a ? (this._cacheData || (this._cacheData = new o), b = this._cacheData, b.originalRenderWebGL = this.renderWebGL, b.originalRenderCanvas = this.renderCanvas, b.originalUpdateTransform = this.updateTransform, b.originalCalculateBounds = this._calculateBounds, b.originalGetLocalBounds = this.getLocalBounds, b.originalDestroy = this.destroy, b.originalContainsPoint = this.containsPoint, b.originalMask = this._mask, b.originalFilterArea = this.filterArea, this.renderWebGL = this._renderCachedWebGL, this.renderCanvas = this._renderCachedCanvas, this.destroy = this._cacheAsBitmapDestroy) : (b = this._cacheData, b.sprite && this._destroyCachedDisplayObject(), this.renderWebGL = b.originalRenderWebGL, this.renderCanvas = b.originalRenderCanvas, this._calculateBounds = b.originalCalculateBounds, this.getLocalBounds = b.originalGetLocalBounds, this.destroy = b.originalDestroy, this.updateTransform = b.originalUpdateTransform, this.containsPoint = b.originalContainsPoint, this._mask = b.originalMask, this.filterArea = b.originalFilterArea) } } } }), m.prototype._renderCachedWebGL = function(a) { !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(a), this._cacheData.sprite._transformID = -1, this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._renderWebGL(a)) }, m.prototype._initCachedDisplayObject = function(a) { if (!this._cacheData || !this._cacheData.sprite) { var b = this.alpha; this.alpha = 1, a.currentRenderer.flush(); var c = this.getLocalBounds().clone(); if (this._filters) { var d = this._filters[0].padding; c.pad(d) } var e = a._activeRenderTarget, f = a.filterManager.filterStack, h = g.RenderTexture.create(0 | c.width, 0 | c.height), j = "cacheAsBitmap_" + (0, l.uid)(); this._cacheData.textureCacheId = j, k.default.addToCache(h.baseTexture, j), i.default.addToCache(h, j); var m = n; m.tx = -c.x, m.ty = -c.y, this.transform.worldTransform.identity(), this.renderWebGL = this._cacheData.originalRenderWebGL, a.render(this, h, !0, m, !0), a.bindRenderTarget(e), a.filterManager.filterStack = f, this.renderWebGL = this._renderCachedWebGL, this.updateTransform = this.displayObjectUpdateTransform, this._mask = null, this.filterArea = null; var o = new g.Sprite(h); o.transform.worldTransform = this.transform.worldTransform, o.anchor.x = -c.x / c.width, o.anchor.y = -c.y / c.height, o.alpha = b, o._bounds = this._bounds, this._calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._cacheData.sprite = o, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.parent = a._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.containsPoint = o.containsPoint.bind(o) } }, m.prototype._renderCachedCanvas = function(a) { !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(a), this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite.renderCanvas(a)) }, m.prototype._initCachedDisplayObjectCanvas = function(a) { if (!this._cacheData || !this._cacheData.sprite) { var b = this.getLocalBounds(), c = this.alpha; this.alpha = 1; var d = a.context, e = g.RenderTexture.create(0 | b.width, 0 | b.height), f = "cacheAsBitmap_" + (0, l.uid)(); this._cacheData.textureCacheId = f, k.default.addToCache(e.baseTexture, f), i.default.addToCache(e, f); var h = n; this.transform.localTransform.copy(h), h.invert(), h.tx -= b.x, h.ty -= b.y, this.renderCanvas = this._cacheData.originalRenderCanvas, a.render(this, e, !0, h, !1), a.context = d, this.renderCanvas = this._renderCachedCanvas, this._calculateBounds = this._calculateCachedBounds, this._mask = null, this.filterArea = null; var j = new g.Sprite(e); j.transform.worldTransform = this.transform.worldTransform, j.anchor.x = -b.x / b.width, j.anchor.y = -b.y / b.height, j._bounds = this._bounds, j.alpha = c, this.parent ? this.updateTransform() : (this.parent = a._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.updateTransform = this.displayObjectUpdateTransform, this._cacheData.sprite = j, this.containsPoint = j.containsPoint.bind(j) } }, m.prototype._calculateCachedBounds = function() { this._cacheData.sprite._calculateBounds() }, m.prototype._getCachedLocalBounds = function() { return this._cacheData.sprite.getLocalBounds() }, m.prototype._destroyCachedDisplayObject = function() { this._cacheData.sprite._texture.destroy(!0), this._cacheData.sprite = null, k.default.removeFromCache(this._cacheData.textureCacheId), i.default.removeFromCache(this._cacheData.textureCacheId), this._cacheData.textureCacheId = null }, m.prototype._cacheAsBitmapDestroy = function(a) { this.cacheAsBitmap = !1, this.destroy(a) } }, { "../core": 65, "../core/textures/BaseTexture": 112, "../core/textures/Texture": 115, "../core/utils": 125 }], 139: [function(a, b, c) { "use strict"; var d = a("../core"), e = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(d); e.DisplayObject.prototype.name = null, e.Container.prototype.getChildByName = function(a) { for (var b = 0; b < this.children.length; b++) if (this.children[b].name === a) return this.children[b]; return null } }, { "../core": 65 }], 140: [function(a, b, c) { "use strict"; var d = a("../core"), e = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(d); e.DisplayObject.prototype.getGlobalPosition = function() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new e.Point, b = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return this.parent ? this.parent.toGlobal(this.position, a, b) : (a.x = this.position.x, a.y = this.position.y), a } }, { "../core": 65 }], 141: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0, c.BitmapText = c.TilingSpriteRenderer = c.TilingSprite = c.AnimatedSprite = void 0; var e = a("./AnimatedSprite"); Object.defineProperty(c, "AnimatedSprite", { enumerable: !0, get: function() { return d(e).default } }); var f = a("./TilingSprite"); Object.defineProperty(c, "TilingSprite", { enumerable: !0, get: function() { return d(f).default } }); var g = a("./webgl/TilingSpriteRenderer"); Object.defineProperty(c, "TilingSpriteRenderer", { enumerable: !0, get: function() { return d(g).default } }); var h = a("./BitmapText"); Object.defineProperty(c, "BitmapText", { enumerable: !0, get: function() { return d(h).default } }), a("./cacheAsBitmap"), a("./getChildByName"), a("./getGlobalPosition") }, { "./AnimatedSprite": 135, "./BitmapText": 136, "./TilingSprite": 137, "./cacheAsBitmap": 138, "./getChildByName": 139, "./getGlobalPosition": 140, "./webgl/TilingSpriteRenderer": 142 }], 142: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = a("../../core"), h = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(g), i = a("../../core/const"), j = (a("path"), new h.Matrix), k = function(a) { function b(c) { d(this, b); var f = e(this, a.call(this, c)); return f.shader = null, f.simpleShader = null, f.quad = null, f } return f(b, a), b.prototype.onContextChange = function() { var a = this.renderer.gl; this.shader = new h.Shader(a, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n coord = (uMapCoord * vec3(coord, 1.0)).xy;\n coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n vec4 sample = texture2D(uSampler, coord);\n gl_FragColor = sample * uColor;\n}\n"), this.simpleShader = new h.Shader(a, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n vec4 sample = texture2D(uSampler, vTextureCoord);\n gl_FragColor = sample * uColor;\n}\n"), this.renderer.bindVao(null), this.quad = new h.Quad(a, this.renderer.state.attribState), this.quad.initVao(this.shader) }, b.prototype.render = function(a) { var b = this.renderer, c = this.quad; b.bindVao(c.vao); var d = c.vertices; d[0] = d[6] = a._width * -a.anchor.x, d[1] = d[3] = a._height * -a.anchor.y, d[2] = d[4] = a._width * (1 - a.anchor.x), d[5] = d[7] = a._height * (1 - a.anchor.y), a.uvRespectAnchor && (d = c.uvs, d[0] = d[6] = -a.anchor.x, d[1] = d[3] = -a.anchor.y, d[2] = d[4] = 1 - a.anchor.x, d[5] = d[7] = 1 - a.anchor.y), c.upload(); var e = a._texture, f = e.baseTexture, g = a.tileTransform.localTransform, k = a.uvTransform, l = f.isPowerOfTwo && e.frame.width === f.width && e.frame.height === f.height; l && (f._glTextures[b.CONTEXT_UID] ? l = f.wrapMode !== i.WRAP_MODES.CLAMP : f.wrapMode === i.WRAP_MODES.CLAMP && (f.wrapMode = i.WRAP_MODES.REPEAT)); var m = l ? this.simpleShader : this.shader; b.bindShader(m); var n = e.width, o = e.height, p = a._width, q = a._height; j.set(g.a * n / p, g.b * n / q, g.c * o / p, g.d * o / q, g.tx / p, g.ty / q), j.invert(), l ? j.prepend(k.mapCoord) : (m.uniforms.uMapCoord = k.mapCoord.toArray(!0), m.uniforms.uClampFrame = k.uClampFrame, m.uniforms.uClampOffset = k.uClampOffset), m.uniforms.uTransform = j.toArray(!0), m.uniforms.uColor = h.utils.premultiplyTintToRgba(a.tint, a.worldAlpha, m.uniforms.uColor, f.premultipliedAlpha), m.uniforms.translationMatrix = a.transform.worldTransform.toArray(!0), m.uniforms.uSampler = b.bindTexture(e), b.setBlendMode(h.utils.correctBlendMode(a.blendMode, f.premultipliedAlpha)), c.vao.draw(this.renderer.gl.TRIANGLES, 6, 0) }, b }(h.ObjectRenderer); c.default = k, h.WebGLRenderer.registerPlugin("tilingSprite", k) }, { "../../core": 65, "../../core/const": 46, path: 8 }], 143: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = (a("path"), function(a) { function b() { var c = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1; d(this, b); var f = e(this, a.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n vTextureCoord = aTextureCoord;\n}", "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n")); return f.alpha = c, f.glShaderKey = "alpha", f } return f(b, a), g(b, [{ key: "alpha", get: function() { return this.uniforms.uAlpha }, set: function(a) { this.uniforms.uAlpha = a } }]), b }(i.Filter)); c.default = j }, { "../../core": 65, path: 8 }], 144: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), i = a("../../core"), j = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(i), k = a("./BlurXFilter"), l = d(k), m = a("./BlurYFilter"), n = d(m), o = function(a) { function b(c, d, g, h) { e(this, b); var i = f(this, a.call(this)); return i.blurXFilter = new l.default(c, d, g, h), i.blurYFilter = new n.default(c, d, g, h), i.padding = 0, i.resolution = g || j.settings.RESOLUTION, i.quality = d || 4, i.blur = c || 8, i } return g(b, a), b.prototype.apply = function(a, b, c) { var d = a.getRenderTarget(!0); this.blurXFilter.apply(a, b, d, !0), this.blurYFilter.apply(a, d, c, !1), a.returnRenderTarget(d) }, h(b, [{ key: "blur", get: function() { return this.blurXFilter.blur }, set: function(a) { this.blurXFilter.blur = this.blurYFilter.blur = a, this.padding = 2 * Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) } }, { key: "quality", get: function() { return this.blurXFilter.quality }, set: function(a) { this.blurXFilter.quality = this.blurYFilter.quality = a } }, { key: "blurX", get: function() { return this.blurXFilter.blur }, set: function(a) { this.blurXFilter.blur = a, this.padding = 2 * Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) } }, { key: "blurY", get: function() { return this.blurYFilter.blur }, set: function(a) { this.blurYFilter.blur = a, this.padding = 2 * Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) } }, { key: "blendMode", get: function() { return this.blurYFilter._blendMode }, set: function(a) { this.blurYFilter._blendMode = a } }]), b }(j.Filter); c.default = o }, { "../../core": 65, "./BlurXFilter": 145, "./BlurYFilter": 146 }], 145: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), i = a("../../core"), j = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(i), k = a("./generateBlurVertSource"), l = d(k), m = a("./generateBlurFragSource"), n = d(m), o = a("./getMaxBlurKernelSize"), p = d(o), q = function(a) { function b(c, d, g, h) { e(this, b), h = h || 5; var i = (0, l.default)(h, !0), k = (0, n.default)(h), m = f(this, a.call(this, i, k)); return m.resolution = g || j.settings.RESOLUTION, m._quality = 0, m.quality = d || 4, m.strength = c || 8, m.firstRun = !0, m } return g(b, a), b.prototype.apply = function(a, b, c, d) { if (this.firstRun) { var e = a.renderer.gl, f = (0, p.default)(e); this.vertexSrc = (0, l.default)(f, !0), this.fragmentSrc = (0, n.default)(f), this.firstRun = !1 } if (this.uniforms.strength = 1 / c.size.width * (c.size.width / b.size.width), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, 1 === this.passes) a.applyFilter(this, b, c, d); else { for (var g = a.getRenderTarget(!0), h = b, i = g, j = 0; j < this.passes - 1; j++) { a.applyFilter(this, h, i, !0); var k = i; i = h, h = k } a.applyFilter(this, h, c, d), a.returnRenderTarget(g) } }, h(b, [{ key: "blur", get: function() { return this.strength }, set: function(a) { this.padding = 2 * Math.abs(a), this.strength = a } }, { key: "quality", get: function() { return this._quality }, set: function(a) { this._quality = a, this.passes = a } }]), b }(j.Filter); c.default = q }, { "../../core": 65, "./generateBlurFragSource": 147, "./generateBlurVertSource": 148, "./getMaxBlurKernelSize": 149 }], 146: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), i = a("../../core"), j = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(i), k = a("./generateBlurVertSource"), l = d(k), m = a("./generateBlurFragSource"), n = d(m), o = a("./getMaxBlurKernelSize"), p = d(o), q = function(a) { function b(c, d, g, h) { e(this, b), h = h || 5; var i = (0, l.default)(h, !1), k = (0, n.default)(h), m = f(this, a.call(this, i, k)); return m.resolution = g || j.settings.RESOLUTION, m._quality = 0, m.quality = d || 4, m.strength = c || 8, m.firstRun = !0, m } return g(b, a), b.prototype.apply = function(a, b, c, d) { if (this.firstRun) { var e = a.renderer.gl, f = (0, p.default)(e); this.vertexSrc = (0, l.default)(f, !1), this.fragmentSrc = (0, n.default)(f), this.firstRun = !1 } if (this.uniforms.strength = 1 / c.size.height * (c.size.height / b.size.height), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, 1 === this.passes) a.applyFilter(this, b, c, d); else { for (var g = a.getRenderTarget(!0), h = b, i = g, j = 0; j < this.passes - 1; j++) { a.applyFilter(this, h, i, !0); var k = i; i = h, h = k } a.applyFilter(this, h, c, d), a.returnRenderTarget(g) } }, h(b, [{ key: "blur", get: function() { return this.strength }, set: function(a) { this.padding = 2 * Math.abs(a), this.strength = a } }, { key: "quality", get: function() { return this._quality }, set: function(a) { this._quality = a, this.passes = a } }]), b }(j.Filter); c.default = q }, { "../../core": 65, "./generateBlurFragSource": 147, "./generateBlurVertSource": 148, "./getMaxBlurKernelSize": 149 }], 147: [function(a, b, c) { "use strict"; function d(a) { for (var b = e[a], c = b.length, d = f, g = "", h = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;", i = void 0, j = 0; j < a; j++) { var k = h.replace("%index%", j); i = j, j >= c && (i = a - j - 1), k = k.replace("%value%", b[i]), g += k, g += "\n" } return d = d.replace("%blur%", g), d = d.replace("%size%", a) } c.__esModule = !0, c.default = d; var e = { 5: [.153388, .221461, .250301], 7: [.071303, .131514, .189879, .214607], 9: [.028532, .067234, .124009, .179044, .20236], 11: [.0093, .028002, .065984, .121703, .175713, .198596], 13: [.002406, .009255, .027867, .065666, .121117, .174868, .197641], 15: [489e-6, .002403, .009246, .02784, .065602, .120999, .174697, .197448] }, f = ["varying vec2 vBlurTexCoords[%size%];", "uniform sampler2D uSampler;", "void main(void)", "{", " gl_FragColor = vec4(0.0);", " %blur%", "}"].join("\n") }, {}], 148: [function(a, b, c) { "use strict"; function d(a, b) { var c = Math.ceil(a / 2), d = e, f = "", g = void 0; g = b ? "vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);" : "vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);"; for (var h = 0; h < a; h++) { var i = g.replace("%index%", h); i = i.replace("%sampleIndex%", h - (c - 1) + ".0"), f += i, f += "\n" } return d = d.replace("%blur%", f), d = d.replace("%size%", a) } c.__esModule = !0, c.default = d; var e = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform float strength;", "uniform mat3 projectionMatrix;", "varying vec2 vBlurTexCoords[%size%];", "void main(void)", "{", "gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);", "%blur%", "}"].join("\n") }, {}], 149: [function(a, b, c) { "use strict"; function d(a) { for (var b = a.getParameter(a.MAX_VARYING_VECTORS), c = 15; c > b;) c -= 2; return c } c.__esModule = !0, c.default = d }, {}], 150: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = (a("path"), function(a) { function b() { d(this, b); var c = e(this, a.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n vTextureCoord = aTextureCoord;\n}", "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n vec4 c = texture2D(uSampler, vTextureCoord);\n\n if (uAlpha == 0.0) {\n gl_FragColor = c;\n return;\n }\n\n // Un-premultiply alpha before applying the color matrix. See issue #3539.\n if (c.a > 0.0) {\n c.rgb /= c.a;\n }\n\n vec4 result;\n\n result.r = (m[0] * c.r);\n result.r += (m[1] * c.g);\n result.r += (m[2] * c.b);\n result.r += (m[3] * c.a);\n result.r += m[4];\n\n result.g = (m[5] * c.r);\n result.g += (m[6] * c.g);\n result.g += (m[7] * c.b);\n result.g += (m[8] * c.a);\n result.g += m[9];\n\n result.b = (m[10] * c.r);\n result.b += (m[11] * c.g);\n result.b += (m[12] * c.b);\n result.b += (m[13] * c.a);\n result.b += m[14];\n\n result.a = (m[15] * c.r);\n result.a += (m[16] * c.g);\n result.a += (m[17] * c.b);\n result.a += (m[18] * c.a);\n result.a += m[19];\n\n vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n // Premultiply alpha again.\n rgb *= result.a;\n\n gl_FragColor = vec4(rgb, result.a);\n}\n")); return c.uniforms.m = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], c.alpha = 1, c } return f(b, a), b.prototype._loadMatrix = function(a) { var b = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], c = a; b && (this._multiply(c, this.uniforms.m, a), c = this._colorMatrix(c)), this.uniforms.m = c }, b.prototype._multiply = function(a, b, c) { return a[0] = b[0] * c[0] + b[1] * c[5] + b[2] * c[10] + b[3] * c[15], a[1] = b[0] * c[1] + b[1] * c[6] + b[2] * c[11] + b[3] * c[16], a[2] = b[0] * c[2] + b[1] * c[7] + b[2] * c[12] + b[3] * c[17], a[3] = b[0] * c[3] + b[1] * c[8] + b[2] * c[13] + b[3] * c[18], a[4] = b[0] * c[4] + b[1] * c[9] + b[2] * c[14] + b[3] * c[19] + b[4], a[5] = b[5] * c[0] + b[6] * c[5] + b[7] * c[10] + b[8] * c[15], a[6] = b[5] * c[1] + b[6] * c[6] + b[7] * c[11] + b[8] * c[16], a[7] = b[5] * c[2] + b[6] * c[7] + b[7] * c[12] + b[8] * c[17], a[8] = b[5] * c[3] + b[6] * c[8] + b[7] * c[13] + b[8] * c[18], a[9] = b[5] * c[4] + b[6] * c[9] + b[7] * c[14] + b[8] * c[19] + b[9], a[10] = b[10] * c[0] + b[11] * c[5] + b[12] * c[10] + b[13] * c[15], a[11] = b[10] * c[1] + b[11] * c[6] + b[12] * c[11] + b[13] * c[16], a[12] = b[10] * c[2] + b[11] * c[7] + b[12] * c[12] + b[13] * c[17], a[13] = b[10] * c[3] + b[11] * c[8] + b[12] * c[13] + b[13] * c[18], a[14] = b[10] * c[4] + b[11] * c[9] + b[12] * c[14] + b[13] * c[19] + b[14], a[15] = b[15] * c[0] + b[16] * c[5] + b[17] * c[10] + b[18] * c[15], a[16] = b[15] * c[1] + b[16] * c[6] + b[17] * c[11] + b[18] * c[16], a[17] = b[15] * c[2] + b[16] * c[7] + b[17] * c[12] + b[18] * c[17], a[18] = b[15] * c[3] + b[16] * c[8] + b[17] * c[13] + b[18] * c[18], a[19] = b[15] * c[4] + b[16] * c[9] + b[17] * c[14] + b[18] * c[19] + b[19], a }, b.prototype._colorMatrix = function(a) { var b = new Float32Array(a); return b[4] /= 255, b[9] /= 255, b[14] /= 255, b[19] /= 255, b }, b.prototype.brightness = function(a, b) { var c = [a, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(c, b) }, b.prototype.greyscale = function(a, b) { var c = [a, a, a, 0, 0, a, a, a, 0, 0, a, a, a, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(c, b) }, b.prototype.blackAndWhite = function(a) { var b = [.3, .6, .1, 0, 0, .3, .6, .1, 0, 0, .3, .6, .1, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.hue = function(a, b) { a = (a || 0) / 180 * Math.PI; var c = Math.cos(a), d = Math.sin(a), e = Math.sqrt, f = 1 / 3, g = e(f), h = c + (1 - c) * f, i = f * (1 - c) - g * d, j = f * (1 - c) + g * d, k = f * (1 - c) + g * d, l = c + f * (1 - c), m = f * (1 - c) - g * d, n = f * (1 - c) - g * d, o = f * (1 - c) + g * d, p = c + f * (1 - c), q = [h, i, j, 0, 0, k, l, m, 0, 0, n, o, p, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(q, b) }, b.prototype.contrast = function(a, b) { var c = (a || 0) + 1, d = -.5 * (c - 1), e = [c, 0, 0, 0, d, 0, c, 0, 0, d, 0, 0, c, 0, d, 0, 0, 0, 1, 0]; this._loadMatrix(e, b) }, b.prototype.saturate = function() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, b = arguments[1], c = 2 * a / 3 + 1, d = -.5 * (c - 1), e = [c, d, d, 0, 0, d, c, d, 0, 0, d, d, c, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(e, b) }, b.prototype.desaturate = function() { this.saturate(-1) }, b.prototype.negative = function(a) { var b = [-1, 0, 0, 1, 0, 0, -1, 0, 1, 0, 0, 0, -1, 1, 0, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.sepia = function(a) { var b = [.393, .7689999, .18899999, 0, 0, .349, .6859999, .16799999, 0, 0, .272, .5339999, .13099999, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.technicolor = function(a) { var b = [1.9125277891456083, -.8545344976951645, -.09155508482755585, 0, 11.793603434377337, -.3087833385928097, 1.7658908555458428, -.10601743074722245, 0, -70.35205161461398, -.231103377548616, -.7501899197440212, 1.847597816108189, 0, 30.950940869491138, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.polaroid = function(a) { var b = [1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.toBGR = function(a) { var b = [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.kodachrome = function(a) { var b = [1.1285582396593525, -.3967382283601348, -.03992559172921793, 0, 63.72958762196502, -.16404339962244616, 1.0835251566291304, -.05498805115633132, 0, 24.732407896706203, -.16786010706155763, -.5603416277695248, 1.6014850761964943, 0, 35.62982807460946, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.browni = function(a) { var b = [.5997023498159715, .34553243048391263, -.2708298674538042, 0, 47.43192855600873, -.037703249837783157, .8609577587992641, .15059552388459913, 0, -36.96841498319127, .24113635128153335, -.07441037908422492, .44972182064877153, 0, -7.562075277591283, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.vintage = function(a) { var b = [.6279345635605994, .3202183420819367, -.03965408211312453, 0, 9.651285835294123, .02578397704808868, .6441188644374771, .03259127616149294, 0, 7.462829176470591, .0466055556782719, -.0851232987247891, .5241648018700465, 0, 5.159190588235296, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.colorTone = function(a, b, c, d, e) { a = a || .2, b = b || .15, c = c || 16770432, d = d || 3375104; var f = (c >> 16 & 255) / 255, g = (c >> 8 & 255) / 255, h = (255 & c) / 255, i = (d >> 16 & 255) / 255, j = (d >> 8 & 255) / 255, k = (255 & d) / 255, l = [.3, .59, .11, 0, 0, f, g, h, a, 0, i, j, k, b, 0, f - i, g - j, h - k, 0, 0]; this._loadMatrix(l, e) }, b.prototype.night = function(a, b) { a = a || .1; var c = [-2 * a, -a, 0, 0, 0, -a, 0, a, 0, 0, 0, a, 2 * a, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(c, b) }, b.prototype.predator = function(a, b) { var c = [11.224130630493164 * a, -4.794486999511719 * a, -2.8746118545532227 * a, 0 * a, .40342438220977783 * a, -3.6330697536468506 * a, 9.193157196044922 * a, -2.951810836791992 * a, 0 * a, -1.316135048866272 * a, -3.2184197902679443 * a, -4.2375030517578125 * a, 7.476448059082031 * a, 0 * a, .8044459223747253 * a, 0, 0, 0, 1, 0]; this._loadMatrix(c, b) }, b.prototype.lsd = function(a) { var b = [2, -.4, .5, 0, 0, -.5, 2, -.4, 0, 0, -.4, -.5, 3, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(b, a) }, b.prototype.reset = function() { var a = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]; this._loadMatrix(a, !1) }, g(b, [{ key: "matrix", get: function() { return this.uniforms.m }, set: function(a) { this.uniforms.m = a } }, { key: "alpha", get: function() { return this.uniforms.uAlpha }, set: function(a) { this.uniforms.uAlpha = a } }]), b }(i.Filter)); c.default = j, j.prototype.grayscale = j.prototype.greyscale }, { "../../core": 65, path: 8 }], 151: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = (a("path"), function(a) { function b(c, f) { d(this, b); var g = new i.Matrix; c.renderable = !1; var h = e(this, a.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0) ).xy;\n vTextureCoord = aTextureCoord;\n}", "varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n vec4 map = texture2D(mapSampler, vFilterCoord);\n\n map -= 0.5;\n map.xy *= scale / filterArea.xy;\n\n gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n")); return h.maskSprite = c, h.maskMatrix = g, h.uniforms.mapSampler = c._texture, h.uniforms.filterMatrix = g, h.uniforms.scale = { x: 1, y: 1 }, null !== f && void 0 !== f || (f = 20), h.scale = new i.Point(f, f), h } return f(b, a), b.prototype.apply = function(a, b, c) { this.uniforms.filterMatrix = a.calculateSpriteMatrix(this.maskMatrix, this.maskSprite), this.uniforms.scale.x = this.scale.x, this.uniforms.scale.y = this.scale.y, a.applyFilter(this, b, c) }, g(b, [{ key: "map", get: function() { return this.uniforms.mapSampler }, set: function(a) { this.uniforms.mapSampler = a } }]), b }(i.Filter)); c.default = j }, { "../../core": 65, path: 8 }], 152: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = a("../../core"), h = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(g), i = (a("path"), function(a) { function b() { return d(this, b), e(this, a.call(this, "\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n coord *= filterArea.xy;\n coord += filterArea.zw;\n\n return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n coord -= filterArea.zw;\n coord /= filterArea.xy;\n\n return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n out vec2 v_rgbNW, out vec2 v_rgbNE,\n out vec2 v_rgbSW, out vec2 v_rgbSE,\n out vec2 v_rgbM) {\n vec2 inverseVP = 1.0 / resolution.xy;\n v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n vTextureCoord = aTextureCoord;\n\n vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}", 'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX 8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n vec2 v_rgbNW, vec2 v_rgbNE,\n vec2 v_rgbSW, vec2 v_rgbSE,\n vec2 v_rgbM) {\n vec4 color;\n mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n vec4 texColor = texture2D(tex, v_rgbM);\n vec3 rgbM = texColor.xyz;\n vec3 luma = vec3(0.299, 0.587, 0.114);\n float lumaNW = dot(rgbNW, luma);\n float lumaNE = dot(rgbNE, luma);\n float lumaSW = dot(rgbSW, luma);\n float lumaSE = dot(rgbSE, luma);\n float lumaM = dot(rgbM, luma);\n float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n \n mediump vec2 dir;\n dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n \n float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n \n float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n dir * rcpDirMin)) * inverseVP;\n \n vec3 rgbA = 0.5 * (\n texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n vec3 rgbB = rgbA * 0.5 + 0.25 * (\n texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n \n float lumaB = dot(rgbB, luma);\n if ((lumaB < lumaMin) || (lumaB > lumaMax))\n color = vec4(rgbA, texColor.a);\n else\n color = vec4(rgbB, texColor.a);\n return color;\n}\n\nvoid main() {\n\n vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n vec4 color;\n\n color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n gl_FragColor = color;\n}\n')) } return f(b, a), b }(h.Filter)); c.default = i }, { "../../core": 65, path: 8 }], 153: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0; var e = a("./fxaa/FXAAFilter"); Object.defineProperty(c, "FXAAFilter", { enumerable: !0, get: function() { return d(e).default } }); var f = a("./noise/NoiseFilter"); Object.defineProperty(c, "NoiseFilter", { enumerable: !0, get: function() { return d(f).default } }); var g = a("./displacement/DisplacementFilter"); Object.defineProperty(c, "DisplacementFilter", { enumerable: !0, get: function() { return d(g).default } }); var h = a("./blur/BlurFilter"); Object.defineProperty(c, "BlurFilter", { enumerable: !0, get: function() { return d(h).default } }); var i = a("./blur/BlurXFilter"); Object.defineProperty(c, "BlurXFilter", { enumerable: !0, get: function() { return d(i).default } }); var j = a("./blur/BlurYFilter"); Object.defineProperty(c, "BlurYFilter", { enumerable: !0, get: function() { return d(j).default } }); var k = a("./colormatrix/ColorMatrixFilter"); Object.defineProperty(c, "ColorMatrixFilter", { enumerable: !0, get: function() { return d(k).default } }); var l = a("./alpha/AlphaFilter"); Object.defineProperty(c, "AlphaFilter", { enumerable: !0, get: function() { return d(l).default } }) }, { "./alpha/AlphaFilter": 143, "./blur/BlurFilter": 144, "./blur/BlurXFilter": 145, "./blur/BlurYFilter": 146, "./colormatrix/ColorMatrixFilter": 150, "./displacement/DisplacementFilter": 151, "./fxaa/FXAAFilter": 152, "./noise/NoiseFilter": 154 }], 154: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = (a("path"), function(a) { function b() { var c = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : .5, f = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Math.random(); d(this, b); var g = e(this, a.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n vTextureCoord = aTextureCoord;\n}", "precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n vec4 color = texture2D(uSampler, vTextureCoord);\n float randomValue = rand(gl_FragCoord.xy * uSeed);\n float diff = (randomValue - 0.5) * uNoise;\n\n // Un-premultiply alpha before applying the color matrix. See issue #3539.\n if (color.a > 0.0) {\n color.rgb /= color.a;\n }\n\n color.r += diff;\n color.g += diff;\n color.b += diff;\n\n // Premultiply alpha again.\n color.rgb *= color.a;\n\n gl_FragColor = color;\n}\n")); return g.noise = c, g.seed = f, g } return f(b, a), g(b, [{ key: "noise", get: function() { return this.uniforms.uNoise }, set: function(a) { this.uniforms.uNoise = a } }, { key: "seed", get: function() { return this.uniforms.uSeed }, set: function(a) { this.uniforms.uSeed = a } }]), b }(i.Filter)); c.default = j }, { "../../core": 65, path: 8 }], 155: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), f = a("../core"), g = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(f), h = function() { function a() { d(this, a), this.global = new g.Point, this.target = null, this.originalEvent = null, this.identifier = null, this.isPrimary = !1, this.button = 0, this.buttons = 0, this.width = 0, this.height = 0, this.tiltX = 0, this.tiltY = 0, this.pointerType = null, this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0 } return a.prototype.getLocalPosition = function(a, b, c) { return a.worldTransform.applyInverse(c || this.global, b) }, a.prototype.copyEvent = function(a) { a.isPrimary && (this.isPrimary = !0), this.button = a.button, this.buttons = Number.isInteger(a.buttons) ? a.buttons : a.which, this.width = a.width, this.height = a.height, this.tiltX = a.tiltX, this.tiltY = a.tiltY, this.pointerType = a.pointerType, this.pressure = a.pressure, this.rotationAngle = a.rotationAngle, this.twist = a.twist || 0, this.tangentialPressure = a.tangentialPressure || 0 }, a.prototype.reset = function() { this.isPrimary = !1 }, e(a, [{ key: "pointerId", get: function() { return this.identifier } }]), a }(); c.default = h }, { "../core": 65 }], 156: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a() { d(this, a), this.stopped = !1, this.target = null, this.currentTarget = null, this.type = null, this.data = null } return a.prototype.stopPropagation = function() { this.stopped = !0 }, a.prototype.reset = function() { this.stopped = !1, this.currentTarget = null, this.target = null }, a }(); c.default = e }, {}], 157: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) { return typeof a } : function(a) { return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a }, i = a("../core"), j = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(i), k = a("./InteractionData"), l = d(k), m = a("./InteractionEvent"), n = d(m), o = a("./InteractionTrackingData"), p = d(o), q = a("eventemitter3"), r = d(q), s = a("./interactiveTarget"), t = d(s); j.utils.mixins.delayMixin(j.DisplayObject.prototype, t.default); var u = 1, v = { target: null, data: { global: null } }, w = function(a) { function b(c, d) { e(this, b); var g = f(this, a.call(this)); return d = d || {}, g.renderer = c, g.autoPreventDefault = void 0 === d.autoPreventDefault || d.autoPreventDefault, g.interactionFrequency = d.interactionFrequency || 10, g.mouse = new l.default, g.mouse.identifier = u, g.mouse.global.set(-999999), g.activeInteractionData = {}, g.activeInteractionData[u] = g.mouse, g.interactionDataPool = [], g.eventData = new n.default, g.interactionDOMElement = null, g.moveWhenInside = !1, g.eventsAdded = !1, g.mouseOverRenderer = !1, g.supportsTouchEvents = "ontouchstart" in window, g.supportsPointerEvents = !!window.PointerEvent, g.onPointerUp = g.onPointerUp.bind(g), g.processPointerUp = g.processPointerUp.bind(g), g.onPointerCancel = g.onPointerCancel.bind(g), g.processPointerCancel = g.processPointerCancel.bind(g), g.onPointerDown = g.onPointerDown.bind(g), g.processPointerDown = g.processPointerDown.bind(g), g.onPointerMove = g.onPointerMove.bind(g), g.processPointerMove = g.processPointerMove.bind(g), g.onPointerOut = g.onPointerOut.bind(g), g.processPointerOverOut = g.processPointerOverOut.bind(g), g.onPointerOver = g.onPointerOver.bind(g), g.cursorStyles = { default: "inherit", pointer: "pointer" }, g.currentCursorMode = null, g.cursor = null, g._tempPoint = new j.Point, g.resolution = 1, g.setTargetElement(g.renderer.view, g.renderer.resolution), g } return g(b, a), b.prototype.hitTest = function(a, b) { return v.target = null, v.data.global = a, b || (b = this.renderer._lastObjectRendered), this.processInteractive(v, b, null, !0), v.target }, b.prototype.setTargetElement = function(a) { var b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; this.removeEvents(), this.interactionDOMElement = a, this.resolution = b, this.addEvents() }, b.prototype.addEvents = function() { this.interactionDOMElement && (j.ticker.shared.add(this.update, this, j.UPDATE_PRIORITY.INTERACTION), window.navigator.msPointerEnabled ? (this.interactionDOMElement.style["-ms-content-zooming"] = "none", this.interactionDOMElement.style["-ms-touch-action"] = "none") : this.supportsPointerEvents && (this.interactionDOMElement.style["touch-action"] = "none"), this.supportsPointerEvents ? (window.document.addEventListener("pointermove", this.onPointerMove, !0), this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, !0), this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, !0), this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, !0), window.addEventListener("pointercancel", this.onPointerCancel, !0), window.addEventListener("pointerup", this.onPointerUp, !0)) : (window.document.addEventListener("mousemove", this.onPointerMove, !0), this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, !0), this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, !0), this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, !0), window.addEventListener("mouseup", this.onPointerUp, !0)), this.supportsTouchEvents && (this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, !0), this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, !0), this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, !0), this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, !0)), this.eventsAdded = !0) }, b.prototype.removeEvents = function() { this.interactionDOMElement && (j.ticker.shared.remove(this.update, this), window.navigator.msPointerEnabled ? (this.interactionDOMElement.style["-ms-content-zooming"] = "", this.interactionDOMElement.style["-ms-touch-action"] = "") : this.supportsPointerEvents && (this.interactionDOMElement.style["touch-action"] = ""), this.supportsPointerEvents ? (window.document.removeEventListener("pointermove", this.onPointerMove, !0), this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, !0), this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, !0), this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, !0), window.removeEventListener("pointercancel", this.onPointerCancel, !0), window.removeEventListener("pointerup", this.onPointerUp, !0)) : (window.document.removeEventListener("mousemove", this.onPointerMove, !0), this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, !0), this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, !0), this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, !0), window.removeEventListener("mouseup", this.onPointerUp, !0)), this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, !0), this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, !0), this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, !0), this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, !0)), this.interactionDOMElement = null, this.eventsAdded = !1) }, b.prototype.update = function(a) { if (this._deltaTime += a, !(this._deltaTime < this.interactionFrequency) && (this._deltaTime = 0, this.interactionDOMElement)) { if (this.didMove) return void(this.didMove = !1); this.cursor = null; for (var b in this.activeInteractionData) if (this.activeInteractionData.hasOwnProperty(b)) { var c = this.activeInteractionData[b]; if (c.originalEvent && "touch" !== c.pointerType) { var d = this.configureInteractionEventForDOMEvent(this.eventData, c.originalEvent, c); this.processInteractive(d, this.renderer._lastObjectRendered, this.processPointerOverOut, !0) } } this.setCursorMode(this.cursor) } }, b.prototype.setCursorMode = function(a) { if (a = a || "default", this.currentCursorMode !== a) { this.currentCursorMode = a; var b = this.cursorStyles[a]; if (b) switch (void 0 === b ? "undefined" : h(b)) { case "string": this.interactionDOMElement.style.cursor = b; break; case "function": b(a); break; case "object": Object.assign(this.interactionDOMElement.style, b) } else "string" != typeof a || Object.prototype.hasOwnProperty.call(this.cursorStyles, a) || (this.interactionDOMElement.style.cursor = a) } }, b.prototype.dispatchEvent = function(a, b, c) { c.stopped || (c.currentTarget = a, c.type = b, a.emit(b, c), a[b] && a[b](c)) }, b.prototype.mapPositionToPoint = function(a, b, c) { var d = void 0; d = this.interactionDOMElement.parentElement ? this.interactionDOMElement.getBoundingClientRect() : { x: 0, y: 0, width: 0, height: 0 }; var e = navigator.isCocoonJS ? this.resolution : 1 / this.resolution; a.x = (b - d.left) * (this.interactionDOMElement.width / d.width) * e, a.y = (c - d.top) * (this.interactionDOMElement.height / d.height) * e }, b.prototype.processInteractive = function(a, b, c, d, e) { if (!b || !b.visible) return !1; var f = a.data.global; e = b.interactive || e; var g = !1, h = e, i = !0; if (b.hitArea ? (d && (b.worldTransform.applyInverse(f, this._tempPoint), b.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? g = !0 : (d = !1, i = !1)), h = !1) : b._mask && d && (b._mask.containsPoint(f) || (d = !1, i = !1)), i && b.interactiveChildren && b.children) for (var j = b.children, k = j.length - 1; k >= 0; k--) { var l = j[k], m = this.processInteractive(a, l, c, d, h); if (m) { if (!l.parent) continue; h = !1, m && (a.target && (d = !1), g = !0) } } return e && (d && !a.target && !b.hitArea && b.containsPoint && b.containsPoint(f) && (g = !0), b.interactive && (g && !a.target && (a.target = b), c && c(a, b, !!g))), g }, b.prototype.onPointerDown = function(a) { if (!this.supportsTouchEvents || "touch" !== a.pointerType) { var b = this.normalizeToPointerData(a); this.autoPreventDefault && b[0].isNormalized && a.preventDefault(); for (var c = b.length, d = 0; d < c; d++) { var e = b[d], f = this.getInteractionDataForPointerId(e), g = this.configureInteractionEventForDOMEvent(this.eventData, e, f); if (g.data.originalEvent = a, this.processInteractive(g, this.renderer._lastObjectRendered, this.processPointerDown, !0), this.emit("pointerdown", g), "touch" === e.pointerType) this.emit("touchstart", g); else if ("mouse" === e.pointerType || "pen" === e.pointerType) { var h = 2 === e.button; this.emit(h ? "rightdown" : "mousedown", this.eventData) } } } }, b.prototype.processPointerDown = function(a, b, c) { var d = a.data, e = a.data.identifier; if (c) if (b.trackedPointers[e] || (b.trackedPointers[e] = new p.default(e)), this.dispatchEvent(b, "pointerdown", a), "touch" === d.pointerType) this.dispatchEvent(b, "touchstart", a); else if ("mouse" === d.pointerType || "pen" === d.pointerType) { var f = 2 === d.button; f ? b.trackedPointers[e].rightDown = !0 : b.trackedPointers[e].leftDown = !0, this.dispatchEvent(b, f ? "rightdown" : "mousedown", a) } }, b.prototype.onPointerComplete = function(a, b, c) { for (var d = this.normalizeToPointerData(a), e = d.length, f = a.target !== this.interactionDOMElement ? "outside" : "", g = 0; g < e; g++) { var h = d[g], i = this.getInteractionDataForPointerId(h), j = this.configureInteractionEventForDOMEvent(this.eventData, h, i); if (j.data.originalEvent = a, this.processInteractive(j, this.renderer._lastObjectRendered, c, b || !f), this.emit(b ? "pointercancel" : "pointerup" + f, j), "mouse" === h.pointerType || "pen" === h.pointerType) { var k = 2 === h.button; this.emit(k ? "rightup" + f : "mouseup" + f, j) } else "touch" === h.pointerType && (this.emit(b ? "touchcancel" : "touchend" + f, j), this.releaseInteractionDataForPointerId(h.pointerId, i)) } }, b.prototype.onPointerCancel = function(a) { this.supportsTouchEvents && "touch" === a.pointerType || this.onPointerComplete(a, !0, this.processPointerCancel) }, b.prototype.processPointerCancel = function(a, b) { var c = a.data, d = a.data.identifier; void 0 !== b.trackedPointers[d] && (delete b.trackedPointers[d], this.dispatchEvent(b, "pointercancel", a), "touch" === c.pointerType && this.dispatchEvent(b, "touchcancel", a)) }, b.prototype.onPointerUp = function(a) { this.supportsTouchEvents && "touch" === a.pointerType || this.onPointerComplete(a, !1, this.processPointerUp) }, b.prototype.processPointerUp = function(a, b, c) { var d = a.data, e = a.data.identifier, f = b.trackedPointers[e], g = "touch" === d.pointerType, h = "mouse" === d.pointerType || "pen" === d.pointerType, i = !1; if (h) { var j = 2 === d.button, k = p.default.FLAGS, l = j ? k.RIGHT_DOWN : k.LEFT_DOWN, m = void 0 !== f && f.flags & l; c ? (this.dispatchEvent(b, j ? "rightup" : "mouseup", a), m && (this.dispatchEvent(b, j ? "rightclick" : "click", a), i = !0)) : m && this.dispatchEvent(b, j ? "rightupoutside" : "mouseupoutside", a), f && (j ? f.rightDown = !1 : f.leftDown = !1) } c ? (this.dispatchEvent(b, "pointerup", a), g && this.dispatchEvent(b, "touchend", a), f && (h && !i || this.dispatchEvent(b, "pointertap", a), g && (this.dispatchEvent(b, "tap", a), f.over = !1))) : f && (this.dispatchEvent(b, "pointerupoutside", a), g && this.dispatchEvent(b, "touchendoutside", a)), f && f.none && delete b.trackedPointers[e] }, b.prototype.onPointerMove = function(a) { if (!this.supportsTouchEvents || "touch" !== a.pointerType) { var b = this.normalizeToPointerData(a); "mouse" !== b[0].pointerType && "pen" !== b[0].pointerType || (this.didMove = !0, this.cursor = null); for (var c = b.length, d = 0; d < c; d++) { var e = b[d], f = this.getInteractionDataForPointerId(e), g = this.configureInteractionEventForDOMEvent(this.eventData, e, f); g.data.originalEvent = a; var h = "touch" !== e.pointerType || this.moveWhenInside; this.processInteractive(g, this.renderer._lastObjectRendered, this.processPointerMove, h), this.emit("pointermove", g), "touch" === e.pointerType && this.emit("touchmove", g), "mouse" !== e.pointerType && "pen" !== e.pointerType || this.emit("mousemove", g) } "mouse" === b[0].pointerType && this.setCursorMode(this.cursor) } }, b.prototype.processPointerMove = function(a, b, c) { var d = a.data, e = "touch" === d.pointerType, f = "mouse" === d.pointerType || "pen" === d.pointerType; f && this.processPointerOverOut(a, b, c), this.moveWhenInside && !c || (this.dispatchEvent(b, "pointermove", a), e && this.dispatchEvent(b, "touchmove", a), f && this.dispatchEvent(b, "mousemove", a)) }, b.prototype.onPointerOut = function(a) { if (!this.supportsTouchEvents || "touch" !== a.pointerType) { var b = this.normalizeToPointerData(a), c = b[0]; "mouse" === c.pointerType && (this.mouseOverRenderer = !1, this.setCursorMode(null)); var d = this.getInteractionDataForPointerId(c), e = this.configureInteractionEventForDOMEvent(this.eventData, c, d); e.data.originalEvent = c, this.processInteractive(e, this.renderer._lastObjectRendered, this.processPointerOverOut, !1), this.emit("pointerout", e), "mouse" === c.pointerType || "pen" === c.pointerType ? this.emit("mouseout", e) : this.releaseInteractionDataForPointerId(d.identifier) } }, b.prototype.processPointerOverOut = function(a, b, c) { var d = a.data, e = a.data.identifier, f = "mouse" === d.pointerType || "pen" === d.pointerType, g = b.trackedPointers[e]; c && !g && (g = b.trackedPointers[e] = new p.default(e)), void 0 !== g && (c && this.mouseOverRenderer ? (g.over || (g.over = !0, this.dispatchEvent(b, "pointerover", a), f && this.dispatchEvent(b, "mouseover", a)), f && null === this.cursor && (this.cursor = b.cursor)) : g.over && (g.over = !1, this.dispatchEvent(b, "pointerout", this.eventData), f && this.dispatchEvent(b, "mouseout", a), g.none && delete b.trackedPointers[e])) }, b.prototype.onPointerOver = function(a) { var b = this.normalizeToPointerData(a), c = b[0], d = this.getInteractionDataForPointerId(c), e = this.configureInteractionEventForDOMEvent(this.eventData, c, d); e.data.originalEvent = c, "mouse" === c.pointerType && (this.mouseOverRenderer = !0), this.emit("pointerover", e), "mouse" !== c.pointerType && "pen" !== c.pointerType || this.emit("mouseover", e) }, b.prototype.getInteractionDataForPointerId = function(a) { var b = a.pointerId, c = void 0; return b === u || "mouse" === a.pointerType ? c = this.mouse : this.activeInteractionData[b] ? c = this.activeInteractionData[b] : (c = this.interactionDataPool.pop() || new l.default, c.identifier = b, this.activeInteractionData[b] = c), c.copyEvent(a), c }, b.prototype.releaseInteractionDataForPointerId = function(a) { var b = this.activeInteractionData[a]; b && (delete this.activeInteractionData[a], b.reset(), this.interactionDataPool.push(b)) }, b.prototype.configureInteractionEventForDOMEvent = function(a, b, c) { return a.data = c, this.mapPositionToPoint(c.global, b.clientX, b.clientY), navigator.isCocoonJS && "touch" === b.pointerType && (c.global.x = c.global.x / this.resolution, c.global.y = c.global.y / this.resolution), "touch" === b.pointerType && (b.globalX = c.global.x, b.globalY = c.global.y), c.originalEvent = b, a.reset(), a }, b.prototype.normalizeToPointerData = function(a) { var b = []; if (this.supportsTouchEvents && a instanceof TouchEvent) for (var c = 0, d = a.changedTouches.length; c < d; c++) { var e = a.changedTouches[c]; void 0 === e.button && (e.button = a.touches.length ? 1 : 0), void 0 === e.buttons && (e.buttons = a.touches.length ? 1 : 0), void 0 === e.isPrimary && (e.isPrimary = 1 === a.touches.length && "touchstart" === a.type), void 0 === e.width && (e.width = e.radiusX || 1), void 0 === e.height && (e.height = e.radiusY || 1), void 0 === e.tiltX && (e.tiltX = 0), void 0 === e.tiltY && (e.tiltY = 0), void 0 === e.pointerType && (e.pointerType = "touch"), void 0 === e.pointerId && (e.pointerId = e.identifier || 0), void 0 === e.pressure && (e.pressure = e.force || .5), e.twist = 0, e.tangentialPressure = 0, void 0 === e.layerX && (e.layerX = e.offsetX = e.clientX), void 0 === e.layerY && (e.layerY = e.offsetY = e.clientY), e.isNormalized = !0, b.push(e) } else !(a instanceof MouseEvent) || this.supportsPointerEvents && a instanceof window.PointerEvent ? b.push(a) : (void 0 === a.isPrimary && (a.isPrimary = !0), void 0 === a.width && (a.width = 1), void 0 === a.height && (a.height = 1), void 0 === a.tiltX && (a.tiltX = 0), void 0 === a.tiltY && (a.tiltY = 0), void 0 === a.pointerType && (a.pointerType = "mouse"), void 0 === a.pointerId && (a.pointerId = u), void 0 === a.pressure && (a.pressure = .5), a.twist = 0, a.tangentialPressure = 0, a.isNormalized = !0, b.push(a)); return b }, b.prototype.destroy = function() { this.removeEvents(), this.removeAllListeners(), this.renderer = null, this.mouse = null, this.eventData = null, this.interactionDOMElement = null, this.onPointerDown = null, this.processPointerDown = null, this.onPointerUp = null, this.processPointerUp = null, this.onPointerCancel = null, this.processPointerCancel = null, this.onPointerMove = null, this.processPointerMove = null, this.onPointerOut = null, this.processPointerOverOut = null, this.onPointerOver = null, this._tempPoint = null }, b }(r.default); c.default = w, j.WebGLRenderer.registerPlugin("interaction", w), j.CanvasRenderer.registerPlugin("interaction", w) }, { "../core": 65, "./InteractionData": 155, "./InteractionEvent": 156, "./InteractionTrackingData": 158, "./interactiveTarget": 160, eventemitter3: 3 }], 158: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), f = function() { function a(b) { d(this, a), this._pointerId = b, this._flags = a.FLAGS.NONE } return a.prototype._doSet = function(a, b) { this._flags = b ? this._flags | a : this._flags & ~a }, e(a, [{ key: "pointerId", get: function() { return this._pointerId } }, { key: "flags", get: function() { return this._flags }, set: function(a) { this._flags = a } }, { key: "none", get: function() { return this._flags === this.constructor.FLAGS.NONE } }, { key: "over", get: function() { return 0 != (this._flags & this.constructor.FLAGS.OVER) }, set: function(a) { this._doSet(this.constructor.FLAGS.OVER, a) } }, { key: "rightDown", get: function() { return 0 != (this._flags & this.constructor.FLAGS.RIGHT_DOWN) }, set: function(a) { this._doSet(this.constructor.FLAGS.RIGHT_DOWN, a) } }, { key: "leftDown", get: function() { return 0 != (this._flags & this.constructor.FLAGS.LEFT_DOWN) }, set: function(a) { this._doSet(this.constructor.FLAGS.LEFT_DOWN, a) } }]), a }(); c.default = f, f.FLAGS = Object.freeze({ NONE: 0, OVER: 1, LEFT_DOWN: 2, RIGHT_DOWN: 4 }) }, {}], 159: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0; var e = a("./InteractionData"); Object.defineProperty(c, "InteractionData", { enumerable: !0, get: function() { return d(e).default } }); var f = a("./InteractionManager"); Object.defineProperty(c, "InteractionManager", { enumerable: !0, get: function() { return d(f).default } }); var g = a("./interactiveTarget"); Object.defineProperty(c, "interactiveTarget", { enumerable: !0, get: function() { return d(g).default } }); var h = a("./InteractionTrackingData"); Object.defineProperty(c, "InteractionTrackingData", { enumerable: !0, get: function() { return d(h).default } }); var i = a("./InteractionEvent"); Object.defineProperty(c, "InteractionEvent", { enumerable: !0, get: function() { return d(i).default } }) }, { "./InteractionData": 155, "./InteractionEvent": 156, "./InteractionManager": 157, "./InteractionTrackingData": 158, "./interactiveTarget": 160 }], 160: [function(a, b, c) { "use strict"; c.__esModule = !0, c.default = { interactive: !1, interactiveChildren: !0, hitArea: null, get buttonMode() { return "pointer" === this.cursor }, set buttonMode(a) { a ? this.cursor = "pointer" : "pointer" === this.cursor && (this.cursor = null) }, cursor: null, get trackedPointers() { return void 0 === this._trackedPointers && (this._trackedPointers = {}), this._trackedPointers }, _trackedPointers: void 0 } }, {}], 161: [function(a, b, c) { "use strict"; function d(a, b) { a.bitmapFont = h.BitmapText.registerFont(a.data, b) } c.__esModule = !0, c.parse = d, c.default = function() { return function(a, b) { if (!a.data || a.type !== g.Resource.TYPE.XML) return void b(); if (0 === a.data.getElementsByTagName("page").length || 0 === a.data.getElementsByTagName("info").length || null === a.data.getElementsByTagName("info")[0].getAttribute("face")) return void b(); var c = a.isDataUrl ? "" : f.dirname(a.url); a.isDataUrl && ("." === c && (c = ""), this.baseUrl && c && "/" === this.baseUrl.charAt(this.baseUrl.length - 1) && (c += "/")), (c = c.replace(this.baseUrl, "")) && "/" !== c.charAt(c.length - 1) && (c += "/"); for (var e = a.data.getElementsByTagName("page"), h = {}, i = function(c) { h[c.metadata.pageFile] = c.texture, Object.keys(h).length === e.length && (d(a, h), b()) }, j = 0; j < e.length; ++j) { var k = e[j].getAttribute("file"), l = c + k, m = !1; for (var n in this.resources) { var o = this.resources[n]; if (o.url === l) { o.metadata.pageFile = k, o.texture ? i(o) : o.onAfterMiddleware.add(i), m = !0; break } } if (!m) { var p = { crossOrigin: a.crossOrigin, loadType: g.Resource.LOAD_TYPE.IMAGE, metadata: Object.assign({ pageFile: k }, a.metadata.imageMetadata), parentResource: a }; this.add(l, p, i) } } } }; var e = a("path"), f = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(e), g = a("resource-loader"), h = a("../extras") }, { "../extras": 141, path: 8, "resource-loader": 36 }], 162: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0, c.shared = c.Resource = c.textureParser = c.getResourcePath = c.spritesheetParser = c.parseBitmapFontData = c.bitmapFontParser = c.Loader = void 0; var e = a("./bitmapFontParser"); Object.defineProperty(c, "bitmapFontParser", { enumerable: !0, get: function() { return d(e).default } }), Object.defineProperty(c, "parseBitmapFontData", { enumerable: !0, get: function() { return e.parse } }); var f = a("./spritesheetParser"); Object.defineProperty(c, "spritesheetParser", { enumerable: !0, get: function() { return d(f).default } }), Object.defineProperty(c, "getResourcePath", { enumerable: !0, get: function() { return f.getResourcePath } }); var g = a("./textureParser"); Object.defineProperty(c, "textureParser", { enumerable: !0, get: function() { return d(g).default } }); var h = a("resource-loader"); Object.defineProperty(c, "Resource", { enumerable: !0, get: function() { return h.Resource } }); var i = a("../core/Application"), j = d(i), k = a("./loader"), l = d(k); c.Loader = l.default; var m = new l.default; m.destroy = function() {}, c.shared = m; var n = j.default.prototype; n._loader = null, Object.defineProperty(n, "loader", { get: function() { if (!this._loader) { var a = this._options.sharedLoader; this._loader = a ? m : new l.default } return this._loader } }), n._parentDestroy = n.destroy, n.destroy = function(a, b) { this._loader && (this._loader.destroy(), this._loader = null), this._parentDestroy(a, b) } }, { "../core/Application": 43, "./bitmapFontParser": 161, "./loader": 163, "./spritesheetParser": 164, "./textureParser": 165, "resource-loader": 36 }], 163: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("resource-loader"), i = d(h), j = a("resource-loader/lib/middlewares/parsing/blob"), k = a("eventemitter3"), l = d(k), m = a("./textureParser"), n = d(m), o = a("./spritesheetParser"), p = d(o), q = a("./bitmapFontParser"), r = d(q), s = function(a) { function b(c, d) { e(this, b); var g = f(this, a.call(this, c, d)); l.default.call(g); for (var h = 0; h < b._pixiMiddleware.length; ++h) g.use(b._pixiMiddleware[h]()); return g.onStart.add(function(a) { return g.emit("start", a) }), g.onProgress.add(function(a, b) { return g.emit("progress", a, b) }), g.onError.add(function(a, b, c) { return g.emit("error", a, b, c) }), g.onLoad.add(function(a, b) { return g.emit("load", a, b) }), g.onComplete.add(function(a, b) { return g.emit("complete", a, b) }), g } return g(b, a), b.addPixiMiddleware = function(a) { b._pixiMiddleware.push(a) }, b.prototype.destroy = function() { this.removeAllListeners(), this.reset() }, b }(i.default); c.default = s; for (var t in l.default.prototype) s.prototype[t] = l.default.prototype[t]; s._pixiMiddleware = [j.blobMiddlewareFactory, n.default, p.default, r.default]; var u = i.default.Resource; u.setExtensionXhrType("fnt", u.XHR_RESPONSE_TYPE.DOCUMENT) }, { "./bitmapFontParser": 161, "./spritesheetParser": 164, "./textureParser": 165, eventemitter3: 3, "resource-loader": 36, "resource-loader/lib/middlewares/parsing/blob": 37 }], 164: [function(a, b, c) { "use strict"; function d(a, b) { return a.isDataUrl ? a.data.meta.image : g.default.resolve(a.url.replace(b, ""), a.data.meta.image) } c.__esModule = !0, c.default = function() { return function(a, b) { var c = a.name + "_image"; if (!a.data || a.type !== e.Resource.TYPE.JSON || !a.data.frames || this.resources[c]) return void b(); var f = { crossOrigin: a.crossOrigin, metadata: a.metadata.imageMetadata, parentResource: a }, g = d(a, this.baseUrl); this.add(c, g, f, function(c) { if (c.error) return void b(c.error); var d = new h.Spritesheet(c.texture.baseTexture, a.data, a.url); d.parse(function() { a.spritesheet = d, a.textures = d.textures, b() }) }) } }, c.getResourcePath = d; var e = a("resource-loader"), f = a("url"), g = function(a) { return a && a.__esModule ? a : { default: a } }(f), h = a("../core") }, { "../core": 65, "resource-loader": 36, url: 38 }], 165: [function(a, b, c) { "use strict"; c.__esModule = !0, c.default = function() { return function(a, b) { a.data && a.type === d.Resource.TYPE.IMAGE && (a.texture = f.default.fromLoader(a.data, a.url, a.name)), b() } }; var d = a("resource-loader"), e = a("../core/textures/Texture"), f = function(a) { return a && a.__esModule ? a : { default: a } }(e) }, { "../core/textures/Texture": 115, "resource-loader": 36 }], 166: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = a("../core/textures/Texture"), k = function(a) { return a && a.__esModule ? a : { default: a } }(j), l = new i.Point, m = new i.Polygon, n = function(a) { function b(c, f, g, h, j) { d(this, b); var l = e(this, a.call(this)); return l._texture = c || k.default.EMPTY, l.uvs = g || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), l.vertices = f || new Float32Array([0, 0, 100, 0, 100, 100, 0, 100]), l.indices = h || new Uint16Array([0, 1, 3, 2]), l.dirty = 0, l.indexDirty = 0, l.vertexDirty = 0, l.autoUpdate = !0, l.blendMode = i.BLEND_MODES.NORMAL, l.canvasPadding = i.settings.MESH_CANVAS_PADDING, l.drawMode = j || b.DRAW_MODES.TRIANGLE_MESH, l.shader = null, l.tintRgb = new Float32Array([1, 1, 1]), l._glDatas = {}, l._uvTransform = new i.TextureMatrix(l._texture), l.uploadUvTransform = !1, l.pluginName = "mesh", l } return f(b, a), b.prototype._renderWebGL = function(a) { this.refresh(), a.setObjectRenderer(a.plugins[this.pluginName]), a.plugins[this.pluginName].render(this) }, b.prototype._renderCanvas = function(a) { this.refresh(), a.plugins[this.pluginName].render(this) }, b.prototype._onTextureUpdate = function() { this._uvTransform.texture = this._texture, this.refresh() }, b.prototype.multiplyUvs = function() { this.uploadUvTransform || this._uvTransform.multiplyUvs(this.uvs) }, b.prototype.refresh = function(a) { this.autoUpdate && this.vertexDirty++, this._uvTransform.update(a) && this._refresh() }, b.prototype._refresh = function() {}, b.prototype._calculateBounds = function() { this._bounds.addVertices(this.transform, this.vertices, 0, this.vertices.length) }, b.prototype.containsPoint = function(a) { if (!this.getBounds().contains(a.x, a.y)) return !1; this.worldTransform.applyInverse(a, l); for (var c = this.vertices, d = m.points, e = this.indices, f = this.indices.length, g = this.drawMode === b.DRAW_MODES.TRIANGLES ? 3 : 1, h = 0; h + 2 < f; h += g) { var i = 2 * e[h], j = 2 * e[h + 1], k = 2 * e[h + 2]; if (d[0] = c[i], d[1] = c[i + 1], d[2] = c[j], d[3] = c[j + 1], d[4] = c[k], d[5] = c[k + 1], m.contains(l.x, l.y)) return !0 } return !1 }, b.prototype.destroy = function(b) { for (var c in this._glDatas) { var d = this._glDatas[c]; d.destroy ? d.destroy() : (d.vertexBuffer && (d.vertexBuffer.destroy(), d.vertexBuffer = null), d.indexBuffer && (d.indexBuffer.destroy(), d.indexBuffer = null), d.uvBuffer && (d.uvBuffer.destroy(), d.uvBuffer = null), d.vao && (d.vao.destroy(), d.vao = null)) } this._glDatas = null, a.prototype.destroy.call(this, b) }, g(b, [{ key: "texture", get: function() { return this._texture }, set: function(a) { this._texture !== a && (this._texture = a, a && (a.baseTexture.hasLoaded ? this._onTextureUpdate() : a.once("update", this._onTextureUpdate, this))) } }, { key: "tint", get: function() { return i.utils.rgb2hex(this.tintRgb) }, set: function(a) { this.tintRgb = i.utils.hex2rgb(a, this.tintRgb) } }]), b }(i.Container); c.default = n, n.DRAW_MODES = { TRIANGLE_MESH: 0, TRIANGLES: 1 } }, { "../core": 65, "../core/textures/Texture": 115 }], 167: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("./Plane"), i = function(a) { return a && a.__esModule ? a : { default: a } }(h), j = 10, k = function(a) { function b(c, f, g, h, i) { d(this, b); var k = e(this, a.call(this, c, 4, 4)); return k._origWidth = c.orig.width, k._origHeight = c.orig.height, k._width = k._origWidth, k._height = k._origHeight, k._leftWidth = void 0 !== f ? f : j, k._rightWidth = void 0 !== h ? h : j, k._topHeight = void 0 !== g ? g : j, k._bottomHeight = void 0 !== i ? i : j, k.refresh(!0), k } return f(b, a), b.prototype.updateHorizontalVertices = function() { var a = this.vertices, b = this._topHeight + this._bottomHeight, c = this._height > b ? 1 : this._height / b; a[9] = a[11] = a[13] = a[15] = this._topHeight * c, a[17] = a[19] = a[21] = a[23] = this._height - this._bottomHeight * c, a[25] = a[27] = a[29] = a[31] = this._height }, b.prototype.updateVerticalVertices = function() { var a = this.vertices, b = this._leftWidth + this._rightWidth, c = this._width > b ? 1 : this._width / b; a[2] = a[10] = a[18] = a[26] = this._leftWidth * c, a[4] = a[12] = a[20] = a[28] = this._width - this._rightWidth * c, a[6] = a[14] = a[22] = a[30] = this._width }, b.prototype._renderCanvas = function(a) { var b = a.context; b.globalAlpha = this.worldAlpha, a.setBlendMode(this.blendMode); var c = this.worldTransform, d = a.resolution; a.roundPixels ? b.setTransform(c.a * d, c.b * d, c.c * d, c.d * d, c.tx * d | 0, c.ty * d | 0) : b.setTransform(c.a * d, c.b * d, c.c * d, c.d * d, c.tx * d, c.ty * d); var e = this._texture.baseTexture, f = e.source, g = e.width * e.resolution, h = e.height * e.resolution; this.drawSegment(b, f, g, h, 0, 1, 10, 11), this.drawSegment(b, f, g, h, 2, 3, 12, 13), this.drawSegment(b, f, g, h, 4, 5, 14, 15), this.drawSegment(b, f, g, h, 8, 9, 18, 19), this.drawSegment(b, f, g, h, 10, 11, 20, 21), this.drawSegment(b, f, g, h, 12, 13, 22, 23), this.drawSegment(b, f, g, h, 16, 17, 26, 27), this.drawSegment(b, f, g, h, 18, 19, 28, 29), this.drawSegment(b, f, g, h, 20, 21, 30, 31) }, b.prototype.drawSegment = function(a, b, c, d, e, f, g, h) { var i = this.uvs, j = this.vertices, k = (i[g] - i[e]) * c, l = (i[h] - i[f]) * d, m = j[g] - j[e], n = j[h] - j[f]; k < 1 && (k = 1), l < 1 && (l = 1), m < 1 && (m = 1), n < 1 && (n = 1), a.drawImage(b, i[e] * c, i[f] * d, k, l, j[e], j[f], m, n) }, b.prototype._refresh = function() { a.prototype._refresh.call(this); var b = this.uvs, c = this._texture; this._origWidth = c.orig.width, this._origHeight = c.orig.height; var d = 1 / this._origWidth, e = 1 / this._origHeight; b[0] = b[8] = b[16] = b[24] = 0, b[1] = b[3] = b[5] = b[7] = 0, b[6] = b[14] = b[22] = b[30] = 1, b[25] = b[27] = b[29] = b[31] = 1, b[2] = b[10] = b[18] = b[26] = d * this._leftWidth, b[4] = b[12] = b[20] = b[28] = 1 - d * this._rightWidth, b[9] = b[11] = b[13] = b[15] = e * this._topHeight, b[17] = b[19] = b[21] = b[23] = 1 - e * this._bottomHeight, this.updateHorizontalVertices(), this.updateVerticalVertices(), this.dirty++, this.multiplyUvs() }, g(b, [{ key: "width", get: function() { return this._width }, set: function(a) { this._width = a, this._refresh() } }, { key: "height", get: function() { return this._height }, set: function(a) { this._height = a, this._refresh() } }, { key: "leftWidth", get: function() { return this._leftWidth }, set: function(a) { this._leftWidth = a, this._refresh() } }, { key: "rightWidth", get: function() { return this._rightWidth }, set: function(a) { this._rightWidth = a, this._refresh() } }, { key: "topHeight", get: function() { return this._topHeight }, set: function(a) { this._topHeight = a, this._refresh() } }, { key: "bottomHeight", get: function() { return this._bottomHeight }, set: function(a) { this._bottomHeight = a, this._refresh() } }]), b }(i.default); c.default = k }, { "./Plane": 168 }], 168: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = a("./Mesh"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = function(a) { function b(c, f, g) { d(this, b); var i = e(this, a.call(this, c)); return i._ready = !0, i.verticesX = f || 10, i.verticesY = g || 10, i.drawMode = h.default.DRAW_MODES.TRIANGLES, i.refresh(), i } return f(b, a), b.prototype._refresh = function() { for (var a = this._texture, b = this.verticesX * this.verticesY, c = [], d = [], e = [], f = [], g = this.verticesX - 1, h = this.verticesY - 1, i = a.width / g, j = a.height / h, k = 0; k < b; k++) { var l = k % this.verticesX, m = k / this.verticesX | 0; c.push(l * i, m * j), e.push(l / g, m / h) } for (var n = g * h, o = 0; o < n; o++) { var p = o % g, q = o / g | 0, r = q * this.verticesX + p, s = q * this.verticesX + p + 1, t = (q + 1) * this.verticesX + p, u = (q + 1) * this.verticesX + p + 1; f.push(r, s, t), f.push(s, u, t) } this.vertices = new Float32Array(c), this.uvs = new Float32Array(e), this.colors = new Float32Array(d), this.indices = new Uint16Array(f), this.dirty++, this.indexDirty++, this.multiplyUvs() }, b.prototype._onTextureUpdate = function() { h.default.prototype._onTextureUpdate.call(this), this._ready && this.refresh() }, b }(h.default); c.default = i }, { "./Mesh": 166 }], 169: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = a("./Mesh"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = function(a) { function b(c, f) { d(this, b); var g = e(this, a.call(this, c)); return g.points = f, g.vertices = new Float32Array(4 * f.length), g.uvs = new Float32Array(4 * f.length), g.colors = new Float32Array(2 * f.length), g.indices = new Uint16Array(2 * f.length), g.autoUpdate = !0, g.refresh(), g } return f(b, a), b.prototype._refresh = function() { var a = this.points; if (!(a.length < 1) && this._texture._uvs) { this.vertices.length / 4 !== a.length && (this.vertices = new Float32Array(4 * a.length), this.uvs = new Float32Array(4 * a.length), this.colors = new Float32Array(2 * a.length), this.indices = new Uint16Array(2 * a.length)); var b = this.uvs, c = this.indices, d = this.colors; b[0] = 0, b[1] = 0, b[2] = 0, b[3] = 1, d[0] = 1, d[1] = 1, c[0] = 0, c[1] = 1; for (var e = a.length, f = 1; f < e; f++) { var g = 4 * f, h = f / (e - 1); b[g] = h, b[g + 1] = 0, b[g + 2] = h, b[g + 3] = 1, g = 2 * f, d[g] = 1, d[g + 1] = 1, g = 2 * f, c[g] = g, c[g + 1] = g + 1 } this.dirty++, this.indexDirty++, this.multiplyUvs(), this.refreshVertices() } }, b.prototype.refreshVertices = function() { var a = this.points; if (!(a.length < 1)) for (var b = a[0], c = void 0, d = 0, e = 0, f = this.vertices, g = a.length, h = 0; h < g; h++) { var i = a[h], j = 4 * h; c = h < a.length - 1 ? a[h + 1] : i, e = -(c.x - b.x), d = c.y - b.y; var k = 10 * (1 - h / (g - 1)); k > 1 && (k = 1); var l = Math.sqrt(d * d + e * e), m = this._texture.height / 2; d /= l, e /= l, d *= m, e *= m, f[j] = i.x + d, f[j + 1] = i.y + e, f[j + 2] = i.x - d, f[j + 3] = i.y - e, b = i } }, b.prototype.updateTransform = function() { this.autoUpdate && this.refreshVertices(), this.containerUpdateTransform() }, b }(h.default); c.default = i }, { "./Mesh": 166 }], 170: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = a("../../core"), f = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(e), g = a("../Mesh"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = function() { function a(b) { d(this, a), this.renderer = b } return a.prototype.render = function(a) { var b = this.renderer, c = b.context, d = a.worldTransform, e = b.resolution; b.roundPixels ? c.setTransform(d.a * e, d.b * e, d.c * e, d.d * e, d.tx * e | 0, d.ty * e | 0) : c.setTransform(d.a * e, d.b * e, d.c * e, d.d * e, d.tx * e, d.ty * e), b.context.globalAlpha = a.worldAlpha, b.setBlendMode(a.blendMode), a.drawMode === h.default.DRAW_MODES.TRIANGLE_MESH ? this._renderTriangleMesh(a) : this._renderTriangles(a) }, a.prototype._renderTriangleMesh = function(a) { for (var b = a.vertices.length / 2, c = 0; c < b - 2; c++) { var d = 2 * c; this._renderDrawTriangle(a, d, d + 2, d + 4) } }, a.prototype._renderTriangles = function(a) { for (var b = a.indices, c = b.length, d = 0; d < c; d += 3) { var e = 2 * b[d], f = 2 * b[d + 1], g = 2 * b[d + 2]; this._renderDrawTriangle(a, e, f, g) } }, a.prototype._renderDrawTriangle = function(a, b, c, d) { var e = this.renderer.context, f = a.uvs, g = a.vertices, h = a._texture; if (h.valid) { var i = h.baseTexture, j = i.source, k = i.width, l = i.height, m = void 0, n = void 0, o = void 0, p = void 0, q = void 0, r = void 0; if (a.uploadUvTransform) { var s = a._uvTransform.mapCoord; m = (f[b] * s.a + f[b + 1] * s.c + s.tx) * i.width, n = (f[c] * s.a + f[c + 1] * s.c + s.tx) * i.width, o = (f[d] * s.a + f[d + 1] * s.c + s.tx) * i.width, p = (f[b] * s.b + f[b + 1] * s.d + s.ty) * i.height, q = (f[c] * s.b + f[c + 1] * s.d + s.ty) * i.height, r = (f[d] * s.b + f[d + 1] * s.d + s.ty) * i.height } else m = f[b] * i.width, n = f[c] * i.width, o = f[d] * i.width, p = f[b + 1] * i.height, q = f[c + 1] * i.height, r = f[d + 1] * i.height; var t = g[b], u = g[c], v = g[d], w = g[b + 1], x = g[c + 1], y = g[d + 1], z = a.canvasPadding / this.renderer.resolution; if (z > 0) { var A = z / Math.abs(a.worldTransform.a), B = z / Math.abs(a.worldTransform.d), C = (t + u + v) / 3, D = (w + x + y) / 3, E = t - C, F = w - D, G = Math.sqrt(E * E + F * F); t = C + E / G * (G + A), w = D + F / G * (G + B), E = u - C, F = x - D, G = Math.sqrt(E * E + F * F), u = C + E / G * (G + A), x = D + F / G * (G + B), E = v - C, F = y - D, G = Math.sqrt(E * E + F * F), v = C + E / G * (G + A), y = D + F / G * (G + B) } e.save(), e.beginPath(), e.moveTo(t, w), e.lineTo(u, x), e.lineTo(v, y), e.closePath(), e.clip(); var H = m * q + p * o + n * r - q * o - p * n - m * r, I = t * q + p * v + u * r - q * v - p * u - t * r, J = m * u + t * o + n * v - u * o - t * n - m * v, K = m * q * v + p * u * o + t * n * r - t * q * o - p * n * v - m * u * r, L = w * q + p * y + x * r - q * y - p * x - w * r, M = m * x + w * o + n * y - x * o - w * n - m * y, N = m * q * y + p * x * o + w * n * r - w * q * o - p * n * y - m * x * r; e.transform(I / H, L / H, J / H, M / H, K / H, N / H), e.drawImage(j, 0, 0, k * i.resolution, l * i.resolution, 0, 0, k, l), e.restore(), this.renderer.invalidateBlendMode() } }, a.prototype.renderMeshFlat = function(a) { var b = this.renderer.context, c = a.vertices, d = c.length / 2; b.beginPath(); for (var e = 1; e < d - 2; ++e) { var f = 2 * e, g = c[f], h = c[f + 1], i = c[f + 2], j = c[f + 3], k = c[f + 4], l = c[f + 5]; b.moveTo(g, h), b.lineTo(i, j), b.lineTo(k, l) } b.fillStyle = "#FF0000", b.fill(), b.closePath() }, a.prototype.destroy = function() { this.renderer = null }, a }(); c.default = i, f.CanvasRenderer.registerPlugin("mesh", i) }, { "../../core": 65, "../Mesh": 166 }], 171: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0; var e = a("./Mesh"); Object.defineProperty(c, "Mesh", { enumerable: !0, get: function() { return d(e).default } }); var f = a("./webgl/MeshRenderer"); Object.defineProperty(c, "MeshRenderer", { enumerable: !0, get: function() { return d(f).default } }); var g = a("./canvas/CanvasMeshRenderer"); Object.defineProperty(c, "CanvasMeshRenderer", { enumerable: !0, get: function() { return d(g).default } }); var h = a("./Plane"); Object.defineProperty(c, "Plane", { enumerable: !0, get: function() { return d(h).default } }); var i = a("./NineSlicePlane"); Object.defineProperty(c, "NineSlicePlane", { enumerable: !0, get: function() { return d(i).default } }); var j = a("./Rope"); Object.defineProperty(c, "Rope", { enumerable: !0, get: function() { return d(j).default } }) }, { "./Mesh": 166, "./NineSlicePlane": 167, "./Plane": 168, "./Rope": 169, "./canvas/CanvasMeshRenderer": 170, "./webgl/MeshRenderer": 172 }], 172: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("../../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = a("pixi-gl-core"), k = d(j), l = a("../Mesh"), m = d(l), n = (a("path"), i.Matrix.IDENTITY), o = function(a) { function b(c) { e(this, b); var d = f(this, a.call(this, c)); return d.shader = null, d } return g(b, a), b.prototype.onContextChange = function() { var a = this.renderer.gl; this.shader = new i.Shader(a, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", "varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n") }, b.prototype.render = function(a) { var b = this.renderer, c = b.gl, d = a._texture; if (d.valid) { var e = a._glDatas[b.CONTEXT_UID]; e || (b.bindVao(null), e = { shader: this.shader, vertexBuffer: k.default.GLBuffer.createVertexBuffer(c, a.vertices, c.STREAM_DRAW), uvBuffer: k.default.GLBuffer.createVertexBuffer(c, a.uvs, c.STREAM_DRAW), indexBuffer: k.default.GLBuffer.createIndexBuffer(c, a.indices, c.STATIC_DRAW), vao: null, dirty: a.dirty, indexDirty: a.indexDirty, vertexDirty: a.vertexDirty }, e.vao = new k.default.VertexArrayObject(c).addIndex(e.indexBuffer).addAttribute(e.vertexBuffer, e.shader.attributes.aVertexPosition, c.FLOAT, !1, 8, 0).addAttribute(e.uvBuffer, e.shader.attributes.aTextureCoord, c.FLOAT, !1, 8, 0), a._glDatas[b.CONTEXT_UID] = e), b.bindVao(e.vao), a.dirty !== e.dirty && (e.dirty = a.dirty, e.uvBuffer.upload(a.uvs)), a.indexDirty !== e.indexDirty && (e.indexDirty = a.indexDirty, e.indexBuffer.upload(a.indices)), a.vertexDirty !== e.vertexDirty && (e.vertexDirty = a.vertexDirty, e.vertexBuffer.upload(a.vertices)), b.bindShader(e.shader), e.shader.uniforms.uSampler = b.bindTexture(d), b.state.setBlendMode(i.utils.correctBlendMode(a.blendMode, d.baseTexture.premultipliedAlpha)), e.shader.uniforms.uTransform && (a.uploadUvTransform ? e.shader.uniforms.uTransform = a._uvTransform.mapCoord.toArray(!0) : e.shader.uniforms.uTransform = n.toArray(!0)), e.shader.uniforms.translationMatrix = a.worldTransform.toArray(!0), e.shader.uniforms.uColor = i.utils.premultiplyRgba(a.tintRgb, a.worldAlpha, e.shader.uniforms.uColor, d.baseTexture.premultipliedAlpha); var f = a.drawMode === m.default.DRAW_MODES.TRIANGLE_MESH ? c.TRIANGLE_STRIP : c.TRIANGLES; e.vao.draw(f, a.indices.length, 0) } }, b }(i.ObjectRenderer); c.default = o, i.WebGLRenderer.registerPlugin("mesh", o) }, { "../../core": 65, "../Mesh": 166, path: 8, "pixi-gl-core": 15 }], 173: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = function() { function a(a, b) { for (var c = 0; c < b.length; c++) { var d = b[c]; d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(), h = a("../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = a("../core/utils"), k = function(a) { function b() { var c = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1500, f = arguments[1], g = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 16384, h = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; d(this, b); var j = e(this, a.call(this)); return g > 16384 && (g = 16384), g > c && (g = c), j._properties = [!1, !0, !1, !1, !1], j._maxSize = c, j._batchSize = g, j._glBuffers = {}, j._bufferUpdateIDs = [], j._updateID = 0, j.interactiveChildren = !1, j.blendMode = i.BLEND_MODES.NORMAL, j.autoResize = h, j.roundPixels = !0, j.baseTexture = null, j.setProperties(f), j._tint = 0, j.tintRgb = new Float32Array(4), j.tint = 16777215, j } return f(b, a), b.prototype.setProperties = function(a) { a && (this._properties[0] = "vertices" in a || "scale" in a ? !!a.vertices || !!a.scale : this._properties[0], this._properties[1] = "position" in a ? !!a.position : this._properties[1], this._properties[2] = "rotation" in a ? !!a.rotation : this._properties[2], this._properties[3] = "uvs" in a ? !!a.uvs : this._properties[3], this._properties[4] = "tint" in a || "alpha" in a ? !!a.tint || !!a.alpha : this._properties[4]) }, b.prototype.updateTransform = function() { this.displayObjectUpdateTransform() }, b.prototype.renderWebGL = function(a) { var b = this; this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable && (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture, this.baseTexture.hasLoaded || this.baseTexture.once("update", function() { return b.onChildrenChange(0) })), a.setObjectRenderer(a.plugins.particle), a.plugins.particle.render(this)) }, b.prototype.onChildrenChange = function(a) { for (var b = Math.floor(a / this._batchSize); this._bufferUpdateIDs.length < b;) this._bufferUpdateIDs.push(0); this._bufferUpdateIDs[b] = ++this._updateID }, b.prototype.renderCanvas = function(a) { if (this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable) { var b = a.context, c = this.worldTransform, d = !0, e = 0, f = 0, g = 0, h = 0; a.setBlendMode(this.blendMode), b.globalAlpha = this.worldAlpha, this.displayObjectUpdateTransform(); for (var i = 0; i < this.children.length; ++i) { var j = this.children[i]; if (j.visible) { var k = j._texture.frame; if (b.globalAlpha = this.worldAlpha * j.alpha, j.rotation % (2 * Math.PI) == 0) d && (b.setTransform(c.a, c.b, c.c, c.d, c.tx * a.resolution, c.ty * a.resolution), d = !1), e = j.anchor.x * (-k.width * j.scale.x) + j.position.x + .5, f = j.anchor.y * (-k.height * j.scale.y) + j.position.y + .5, g = k.width * j.scale.x, h = k.height * j.scale.y; else { d || (d = !0), j.displayObjectUpdateTransform(); var l = j.worldTransform; a.roundPixels ? b.setTransform(l.a, l.b, l.c, l.d, l.tx * a.resolution | 0, l.ty * a.resolution | 0) : b.setTransform(l.a, l.b, l.c, l.d, l.tx * a.resolution, l.ty * a.resolution), e = j.anchor.x * -k.width + .5, f = j.anchor.y * -k.height + .5, g = k.width, h = k.height } var m = j._texture.baseTexture.resolution; b.drawImage(j._texture.baseTexture.source, k.x * m, k.y * m, k.width * m, k.height * m, e * a.resolution, f * a.resolution, g * a.resolution, h * a.resolution) } } } }, b.prototype.destroy = function(b) { if (a.prototype.destroy.call(this, b), this._buffers) for (var c = 0; c < this._buffers.length; ++c) this._buffers[c].destroy(); this._properties = null, this._buffers = null, this._bufferUpdateIDs = null }, g(b, [{ key: "tint", get: function() { return this._tint }, set: function(a) { this._tint = a, (0, j.hex2rgb)(a, this.tintRgb) } }]), b }(i.Container); c.default = k }, { "../core": 65, "../core/utils": 125 }], 174: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0; var e = a("./ParticleContainer"); Object.defineProperty(c, "ParticleContainer", { enumerable: !0, get: function() { return d(e).default } }); var f = a("./webgl/ParticleRenderer"); Object.defineProperty(c, "ParticleRenderer", { enumerable: !0, get: function() { return d(f).default } }) }, { "./ParticleContainer": 173, "./webgl/ParticleRenderer": 176 }], 175: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var f = a("pixi-gl-core"), g = d(f), h = a("../../core/utils/createIndicesForQuads"), i = d(h), j = function() { function a(b, c, d, f) { e(this, a), this.gl = b, this.size = f, this.dynamicProperties = [], this.staticProperties = []; for (var g = 0; g < c.length; ++g) { var h = c[g]; h = { attribute: h.attribute, size: h.size, uploadFunction: h.uploadFunction, unsignedByte: h.unsignedByte, offset: h.offset }, d[g] ? this.dynamicProperties.push(h) : this.staticProperties.push(h) } this.staticStride = 0, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.dynamicStride = 0, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this._updateID = 0, this.initBuffers() } return a.prototype.initBuffers = function() { var a = this.gl, b = 0; this.indices = (0, i.default)(this.size), this.indexBuffer = g.default.GLBuffer.createIndexBuffer(a, this.indices, a.STATIC_DRAW), this.dynamicStride = 0; for (var c = 0; c < this.dynamicProperties.length; ++c) { var d = this.dynamicProperties[c]; d.offset = b, b += d.size, this.dynamicStride += d.size } var e = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4); this.dynamicData = new Float32Array(e), this.dynamicDataUint32 = new Uint32Array(e), this.dynamicBuffer = g.default.GLBuffer.createVertexBuffer(a, e, a.STREAM_DRAW); var f = 0; this.staticStride = 0; for (var h = 0; h < this.staticProperties.length; ++h) { var j = this.staticProperties[h]; j.offset = f, f += j.size, this.staticStride += j.size } var k = new ArrayBuffer(this.size * this.staticStride * 4 * 4); this.staticData = new Float32Array(k), this.staticDataUint32 = new Uint32Array(k), this.staticBuffer = g.default.GLBuffer.createVertexBuffer(a, k, a.STATIC_DRAW), this.vao = new g.default.VertexArrayObject(a).addIndex(this.indexBuffer); for (var l = 0; l < this.dynamicProperties.length; ++l) { var m = this.dynamicProperties[l]; m.unsignedByte ? this.vao.addAttribute(this.dynamicBuffer, m.attribute, a.UNSIGNED_BYTE, !0, 4 * this.dynamicStride, 4 * m.offset) : this.vao.addAttribute(this.dynamicBuffer, m.attribute, a.FLOAT, !1, 4 * this.dynamicStride, 4 * m.offset) } for (var n = 0; n < this.staticProperties.length; ++n) { var o = this.staticProperties[n]; o.unsignedByte ? this.vao.addAttribute(this.staticBuffer, o.attribute, a.UNSIGNED_BYTE, !0, 4 * this.staticStride, 4 * o.offset) : this.vao.addAttribute(this.staticBuffer, o.attribute, a.FLOAT, !1, 4 * this.staticStride, 4 * o.offset) } }, a.prototype.uploadDynamic = function(a, b, c) { for (var d = 0; d < this.dynamicProperties.length; d++) { var e = this.dynamicProperties[d]; e.uploadFunction(a, b, c, e.unsignedByte ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, e.offset) } this.dynamicBuffer.upload() }, a.prototype.uploadStatic = function(a, b, c) { for (var d = 0; d < this.staticProperties.length; d++) { var e = this.staticProperties[d]; e.uploadFunction(a, b, c, e.unsignedByte ? this.staticDataUint32 : this.staticData, this.staticStride, e.offset) } this.staticBuffer.upload() }, a.prototype.destroy = function() { this.dynamicProperties = null, this.dynamicBuffer.destroy(), this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this.staticProperties = null, this.staticBuffer.destroy(), this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null }, a }(); c.default = j }, { "../../core/utils/createIndicesForQuads": 123, "pixi-gl-core": 15 }], 176: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } function e(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function f(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function g(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var h = a("../../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = a("./ParticleShader"), k = d(j), l = a("./ParticleBuffer"), m = d(l), n = a("../../core/utils"), o = function(a) { function b(c) { e(this, b); var d = f(this, a.call(this, c)); return d.shader = null, d.indexBuffer = null, d.properties = null, d.tempMatrix = new i.Matrix, d.CONTEXT_UID = 0, d } return g(b, a), b.prototype.onContextChange = function() { var a = this.renderer.gl; this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.shader = new k.default(a), this.properties = [{ attribute: this.shader.attributes.aVertexPosition, size: 2, uploadFunction: this.uploadVertices, offset: 0 }, { attribute: this.shader.attributes.aPositionCoord, size: 2, uploadFunction: this.uploadPosition, offset: 0 }, { attribute: this.shader.attributes.aRotation, size: 1, uploadFunction: this.uploadRotation, offset: 0 }, { attribute: this.shader.attributes.aTextureCoord, size: 2, uploadFunction: this.uploadUvs, offset: 0 }, { attribute: this.shader.attributes.aColor, size: 1, unsignedByte: !0, uploadFunction: this.uploadTint, offset: 0 }] }, b.prototype.start = function() { this.renderer.bindShader(this.shader) }, b.prototype.render = function(a) { var b = a.children, c = a._maxSize, d = a._batchSize, e = this.renderer, f = b.length; if (0 !== f) { f > c && (f = c); var g = a._glBuffers[e.CONTEXT_UID]; g || (g = a._glBuffers[e.CONTEXT_UID] = this.generateBuffers(a)); var h = b[0]._texture.baseTexture; this.renderer.setBlendMode(i.utils.correctBlendMode(a.blendMode, h.premultipliedAlpha)); var j = e.gl, k = a.worldTransform.copy(this.tempMatrix); k.prepend(e._activeRenderTarget.projectionMatrix), this.shader.uniforms.projectionMatrix = k.toArray(!0), this.shader.uniforms.uColor = i.utils.premultiplyRgba(a.tintRgb, a.worldAlpha, this.shader.uniforms.uColor, h.premultipliedAlpha), this.shader.uniforms.uSampler = e.bindTexture(h); for (var l = !1, m = 0, n = 0; m < f; m += d, n += 1) { var o = f - m; if (o > d && (o = d), n >= g.length) { if (!a.autoResize) break; g.push(this._generateOneMoreBuffer(a)) } var p = g[n]; p.uploadDynamic(b, m, o); var q = a._bufferUpdateIDs[n] || 0; l = l || p._updateID < q, l && (p._updateID = a._updateID, p.uploadStatic(b, m, o)), e.bindVao(p.vao), p.vao.draw(j.TRIANGLES, 6 * o) } } }, b.prototype.generateBuffers = function(a) { for (var b = this.renderer.gl, c = [], d = a._maxSize, e = a._batchSize, f = a._properties, g = 0; g < d; g += e) c.push(new m.default(b, this.properties, f, e)); return c }, b.prototype._generateOneMoreBuffer = function(a) { var b = this.renderer.gl, c = a._batchSize, d = a._properties; return new m.default(b, this.properties, d, c) }, b.prototype.uploadVertices = function(a, b, c, d, e, f) { for (var g = 0, h = 0, i = 0, j = 0, k = 0; k < c; ++k) { var l = a[b + k], m = l._texture, n = l.scale.x, o = l.scale.y, p = m.trim, q = m.orig; p ? (h = p.x - l.anchor.x * q.width, g = h + p.width, j = p.y - l.anchor.y * q.height, i = j + p.height) : (g = q.width * (1 - l.anchor.x), h = q.width * -l.anchor.x, i = q.height * (1 - l.anchor.y), j = q.height * -l.anchor.y), d[f] = h * n, d[f + 1] = j * o, d[f + e] = g * n, d[f + e + 1] = j * o, d[f + 2 * e] = g * n, d[f + 2 * e + 1] = i * o, d[f + 3 * e] = h * n, d[f + 3 * e + 1] = i * o, f += 4 * e } }, b.prototype.uploadPosition = function(a, b, c, d, e, f) { for (var g = 0; g < c; g++) { var h = a[b + g].position; d[f] = h.x, d[f + 1] = h.y, d[f + e] = h.x, d[f + e + 1] = h.y, d[f + 2 * e] = h.x, d[f + 2 * e + 1] = h.y, d[f + 3 * e] = h.x, d[f + 3 * e + 1] = h.y, f += 4 * e } }, b.prototype.uploadRotation = function(a, b, c, d, e, f) { for (var g = 0; g < c; g++) { var h = a[b + g].rotation; d[f] = h, d[f + e] = h, d[f + 2 * e] = h, d[f + 3 * e] = h, f += 4 * e } }, b.prototype.uploadUvs = function(a, b, c, d, e, f) { for (var g = 0; g < c; ++g) { var h = a[b + g]._texture._uvs; h ? (d[f] = h.x0, d[f + 1] = h.y0, d[f + e] = h.x1, d[f + e + 1] = h.y1, d[f + 2 * e] = h.x2, d[f + 2 * e + 1] = h.y2, d[f + 3 * e] = h.x3, d[f + 3 * e + 1] = h.y3, f += 4 * e) : (d[f] = 0, d[f + 1] = 0, d[f + e] = 0, d[f + e + 1] = 0, d[f + 2 * e] = 0, d[f + 2 * e + 1] = 0, d[f + 3 * e] = 0, d[f + 3 * e + 1] = 0, f += 4 * e) } }, b.prototype.uploadTint = function(a, b, c, d, e, f) { for (var g = 0; g < c; ++g) { var h = a[b + g], i = h._texture.baseTexture.premultipliedAlpha, j = h.alpha, k = j < 1 && i ? (0, n.premultiplyTint)(h._tintRGB, j) : h._tintRGB + (255 * j << 24); d[f] = k, d[f + e] = k, d[f + 2 * e] = k, d[f + 3 * e] = k, f += 4 * e } }, b.prototype.destroy = function() { this.renderer.gl && this.renderer.gl.deleteBuffer(this.indexBuffer), a.prototype.destroy.call(this), this.shader.destroy(), this.indices = null, this.tempMatrix = null }, b }(i.ObjectRenderer); c.default = o, i.WebGLRenderer.registerPlugin("particle", o) }, { "../../core": 65, "../../core/utils": 125, "./ParticleBuffer": 175, "./ParticleShader": 177 }], 177: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } c.__esModule = !0; var g = a("../../core/Shader"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = function(a) { function b(c) { return d(this, b), e(this, a.call(this, c, ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "attribute vec2 aPositionCoord;", "attribute float aRotation;", "uniform mat3 projectionMatrix;", "uniform vec4 uColor;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "void main(void){", " float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);", " float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);", " vec2 v = vec2(x, y);", " v = v + aPositionCoord;", " gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);", " vTextureCoord = aTextureCoord;", " vColor = aColor * uColor;", "}"].join("\n"), ["varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void){", " vec4 color = texture2D(uSampler, vTextureCoord) * vColor;", " gl_FragColor = color;", "}"].join("\n"))) } return f(b, a), b }(h.default); c.default = i }, { "../../core/Shader": 44 }], 178: [function(a, b, c) { "use strict"; Math.sign || (Math.sign = function(a) { return a = Number(a), 0 === a || isNaN(a) ? a : a > 0 ? 1 : -1 }) }, {}], 179: [function(a, b, c) { "use strict"; Number.isInteger || (Number.isInteger = function(a) { return "number" == typeof a && isFinite(a) && Math.floor(a) === a }) }, {}], 180: [function(a, b, c) { "use strict"; var d = a("object-assign"), e = function(a) { return a && a.__esModule ? a : { default: a } }(d); Object.assign || (Object.assign = e.default) }, { "object-assign": 6 }], 181: [function(a, b, c) { "use strict"; a("./Object.assign"), a("./requestAnimationFrame"), a("./Math.sign"), a("./Number.isInteger"), window.ArrayBuffer || (window.ArrayBuffer = Array), window.Float32Array || (window.Float32Array = Array), window.Uint32Array || (window.Uint32Array = Array), window.Uint16Array || (window.Uint16Array = Array) }, { "./Math.sign": 178, "./Number.isInteger": 179, "./Object.assign": 180, "./requestAnimationFrame": 182 }], 182: [function(a, b, c) { (function(a) { "use strict"; if (Date.now && Date.prototype.getTime || (Date.now = function() { return (new Date).getTime() }), !a.performance || !a.performance.now) { var b = Date.now(); a.performance || (a.performance = {}), a.performance.now = function() { return Date.now() - b } } for (var c = Date.now(), d = ["ms", "moz", "webkit", "o"], e = 0; e < d.length && !a.requestAnimationFrame; ++e) { var f = d[e]; a.requestAnimationFrame = a[f + "RequestAnimationFrame"], a.cancelAnimationFrame = a[f + "CancelAnimationFrame"] || a[f + "CancelRequestAnimationFrame"] } a.requestAnimationFrame || (a.requestAnimationFrame = function(a) { if ("function" != typeof a) throw new TypeError(a + "is not a function"); var b = Date.now(), d = 16 + c - b; return d < 0 && (d = 0), c = b, setTimeout(function() { c = Date.now(), a(performance.now()) }, d) }), a.cancelAnimationFrame || (a.cancelAnimationFrame = function(a) { return clearTimeout(a) }) }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}], 183: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { var c = !1; if (a && a._textures && a._textures.length) for (var d = 0; d < a._textures.length; d++) if (a._textures[d] instanceof m.Texture) { var e = a._textures[d].baseTexture; - 1 === b.indexOf(e) && (b.push(e), c = !0) } return c } function f(a, b) { return a instanceof m.BaseTexture && (-1 === b.indexOf(a) && b.push(a), !0) } function g(a, b) { if (a._texture && a._texture instanceof m.Texture) { var c = a._texture.baseTexture; return -1 === b.indexOf(c) && b.push(c), !0 } return !1 } function h(a, b) { return b instanceof m.Text && (b.updateText(!0), !0) } function i(a, b) { if (b instanceof m.TextStyle) { var c = b.toFontString(); return m.TextMetrics.measureFont(c), !0 } return !1 } function j(a, b) { if (a instanceof m.Text) { -1 === b.indexOf(a.style) && b.push(a.style), -1 === b.indexOf(a) && b.push(a); var c = a._texture.baseTexture; return -1 === b.indexOf(c) && b.push(c), !0 } return !1 } function k(a, b) { return a instanceof m.TextStyle && (-1 === b.indexOf(a) && b.push(a), !0) } c.__esModule = !0; var l = a("../core"), m = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(l), n = a("./limiters/CountLimiter"), o = function(a) { return a && a.__esModule ? a : { default: a } }(n), p = m.ticker.shared; m.settings.UPLOADS_PER_FRAME = 4; var q = function() { function a(b) { var c = this; d(this, a), this.limiter = new o.default(m.settings.UPLOADS_PER_FRAME), this.renderer = b, this.uploadHookHelper = null, this.queue = [], this.addHooks = [], this.uploadHooks = [], this.completes = [], this.ticking = !1, this.delayedTick = function() { c.queue && c.prepareItems() }, this.registerFindHook(j), this.registerFindHook(k), this.registerFindHook(e), this.registerFindHook(f), this.registerFindHook(g), this.registerUploadHook(h), this.registerUploadHook(i) } return a.prototype.upload = function(a, b) { "function" == typeof a && (b = a, a = null), a && this.add(a), this.queue.length ? (b && this.completes.push(b), this.ticking || (this.ticking = !0, p.addOnce(this.tick, this, m.UPDATE_PRIORITY.UTILITY))) : b && b() }, a.prototype.tick = function() { setTimeout(this.delayedTick, 0) }, a.prototype.prepareItems = function() { for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload();) { var a = this.queue[0], b = !1; if (a && !a._destroyed) for (var c = 0, d = this.uploadHooks.length; c < d; c++) if (this.uploadHooks[c](this.uploadHookHelper, a)) { this.queue.shift(), b = !0; break } b || this.queue.shift() } if (this.queue.length) p.addOnce(this.tick, this, m.UPDATE_PRIORITY.UTILITY); else { this.ticking = !1; var e = this.completes.slice(0); this.completes.length = 0; for (var f = 0, g = e.length; f < g; f++) e[f]() } }, a.prototype.registerFindHook = function(a) { return a && this.addHooks.push(a), this }, a.prototype.registerUploadHook = function(a) { return a && this.uploadHooks.push(a), this }, a.prototype.add = function(a) { for (var b = 0, c = this.addHooks.length; b < c && !this.addHooks[b](a, this.queue); b++); if (a instanceof m.Container) for (var d = a.children.length - 1; d >= 0; d--) this.add(a.children[d]); return this }, a.prototype.destroy = function() { this.ticking && p.remove(this.tick, this), this.ticking = !1, this.addHooks = null, this.uploadHooks = null, this.renderer = null, this.completes = null, this.queue = null, this.limiter = null, this.uploadHookHelper = null }, a }(); c.default = q }, { "../core": 65, "./limiters/CountLimiter": 186 }], 184: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } function g(a, b) { if (b instanceof i.BaseTexture) { var c = b.source, d = 0 === c.width ? a.canvas.width : Math.min(a.canvas.width, c.width), e = 0 === c.height ? a.canvas.height : Math.min(a.canvas.height, c.height); return a.ctx.drawImage(c, 0, 0, d, e, 0, 0, a.canvas.width, a.canvas.height), !0 } return !1 } c.__esModule = !0; var h = a("../../core"), i = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(h), j = a("../BasePrepare"), k = function(a) { return a && a.__esModule ? a : { default: a } }(j), l = 16, m = function(a) { function b(c) { d(this, b); var f = e(this, a.call(this, c)); return f.uploadHookHelper = f, f.canvas = document.createElement("canvas"), f.canvas.width = l, f.canvas.height = l, f.ctx = f.canvas.getContext("2d"), f.registerUploadHook(g), f } return f(b, a), b.prototype.destroy = function() { a.prototype.destroy.call(this), this.ctx = null, this.canvas = null }, b }(k.default); c.default = m, i.CanvasRenderer.registerPlugin("prepare", m) }, { "../../core": 65, "../BasePrepare": 183 }], 185: [function(a, b, c) { "use strict"; function d(a) { return a && a.__esModule ? a : { default: a } } c.__esModule = !0; var e = a("./webgl/WebGLPrepare"); Object.defineProperty(c, "webgl", { enumerable: !0, get: function() { return d(e).default } }); var f = a("./canvas/CanvasPrepare"); Object.defineProperty(c, "canvas", { enumerable: !0, get: function() { return d(f).default } }); var g = a("./BasePrepare"); Object.defineProperty(c, "BasePrepare", { enumerable: !0, get: function() { return d(g).default } }); var h = a("./limiters/CountLimiter"); Object.defineProperty(c, "CountLimiter", { enumerable: !0, get: function() { return d(h).default } }); var i = a("./limiters/TimeLimiter"); Object.defineProperty(c, "TimeLimiter", { enumerable: !0, get: function() { return d(i).default } }) }, { "./BasePrepare": 183, "./canvas/CanvasPrepare": 184, "./limiters/CountLimiter": 186, "./limiters/TimeLimiter": 187, "./webgl/WebGLPrepare": 188 }], 186: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(b) { d(this, a), this.maxItemsPerFrame = b, this.itemsLeft = 0 } return a.prototype.beginFrame = function() { this.itemsLeft = this.maxItemsPerFrame }, a.prototype.allowedToUpload = function() { return this.itemsLeft-- > 0 }, a }(); c.default = e }, {}], 187: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } c.__esModule = !0; var e = function() { function a(b) { d(this, a), this.maxMilliseconds = b, this.frameStart = 0 } return a.prototype.beginFrame = function() { this.frameStart = Date.now() }, a.prototype.allowedToUpload = function() { return Date.now() - this.frameStart < this.maxMilliseconds }, a }(); c.default = e }, {}], 188: [function(a, b, c) { "use strict"; function d(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") } function e(a, b) { if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !b || "object" != typeof b && "function" != typeof b ? a : b } function f(a, b) { if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b); a.prototype = Object.create(b && b.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b) } function g(a, b) { return b instanceof k.BaseTexture && (b._glTextures[a.CONTEXT_UID] || a.textureManager.updateTexture(b), !0) } function h(a, b) { return b instanceof k.Graphics && ((b.dirty || b.clearDirty || !b._webGL[a.plugins.graphics.CONTEXT_UID]) && a.plugins.graphics.updateGraphics(b), !0) } function i(a, b) { return a instanceof k.Graphics && (b.push(a), !0) } c.__esModule = !0; var j = a("../../core"), k = function(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b }(j), l = a("../BasePrepare"), m = function(a) { return a && a.__esModule ? a : { default: a } }(l), n = function(a) { function b(c) { d(this, b); var f = e(this, a.call(this, c)); return f.uploadHookHelper = f.renderer, f.registerFindHook(i), f.registerUploadHook(g), f.registerUploadHook(h), f } return f(b, a), b }(m.default); c.default = n, k.WebGLRenderer.registerPlugin("prepare", n) }, { "../../core": 65, "../BasePrepare": 183 }], 189: [function(a, b, c) { (function(b) { "use strict"; function d(a) { if (a && a.__esModule) return a; var b = {}; if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]); return b.default = a, b } c.__esModule = !0, c.loader = c.prepare = c.particles = c.mesh = c.loaders = c.interaction = c.filters = c.extras = c.extract = c.accessibility = void 0; var e = a("./polyfill"); Object.keys(e).forEach(function(a) { "default" !== a && "__esModule" !== a && Object.defineProperty(c, a, { enumerable: !0, get: function() { return e[a] } }) }); var f = a("./core"); Object.keys(f).forEach(function(a) { "default" !== a && "__esModule" !== a && Object.defineProperty(c, a, { enumerable: !0, get: function() { return f[a] } }) }); var g = a("./deprecation"), h = function(a) { return a && a.__esModule ? a : { default: a } }(g), i = a("./accessibility"), j = d(i), k = a("./extract"), l = d(k), m = a("./extras"), n = d(m), o = a("./filters"), p = d(o), q = a("./interaction"), r = d(q), s = a("./loaders"), t = d(s), u = a("./mesh"), v = d(u), w = a("./particles"), x = d(w), y = a("./prepare"), z = d(y); f.utils.mixins.performMixins(); var A = t.shared || null; c.accessibility = j, c.extract = l, c.extras = n, c.filters = p, c.interaction = r, c.loaders = t, c.mesh = v, c.particles = x, c.prepare = z, c.loader = A, "function" == typeof h.default && (0, h.default)(c), b.PIXI = c }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, { "./accessibility": 42, "./core": 65, "./deprecation": 131, "./extract": 133, "./extras": 141, "./filters": 153, "./interaction": 159, "./loaders": 162, "./mesh": 171, "./particles": 174, "./polyfill": 181, "./prepare": 185 }] }, {}, [189])(189) }), function a(b, c, d) { function e(g, h) { if (!c[g]) { if (!b[g]) { var i = "function" == typeof require && require; if (!h && i) return i(g, !0); if (f) return f(g, !0); var j = new Error("Cannot find module '" + g + "'"); throw j.code = "MODULE_NOT_FOUND", j } var k = c[g] = { exports: {} }; b[g][0].call(k.exports, function(a) { var c = b[g][1][a]; return e(c || a) }, k, k.exports, a, b, c, d) } return c[g].exports } for (var f = "function" == typeof require && require, g = 0; g < d.length; g++) e(d[g]); return e }({ 1: [function(a, b, c) { (function(b) { function d(a) { a = a.replace(/[\ufe00-\ufe0f]/g, ""); for (var b = [], d = 0; d < a.length; d++) b.push(("0000" + a.charCodeAt(d).toString(16)).slice(-4)); return c.basePath.replace(/\/$/, "") + "/" + b.join("-") + ".png" } var e = a("path"); c.imageDir = e.join(b, "images"), c.basePath = c.imageDir, c.regex = a("./regex"), c.nativeSupport = function() { if ("undefined" == typeof document) return !1; var a = document.createElement("canvas"); if (!a.getContext) return !1; var b = a.getContext("2d"); return b.textBaseline = "top", b.font = "32px sans-serif", b.fillText("😃", 0, 0), 0 !== b.getImageData(16, 16, 1, 1).data[0] }(); var f = new RegExp("^(" + c.regex.toString().slice(1, -2) + ")$"); c.getImage = function(a) { return f.test(a) ? d(a) : null }, c.replace = function(a) { return a = "" + a, c.nativeSupport ? a : a.replace(c.regex, function(a) { return '<img class="emoji" src="' + d(a) + '" alt="' + a + '">' }) } }).call(this, "/") }, { "./regex": 3, path: 4 }], 2: [function(a, b, c) { window.emoji = window.emoji || a("./index.js") }, { "./index.js": 1 }], 3: [function(a, b, c) { b.exports = /(?:\ud83e\ufe0f?\udd18\ufe0f?\ud83c\ufe0f?\udfff|\ud83e\ufe0f?\udd18\ufe0f?\ud83c\ufe0f?\udffe|\ud83e\ufe0f?\udd18\ufe0f?\ud83c\ufe0f?\udffd|\ud83e\ufe0f?\udd18\ufe0f?\ud83c\ufe0f?\udffc|\ud83e\ufe0f?\udd18\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udec0\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udec0\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udec0\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udec0\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udec0\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udeb6\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udeb6\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udeb6\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udeb6\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udeb6\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udeb5\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udeb5\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udeb5\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udeb5\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udeb5\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udeb4\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udeb4\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udeb4\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udeb4\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udeb4\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udea3\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udea3\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udea3\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udea3\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udea3\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\ude4f\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\ude4f\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\ude4f\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\ude4f\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\ude4f\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\ude4e\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\ude4e\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\ude4e\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\ude4e\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\ude4e\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\ude4d\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\ude4d\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\ude4d\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\ude4d\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\ude4d\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\ude4c\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\ude4c\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\ude4c\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\ude4c\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\ude4c\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\ude4b\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\ude4b\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\ude4b\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\ude4b\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\ude4b\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\ude47\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\ude47\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\ude47\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\ude47\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\ude47\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\ude46\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\ude46\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\ude46\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\ude46\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\ude46\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\ude45\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\ude45\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\ude45\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\ude45\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\ude45\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udd96\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udd96\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udd96\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udd96\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udd96\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udd95\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udd95\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udd95\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udd95\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udd95\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udd90\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udd90\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udd90\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udd90\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udd90\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udcaa\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udcaa\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udcaa\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udcaa\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udcaa\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc87\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc87\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc87\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc87\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc87\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc86\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc86\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc86\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc86\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc86\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc85\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc85\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc85\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc85\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc85\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc83\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc83\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc83\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc83\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc83\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc82\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc82\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc82\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc82\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc82\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc81\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc81\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc81\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc81\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc81\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc7c\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc7c\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc7c\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc7c\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc7c\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc78\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc78\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc78\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc78\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc78\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc77\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc77\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc77\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc77\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc77\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc76\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc76\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc76\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc76\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc76\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc75\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc75\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc75\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc75\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc75\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc74\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc74\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc74\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc74\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc74\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc73\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc73\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc73\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc73\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc73\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc72\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc72\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc72\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc72\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc72\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc71\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc71\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc71\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc71\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc71\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc70\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc70\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc70\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc70\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc70\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc6e\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc6e\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc6e\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc6e\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc6e\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc69\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc69\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc69\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc69\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc69\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc68\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc68\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc68\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc68\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc68\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc67\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc67\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc67\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc67\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc67\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc66\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc66\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc66\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc66\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc66\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc50\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc50\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc50\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc50\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc50\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc4f\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc4f\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc4f\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc4f\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc4f\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc4e\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc4e\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc4e\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc4e\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc4e\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc4d\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc4d\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc4d\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc4d\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc4d\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc4c\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc4c\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc4c\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc4c\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc4c\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc4b\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc4b\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc4b\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc4b\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc4b\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc4a\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc4a\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc4a\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc4a\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc4a\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc49\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc49\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc49\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc49\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc49\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc48\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc48\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc48\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc48\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc48\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc47\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc47\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc47\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc47\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc47\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc46\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc46\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc46\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc46\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc46\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc43\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc43\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc43\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc43\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc43\ufe0f?\ud83c\ufe0f?\udffb|\ud83d\ufe0f?\udc42\ufe0f?\ud83c\ufe0f?\udfff|\ud83d\ufe0f?\udc42\ufe0f?\ud83c\ufe0f?\udffe|\ud83d\ufe0f?\udc42\ufe0f?\ud83c\ufe0f?\udffd|\ud83d\ufe0f?\udc42\ufe0f?\ud83c\ufe0f?\udffc|\ud83d\ufe0f?\udc42\ufe0f?\ud83c\ufe0f?\udffb|\ud83c\ufe0f?\udfcb\ufe0f?\ud83c\ufe0f?\udfff|\ud83c\ufe0f?\udfcb\ufe0f?\ud83c\ufe0f?\udffe|\ud83c\ufe0f?\udfcb\ufe0f?\ud83c\ufe0f?\udffd|\ud83c\ufe0f?\udfcb\ufe0f?\ud83c\ufe0f?\udffc|\ud83c\ufe0f?\udfcb\ufe0f?\ud83c\ufe0f?\udffb|\ud83c\ufe0f?\udfca\ufe0f?\ud83c\ufe0f?\udfff|\ud83c\ufe0f?\udfca\ufe0f?\ud83c\ufe0f?\udffe|\ud83c\ufe0f?\udfca\ufe0f?\ud83c\ufe0f?\udffd|\ud83c\ufe0f?\udfca\ufe0f?\ud83c\ufe0f?\udffc|\ud83c\ufe0f?\udfca\ufe0f?\ud83c\ufe0f?\udffb|\ud83c\ufe0f?\udfc7\ufe0f?\ud83c\ufe0f?\udfff|\ud83c\ufe0f?\udfc7\ufe0f?\ud83c\ufe0f?\udffe|\ud83c\ufe0f?\udfc7\ufe0f?\ud83c\ufe0f?\udffd|\ud83c\ufe0f?\udfc7\ufe0f?\ud83c\ufe0f?\udffc|\ud83c\ufe0f?\udfc7\ufe0f?\ud83c\ufe0f?\udffb|\ud83c\ufe0f?\udfc4\ufe0f?\ud83c\ufe0f?\udfff|\ud83c\ufe0f?\udfc4\ufe0f?\ud83c\ufe0f?\udffe|\ud83c\ufe0f?\udfc4\ufe0f?\ud83c\ufe0f?\udffd|\ud83c\ufe0f?\udfc4\ufe0f?\ud83c\ufe0f?\udffc|\ud83c\ufe0f?\udfc4\ufe0f?\ud83c\ufe0f?\udffb|\ud83c\ufe0f?\udfc3\ufe0f?\ud83c\ufe0f?\udfff|\ud83c\ufe0f?\udfc3\ufe0f?\ud83c\ufe0f?\udffe|\ud83c\ufe0f?\udfc3\ufe0f?\ud83c\ufe0f?\udffd|\ud83c\ufe0f?\udfc3\ufe0f?\ud83c\ufe0f?\udffc|\ud83c\ufe0f?\udfc3\ufe0f?\ud83c\ufe0f?\udffb|\ud83c\ufe0f?\udf85\ufe0f?\ud83c\ufe0f?\udfff|\ud83c\ufe0f?\udf85\ufe0f?\ud83c\ufe0f?\udffe|\ud83c\ufe0f?\udf85\ufe0f?\ud83c\ufe0f?\udffd|\ud83c\ufe0f?\udf85\ufe0f?\ud83c\ufe0f?\udffc|\ud83c\ufe0f?\udf85\ufe0f?\ud83c\ufe0f?\udffb|\ud83c\ufe0f?\uddff\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\uddff\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddff\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddfe\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\uddfe\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddfd\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\uddfc\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddfc\ufe0f?\ud83c\ufe0f?\uddeb|\ud83c\ufe0f?\uddfb\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\uddfb\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\uddfb\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\uddfb\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddfb\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddfb\ufe0f?\ud83c\ufe0f?\udde8|\ud83c\ufe0f?\uddfb\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddfa\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\uddfa\ufe0f?\ud83c\ufe0f?\uddfe|\ud83c\ufe0f?\uddfa\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddfa\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddfa\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddfa\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddfb|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddef|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\udded|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\uddeb|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\udde9|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\udde8|\ud83c\ufe0f?\uddf9\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddfe|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddfd|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddfb|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddef|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\udded|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\udde9|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\udde8|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\udde7|\ud83c\ufe0f?\uddf8\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddf7\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\uddf7\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\uddf7\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddf7\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\uddf7\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddf6\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddfe|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\udded|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddeb|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddf5\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddf4\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddf5|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddeb|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\udde8|\ud83c\ufe0f?\uddf3\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddfe|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddfd|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddfb|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf6|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf5|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\udded|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddeb|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\udde9|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\udde8|\ud83c\ufe0f?\uddf2\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\uddfe|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\uddfb|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\udde8|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\udde7|\ud83c\ufe0f?\uddf1\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddfe|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddf5|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\udded|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddf0\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddef\ufe0f?\ud83c\ufe0f?\uddf5|\ud83c\ufe0f?\uddef\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\uddef\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddef\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\uddf6|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\udde9|\ud83c\ufe0f?\uddee\ufe0f?\ud83c\ufe0f?\udde8|\ud83c\ufe0f?\udded\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\udded\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\udded\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\udded\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\udded\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\udded\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddfe|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddf6|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddf5|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\udded|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddeb|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\udde9|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\udde7|\ud83c\ufe0f?\uddec\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\uddeb\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddeb\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\uddeb\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\uddeb\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\uddeb\ufe0f?\ud83c\ufe0f?\uddef|\ud83c\ufe0f?\uddeb\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\uddea\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\uddea\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\uddea\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\uddea\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\uddea\ufe0f?\ud83c\ufe0f?\udded|\ud83c\ufe0f?\uddea\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\uddea\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\uddea\ufe0f?\ud83c\ufe0f?\udde8|\ud83c\ufe0f?\uddea\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\udde9\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\udde9\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\udde9\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\udde9\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\udde9\ufe0f?\ud83c\ufe0f?\uddef|\ud83c\ufe0f?\udde9\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\udde9\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddfe|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddfd|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddfb|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddf5|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddf0|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\udded|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\uddeb|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\udde9|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\udde8|\ud83c\ufe0f?\udde8\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddfe|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddfb|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddf6|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddf3|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddef|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\udded|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddeb|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\udde9|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\udde7|\ud83c\ufe0f?\udde7\ufe0f?\ud83c\ufe0f?\udde6|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddff|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddfd|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddfc|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddfa|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddf9|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddf8|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddf7|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddf6|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddf4|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddf2|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddf1|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddee|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddec|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddeb|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\uddea|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\udde9|\ud83c\ufe0f?\udde6\ufe0f?\ud83c\ufe0f?\udde8|\u270d\ufe0f?\ud83c\ufe0f?\udfff|\u270d\ufe0f?\ud83c\ufe0f?\udffe|\u270d\ufe0f?\ud83c\ufe0f?\udffd|\u270d\ufe0f?\ud83c\ufe0f?\udffc|\u270d\ufe0f?\ud83c\ufe0f?\udffb|\u270c\ufe0f?\ud83c\ufe0f?\udfff|\u270c\ufe0f?\ud83c\ufe0f?\udffe|\u270c\ufe0f?\ud83c\ufe0f?\udffd|\u270c\ufe0f?\ud83c\ufe0f?\udffc|\u270c\ufe0f?\ud83c\ufe0f?\udffb|\u270b\ufe0f?\ud83c\ufe0f?\udfff|\u270b\ufe0f?\ud83c\ufe0f?\udffe|\u270b\ufe0f?\ud83c\ufe0f?\udffd|\u270b\ufe0f?\ud83c\ufe0f?\udffc|\u270b\ufe0f?\ud83c\ufe0f?\udffb|\u270a\ufe0f?\ud83c\ufe0f?\udfff|\u270a\ufe0f?\ud83c\ufe0f?\udffe|\u270a\ufe0f?\ud83c\ufe0f?\udffd|\u270a\ufe0f?\ud83c\ufe0f?\udffc|\u270a\ufe0f?\ud83c\ufe0f?\udffb|\u26f9\ufe0f?\ud83c\ufe0f?\udfff|\u26f9\ufe0f?\ud83c\ufe0f?\udffe|\u26f9\ufe0f?\ud83c\ufe0f?\udffd|\u26f9\ufe0f?\ud83c\ufe0f?\udffc|\u26f9\ufe0f?\ud83c\ufe0f?\udffb|\u261d\ufe0f?\ud83c\ufe0f?\udfff|\u261d\ufe0f?\ud83c\ufe0f?\udffe|\u261d\ufe0f?\ud83c\ufe0f?\udffd|\u261d\ufe0f?\ud83c\ufe0f?\udffc|\u261d\ufe0f?\ud83c\ufe0f?\udffb|\u0039\ufe0f?\u20e3|\u0038\ufe0f?\u20e3|\u0037\ufe0f?\u20e3|\u0036\ufe0f?\u20e3|\u0035\ufe0f?\u20e3|\u0034\ufe0f?\u20e3|\u0033\ufe0f?\u20e3|\u0032\ufe0f?\u20e3|\u0031\ufe0f?\u20e3|\u0030\ufe0f?\u20e3|\u002a\ufe0f?\u20e3|\u0023\ufe0f?\u20e3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0])[\uFE00-\uFE0D\uFE0F]?(?!\uFE0E)/g }, {}], 4: [function(a, b, c) { (function(a) { function b(a, b) { for (var c = 0, d = a.length - 1; d >= 0; d--) { var e = a[d]; "." === e ? a.splice(d, 1) : ".." === e ? (a.splice(d, 1), c++) : c && (a.splice(d, 1), c--) } if (b) for (; c--; c) a.unshift(".."); return a } function d(a, b) { if (a.filter) return a.filter(b); for (var c = [], d = 0; d < a.length; d++) b(a[d], d, a) && c.push(a[d]); return c } var e = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/, f = function(a) { return e.exec(a).slice(1) }; c.resolve = function() { for (var c = "", e = !1, f = arguments.length - 1; f >= -1 && !e; f--) { var g = f >= 0 ? arguments[f] : a.cwd(); if ("string" != typeof g) throw new TypeError("Arguments to path.resolve must be strings"); g && (c = g + "/" + c, e = "/" === g.charAt(0)) } return c = b(d(c.split("/"), function(a) { return !!a }), !e).join("/"), (e ? "/" : "") + c || "." }, c.normalize = function(a) { var e = c.isAbsolute(a), f = "/" === g(a, -1); return a = b(d(a.split("/"), function(a) { return !!a }), !e).join("/"), a || e || (a = "."), a && f && (a += "/"), (e ? "/" : "") + a }, c.isAbsolute = function(a) { return "/" === a.charAt(0) }, c.join = function() { var a = Array.prototype.slice.call(arguments, 0); return c.normalize(d(a, function(a, b) { if ("string" != typeof a) throw new TypeError("Arguments to path.join must be strings"); return a }).join("/")) }, c.relative = function(a, b) { function d(a) { for (var b = 0; b < a.length && "" === a[b]; b++); for (var c = a.length - 1; c >= 0 && "" === a[c]; c--); return b > c ? [] : a.slice(b, c - b + 1) } a = c.resolve(a).substr(1), b = c.resolve(b).substr(1); for (var e = d(a.split("/")), f = d(b.split("/")), g = Math.min(e.length, f.length), h = g, i = 0; i < g; i++) if (e[i] !== f[i]) { h = i; break } for (var j = [], i = h; i < e.length; i++) j.push(".."); return j = j.concat(f.slice(h)), j.join("/") }, c.sep = "/", c.delimiter = ":", c.dirname = function(a) { var b = f(a), c = b[0], d = b[1]; return c || d ? (d && (d = d.substr(0, d.length - 1)), c + d) : "." }, c.basename = function(a, b) { var c = f(a)[2]; return b && c.substr(-1 * b.length) === b && (c = c.substr(0, c.length - b.length)), c }, c.extname = function(a) { return f(a)[3] }; var g = "b" === "ab".substr(-1) ? function(a, b, c) { return a.substr(b, c) } : function(a, b, c) { return b < 0 && (b = a.length + b), a.substr(b, c) } }).call(this, a("_process")) }, { _process: 5 }], 5: [function(a, b, c) { function d() { k = !1, h.length ? j = h.concat(j) : l = -1, j.length && e() } function e() { if (!k) { var a = setTimeout(d); k = !0; for (var b = j.length; b;) { for (h = j, j = []; ++l < b;) h && h[l].run(); l = -1, b = j.length } h = null, k = !1, clearTimeout(a) } } function f(a, b) { this.fun = a, this.array = b } function g() {} var h, i = b.exports = {}, j = [], k = !1, l = -1; i.nextTick = function(a) { var b = new Array(arguments.length - 1); if (arguments.length > 1) for (var c = 1; c < arguments.length; c++) b[c - 1] = arguments[c]; j.push(new f(a, b)), 1 !== j.length || k || setTimeout(e, 0) }, f.prototype.run = function() { this.fun.apply(null, this.array) }, i.title = "browser", i.browser = !0, i.env = {}, i.argv = [], i.version = "", i.versions = {}, i.on = g, i.addListener = g, i.once = g, i.off = g, i.removeListener = g, i.removeAllListeners = g, i.emit = g, i.binding = function(a) { throw new Error("process.binding is not supported") }, i.cwd = function() { return "/" }, i.chdir = function(a) { throw new Error("process.chdir is not supported") }, i.umask = function() { return 0 } }, {}] }, {}, [2]), function(a, b) { if ("object" == typeof exports && "object" == typeof module) module.exports = b(); else if ("function" == typeof define && define.amd) define(b); else { var c = b(); for (var d in c)("object" == typeof exports ? exports : a)[d] = c[d] } }(this, function() { return function(a) { function b(d) { if (c[d]) return c[d].exports; var e = c[d] = { exports: {}, id: d, loaded: !1 }; return a[d].call(e.exports, e, e.exports, b), e.loaded = !0, e.exports } var c = {}; return b.m = a, b.c = c, b.p = "", b(0) }([function(a, b, c) { b.glMatrix = c(1), b.mat2 = c(2), b.mat2d = c(3), b.mat3 = c(4), b.mat4 = c(5), b.quat = c(6), b.vec2 = c(9), b.vec3 = c(7), b.vec4 = c(8) }, function(a, b, c) { var d = {}; d.EPSILON = 1e-6, d.ARRAY_TYPE = "undefined" != typeof Float32Array ? Float32Array : Array, d.RANDOM = Math.random, d.setMatrixArrayType = function(a) { GLMAT_ARRAY_TYPE = a }; var e = Math.PI / 180; d.toRadian = function(a) { return a * e }, a.exports = d }, function(a, b, c) { var d = c(1), e = {}; e.create = function() { var a = new d.ARRAY_TYPE(4); return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 1, a }, e.clone = function(a) { var b = new d.ARRAY_TYPE(4); return b[0] = a[0], b[1] = a[1], b[2] = a[2], b[3] = a[3], b }, e.copy = function(a, b) { return a[0] = b[0], a[1] = b[1], a[2] = b[2], a[3] = b[3], a }, e.identity = function(a) { return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 1, a }, e.transpose = function(a, b) { if (a === b) { var c = b[1]; a[1] = b[2], a[2] = c } else a[0] = b[0], a[1] = b[2], a[2] = b[1], a[3] = b[3]; return a }, e.invert = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = c * f - e * d; return g ? (g = 1 / g, a[0] = f * g, a[1] = -d * g, a[2] = -e * g, a[3] = c * g, a) : null }, e.adjoint = function(a, b) { var c = b[0]; return a[0] = b[3], a[1] = -b[1], a[2] = -b[2], a[3] = c, a }, e.determinant = function(a) { return a[0] * a[3] - a[2] * a[1] }, e.multiply = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = c[0], i = c[1], j = c[2], k = c[3]; return a[0] = d * h + f * i, a[1] = e * h + g * i, a[2] = d * j + f * k, a[3] = e * j + g * k, a }, e.mul = e.multiply, e.rotate = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = Math.sin(c), i = Math.cos(c); return a[0] = d * i + f * h, a[1] = e * i + g * h, a[2] = d * -h + f * i, a[3] = e * -h + g * i, a }, e.scale = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = c[0], i = c[1]; return a[0] = d * h, a[1] = e * h, a[2] = f * i, a[3] = g * i, a }, e.fromRotation = function(a, b) { var c = Math.sin(b), d = Math.cos(b); return a[0] = d, a[1] = c, a[2] = -c, a[3] = d, a }, e.fromScaling = function(a, b) { return a[0] = b[0], a[1] = 0, a[2] = 0, a[3] = b[1], a }, e.str = function(a) { return "mat2(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")" }, e.frob = function(a) { return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2)) }, e.LDU = function(a, b, c, d) { return a[2] = d[2] / d[0], c[0] = d[0], c[1] = d[1], c[3] = d[3] - a[2] * c[1], [a, b, c] }, a.exports = e }, function(a, b, c) { var d = c(1), e = {}; e.create = function() { var a = new d.ARRAY_TYPE(6); return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 1, a[4] = 0, a[5] = 0, a }, e.clone = function(a) { var b = new d.ARRAY_TYPE(6); return b[0] = a[0], b[1] = a[1], b[2] = a[2], b[3] = a[3], b[4] = a[4], b[5] = a[5], b }, e.copy = function(a, b) { return a[0] = b[0], a[1] = b[1], a[2] = b[2], a[3] = b[3], a[4] = b[4], a[5] = b[5], a }, e.identity = function(a) { return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 1, a[4] = 0, a[5] = 0, a }, e.invert = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = b[4], h = b[5], i = c * f - d * e; return i ? (i = 1 / i, a[0] = f * i, a[1] = -d * i, a[2] = -e * i, a[3] = c * i, a[4] = (e * h - f * g) * i, a[5] = (d * g - c * h) * i, a) : null }, e.determinant = function(a) { return a[0] * a[3] - a[1] * a[2] }, e.multiply = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], i = b[5], j = c[0], k = c[1], l = c[2], m = c[3], n = c[4], o = c[5]; return a[0] = d * j + f * k, a[1] = e * j + g * k, a[2] = d * l + f * m, a[3] = e * l + g * m, a[4] = d * n + f * o + h, a[5] = e * n + g * o + i, a }, e.mul = e.multiply, e.rotate = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], i = b[5], j = Math.sin(c), k = Math.cos(c); return a[0] = d * k + f * j, a[1] = e * k + g * j, a[2] = d * -j + f * k, a[3] = e * -j + g * k, a[4] = h, a[5] = i, a }, e.scale = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], i = b[5], j = c[0], k = c[1]; return a[0] = d * j, a[1] = e * j, a[2] = f * k, a[3] = g * k, a[4] = h, a[5] = i, a }, e.translate = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], i = b[5], j = c[0], k = c[1]; return a[0] = d, a[1] = e, a[2] = f, a[3] = g, a[4] = d * j + f * k + h, a[5] = e * j + g * k + i, a }, e.fromRotation = function(a, b) { var c = Math.sin(b), d = Math.cos(b); return a[0] = d, a[1] = c, a[2] = -c, a[3] = d, a[4] = 0, a[5] = 0, a }, e.fromScaling = function(a, b) { return a[0] = b[0], a[1] = 0, a[2] = 0, a[3] = b[1], a[4] = 0, a[5] = 0, a }, e.fromTranslation = function(a, b) { return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 1, a[4] = b[0], a[5] = b[1], a }, e.str = function(a) { return "mat2d(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ")" }, e.frob = function(a) { return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + 1) }, a.exports = e }, function(a, b, c) { var d = c(1), e = {}; e.create = function() { var a = new d.ARRAY_TYPE(9); return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 1, a[5] = 0, a[6] = 0, a[7] = 0, a[8] = 1, a }, e.fromMat4 = function(a, b) { return a[0] = b[0], a[1] = b[1], a[2] = b[2], a[3] = b[4], a[4] = b[5], a[5] = b[6], a[6] = b[8], a[7] = b[9], a[8] = b[10], a }, e.clone = function(a) { var b = new d.ARRAY_TYPE(9); return b[0] = a[0], b[1] = a[1], b[2] = a[2], b[3] = a[3], b[4] = a[4], b[5] = a[5], b[6] = a[6], b[7] = a[7], b[8] = a[8], b }, e.copy = function(a, b) { return a[0] = b[0], a[1] = b[1], a[2] = b[2], a[3] = b[3], a[4] = b[4], a[5] = b[5], a[6] = b[6], a[7] = b[7], a[8] = b[8], a }, e.identity = function(a) { return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 1, a[5] = 0, a[6] = 0, a[7] = 0, a[8] = 1, a }, e.transpose = function(a, b) { if (a === b) { var c = b[1], d = b[2], e = b[5]; a[1] = b[3], a[2] = b[6], a[3] = c, a[5] = b[7], a[6] = d, a[7] = e } else a[0] = b[0], a[1] = b[3], a[2] = b[6], a[3] = b[1], a[4] = b[4], a[5] = b[7], a[6] = b[2], a[7] = b[5], a[8] = b[8]; return a }, e.invert = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = b[4], h = b[5], i = b[6], j = b[7], k = b[8], l = k * g - h * j, m = -k * f + h * i, n = j * f - g * i, o = c * l + d * m + e * n; return o ? (o = 1 / o, a[0] = l * o, a[1] = (-k * d + e * j) * o, a[2] = (h * d - e * g) * o, a[3] = m * o, a[4] = (k * c - e * i) * o, a[5] = (-h * c + e * f) * o, a[6] = n * o, a[7] = (-j * c + d * i) * o, a[8] = (g * c - d * f) * o, a) : null }, e.adjoint = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = b[4], h = b[5], i = b[6], j = b[7], k = b[8]; return a[0] = g * k - h * j, a[1] = e * j - d * k, a[2] = d * h - e * g, a[3] = h * i - f * k, a[4] = c * k - e * i, a[5] = e * f - c * h, a[6] = f * j - g * i, a[7] = d * i - c * j, a[8] = c * g - d * f, a }, e.determinant = function(a) { var b = a[0], c = a[1], d = a[2], e = a[3], f = a[4], g = a[5], h = a[6], i = a[7], j = a[8]; return b * (j * f - g * i) + c * (-j * e + g * h) + d * (i * e - f * h) }, e.multiply = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], i = b[5], j = b[6], k = b[7], l = b[8], m = c[0], n = c[1], o = c[2], p = c[3], q = c[4], r = c[5], s = c[6], t = c[7], u = c[8]; return a[0] = m * d + n * g + o * j, a[1] = m * e + n * h + o * k, a[2] = m * f + n * i + o * l, a[3] = p * d + q * g + r * j, a[4] = p * e + q * h + r * k, a[5] = p * f + q * i + r * l, a[6] = s * d + t * g + u * j, a[7] = s * e + t * h + u * k, a[8] = s * f + t * i + u * l, a }, e.mul = e.multiply, e.translate = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], i = b[5], j = b[6], k = b[7], l = b[8], m = c[0], n = c[1]; return a[0] = d, a[1] = e, a[2] = f, a[3] = g, a[4] = h, a[5] = i, a[6] = m * d + n * g + j, a[7] = m * e + n * h + k, a[8] = m * f + n * i + l, a }, e.rotate = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], i = b[5], j = b[6], k = b[7], l = b[8], m = Math.sin(c), n = Math.cos(c); return a[0] = n * d + m * g, a[1] = n * e + m * h, a[2] = n * f + m * i, a[3] = n * g - m * d, a[4] = n * h - m * e, a[5] = n * i - m * f, a[6] = j, a[7] = k, a[8] = l, a }, e.scale = function(a, b, c) { var d = c[0], e = c[1]; return a[0] = d * b[0], a[1] = d * b[1], a[2] = d * b[2], a[3] = e * b[3], a[4] = e * b[4], a[5] = e * b[5], a[6] = b[6], a[7] = b[7], a[8] = b[8], a }, e.fromTranslation = function(a, b) { return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 1, a[5] = 0, a[6] = b[0], a[7] = b[1], a[8] = 1, a }, e.fromRotation = function(a, b) { var c = Math.sin(b), d = Math.cos(b); return a[0] = d, a[1] = c, a[2] = 0, a[3] = -c, a[4] = d, a[5] = 0, a[6] = 0, a[7] = 0, a[8] = 1, a }, e.fromScaling = function(a, b) { return a[0] = b[0], a[1] = 0, a[2] = 0, a[3] = 0, a[4] = b[1], a[5] = 0, a[6] = 0, a[7] = 0, a[8] = 1, a }, e.fromMat2d = function(a, b) { return a[0] = b[0], a[1] = b[1], a[2] = 0, a[3] = b[2], a[4] = b[3], a[5] = 0, a[6] = b[4], a[7] = b[5], a[8] = 1, a }, e.fromQuat = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = c + c, h = d + d, i = e + e, j = c * g, k = d * g, l = d * h, m = e * g, n = e * h, o = e * i, p = f * g, q = f * h, r = f * i; return a[0] = 1 - l - o, a[3] = k - r, a[6] = m + q, a[1] = k + r, a[4] = 1 - j - o, a[7] = n - p, a[2] = m - q, a[5] = n + p, a[8] = 1 - j - l, a }, e.normalFromMat4 = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = b[4], h = b[5], i = b[6], j = b[7], k = b[8], l = b[9], m = b[10], n = b[11], o = b[12], p = b[13], q = b[14], r = b[15], s = c * h - d * g, t = c * i - e * g, u = c * j - f * g, v = d * i - e * h, w = d * j - f * h, x = e * j - f * i, y = k * p - l * o, z = k * q - m * o, A = k * r - n * o, B = l * q - m * p, C = l * r - n * p, D = m * r - n * q, E = s * D - t * C + u * B + v * A - w * z + x * y; return E ? (E = 1 / E, a[0] = (h * D - i * C + j * B) * E, a[1] = (i * A - g * D - j * z) * E, a[2] = (g * C - h * A + j * y) * E, a[3] = (e * C - d * D - f * B) * E, a[4] = (c * D - e * A + f * z) * E, a[5] = (d * A - c * C - f * y) * E, a[6] = (p * x - q * w + r * v) * E, a[7] = (q * u - o * x - r * t) * E, a[8] = (o * w - p * u + r * s) * E, a) : null }, e.str = function(a) { return "mat3(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ")" }, e.frob = function(a) { return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2)) }, a.exports = e }, function(a, b, c) { var d = c(1), e = {}; e.create = function() { var a = new d.ARRAY_TYPE(16); return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a }, e.clone = function(a) { var b = new d.ARRAY_TYPE(16); return b[0] = a[0], b[1] = a[1], b[2] = a[2], b[3] = a[3], b[4] = a[4], b[5] = a[5], b[6] = a[6], b[7] = a[7], b[8] = a[8], b[9] = a[9], b[10] = a[10], b[11] = a[11], b[12] = a[12], b[13] = a[13], b[14] = a[14], b[15] = a[15], b }, e.copy = function(a, b) { return a[0] = b[0], a[1] = b[1], a[2] = b[2], a[3] = b[3], a[4] = b[4], a[5] = b[5], a[6] = b[6], a[7] = b[7], a[8] = b[8], a[9] = b[9], a[10] = b[10], a[11] = b[11], a[12] = b[12], a[13] = b[13], a[14] = b[14], a[15] = b[15], a }, e.identity = function(a) { return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a }, e.transpose = function(a, b) { if (a === b) { var c = b[1], d = b[2], e = b[3], f = b[6], g = b[7], h = b[11]; a[1] = b[4], a[2] = b[8], a[3] = b[12], a[4] = c, a[6] = b[9], a[7] = b[13], a[8] = d, a[9] = f, a[11] = b[14], a[12] = e, a[13] = g, a[14] = h } else a[0] = b[0], a[1] = b[4], a[2] = b[8], a[3] = b[12], a[4] = b[1], a[5] = b[5], a[6] = b[9], a[7] = b[13], a[8] = b[2], a[9] = b[6], a[10] = b[10], a[11] = b[14], a[12] = b[3], a[13] = b[7], a[14] = b[11], a[15] = b[15]; return a }, e.invert = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = b[4], h = b[5], i = b[6], j = b[7], k = b[8], l = b[9], m = b[10], n = b[11], o = b[12], p = b[13], q = b[14], r = b[15], s = c * h - d * g, t = c * i - e * g, u = c * j - f * g, v = d * i - e * h, w = d * j - f * h, x = e * j - f * i, y = k * p - l * o, z = k * q - m * o, A = k * r - n * o, B = l * q - m * p, C = l * r - n * p, D = m * r - n * q, E = s * D - t * C + u * B + v * A - w * z + x * y; return E ? (E = 1 / E, a[0] = (h * D - i * C + j * B) * E, a[1] = (e * C - d * D - f * B) * E, a[2] = (p * x - q * w + r * v) * E, a[3] = (m * w - l * x - n * v) * E, a[4] = (i * A - g * D - j * z) * E, a[5] = (c * D - e * A + f * z) * E, a[6] = (q * u - o * x - r * t) * E, a[7] = (k * x - m * u + n * t) * E, a[8] = (g * C - h * A + j * y) * E, a[9] = (d * A - c * C - f * y) * E, a[10] = (o * w - p * u + r * s) * E, a[11] = (l * u - k * w - n * s) * E, a[12] = (h * z - g * B - i * y) * E, a[13] = (c * B - d * z + e * y) * E, a[14] = (p * t - o * v - q * s) * E, a[15] = (k * v - l * t + m * s) * E, a) : null }, e.adjoint = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = b[4], h = b[5], i = b[6], j = b[7], k = b[8], l = b[9], m = b[10], n = b[11], o = b[12], p = b[13], q = b[14], r = b[15]; return a[0] = h * (m * r - n * q) - l * (i * r - j * q) + p * (i * n - j * m), a[1] = -(d * (m * r - n * q) - l * (e * r - f * q) + p * (e * n - f * m)), a[2] = d * (i * r - j * q) - h * (e * r - f * q) + p * (e * j - f * i), a[3] = -(d * (i * n - j * m) - h * (e * n - f * m) + l * (e * j - f * i)), a[4] = -(g * (m * r - n * q) - k * (i * r - j * q) + o * (i * n - j * m)), a[5] = c * (m * r - n * q) - k * (e * r - f * q) + o * (e * n - f * m), a[6] = -(c * (i * r - j * q) - g * (e * r - f * q) + o * (e * j - f * i)), a[7] = c * (i * n - j * m) - g * (e * n - f * m) + k * (e * j - f * i), a[8] = g * (l * r - n * p) - k * (h * r - j * p) + o * (h * n - j * l), a[9] = -(c * (l * r - n * p) - k * (d * r - f * p) + o * (d * n - f * l)), a[10] = c * (h * r - j * p) - g * (d * r - f * p) + o * (d * j - f * h), a[11] = -(c * (h * n - j * l) - g * (d * n - f * l) + k * (d * j - f * h)), a[12] = -(g * (l * q - m * p) - k * (h * q - i * p) + o * (h * m - i * l)), a[13] = c * (l * q - m * p) - k * (d * q - e * p) + o * (d * m - e * l), a[14] = -(c * (h * q - i * p) - g * (d * q - e * p) + o * (d * i - e * h)), a[15] = c * (h * m - i * l) - g * (d * m - e * l) + k * (d * i - e * h), a }, e.determinant = function(a) { var b = a[0], c = a[1], d = a[2], e = a[3], f = a[4], g = a[5], h = a[6], i = a[7], j = a[8], k = a[9], l = a[10], m = a[11], n = a[12], o = a[13], p = a[14], q = a[15]; return (b * g - c * f) * (l * q - m * p) - (b * h - d * f) * (k * q - m * o) + (b * i - e * f) * (k * p - l * o) + (c * h - d * g) * (j * q - m * n) - (c * i - e * g) * (j * p - l * n) + (d * i - e * h) * (j * o - k * n) }, e.multiply = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], i = b[5], j = b[6], k = b[7], l = b[8], m = b[9], n = b[10], o = b[11], p = b[12], q = b[13], r = b[14], s = b[15], t = c[0], u = c[1], v = c[2], w = c[3]; return a[0] = t * d + u * h + v * l + w * p, a[1] = t * e + u * i + v * m + w * q, a[2] = t * f + u * j + v * n + w * r, a[3] = t * g + u * k + v * o + w * s, t = c[4], u = c[5], v = c[6], w = c[7], a[4] = t * d + u * h + v * l + w * p, a[5] = t * e + u * i + v * m + w * q, a[6] = t * f + u * j + v * n + w * r, a[7] = t * g + u * k + v * o + w * s, t = c[8], u = c[9], v = c[10], w = c[11], a[8] = t * d + u * h + v * l + w * p, a[9] = t * e + u * i + v * m + w * q, a[10] = t * f + u * j + v * n + w * r, a[11] = t * g + u * k + v * o + w * s, t = c[12], u = c[13], v = c[14], w = c[15], a[12] = t * d + u * h + v * l + w * p, a[13] = t * e + u * i + v * m + w * q, a[14] = t * f + u * j + v * n + w * r, a[15] = t * g + u * k + v * o + w * s, a }, e.mul = e.multiply, e.translate = function(a, b, c) { var d, e, f, g, h, i, j, k, l, m, n, o, p = c[0], q = c[1], r = c[2]; return b === a ? (a[12] = b[0] * p + b[4] * q + b[8] * r + b[12], a[13] = b[1] * p + b[5] * q + b[9] * r + b[13], a[14] = b[2] * p + b[6] * q + b[10] * r + b[14], a[15] = b[3] * p + b[7] * q + b[11] * r + b[15]) : (d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], i = b[5], j = b[6], k = b[7], l = b[8], m = b[9], n = b[10], o = b[11], a[0] = d, a[1] = e, a[2] = f, a[3] = g, a[4] = h, a[5] = i, a[6] = j, a[7] = k, a[8] = l, a[9] = m, a[10] = n, a[11] = o, a[12] = d * p + h * q + l * r + b[12], a[13] = e * p + i * q + m * r + b[13], a[14] = f * p + j * q + n * r + b[14], a[15] = g * p + k * q + o * r + b[15]), a }, e.scale = function(a, b, c) { var d = c[0], e = c[1], f = c[2]; return a[0] = b[0] * d, a[1] = b[1] * d, a[2] = b[2] * d, a[3] = b[3] * d, a[4] = b[4] * e, a[5] = b[5] * e, a[6] = b[6] * e, a[7] = b[7] * e, a[8] = b[8] * f, a[9] = b[9] * f, a[10] = b[10] * f, a[11] = b[11] * f, a[12] = b[12], a[13] = b[13], a[14] = b[14], a[15] = b[15], a }, e.rotate = function(a, b, c, e) { var f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D = e[0], E = e[1], F = e[2], G = Math.sqrt(D * D + E * E + F * F); return Math.abs(G) < d.EPSILON ? null : (G = 1 / G, D *= G, E *= G, F *= G, f = Math.sin(c), g = Math.cos(c), h = 1 - g, i = b[0], j = b[1], k = b[2], l = b[3], m = b[4], n = b[5], o = b[6], p = b[7], q = b[8], r = b[9], s = b[10], t = b[11], u = D * D * h + g, v = E * D * h + F * f, w = F * D * h - E * f, x = D * E * h - F * f, y = E * E * h + g, z = F * E * h + D * f, A = D * F * h + E * f, B = E * F * h - D * f, C = F * F * h + g, a[0] = i * u + m * v + q * w, a[1] = j * u + n * v + r * w, a[2] = k * u + o * v + s * w, a[3] = l * u + p * v + t * w, a[4] = i * x + m * y + q * z, a[5] = j * x + n * y + r * z, a[6] = k * x + o * y + s * z, a[7] = l * x + p * y + t * z, a[8] = i * A + m * B + q * C, a[9] = j * A + n * B + r * C, a[10] = k * A + o * B + s * C, a[11] = l * A + p * B + t * C, b !== a && (a[12] = b[12], a[13] = b[13], a[14] = b[14], a[15] = b[15]), a) }, e.rotateX = function(a, b, c) { var d = Math.sin(c), e = Math.cos(c), f = b[4], g = b[5], h = b[6], i = b[7], j = b[8], k = b[9], l = b[10], m = b[11]; return b !== a && (a[0] = b[0], a[1] = b[1], a[2] = b[2], a[3] = b[3], a[12] = b[12], a[13] = b[13], a[14] = b[14], a[15] = b[15]), a[4] = f * e + j * d, a[5] = g * e + k * d, a[6] = h * e + l * d, a[7] = i * e + m * d, a[8] = j * e - f * d, a[9] = k * e - g * d, a[10] = l * e - h * d, a[11] = m * e - i * d, a }, e.rotateY = function(a, b, c) { var d = Math.sin(c), e = Math.cos(c), f = b[0], g = b[1], h = b[2], i = b[3], j = b[8], k = b[9], l = b[10], m = b[11]; return b !== a && (a[4] = b[4], a[5] = b[5], a[6] = b[6], a[7] = b[7], a[12] = b[12], a[13] = b[13], a[14] = b[14], a[15] = b[15]), a[0] = f * e - j * d, a[1] = g * e - k * d, a[2] = h * e - l * d, a[3] = i * e - m * d, a[8] = f * d + j * e, a[9] = g * d + k * e, a[10] = h * d + l * e, a[11] = i * d + m * e, a }, e.rotateZ = function(a, b, c) { var d = Math.sin(c), e = Math.cos(c), f = b[0], g = b[1], h = b[2], i = b[3], j = b[4], k = b[5], l = b[6], m = b[7]; return b !== a && (a[8] = b[8], a[9] = b[9], a[10] = b[10], a[11] = b[11], a[12] = b[12], a[13] = b[13], a[14] = b[14], a[15] = b[15]), a[0] = f * e + j * d, a[1] = g * e + k * d, a[2] = h * e + l * d, a[3] = i * e + m * d, a[4] = j * e - f * d, a[5] = k * e - g * d, a[6] = l * e - h * d, a[7] = m * e - i * d, a }, e.fromTranslation = function(a, b) { return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = b[0], a[13] = b[1], a[14] = b[2], a[15] = 1, a }, e.fromScaling = function(a, b) { return a[0] = b[0], a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = b[1], a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = b[2], a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a }, e.fromRotation = function(a, b, c) { var e, f, g, h = c[0], i = c[1], j = c[2], k = Math.sqrt(h * h + i * i + j * j); return Math.abs(k) < d.EPSILON ? null : (k = 1 / k, h *= k, i *= k, j *= k, e = Math.sin(b), f = Math.cos(b), g = 1 - f, a[0] = h * h * g + f, a[1] = i * h * g + j * e, a[2] = j * h * g - i * e, a[3] = 0, a[4] = h * i * g - j * e, a[5] = i * i * g + f, a[6] = j * i * g + h * e, a[7] = 0, a[8] = h * j * g + i * e, a[9] = i * j * g - h * e, a[10] = j * j * g + f, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a) }, e.fromXRotation = function(a, b) { var c = Math.sin(b), d = Math.cos(b); return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = d, a[6] = c, a[7] = 0, a[8] = 0, a[9] = -c, a[10] = d, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a }, e.fromYRotation = function(a, b) { var c = Math.sin(b), d = Math.cos(b); return a[0] = d, a[1] = 0, a[2] = -c, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = c, a[9] = 0, a[10] = d, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a }, e.fromZRotation = function(a, b) { var c = Math.sin(b), d = Math.cos(b); return a[0] = d, a[1] = c, a[2] = 0, a[3] = 0, a[4] = -c, a[5] = d, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a }, e.fromRotationTranslation = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = d + d, i = e + e, j = f + f, k = d * h, l = d * i, m = d * j, n = e * i, o = e * j, p = f * j, q = g * h, r = g * i, s = g * j; return a[0] = 1 - (n + p), a[1] = l + s, a[2] = m - r, a[3] = 0, a[4] = l - s, a[5] = 1 - (k + p), a[6] = o + q, a[7] = 0, a[8] = m + r, a[9] = o - q, a[10] = 1 - (k + n), a[11] = 0, a[12] = c[0], a[13] = c[1], a[14] = c[2], a[15] = 1, a }, e.fromRotationTranslationScale = function(a, b, c, d) { var e = b[0], f = b[1], g = b[2], h = b[3], i = e + e, j = f + f, k = g + g, l = e * i, m = e * j, n = e * k, o = f * j, p = f * k, q = g * k, r = h * i, s = h * j, t = h * k, u = d[0], v = d[1], w = d[2]; return a[0] = (1 - (o + q)) * u, a[1] = (m + t) * u, a[2] = (n - s) * u, a[3] = 0, a[4] = (m - t) * v, a[5] = (1 - (l + q)) * v, a[6] = (p + r) * v, a[7] = 0, a[8] = (n + s) * w, a[9] = (p - r) * w, a[10] = (1 - (l + o)) * w, a[11] = 0, a[12] = c[0], a[13] = c[1], a[14] = c[2], a[15] = 1, a }, e.fromRotationTranslationScaleOrigin = function(a, b, c, d, e) { var f = b[0], g = b[1], h = b[2], i = b[3], j = f + f, k = g + g, l = h + h, m = f * j, n = f * k, o = f * l, p = g * k, q = g * l, r = h * l, s = i * j, t = i * k, u = i * l, v = d[0], w = d[1], x = d[2], y = e[0], z = e[1], A = e[2]; return a[0] = (1 - (p + r)) * v, a[1] = (n + u) * v, a[2] = (o - t) * v, a[3] = 0, a[4] = (n - u) * w, a[5] = (1 - (m + r)) * w, a[6] = (q + s) * w, a[7] = 0, a[8] = (o + t) * x, a[9] = (q - s) * x, a[10] = (1 - (m + p)) * x, a[11] = 0, a[12] = c[0] + y - (a[0] * y + a[4] * z + a[8] * A), a[13] = c[1] + z - (a[1] * y + a[5] * z + a[9] * A), a[14] = c[2] + A - (a[2] * y + a[6] * z + a[10] * A), a[15] = 1, a }, e.fromQuat = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = c + c, h = d + d, i = e + e, j = c * g, k = d * g, l = d * h, m = e * g, n = e * h, o = e * i, p = f * g, q = f * h, r = f * i; return a[0] = 1 - l - o, a[1] = k + r, a[2] = m - q, a[3] = 0, a[4] = k - r, a[5] = 1 - j - o, a[6] = n + p, a[7] = 0, a[8] = m + q, a[9] = n - p, a[10] = 1 - j - l, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a }, e.frustum = function(a, b, c, d, e, f, g) { var h = 1 / (c - b), i = 1 / (e - d), j = 1 / (f - g); return a[0] = 2 * f * h, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 2 * f * i, a[6] = 0, a[7] = 0, a[8] = (c + b) * h, a[9] = (e + d) * i, a[10] = (g + f) * j, a[11] = -1, a[12] = 0, a[13] = 0, a[14] = g * f * 2 * j, a[15] = 0, a }, e.perspective = function(a, b, c, d, e) { var f = 1 / Math.tan(b / 2), g = 1 / (d - e); return a[0] = f / c, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = f, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = (e + d) * g, a[11] = -1, a[12] = 0, a[13] = 0, a[14] = 2 * e * d * g, a[15] = 0, a }, e.perspectiveFromFieldOfView = function(a, b, c, d) { var e = Math.tan(b.upDegrees * Math.PI / 180), f = Math.tan(b.downDegrees * Math.PI / 180), g = Math.tan(b.leftDegrees * Math.PI / 180), h = Math.tan(b.rightDegrees * Math.PI / 180), i = 2 / (g + h), j = 2 / (e + f); return a[0] = i, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = j, a[6] = 0, a[7] = 0, a[8] = -(g - h) * i * .5, a[9] = (e - f) * j * .5, a[10] = d / (c - d), a[11] = -1, a[12] = 0, a[13] = 0, a[14] = d * c / (c - d), a[15] = 0, a }, e.ortho = function(a, b, c, d, e, f, g) { var h = 1 / (b - c), i = 1 / (d - e), j = 1 / (f - g); return a[0] = -2 * h, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = -2 * i, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 2 * j, a[11] = 0, a[12] = (b + c) * h, a[13] = (e + d) * i, a[14] = (g + f) * j, a[15] = 1, a }, e.lookAt = function(a, b, c, f) { var g, h, i, j, k, l, m, n, o, p, q = b[0], r = b[1], s = b[2], t = f[0], u = f[1], v = f[2], w = c[0], x = c[1], y = c[2]; return Math.abs(q - w) < d.EPSILON && Math.abs(r - x) < d.EPSILON && Math.abs(s - y) < d.EPSILON ? e.identity(a) : (m = q - w, n = r - x, o = s - y, p = 1 / Math.sqrt(m * m + n * n + o * o), m *= p, n *= p, o *= p, g = u * o - v * n, h = v * m - t * o, i = t * n - u * m, p = Math.sqrt(g * g + h * h + i * i), p ? (p = 1 / p, g *= p, h *= p, i *= p) : (g = 0, h = 0, i = 0), j = n * i - o * h, k = o * g - m * i, l = m * h - n * g, p = Math.sqrt(j * j + k * k + l * l), p ? (p = 1 / p, j *= p, k *= p, l *= p) : (j = 0, k = 0, l = 0), a[0] = g, a[1] = j, a[2] = m, a[3] = 0, a[4] = h, a[5] = k, a[6] = n, a[7] = 0, a[8] = i, a[9] = l, a[10] = o, a[11] = 0, a[12] = -(g * q + h * r + i * s), a[13] = -(j * q + k * r + l * s), a[14] = -(m * q + n * r + o * s), a[15] = 1, a) }, e.str = function(a) { return "mat4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + ")" }, e.frob = function(a) { return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2)) }, a.exports = e }, function(a, b, c) { var d = c(1), e = c(4), f = c(7), g = c(8), h = {}; h.create = function() { var a = new d.ARRAY_TYPE(4); return a[0] = 0, a[1] = 0, a[2] = 0, a[3] = 1, a }, h.rotationTo = function() { var a = f.create(), b = f.fromValues(1, 0, 0), c = f.fromValues(0, 1, 0); return function(d, e, g) { var i = f.dot(e, g); return i < -.999999 ? (f.cross(a, b, e), f.length(a) < 1e-6 && f.cross(a, c, e), f.normalize(a, a), h.setAxisAngle(d, a, Math.PI), d) : i > .999999 ? (d[0] = 0, d[1] = 0, d[2] = 0, d[3] = 1, d) : (f.cross(a, e, g), d[0] = a[0], d[1] = a[1], d[2] = a[2], d[3] = 1 + i, h.normalize(d, d)) } }(), h.setAxes = function() { var a = e.create(); return function(b, c, d, e) { return a[0] = d[0], a[3] = d[1], a[6] = d[2], a[1] = e[0], a[4] = e[1], a[7] = e[2], a[2] = -c[0], a[5] = -c[1], a[8] = -c[2], h.normalize(b, h.fromMat3(b, a)) } }(), h.clone = g.clone, h.fromValues = g.fromValues, h.copy = g.copy, h.set = g.set, h.identity = function(a) { return a[0] = 0, a[1] = 0, a[2] = 0, a[3] = 1, a }, h.setAxisAngle = function(a, b, c) { c *= .5; var d = Math.sin(c); return a[0] = d * b[0], a[1] = d * b[1], a[2] = d * b[2], a[3] = Math.cos(c), a }, h.add = g.add, h.multiply = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3], h = c[0], i = c[1], j = c[2], k = c[3]; return a[0] = d * k + g * h + e * j - f * i, a[1] = e * k + g * i + f * h - d * j, a[2] = f * k + g * j + d * i - e * h, a[3] = g * k - d * h - e * i - f * j, a }, h.mul = h.multiply, h.scale = g.scale, h.rotateX = function(a, b, c) { c *= .5; var d = b[0], e = b[1], f = b[2], g = b[3], h = Math.sin(c), i = Math.cos(c); return a[0] = d * i + g * h, a[1] = e * i + f * h, a[2] = f * i - e * h, a[3] = g * i - d * h, a }, h.rotateY = function(a, b, c) { c *= .5; var d = b[0], e = b[1], f = b[2], g = b[3], h = Math.sin(c), i = Math.cos(c); return a[0] = d * i - f * h, a[1] = e * i + g * h, a[2] = f * i + d * h, a[3] = g * i - e * h, a }, h.rotateZ = function(a, b, c) { c *= .5; var d = b[0], e = b[1], f = b[2], g = b[3], h = Math.sin(c), i = Math.cos(c); return a[0] = d * i + e * h, a[1] = e * i - d * h, a[2] = f * i + g * h, a[3] = g * i - f * h, a }, h.calculateW = function(a, b) { var c = b[0], d = b[1], e = b[2]; return a[0] = c, a[1] = d, a[2] = e, a[3] = Math.sqrt(Math.abs(1 - c * c - d * d - e * e)), a }, h.dot = g.dot, h.lerp = g.lerp, h.slerp = function(a, b, c, d) { var e, f, g, h, i, j = b[0], k = b[1], l = b[2], m = b[3], n = c[0], o = c[1], p = c[2], q = c[3]; return f = j * n + k * o + l * p + m * q, f < 0 && (f = -f, n = -n, o = -o, p = -p, q = -q), 1 - f > 1e-6 ? (e = Math.acos(f), g = Math.sin(e), h = Math.sin((1 - d) * e) / g, i = Math.sin(d * e) / g) : (h = 1 - d, i = d), a[0] = h * j + i * n, a[1] = h * k + i * o, a[2] = h * l + i * p, a[3] = h * m + i * q, a }, h.sqlerp = function() { var a = h.create(), b = h.create(); return function(c, d, e, f, g, i) { return h.slerp(a, d, g, i), h.slerp(b, e, f, i), h.slerp(c, a, b, 2 * i * (1 - i)), c } }(), h.invert = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = c * c + d * d + e * e + f * f, h = g ? 1 / g : 0; return a[0] = -c * h, a[1] = -d * h, a[2] = -e * h, a[3] = f * h, a }, h.conjugate = function(a, b) { return a[0] = -b[0], a[1] = -b[1], a[2] = -b[2], a[3] = b[3], a }, h.length = g.length, h.len = h.length, h.squaredLength = g.squaredLength, h.sqrLen = h.squaredLength, h.normalize = g.normalize, h.fromMat3 = function(a, b) { var c, d = b[0] + b[4] + b[8]; if (d > 0) c = Math.sqrt(d + 1), a[3] = .5 * c, c = .5 / c, a[0] = (b[5] - b[7]) * c, a[1] = (b[6] - b[2]) * c, a[2] = (b[1] - b[3]) * c; else { var e = 0; b[4] > b[0] && (e = 1), b[8] > b[3 * e + e] && (e = 2); var f = (e + 1) % 3, g = (e + 2) % 3; c = Math.sqrt(b[3 * e + e] - b[3 * f + f] - b[3 * g + g] + 1), a[e] = .5 * c, c = .5 / c, a[3] = (b[3 * f + g] - b[3 * g + f]) * c, a[f] = (b[3 * f + e] + b[3 * e + f]) * c, a[g] = (b[3 * g + e] + b[3 * e + g]) * c } return a }, h.str = function(a) { return "quat(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")" }, a.exports = h }, function(a, b, c) { var d = c(1), e = {}; e.create = function() { var a = new d.ARRAY_TYPE(3); return a[0] = 0, a[1] = 0, a[2] = 0, a }, e.clone = function(a) { var b = new d.ARRAY_TYPE(3); return b[0] = a[0], b[1] = a[1], b[2] = a[2], b }, e.fromValues = function(a, b, c) { var e = new d.ARRAY_TYPE(3); return e[0] = a, e[1] = b, e[2] = c, e }, e.copy = function(a, b) { return a[0] = b[0], a[1] = b[1], a[2] = b[2], a }, e.set = function(a, b, c, d) { return a[0] = b, a[1] = c, a[2] = d, a }, e.add = function(a, b, c) { return a[0] = b[0] + c[0], a[1] = b[1] + c[1], a[2] = b[2] + c[2], a }, e.subtract = function(a, b, c) { return a[0] = b[0] - c[0], a[1] = b[1] - c[1], a[2] = b[2] - c[2], a }, e.sub = e.subtract, e.multiply = function(a, b, c) { return a[0] = b[0] * c[0], a[1] = b[1] * c[1], a[2] = b[2] * c[2], a }, e.mul = e.multiply, e.divide = function(a, b, c) { return a[0] = b[0] / c[0], a[1] = b[1] / c[1], a[2] = b[2] / c[2], a }, e.div = e.divide, e.min = function(a, b, c) { return a[0] = Math.min(b[0], c[0]), a[1] = Math.min(b[1], c[1]), a[2] = Math.min(b[2], c[2]), a }, e.max = function(a, b, c) { return a[0] = Math.max(b[0], c[0]), a[1] = Math.max(b[1], c[1]), a[2] = Math.max(b[2], c[2]), a }, e.scale = function(a, b, c) { return a[0] = b[0] * c, a[1] = b[1] * c, a[2] = b[2] * c, a }, e.scaleAndAdd = function(a, b, c, d) { return a[0] = b[0] + c[0] * d, a[1] = b[1] + c[1] * d, a[2] = b[2] + c[2] * d, a }, e.distance = function(a, b) { var c = b[0] - a[0], d = b[1] - a[1], e = b[2] - a[2]; return Math.sqrt(c * c + d * d + e * e) }, e.dist = e.distance, e.squaredDistance = function(a, b) { var c = b[0] - a[0], d = b[1] - a[1], e = b[2] - a[2]; return c * c + d * d + e * e }, e.sqrDist = e.squaredDistance, e.length = function(a) { var b = a[0], c = a[1], d = a[2]; return Math.sqrt(b * b + c * c + d * d) }, e.len = e.length, e.squaredLength = function(a) { var b = a[0], c = a[1], d = a[2]; return b * b + c * c + d * d }, e.sqrLen = e.squaredLength, e.negate = function(a, b) { return a[0] = -b[0], a[1] = -b[1], a[2] = -b[2], a }, e.inverse = function(a, b) { return a[0] = 1 / b[0], a[1] = 1 / b[1], a[2] = 1 / b[2], a }, e.normalize = function(a, b) { var c = b[0], d = b[1], e = b[2], f = c * c + d * d + e * e; return f > 0 && (f = 1 / Math.sqrt(f), a[0] = b[0] * f, a[1] = b[1] * f, a[2] = b[2] * f), a }, e.dot = function(a, b) { return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] }, e.cross = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = c[0], h = c[1], i = c[2]; return a[0] = e * i - f * h, a[1] = f * g - d * i, a[2] = d * h - e * g, a }, e.lerp = function(a, b, c, d) { var e = b[0], f = b[1], g = b[2]; return a[0] = e + d * (c[0] - e), a[1] = f + d * (c[1] - f), a[2] = g + d * (c[2] - g), a }, e.hermite = function(a, b, c, d, e, f) { var g = f * f, h = g * (2 * f - 3) + 1, i = g * (f - 2) + f, j = g * (f - 1), k = g * (3 - 2 * f); return a[0] = b[0] * h + c[0] * i + d[0] * j + e[0] * k, a[1] = b[1] * h + c[1] * i + d[1] * j + e[1] * k, a[2] = b[2] * h + c[2] * i + d[2] * j + e[2] * k, a }, e.bezier = function(a, b, c, d, e, f) { var g = 1 - f, h = g * g, i = f * f, j = h * g, k = 3 * f * h, l = 3 * i * g, m = i * f; return a[0] = b[0] * j + c[0] * k + d[0] * l + e[0] * m, a[1] = b[1] * j + c[1] * k + d[1] * l + e[1] * m, a[2] = b[2] * j + c[2] * k + d[2] * l + e[2] * m, a }, e.random = function(a, b) { b = b || 1; var c = 2 * d.RANDOM() * Math.PI, e = 2 * d.RANDOM() - 1, f = Math.sqrt(1 - e * e) * b; return a[0] = Math.cos(c) * f, a[1] = Math.sin(c) * f, a[2] = e * b, a }, e.transformMat4 = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = c[3] * d + c[7] * e + c[11] * f + c[15]; return g = g || 1, a[0] = (c[0] * d + c[4] * e + c[8] * f + c[12]) / g, a[1] = (c[1] * d + c[5] * e + c[9] * f + c[13]) / g, a[2] = (c[2] * d + c[6] * e + c[10] * f + c[14]) / g, a }, e.transformMat3 = function(a, b, c) { var d = b[0], e = b[1], f = b[2]; return a[0] = d * c[0] + e * c[3] + f * c[6], a[1] = d * c[1] + e * c[4] + f * c[7], a[2] = d * c[2] + e * c[5] + f * c[8], a }, e.transformQuat = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = c[0], h = c[1], i = c[2], j = c[3], k = j * d + h * f - i * e, l = j * e + i * d - g * f, m = j * f + g * e - h * d, n = -g * d - h * e - i * f; return a[0] = k * j + n * -g + l * -i - m * -h, a[1] = l * j + n * -h + m * -g - k * -i, a[2] = m * j + n * -i + k * -h - l * -g, a }, e.rotateX = function(a, b, c, d) { var e = [], f = []; return e[0] = b[0] - c[0], e[1] = b[1] - c[1], e[2] = b[2] - c[2], f[0] = e[0], f[1] = e[1] * Math.cos(d) - e[2] * Math.sin(d), f[2] = e[1] * Math.sin(d) + e[2] * Math.cos(d), a[0] = f[0] + c[0], a[1] = f[1] + c[1], a[2] = f[2] + c[2], a }, e.rotateY = function(a, b, c, d) { var e = [], f = []; return e[0] = b[0] - c[0], e[1] = b[1] - c[1], e[2] = b[2] - c[2], f[0] = e[2] * Math.sin(d) + e[0] * Math.cos(d), f[1] = e[1], f[2] = e[2] * Math.cos(d) - e[0] * Math.sin(d), a[0] = f[0] + c[0], a[1] = f[1] + c[1], a[2] = f[2] + c[2], a }, e.rotateZ = function(a, b, c, d) { var e = [], f = []; return e[0] = b[0] - c[0], e[1] = b[1] - c[1], e[2] = b[2] - c[2], f[0] = e[0] * Math.cos(d) - e[1] * Math.sin(d), f[1] = e[0] * Math.sin(d) + e[1] * Math.cos(d), f[2] = e[2], a[0] = f[0] + c[0], a[1] = f[1] + c[1], a[2] = f[2] + c[2], a }, e.forEach = function() { var a = e.create(); return function(b, c, d, e, f, g) { var h, i; for (c || (c = 3), d || (d = 0), i = e ? Math.min(e * c + d, b.length) : b.length, h = d; h < i; h += c) a[0] = b[h], a[1] = b[h + 1], a[2] = b[h + 2], f(a, a, g), b[h] = a[0], b[h + 1] = a[1], b[h + 2] = a[2]; return b } }(), e.angle = function(a, b) { var c = e.fromValues(a[0], a[1], a[2]), d = e.fromValues(b[0], b[1], b[2]); e.normalize(c, c), e.normalize(d, d); var f = e.dot(c, d); return f > 1 ? 0 : Math.acos(f) }, e.str = function(a) { return "vec3(" + a[0] + ", " + a[1] + ", " + a[2] + ")" }, a.exports = e }, function(a, b, c) { var d = c(1), e = {}; e.create = function() { var a = new d.ARRAY_TYPE(4); return a[0] = 0, a[1] = 0, a[2] = 0, a[3] = 0, a }, e.clone = function(a) { var b = new d.ARRAY_TYPE(4); return b[0] = a[0], b[1] = a[1], b[2] = a[2], b[3] = a[3], b }, e.fromValues = function(a, b, c, e) { var f = new d.ARRAY_TYPE(4); return f[0] = a, f[1] = b, f[2] = c, f[3] = e, f }, e.copy = function(a, b) { return a[0] = b[0], a[1] = b[1], a[2] = b[2], a[3] = b[3], a }, e.set = function(a, b, c, d, e) { return a[0] = b, a[1] = c, a[2] = d, a[3] = e, a }, e.add = function(a, b, c) { return a[0] = b[0] + c[0], a[1] = b[1] + c[1], a[2] = b[2] + c[2], a[3] = b[3] + c[3], a }, e.subtract = function(a, b, c) { return a[0] = b[0] - c[0], a[1] = b[1] - c[1], a[2] = b[2] - c[2], a[3] = b[3] - c[3], a }, e.sub = e.subtract, e.multiply = function(a, b, c) { return a[0] = b[0] * c[0], a[1] = b[1] * c[1], a[2] = b[2] * c[2], a[3] = b[3] * c[3], a }, e.mul = e.multiply, e.divide = function(a, b, c) { return a[0] = b[0] / c[0], a[1] = b[1] / c[1], a[2] = b[2] / c[2], a[3] = b[3] / c[3], a }, e.div = e.divide, e.min = function(a, b, c) { return a[0] = Math.min(b[0], c[0]), a[1] = Math.min(b[1], c[1]), a[2] = Math.min(b[2], c[2]), a[3] = Math.min(b[3], c[3]), a }, e.max = function(a, b, c) { return a[0] = Math.max(b[0], c[0]), a[1] = Math.max(b[1], c[1]), a[2] = Math.max(b[2], c[2]), a[3] = Math.max(b[3], c[3]), a }, e.scale = function(a, b, c) { return a[0] = b[0] * c, a[1] = b[1] * c, a[2] = b[2] * c, a[3] = b[3] * c, a }, e.scaleAndAdd = function(a, b, c, d) { return a[0] = b[0] + c[0] * d, a[1] = b[1] + c[1] * d, a[2] = b[2] + c[2] * d, a[3] = b[3] + c[3] * d, a }, e.distance = function(a, b) { var c = b[0] - a[0], d = b[1] - a[1], e = b[2] - a[2], f = b[3] - a[3]; return Math.sqrt(c * c + d * d + e * e + f * f) }, e.dist = e.distance, e.squaredDistance = function(a, b) { var c = b[0] - a[0], d = b[1] - a[1], e = b[2] - a[2], f = b[3] - a[3]; return c * c + d * d + e * e + f * f }, e.sqrDist = e.squaredDistance, e.length = function(a) { var b = a[0], c = a[1], d = a[2], e = a[3]; return Math.sqrt(b * b + c * c + d * d + e * e) }, e.len = e.length, e.squaredLength = function(a) { var b = a[0], c = a[1], d = a[2], e = a[3]; return b * b + c * c + d * d + e * e }, e.sqrLen = e.squaredLength, e.negate = function(a, b) { return a[0] = -b[0], a[1] = -b[1], a[2] = -b[2], a[3] = -b[3], a }, e.inverse = function(a, b) { return a[0] = 1 / b[0], a[1] = 1 / b[1], a[2] = 1 / b[2], a[3] = 1 / b[3], a }, e.normalize = function(a, b) { var c = b[0], d = b[1], e = b[2], f = b[3], g = c * c + d * d + e * e + f * f; return g > 0 && (g = 1 / Math.sqrt(g), a[0] = c * g, a[1] = d * g, a[2] = e * g, a[3] = f * g), a }, e.dot = function(a, b) { return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3] }, e.lerp = function(a, b, c, d) { var e = b[0], f = b[1], g = b[2], h = b[3]; return a[0] = e + d * (c[0] - e), a[1] = f + d * (c[1] - f), a[2] = g + d * (c[2] - g), a[3] = h + d * (c[3] - h), a }, e.random = function(a, b) { return b = b || 1, a[0] = d.RANDOM(), a[1] = d.RANDOM(), a[2] = d.RANDOM(), a[3] = d.RANDOM(), e.normalize(a, a), e.scale(a, a, b), a }, e.transformMat4 = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = b[3]; return a[0] = c[0] * d + c[4] * e + c[8] * f + c[12] * g, a[1] = c[1] * d + c[5] * e + c[9] * f + c[13] * g, a[2] = c[2] * d + c[6] * e + c[10] * f + c[14] * g, a[3] = c[3] * d + c[7] * e + c[11] * f + c[15] * g, a }, e.transformQuat = function(a, b, c) { var d = b[0], e = b[1], f = b[2], g = c[0], h = c[1], i = c[2], j = c[3], k = j * d + h * f - i * e, l = j * e + i * d - g * f, m = j * f + g * e - h * d, n = -g * d - h * e - i * f; return a[0] = k * j + n * -g + l * -i - m * -h, a[1] = l * j + n * -h + m * -g - k * -i, a[2] = m * j + n * -i + k * -h - l * -g, a[3] = b[3], a }, e.forEach = function() { var a = e.create(); return function(b, c, d, e, f, g) { var h, i; for (c || (c = 4), d || (d = 0), i = e ? Math.min(e * c + d, b.length) : b.length, h = d; h < i; h += c) a[0] = b[h], a[1] = b[h + 1], a[2] = b[h + 2], a[3] = b[h + 3], f(a, a, g), b[h] = a[0], b[h + 1] = a[1], b[h + 2] = a[2], b[h + 3] = a[3]; return b } }(), e.str = function(a) { return "vec4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")" }, a.exports = e }, function(a, b, c) { var d = c(1), e = {}; e.create = function() { var a = new d.ARRAY_TYPE(2); return a[0] = 0, a[1] = 0, a }, e.clone = function(a) { var b = new d.ARRAY_TYPE(2); return b[0] = a[0], b[1] = a[1], b }, e.fromValues = function(a, b) { var c = new d.ARRAY_TYPE(2); return c[0] = a, c[1] = b, c }, e.copy = function(a, b) { return a[0] = b[0], a[1] = b[1], a }, e.set = function(a, b, c) { return a[0] = b, a[1] = c, a }, e.add = function(a, b, c) { return a[0] = b[0] + c[0], a[1] = b[1] + c[1], a }, e.subtract = function(a, b, c) { return a[0] = b[0] - c[0], a[1] = b[1] - c[1], a }, e.sub = e.subtract, e.multiply = function(a, b, c) { return a[0] = b[0] * c[0], a[1] = b[1] * c[1], a }, e.mul = e.multiply, e.divide = function(a, b, c) { return a[0] = b[0] / c[0], a[1] = b[1] / c[1], a }, e.div = e.divide, e.min = function(a, b, c) { return a[0] = Math.min(b[0], c[0]), a[1] = Math.min(b[1], c[1]), a }, e.max = function(a, b, c) { return a[0] = Math.max(b[0], c[0]), a[1] = Math.max(b[1], c[1]), a }, e.scale = function(a, b, c) { return a[0] = b[0] * c, a[1] = b[1] * c, a }, e.scaleAndAdd = function(a, b, c, d) { return a[0] = b[0] + c[0] * d, a[1] = b[1] + c[1] * d, a }, e.distance = function(a, b) { var c = b[0] - a[0], d = b[1] - a[1]; return Math.sqrt(c * c + d * d) }, e.dist = e.distance, e.squaredDistance = function(a, b) { var c = b[0] - a[0], d = b[1] - a[1]; return c * c + d * d }, e.sqrDist = e.squaredDistance, e.length = function(a) { var b = a[0], c = a[1]; return Math.sqrt(b * b + c * c) }, e.len = e.length, e.squaredLength = function(a) { var b = a[0], c = a[1]; return b * b + c * c }, e.sqrLen = e.squaredLength, e.negate = function(a, b) { return a[0] = -b[0], a[1] = -b[1], a }, e.inverse = function(a, b) { return a[0] = 1 / b[0], a[1] = 1 / b[1], a }, e.normalize = function(a, b) { var c = b[0], d = b[1], e = c * c + d * d; return e > 0 && (e = 1 / Math.sqrt(e), a[0] = b[0] * e, a[1] = b[1] * e), a }, e.dot = function(a, b) { return a[0] * b[0] + a[1] * b[1] }, e.cross = function(a, b, c) { var d = b[0] * c[1] - b[1] * c[0]; return a[0] = a[1] = 0, a[2] = d, a }, e.lerp = function(a, b, c, d) { var e = b[0], f = b[1]; return a[0] = e + d * (c[0] - e), a[1] = f + d * (c[1] - f), a }, e.random = function(a, b) { b = b || 1; var c = 2 * d.RANDOM() * Math.PI; return a[0] = Math.cos(c) * b, a[1] = Math.sin(c) * b, a }, e.transformMat2 = function(a, b, c) { var d = b[0], e = b[1]; return a[0] = c[0] * d + c[2] * e, a[1] = c[1] * d + c[3] * e, a }, e.transformMat2d = function(a, b, c) { var d = b[0], e = b[1]; return a[0] = c[0] * d + c[2] * e + c[4], a[1] = c[1] * d + c[3] * e + c[5], a }, e.transformMat3 = function(a, b, c) { var d = b[0], e = b[1]; return a[0] = c[0] * d + c[3] * e + c[6], a[1] = c[1] * d + c[4] * e + c[7], a }, e.transformMat4 = function(a, b, c) { var d = b[0], e = b[1]; return a[0] = c[0] * d + c[4] * e + c[12], a[1] = c[1] * d + c[5] * e + c[13], a }, e.forEach = function() { var a = e.create(); return function(b, c, d, e, f, g) { var h, i; for (c || (c = 2), d || (d = 0), i = e ? Math.min(e * c + d, b.length) : b.length, h = d; h < i; h += c) a[0] = b[h], a[1] = b[h + 1], f(a, a, g), b[h] = a[0], b[h + 1] = a[1]; return b } }(), e.str = function(a) { return "vec2(" + a[0] + ", " + a[1] + ")" }, a.exports = e }]) }), function() { function a(c, d) { if (c = c || "", d = d || {}, c instanceof a) return c; if (!(this instanceof a)) return new a(c, d); var e = b(c); this._originalInput = c, this._r = e.r, this._g = e.g, this._b = e.b, this._a = e.a, this._roundA = M(100 * this._a) / 100, this._format = d.format || e.format, this._gradientType = d.gradientType, this._r < 1 && (this._r = M(this._r)), this._g < 1 && (this._g = M(this._g)), this._b < 1 && (this._b = M(this._b)), this._ok = e.ok, this._tc_id = K++ } function b(a) { var b = { r: 0, g: 0, b: 0 }, d = 1, f = !1, h = !1; return "string" == typeof a && (a = G(a)), "object" == typeof a && (a.hasOwnProperty("r") && a.hasOwnProperty("g") && a.hasOwnProperty("b") ? (b = c(a.r, a.g, a.b), f = !0, h = "%" === String(a.r).substr(-1) ? "prgb" : "rgb") : a.hasOwnProperty("h") && a.hasOwnProperty("s") && a.hasOwnProperty("v") ? (a.s = D(a.s), a.v = D(a.v), b = g(a.h, a.s, a.v), f = !0, h = "hsv") : a.hasOwnProperty("h") && a.hasOwnProperty("s") && a.hasOwnProperty("l") && (a.s = D(a.s), a.l = D(a.l), b = e(a.h, a.s, a.l), f = !0, h = "hsl"), a.hasOwnProperty("a") && (d = a.a)), d = w(d), { ok: f, format: a.format || h, r: N(255, O(b.r, 0)), g: N(255, O(b.g, 0)), b: N(255, O(b.b, 0)), a: d } } function c(a, b, c) { return { r: 255 * x(a, 255), g: 255 * x(b, 255), b: 255 * x(c, 255) } } function d(a, b, c) { a = x(a, 255), b = x(b, 255), c = x(c, 255); var d, e, f = O(a, b, c), g = N(a, b, c), h = (f + g) / 2; if (f == g) d = e = 0; else { var i = f - g; switch (e = h > .5 ? i / (2 - f - g) : i / (f + g), f) { case a: d = (b - c) / i + (b < c ? 6 : 0); break; case b: d = (c - a) / i + 2; break; case c: d = (a - b) / i + 4 } d /= 6 } return { h: d, s: e, l: h } } function e(a, b, c) { function d(a, b, c) { return c < 0 && (c += 1), c > 1 && (c -= 1), c < 1 / 6 ? a + 6 * (b - a) * c : c < .5 ? b : c < 2 / 3 ? a + (b - a) * (2 / 3 - c) * 6 : a } var e, f, g; if (a = x(a, 360), b = x(b, 100), c = x(c, 100), 0 === b) e = f = g = c; else { var h = c < .5 ? c * (1 + b) : c + b - c * b, i = 2 * c - h; e = d(i, h, a + 1 / 3), f = d(i, h, a), g = d(i, h, a - 1 / 3) } return { r: 255 * e, g: 255 * f, b: 255 * g } } function f(a, b, c) { a = x(a, 255), b = x(b, 255), c = x(c, 255); var d, e, f = O(a, b, c), g = N(a, b, c), h = f, i = f - g; if (e = 0 === f ? 0 : i / f, f == g) d = 0; else { switch (f) { case a: d = (b - c) / i + (b < c ? 6 : 0); break; case b: d = (c - a) / i + 2; break; case c: d = (a - b) / i + 4 } d /= 6 } return { h: d, s: e, v: h } } function g(a, b, c) { a = 6 * x(a, 360), b = x(b, 100), c = x(c, 100); var d = L.floor(a), e = a - d, f = c * (1 - b), g = c * (1 - e * b), h = c * (1 - (1 - e) * b), i = d % 6; return { r: 255 * [c, g, f, f, h, c][i], g: 255 * [h, c, c, g, f, f][i], b: 255 * [f, f, h, c, c, g][i] } } function h(a, b, c, d) { var e = [C(M(a).toString(16)), C(M(b).toString(16)), C(M(c).toString(16))]; return d && e[0].charAt(0) == e[0].charAt(1) && e[1].charAt(0) == e[1].charAt(1) && e[2].charAt(0) == e[2].charAt(1) ? e[0].charAt(0) + e[1].charAt(0) + e[2].charAt(0) : e.join("") } function i(a, b, c, d) { return [C(E(d)), C(M(a).toString(16)), C(M(b).toString(16)), C(M(c).toString(16))].join("") } function j(b, c) { c = 0 === c ? 0 : c || 10; var d = a(b).toHsl(); return d.s -= c / 100, d.s = y(d.s), a(d) } function k(b, c) { c = 0 === c ? 0 : c || 10; var d = a(b).toHsl(); return d.s += c / 100, d.s = y(d.s), a(d) } function l(b) { return a(b).desaturate(100) } function m(b, c) { c = 0 === c ? 0 : c || 10; var d = a(b).toHsl(); return d.l += c / 100, d.l = y(d.l), a(d) } function n(b, c) { c = 0 === c ? 0 : c || 10; var d = a(b).toRgb(); return d.r = O(0, N(255, d.r - M(-c / 100 * 255))), d.g = O(0, N(255, d.g - M(-c / 100 * 255))), d.b = O(0, N(255, d.b - M(-c / 100 * 255))), a(d) } function o(b, c) { c = 0 === c ? 0 : c || 10; var d = a(b).toHsl(); return d.l -= c / 100, d.l = y(d.l), a(d) } function p(b, c) { var d = a(b).toHsl(), e = (M(d.h) + c) % 360; return d.h = e < 0 ? 360 + e : e, a(d) } function q(b) { var c = a(b).toHsl(); return c.h = (c.h + 180) % 360, a(c) } function r(b) { var c = a(b).toHsl(), d = c.h; return [a(b), a({ h: (d + 120) % 360, s: c.s, l: c.l }), a({ h: (d + 240) % 360, s: c.s, l: c.l })] } function s(b) { var c = a(b).toHsl(), d = c.h; return [a(b), a({ h: (d + 90) % 360, s: c.s, l: c.l }), a({ h: (d + 180) % 360, s: c.s, l: c.l }), a({ h: (d + 270) % 360, s: c.s, l: c.l })] } function t(b) { var c = a(b).toHsl(), d = c.h; return [a(b), a({ h: (d + 72) % 360, s: c.s, l: c.l }), a({ h: (d + 216) % 360, s: c.s, l: c.l })] } function u(b, c, d) { c = c || 6, d = d || 30; var e = a(b).toHsl(), f = 360 / d, g = [a(b)]; for (e.h = (e.h - (f * c >> 1) + 720) % 360; --c;) e.h = (e.h + f) % 360, g.push(a(e)); return g } function v(b, c) { c = c || 6; for (var d = a(b).toHsv(), e = d.h, f = d.s, g = d.v, h = [], i = 1 / c; c--;) h.push(a({ h: e, s: f, v: g })), g = (g + i) % 1; return h } function w(a) { return a = parseFloat(a), (isNaN(a) || a < 0 || a > 1) && (a = 1), a } function x(a, b) { A(a) && (a = "100%"); var c = B(a); return a = N(b, O(0, parseFloat(a))), c && (a = parseInt(a * b, 10) / 100), L.abs(a - b) < 1e-6 ? 1 : a % b / parseFloat(b) } function y(a) { return N(1, O(0, a)) } function z(a) { return parseInt(a, 16) } function A(a) { return "string" == typeof a && -1 != a.indexOf(".") && 1 === parseFloat(a) } function B(a) { return "string" == typeof a && -1 != a.indexOf("%") } function C(a) { return 1 == a.length ? "0" + a : "" + a } function D(a) { return a <= 1 && (a = 100 * a + "%"), a } function E(a) { return Math.round(255 * parseFloat(a)).toString(16) } function F(a) { return z(a) / 255 } function G(a) { a = a.replace(I, "").replace(J, "").toLowerCase(); var b = !1; if (Q[a]) a = Q[a], b = !0; else if ("transparent" == a) return { r: 0, g: 0, b: 0, a: 0, format: "name" }; var c; return (c = S.rgb.exec(a)) ? { r: c[1], g: c[2], b: c[3] } : (c = S.rgba.exec(a)) ? { r: c[1], g: c[2], b: c[3], a: c[4] } : (c = S.hsl.exec(a)) ? { h: c[1], s: c[2], l: c[3] } : (c = S.hsla.exec(a)) ? { h: c[1], s: c[2], l: c[3], a: c[4] } : (c = S.hsv.exec(a)) ? { h: c[1], s: c[2], v: c[3] } : (c = S.hsva.exec(a)) ? { h: c[1], s: c[2], v: c[3], a: c[4] } : (c = S.hex8.exec(a)) ? { a: F(c[1]), r: z(c[2]), g: z(c[3]), b: z(c[4]), format: b ? "name" : "hex8" } : (c = S.hex6.exec(a)) ? { r: z(c[1]), g: z(c[2]), b: z(c[3]), format: b ? "name" : "hex" } : !!(c = S.hex3.exec(a)) && { r: z(c[1] + "" + c[1]), g: z(c[2] + "" + c[2]), b: z(c[3] + "" + c[3]), format: b ? "name" : "hex" } } function H(a) { var b, c; return a = a || { level: "AA", size: "small" }, b = (a.level || "AA").toUpperCase(), c = (a.size || "small").toLowerCase(), "AA" !== b && "AAA" !== b && (b = "AA"), "small" !== c && "large" !== c && (c = "small"), { level: b, size: c } } var I = /^[\s,#]+/, J = /\s+$/, K = 0, L = Math, M = L.round, N = L.min, O = L.max, P = L.random; a.prototype = { isDark: function() { return this.getBrightness() < 128 }, isLight: function() { return !this.isDark() }, isValid: function() { return this._ok }, getOriginalInput: function() { return this._originalInput }, getFormat: function() { return this._format }, getAlpha: function() { return this._a }, getBrightness: function() { var a = this.toRgb(); return (299 * a.r + 587 * a.g + 114 * a.b) / 1e3 }, getLuminance: function() { var a, b, c, d, e, f, g = this.toRgb(); return a = g.r / 255, b = g.g / 255, c = g.b / 255, d = a <= .03928 ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4), e = b <= .03928 ? b / 12.92 : Math.pow((b + .055) / 1.055, 2.4), f = c <= .03928 ? c / 12.92 : Math.pow((c + .055) / 1.055, 2.4), .2126 * d + .7152 * e + .0722 * f }, setAlpha: function(a) { return this._a = w(a), this._roundA = M(100 * this._a) / 100, this }, toHsv: function() { var a = f(this._r, this._g, this._b); return { h: 360 * a.h, s: a.s, v: a.v, a: this._a } }, toHsvString: function() { var a = f(this._r, this._g, this._b), b = M(360 * a.h), c = M(100 * a.s), d = M(100 * a.v); return 1 == this._a ? "hsv(" + b + ", " + c + "%, " + d + "%)" : "hsva(" + b + ", " + c + "%, " + d + "%, " + this._roundA + ")" }, toHsl: function() { var a = d(this._r, this._g, this._b); return { h: 360 * a.h, s: a.s, l: a.l, a: this._a } }, toHslString: function() { var a = d(this._r, this._g, this._b), b = M(360 * a.h), c = M(100 * a.s), e = M(100 * a.l); return 1 == this._a ? "hsl(" + b + ", " + c + "%, " + e + "%)" : "hsla(" + b + ", " + c + "%, " + e + "%, " + this._roundA + ")" }, toHex: function(a) { return h(this._r, this._g, this._b, a) }, toHexString: function(a) { return "#" + this.toHex(a) }, toHex8: function() { return i(this._r, this._g, this._b, this._a) }, toHex8String: function() { return "#" + this.toHex8() }, toRgb: function() { return { r: M(this._r), g: M(this._g), b: M(this._b), a: this._a } }, toRgbString: function() { return 1 == this._a ? "rgb(" + M(this._r) + ", " + M(this._g) + ", " + M(this._b) + ")" : "rgba(" + M(this._r) + ", " + M(this._g) + ", " + M(this._b) + ", " + this._roundA + ")" }, toPercentageRgb: function() { return { r: M(100 * x(this._r, 255)) + "%", g: M(100 * x(this._g, 255)) + "%", b: M(100 * x(this._b, 255)) + "%", a: this._a } }, toPercentageRgbString: function() { return 1 == this._a ? "rgb(" + M(100 * x(this._r, 255)) + "%, " + M(100 * x(this._g, 255)) + "%, " + M(100 * x(this._b, 255)) + "%)" : "rgba(" + M(100 * x(this._r, 255)) + "%, " + M(100 * x(this._g, 255)) + "%, " + M(100 * x(this._b, 255)) + "%, " + this._roundA + ")" }, toName: function() { return 0 === this._a ? "transparent" : !(this._a < 1) && (R[h(this._r, this._g, this._b, !0)] || !1) }, toFilter: function(b) { var c = "#" + i(this._r, this._g, this._b, this._a), d = c, e = this._gradientType ? "GradientType = 1, " : ""; if (b) { d = a(b).toHex8String() } return "progid:DXImageTransform.Microsoft.gradient(" + e + "startColorstr=" + c + ",endColorstr=" + d + ")" }, toString: function(a) { var b = !!a; a = a || this._format; var c = !1, d = this._a < 1 && this._a >= 0; return b || !d || "hex" !== a && "hex6" !== a && "hex3" !== a && "name" !== a ? ("rgb" === a && (c = this.toRgbString()), "prgb" === a && (c = this.toPercentageRgbString()), "hex" !== a && "hex6" !== a || (c = this.toHexString()), "hex3" === a && (c = this.toHexString(!0)), "hex8" === a && (c = this.toHex8String()), "name" === a && (c = this.toName()), "hsl" === a && (c = this.toHslString()), "hsv" === a && (c = this.toHsvString()), c || this.toHexString()) : "name" === a && 0 === this._a ? this.toName() : this.toRgbString() }, _applyModification: function(a, b) { var c = a.apply(null, [this].concat([].slice.call(b))); return this._r = c._r, this._g = c._g, this._b = c._b, this.setAlpha(c._a), this }, lighten: function() { return this._applyModification(m, arguments) }, brighten: function() { return this._applyModification(n, arguments) }, darken: function() { return this._applyModification(o, arguments) }, desaturate: function() { return this._applyModification(j, arguments) }, saturate: function() { return this._applyModification(k, arguments) }, greyscale: function() { return this._applyModification(l, arguments) }, spin: function() { return this._applyModification(p, arguments) }, _applyCombination: function(a, b) { return a.apply(null, [this].concat([].slice.call(b))) }, analogous: function() { return this._applyCombination(u, arguments) }, complement: function() { return this._applyCombination(q, arguments) }, monochromatic: function() { return this._applyCombination(v, arguments) }, splitcomplement: function() { return this._applyCombination(t, arguments) }, triad: function() { return this._applyCombination(r, arguments) }, tetrad: function() { return this._applyCombination(s, arguments) } }, a.fromRatio = function(b, c) { if ("object" == typeof b) { var d = {}; for (var e in b) b.hasOwnProperty(e) && (d[e] = "a" === e ? b[e] : D(b[e])); b = d } return a(b, c) }, a.equals = function(b, c) { return !(!b || !c) && a(b).toRgbString() == a(c).toRgbString() }, a.random = function() { return a.fromRatio({ r: P(), g: P(), b: P() }) }, a.mix = function(b, c, d) { d = 0 === d ? 0 : d || 50; var e, f = a(b).toRgb(), g = a(c).toRgb(), h = d / 100, i = 2 * h - 1, j = g.a - f.a; e = i * j == -1 ? i : (i + j) / (1 + i * j), e = (e + 1) / 2; var k = 1 - e; return a({ r: g.r * e + f.r * k, g: g.g * e + f.g * k, b: g.b * e + f.b * k, a: g.a * h + f.a * (1 - h) }) }, a.readability = function(b, c) { var d = a(b), e = a(c); return (Math.max(d.getLuminance(), e.getLuminance()) + .05) / (Math.min(d.getLuminance(), e.getLuminance()) + .05) }, a.isReadable = function(b, c, d) { var e, f, g = a.readability(b, c); switch (f = !1, e = H(d), e.level + e.size) { case "AAsmall": case "AAAlarge": f = g >= 4.5; break; case "AAlarge": f = g >= 3; break; case "AAAsmall": f = g >= 7 } return f }, a.mostReadable = function(b, c, d) { var e, f, g, h, i = null, j = 0; d = d || {}, f = d.includeFallbackColors, g = d.level, h = d.size; for (var k = 0; k < c.length; k++)(e = a.readability(b, c[k])) > j && (j = e, i = a(c[k])); return a.isReadable(b, i, { level: g, size: h }) || !f ? i : (d.includeFallbackColors = !1, a.mostReadable(b, ["#fff", "#000"], d)) }; var Q = a.names = { aliceblue: "f0f8ff", antiquewhite: "faebd7", aqua: "0ff", aquamarine: "7fffd4", azure: "f0ffff", beige: "f5f5dc", bisque: "ffe4c4", black: "000", blanchedalmond: "ffebcd", blue: "00f", blueviolet: "8a2be2", brown: "a52a2a", burlywood: "deb887", burntsienna: "ea7e5d", cadetblue: "5f9ea0", chartreuse: "7fff00", chocolate: "d2691e", coral: "ff7f50", cornflowerblue: "6495ed", cornsilk: "fff8dc", crimson: "dc143c", cyan: "0ff", darkblue: "00008b", darkcyan: "008b8b", darkgoldenrod: "b8860b", darkgray: "a9a9a9", darkgreen: "006400", darkgrey: "a9a9a9", darkkhaki: "bdb76b", darkmagenta: "8b008b", darkolivegreen: "556b2f", darkorange: "ff8c00", darkorchid: "9932cc", darkred: "8b0000", darksalmon: "e9967a", darkseagreen: "8fbc8f", darkslateblue: "483d8b", darkslategray: "2f4f4f", darkslategrey: "2f4f4f", darkturquoise: "00ced1", darkviolet: "9400d3", deeppink: "ff1493", deepskyblue: "00bfff", dimgray: "696969", dimgrey: "696969", dodgerblue: "1e90ff", firebrick: "b22222", floralwhite: "fffaf0", forestgreen: "228b22", fuchsia: "f0f", gainsboro: "dcdcdc", ghostwhite: "f8f8ff", gold: "ffd700", goldenrod: "daa520", gray: "808080", green: "008000", greenyellow: "adff2f", grey: "808080", honeydew: "f0fff0", hotpink: "ff69b4", indianred: "cd5c5c", indigo: "4b0082", ivory: "fffff0", khaki: "f0e68c", lavender: "e6e6fa", lavenderblush: "fff0f5", lawngreen: "7cfc00", lemonchiffon: "fffacd", lightblue: "add8e6", lightcoral: "f08080", lightcyan: "e0ffff", lightgoldenrodyellow: "fafad2", lightgray: "d3d3d3", lightgreen: "90ee90", lightgrey: "d3d3d3", lightpink: "ffb6c1", lightsalmon: "ffa07a", lightseagreen: "20b2aa", lightskyblue: "87cefa", lightslategray: "789", lightslategrey: "789", lightsteelblue: "b0c4de", lightyellow: "ffffe0", lime: "0f0", limegreen: "32cd32", linen: "faf0e6", magenta: "f0f", maroon: "800000", mediumaquamarine: "66cdaa", mediumblue: "0000cd", mediumorchid: "ba55d3", mediumpurple: "9370db", mediumseagreen: "3cb371", mediumslateblue: "7b68ee", mediumspringgreen: "00fa9a", mediumturquoise: "48d1cc", mediumvioletred: "c71585", midnightblue: "191970", mintcream: "f5fffa", mistyrose: "ffe4e1", moccasin: "ffe4b5", navajowhite: "ffdead", navy: "000080", oldlace: "fdf5e6", olive: "808000", olivedrab: "6b8e23", orange: "ffa500", orangered: "ff4500", orchid: "da70d6", palegoldenrod: "eee8aa", palegreen: "98fb98", paleturquoise: "afeeee", palevioletred: "db7093", papayawhip: "ffefd5", peachpuff: "ffdab9", peru: "cd853f", pink: "ffc0cb", plum: "dda0dd", powderblue: "b0e0e6", purple: "800080", rebeccapurple: "663399", red: "f00", rosybrown: "bc8f8f", royalblue: "4169e1", saddlebrown: "8b4513", salmon: "fa8072", sandybrown: "f4a460", seagreen: "2e8b57", seashell: "fff5ee", sienna: "a0522d", silver: "c0c0c0", skyblue: "87ceeb", slateblue: "6a5acd", slategray: "708090", slategrey: "708090", snow: "fffafa", springgreen: "00ff7f", steelblue: "4682b4", tan: "d2b48c", teal: "008080", thistle: "d8bfd8", tomato: "ff6347", turquoise: "40e0d0", violet: "ee82ee", wheat: "f5deb3", white: "fff", whitesmoke: "f5f5f5", yellow: "ff0", yellowgreen: "9acd32" }, R = a.hexNames = function(a) { var b = {}; for (var c in a) a.hasOwnProperty(c) && (b[a[c]] = c); return b }(Q), S = function() { var a = "(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)", b = "[\\s|\\(]+(" + a + ")[,|\\s]+(" + a + ")[,|\\s]+(" + a + ")\\s*\\)?", c = "[\\s|\\(]+(" + a + ")[,|\\s]+(" + a + ")[,|\\s]+(" + a + ")[,|\\s]+(" + a + ")\\s*\\)?"; return { rgb: new RegExp("rgb" + b), rgba: new RegExp("rgba" + c), hsl: new RegExp("hsl" + b), hsla: new RegExp("hsla" + c), hsv: new RegExp("hsv" + b), hsva: new RegExp("hsva" + c), hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/, hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/ } }(); "undefined" != typeof module && module.exports ? module.exports = a : "function" == typeof define && define.amd ? define(function() { return a }) : window.tinycolor = a }(); var appRequestCounter = 0, appRequestCallbacks = {}, appRequestCache = new Map, benchmarks = [], startTime = 0, HSPlane; ! function(a) { a[a.horizontal = 0] = "horizontal", a[a.vertical = 1] = "vertical" }(HSPlane || (HSPlane = {})); var HSMagnitude; ! function(a) { a[a.positive = 0] = "positive", a[a.negative = 1] = "negative", a[a.none = 2] = "none" }(HSMagnitude || (HSMagnitude = {})); var HSDirection; ! function(a) { a[a.up = 0] = "up", a[a.down = 1] = "down", a[a.left = 2] = "left", a[a.right = 3] = "right" }(HSDirection || (HSDirection = {})), Array.prototype.remove = function(a) { var b = this.indexOf(a); void 0 !== b && this.splice(b, 1) }; var iOS = /(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent), iOSApp = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent), HSManagedObject = function() { function a(a) { this.context = a, this.description = this.constructor.name, a.insertObject(this) } return a }(); HSManagedObject.key = "HSManagedObject"; var HSBlockType; ! function(a) { a[a.WaitTilTimestamp = 19] = "WaitTilTimestamp", a[a.None = 22] = "None", a[a.Move = 23] = "Move", a[a.Rotate = 24] = "Rotate", a[a.ChangeX = 27] = "ChangeX", a[a.ChangeY = 28] = "ChangeY", a[a.Scale = 29] = "Scale", a[a.Clear = 30] = "Clear", a[a.StrokeWidth = 31] = "StrokeWidth", a[a.StrokeColor = 32] = "StrokeColor", a[a.ChangeCostume = 33] = "ChangeCostume", a[a.ChangeSpeed = 34] = "ChangeSpeed", a[a.Wait = 35] = "Wait", a[a.SetOpacity = 36] = "SetOpacity", a[a.PenDown = 37] = "PenDown", a[a.PenUp = 38] = "PenUp", a[a.SetHeading = 39] = "SetHeading", a[a.SetText = 40] = "SetText", a[a.SetPosition = 41] = "SetPosition", a[a.SendToBack = 42] = "SendToBack", a[a.BringToFront = 43] = "BringToFront", a[a.ChangeVariable = 44] = "ChangeVariable", a[a.SetVariable = 45] = "SetVariable", a[a.MoveWithTrail = 46] = "MoveWithTrail", a[a.SetInvisibility = 47] = "SetInvisibility", a[a.Grow = 48] = "Grow", a[a.Shrink = 49] = "Shrink", a[a.Flip = 50] = "Flip", a[a.SetSize = 51] = "SetSize", a[a.PlaySound = 52] = "PlaySound", a[a.MakeAClone = 53] = "MakeAClone", a[a.SetColor = 54] = "SetColor", a[a.Destroy = 55] = "Destroy", a[a.SetImage = 56] = "SetImage", a[a.SetWidthAndHeight = 57] = "SetWidthAndHeight", a[a.LeaveATrail = 26] = "LeaveATrail", a[a.Repeat = 120] = "Repeat", a[a.RepeatForever = 121] = "RepeatForever", a[a.CheckOnceIf = 122] = "CheckOnceIf", a[a.Ability = 123] = "Ability", a[a.CheckIfElse = 124] = "CheckIfElse", a[a.ChangeScene = 125] = "ChangeScene", a[a.Random = 233] = "Random", a[a.XPos = 234] = "XPos", a[a.YPos = 235] = "YPos", a[a.Random110 = 236] = "Random110", a[a.Random1100 = 237] = "Random1100", a[a.Random11000 = 238] = "Random11000", a[a.Variable = 239] = "Variable", a[a.ConditionalOperatorEquals = 1e3] = "ConditionalOperatorEquals", a[a.ConditionalOperatorNotEquals = 1001] = "ConditionalOperatorNotEquals", a[a.ConditionalOperatorLessThan = 1002] = "ConditionalOperatorLessThan", a[a.ConditionalOperatorGreaterThan = 1003] = "ConditionalOperatorGreaterThan", a[a.ConditionalOperatorAnd = 1004] = "ConditionalOperatorAnd", a[a.ConditionalOperatorOr = 1005] = "ConditionalOperatorOr", a[a.ConditionalOperatorGreaterThanOrEqualTo = 1006] = "ConditionalOperatorGreaterThanOrEqualTo", a[a.ConditionalOperatorLessThanOrEqualTo = 1007] = "ConditionalOperatorLessThanOrEqualTo", a[a.HS_END_OF_CONDITIONAL_OPERATORS = 1008] = "HS_END_OF_CONDITIONAL_OPERATORS", a[a.TraitRotation = 2e3] = "TraitRotation", a[a.TraitXPosition = 2001] = "TraitXPosition", a[a.TraitYPosition = 2002] = "TraitYPosition", a[a.TraitInvisibility = 2003] = "TraitInvisibility", a[a.TraitSize = 2004] = "TraitSize", a[a.TraitSpeed = 2005] = "TraitSpeed", a[a.TraitCloneIndex = 2006] = "TraitCloneIndex", a[a.TraitTotalClones = 2007] = "TraitTotalClones", a[a.TraitWidth = 2008] = "TraitWidth", a[a.TraitHeight = 2009] = "TraitHeight", a[a.HS_END_OF_OBJECT_TRAITS = 2010] = "HS_END_OF_OBJECT_TRAITS", a[a.StageTraitWidth = 3e3] = "StageTraitWidth", a[a.StageTraitHeight = 3001] = "StageTraitHeight", a[a.StageTraitTiltUp = 3002] = "StageTraitTiltUp", a[a.StageTraitTiltDown = 3003] = "StageTraitTiltDown", a[a.StageTraitTiltLeft = 3004] = "StageTraitTiltLeft", a[a.StageTraitTiltRight = 3005] = "StageTraitTiltRight", a[a.StageTraitLastTouchX = 3006] = "StageTraitLastTouchX", a[a.StageTraitLastTouchY = 3007] = "StageTraitLastTouchY", a[a.StageTraitTotalObjects = 3008] = "StageTraitTotalObjects", a[a.HS_END_OF_STAGE_TRAITS = 3009] = "HS_END_OF_STAGE_TRAITS", a[a.MathOperatorAdd = 4e3] = "MathOperatorAdd", a[a.MathOperatorSubtract = 4001] = "MathOperatorSubtract", a[a.MathOperatorMultiply = 4002] = "MathOperatorMultiply", a[a.MathOperatorDivide = 4003] = "MathOperatorDivide", a[a.MathOperatorRandom = 4004] = "MathOperatorRandom", a[a.MathOperatorPower = 4005] = "MathOperatorPower", a[a.MathOperatorSquareRoot = 4006] = "MathOperatorSquareRoot", a[a.MathOperatorSine = 4007] = "MathOperatorSine", a[a.MathOperatorCosine = 4008] = "MathOperatorCosine", a[a.MathOperatorRound = 4009] = "MathOperatorRound", a[a.MathOperatorAbs = 4010] = "MathOperatorAbs", a[a.MathOperatorModulo = 4011] = "MathOperatorModulo", a[a.MathOperatorTangent = 4012] = "MathOperatorTangent", a[a.MathOperatorInverseSine = 4013] = "MathOperatorInverseSine", a[a.MathOperatorInverseCosine = 4014] = "MathOperatorInverseCosine", a[a.MathOperatorInverseTangent = 4015] = "MathOperatorInverseTangent", a[a.MathOperatorMaximum = 4016] = "MathOperatorMaximum", a[a.MathOperatorMinimum = 4017] = "MathOperatorMinimum", a[a.HS_END_OF_MATH_OPERATORS = 4018] = "HS_END_OF_MATH_OPERATORS", a[a.ColorOperatorRandom = 5e3] = "ColorOperatorRandom", a[a.ColorOperatorRGB = 5001] = "ColorOperatorRGB", a[a.ColorOperatorHSB = 5002] = "ColorOperatorHSB", a[a.HS_END_OF_COLOR_OPERATORS = 5003] = "HS_END_OF_COLOR_OPERATORS", a[a.Rule = 6e3] = "Rule", a[a.RulePreview = 6001] = "RulePreview", a[a.EventOperatorStart = 7e3] = "EventOperatorStart", a[a.EventOperatorTap = 7001] = "EventOperatorTap", a[a.EventOperatorIsTouching = 7002] = "EventOperatorIsTouching", a[a.EventOperatorHold = 7003] = "EventOperatorHold", a[a.EventOperatorTiltRight = 7004] = "EventOperatorTiltRight", a[a.EventOperatorTiltLeft = 7005] = "EventOperatorTiltLeft", a[a.EventOperatorTiltUp = 7006] = "EventOperatorTiltUp", a[a.EventOperatorTiltDown = 7007] = "EventOperatorTiltDown", a[a.EventOperatorLoudNoise = 7008] = "EventOperatorLoudNoise", a[a.EventOperatorShake = 7009] = "EventOperatorShake", a[a.EventOperatorBump = 7010] = "EventOperatorBump", a[a.EventOperatorSwipeRight = 7011] = "EventOperatorSwipeRight", a[a.EventOperatorSwipeLeft = 7012] = "EventOperatorSwipeLeft", a[a.EventOperatorSwipeUp = 7013] = "EventOperatorSwipeUp", a[a.EventOperatorSwipeDown = 7014] = "EventOperatorSwipeDown", a[a.EventOperatorEnterTheWorld = 7015] = "EventOperatorEnterTheWorld", a[a.EventOperatorTiltRightEditor = 7016] = "EventOperatorTiltRightEditor", a[a.EventOperatorTiltLeftEditor = 7017] = "EventOperatorTiltLeftEditor", a[a.EventOperatorTiltUpEditor = 7018] = "EventOperatorTiltUpEditor", a[a.EventOperatorTiltDownEditor = 7019] = "EventOperatorTiltDownEditor", a[a.EventOperatorNotPressed = 7020] = "EventOperatorNotPressed", a[a.HS_END_OF_EVENT_OPERATORS = 7021] = "HS_END_OF_EVENT_OPERATORS", a[a.Object = 8e3] = "Object", a[a.AnyObject = 8001] = "AnyObject", a[a.ScreenEdge = 8002] = "ScreenEdge", a[a.Device = 8003] = "Device", a[a.Self = 8004] = "Self", a[a.OriginalObject = 8005] = "OriginalObject", a[a.HS_END_OF_EVENT_PARAMETER_BLOCKS = 8006] = "HS_END_OF_EVENT_PARAMETER_BLOCKS" }(HSBlockType || (HSBlockType = {})); var HSEventType; ! function(a) { a[a.HSEventOnStart = 1239] = "HSEventOnStart", a[a.HSEventTouchedObject = 1240] = "HSEventTouchedObject", a[a.HSEventTapStage = 1241] = "HSEventTapStage", a[a.HSEventShake = 1242] = "HSEventShake", a[a.HSEventTiltRight = 1243] = "HSEventTiltRight", a[a.HSEventTiltLeft = 1244] = "HSEventTiltLeft", a[a.HSEventTiltDown = 1245] = "HSEventTiltDown", a[a.HSEventTiltUp = 1246] = "HSEventTiltUp", a[a.HSEventLoudNoise = 1247] = "HSEventLoudNoise", a[a.HSEventCollision = 1248] = "HSEventCollision", a[a.HSEventHeldObject = 1249] = "HSEventHeldObject", a[a.HSEventEnteredWorld = 1250] = "HSEventEnteredWorld" }(HSEventType || (HSEventType = {})); var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, BLOCK_TYPE_KEY = "type", PARAMETERS_KEY = "parameters", PARAMS_KEY = "params", HSBlockClass; ! function(a) { a[a.Method = 0] = "Method", a[a.Control = 1] = "Control", a[a.ConditionalControl = 2] = "ConditionalControl", a[a.Variable = 3] = "Variable" }(HSBlockClass || (HSBlockClass = {})); var HSBlock = function(a) { function b() { var b = a.apply(this, arguments) || this; return b.parameters = [], b.isControl = !1, b } return __extends(b, a), b.prototype.parseJSON = function(a) { var b = this; void 0 === a && (a = {}), this.type = this.type || parseInt(a[BLOCK_TYPE_KEY]), (a[PARAMETERS_KEY] || a[PARAMS_KEY] || []).forEach(function(a) { var c = new HSParameter(b.context); c.parseJSON(a), b.parameters.push(c) }) }, b.prototype.stageParameters = function() { return this.parameters.map(function(a) { return a.stageParameter() }) }, b.prototype.toString = function() { return SourceFormatter.blockToSrc(this) }, b.blockClassForDict = function(a) { switch (void 0 === a && (a = {}), a[BLOCK_TYPE_KEY]) { case HSBlockType.Repeat: case HSBlockType.LeaveATrail: case HSBlockType.RepeatForever: case HSBlockType.Ability: return HSBlockClass.Control; case HSBlockType.CheckOnceIf: case HSBlockType.CheckIfElse: return HSBlockClass.ConditionalControl } return HSBlockClass.Method }, b }(HSManagedObject); HSBlock.key = "HSBlock"; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, CONTROL_SCRIPT_KEY = "controlScript", HSControlBlock = function(a) { function b() { var b = a.apply(this, arguments) || this; return b.scripts = [], b.isControl = !0, b } return __extends(b, a), b.prototype.stageBlock = function() { var a = this.scripts[0] || new HSScript(this.context); return new HSStageControl(this.type, [a], this.stageParameters()) }, b.prototype.parseJSON = function(b) { void 0 === b && (b = {}), a.prototype.parseJSON.call(this, b); var c = b[CONTROL_SCRIPT_KEY] || [], d = c[SCRIPT_ID_KEY] || "", e = this.context.findWithObjectID("HSScript", d); this.scripts.push(e) }, b }(HSBlock); HSControlBlock.key = "HSControlBlock"; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, TRAIT_OBJECT_ID_KEY = "HSTraitObjectIDKey", TRAIT_ID_KEY = "HSTraitIDKey", TRAIT_TYPE_KEY = "HSTraitTypeKey", MAX_FLOAT = 3.4028234663852886e38, HSParameterBlock = function(a) { function b() { return a.apply(this, arguments) || this } return __extends(b, a), b.prototype.parseJSON = function(b) { void 0 === b && (b = {}), a.prototype.parseJSON.call(this, b), b[TRAIT_ID_KEY] && this.parseTrait(b) }, b.prototype.stageParameterBlock = function() { return new HSStageParameterBlock(this) }, b.prototype.matchesObject = function(a) { return this.object ? this.object === a : !a }, b.prototype.parseTrait = function(a) { this.object = this.context.findWithObjectID(HSObject.key, a[TRAIT_OBJECT_ID_KEY]), this.objectID = a[TRAIT_ID_KEY], this.type = a[TRAIT_TYPE_KEY], this.objectReferenceType = a.HSTraitObjectParameterTypeKey }, b.prototype.computedValue = function(a) { switch (this.type) { case HSBlockType.Random110: case HSBlockType.Random1100: case HSBlockType.Random11000: case HSBlockType.MathOperatorRandom: case HSBlockType.Random: var b = this.secondParameterValue(a), c = this.firstParameterValue(a); return Math.floor(Math.random() * (b - c + 1)) + c; case HSBlockType.MathOperatorAdd: return this.secondParameterValue(a) + this.firstParameterValue(a); case HSBlockType.MathOperatorSubtract: return this.firstParameterValue(a) - this.secondParameterValue(a); case HSBlockType.MathOperatorMultiply: return this.firstParameterValue(a) * this.secondParameterValue(a); case HSBlockType.MathOperatorDivide: var d = this.secondParameterValue(a); return 0 === d ? 0 : this.firstParameterValue(a) / d; case HSBlockType.MathOperatorSine: return Math.sin(degreesToRadians(this.firstParameterValue(a))); case HSBlockType.MathOperatorCosine: return Math.cos(degreesToRadians(this.firstParameterValue(a))); case HSBlockType.MathOperatorTangent: return Math.tan(degreesToRadians(this.firstParameterValue(a))); case HSBlockType.MathOperatorInverseSine: return radiansToDegrees(Math.asin(this.firstParameterValue(a)) || 0); case HSBlockType.MathOperatorInverseCosine: return radiansToDegrees(Math.acos(this.firstParameterValue(a)) || 0); case HSBlockType.MathOperatorInverseTangent: return radiansToDegrees(Math.atan(this.firstParameterValue(a)) || 0); case HSBlockType.MathOperatorMaximum: return Math.max(this.firstParameterValue(a), this.secondParameterValue(a)); case HSBlockType.MathOperatorMinimum: return Math.min(this.firstParameterValue(a), this.secondParameterValue(a)); case HSBlockType.MathOperatorSquareRoot: return Math.sqrt(this.firstParameterValue(a)); case HSBlockType.MathOperatorPower: return Math.pow(this.firstParameterValue(a), this.secondParameterValue(a)); case HSBlockType.MathOperatorRound: return Math.round(this.firstParameterValue(a)); case HSBlockType.MathOperatorAbs: return Math.abs(this.firstParameterValue(a)); case HSBlockType.MathOperatorModulo: var d = this.secondParameterValue(a); return 0 === d ? 0 : this.firstParameterValue(a) % d; case HSBlockType.ConditionalOperatorEquals: case HSBlockType.ConditionalOperatorLessThan: case HSBlockType.ConditionalOperatorGreaterThan: case HSBlockType.ConditionalOperatorGreaterThanOrEqualTo: case HSBlockType.ConditionalOperatorLessThanOrEqualTo: case HSBlockType.ConditionalOperatorNotEquals: case HSBlockType.ConditionalOperatorAnd: case HSBlockType.ConditionalOperatorOr: return this.computedBooleanValue(a) ? 1 : 0; case HSBlockType.TraitXPosition: return Math.round(this.stageObjects(a)[0].x); case HSBlockType.TraitYPosition: return Math.round(this.stageObjects(a)[0].y); case HSBlockType.TraitWidth: return this.stageObjects(a)[0].width(); case HSBlockType.TraitHeight: return this.stageObjects(a)[0].height(); case HSBlockType.TraitRotation: return this.stageObjects(a)[0].headingInDegrees; case HSBlockType.TraitSpeed: return this.stageObjects(a)[0].speed; case HSBlockType.TraitCloneIndex: return this.stageObjects(a)[0].cloneIndex; case HSBlockType.TraitTotalClones: var e = this.stageObjects(a)[0]; return this.context.findWithObjectID(HSObject.key, e.objectID).allStageObjects().length; case HSBlockType.StageTraitTotalObjects: return HSStageProject.sharedInstance.activeStageScene.stageObjects.length; case HSBlockType.TraitInvisibility: return this.stageObjects(a)[0].invisibilityPercent; case HSBlockType.TraitSize: return this.computedSizePercent(a); case HSBlockType.StageTraitLastTouchX: return HSStageProject.sharedInstance.activeStageScene.lastTouchX; case HSBlockType.StageTraitLastTouchY: return HSStageProject.sharedInstance.activeStageScene.lastTouchY; case HSBlockType.StageTraitTiltUp: return HSAccelerometerManager.tiltUp; case HSBlockType.StageTraitTiltDown: return HSAccelerometerManager.tiltDown; case HSBlockType.StageTraitTiltLeft: return HSAccelerometerManager.tiltLeft; case HSBlockType.StageTraitTiltRight: return HSAccelerometerManager.tiltRight; case HSBlockType.StageTraitWidth: return HSStageScene.stageWidth; case HSBlockType.StageTraitHeight: return HSStageScene.stageHeight; default: return null } }, b.prototype.computedSizePercent = function(a) { var b = this.stageObjects(a)[0]; switch (this.whichSizeShouldIUse(b)) { case "minimum": return Math.min(b.sizePercentHeight, b.sizePercentWidth); case "height": return b.sizePercentHeight; case "width": return b.sizePercentWidth } }, b.prototype.whichSizeShouldIUse = function(a) { var b = Math.abs(a.sizePercentHeight), c = Math.abs(a.sizePercentWidth); return b === c ? "minimum" : b > c ? "height" : "width" }, b.prototype.computedColorString = function(a) { switch (this.type) { case HSBlockType.ColorOperatorRandom: return HSColor.randomColor(); case HSBlockType.ColorOperatorRGB: return HSColor.rgb(this.firstParameterValue(a) % 256, this.secondParameterValue(a) % 256, this.parameters[2].stageParameter().computedValue(a) % 256); case HSBlockType.ColorOperatorHSB: return HSColor.hsb(this.firstParameterValue(a) % 361, this.secondParameterValue(a) % 101, this.parameters[2].stageParameter().computedValue(a) % 101); default: var b = HSColor.rgbStringFromNumericColor(this.computedStringValue(a)); return null == b ? HSColor.rgbTextColor : b } }, b.prototype.computedStringValue = function(a) { var b = this.computedValue(a); return null === b ? null : b > MAX_FLOAT ? "inf" : b < -MAX_FLOAT ? "-inf" : 0 === b ? 1 / b > 0 ? "0" : "-0" : (Math.round(1e6 * b) / 1e6).toString() }, b.prototype.computedBooleanValue = function(a) { function b() { return Math.abs(f - g) <= e } function c() { return f < g } function d() { return f > g } var e = Number.EPSILON, f = this.firstParameterValue(a), g = this.secondParameterValue(a); switch (this.type) { case HSBlockType.ConditionalOperatorEquals: return b(); case HSBlockType.ConditionalOperatorLessThan: return c() && !b(); case HSBlockType.ConditionalOperatorLessThanOrEqualTo: return b() || c(); case HSBlockType.ConditionalOperatorGreaterThan: return d() && !b(); case HSBlockType.ConditionalOperatorGreaterThanOrEqualTo: return b() || d(); case HSBlockType.ConditionalOperatorNotEquals: return !b(); case HSBlockType.ConditionalOperatorAnd: return !(!this.firstParameterValue(a) || !this.secondParameterValue(a)); case HSBlockType.ConditionalOperatorOr: return !(!this.firstParameterValue(a) && !this.secondParameterValue(a)); default: return !1 } }, b.prototype.usesOriginalObject = function() { return this.type === HSBlockType.OriginalObject || this.objectReferenceType == HSBlockType.OriginalObject }, b.prototype.stageObjects = function(a) { return this.type === HSBlockType.Self ? [a] : this.usesOriginalObject() ? [a.originalObject(this.context)] : this.object ? this.context.version >= HSProjectVersion.ADD_SELF ? this.object.allStageObjects() : [this.object.stageObject(a)] : this.type === HSBlockType.ScreenEdge ? [HSStageObject.edgeOfScreenObject] : this.type === HSBlockType.AnyObject ? HSStageProject.sharedInstance.activeStageScene.stageObjects : this.type >= HSBlockType.TraitRotation && this.type < HSBlockType.HS_END_OF_OBJECT_TRAITS ? [a] : [] }, b.prototype.firstParameterValue = function(a) { switch (this.type) { case HSBlockType.Random110: case HSBlockType.Random1100: case HSBlockType.Random11000: return 1; default: if (this.parameters.length > 0) return this.parameters[0].stageParameter().computedValue(a); if (HSBlockType[this.type] === HSBlockType[HSBlockType.Random110]) return 0 } }, b.prototype.secondParameterValue = function(a) { switch (this.type) { case HSBlockType.Random110: return 10; case HSBlockType.Random1100: return 100; case HSBlockType.Random11000: return 1e3; default: return this.parameters.length >= 2 ? this.parameters[1].stageParameter().computedValue(a) : 0 } }, b }(HSBlock); HSParameterBlock.key = "HSParameterBlock", emoji.basePath = "/assets"; var HSTextNodeKind; ! function(a) { a[a.text = 0] = "text", a[a.whitespace = 1] = "whitespace", a[a.newline = 2] = "newline", a[a.emoji = 3] = "emoji", a[a.geometricShape = 4] = "geometricShape" }(HSTextNodeKind || (HSTextNodeKind = {})); var HSToken = function() { function a(a, b) { this.text = a, this.kind = b } return a }(), HSTokenizer = function() { function a() {} return a.hasDrawableTokens = function(b) { return null != b && /\S/.test(b) && !a.ONLY_VARIATION_SELECTORS.test(b) }, a.tokenize = function(b) { if (this.tokenizedStringsCache.has(b)) return this.tokenizedStringsCache.get(b); for (var c = [], d = 0, e = 0, f = null; d < b.length; d++) if (" " === b[d] || "\t" === b[d]) f !== HSTextNodeKind.whitespace && (d > e && c.push(new HSToken(b.substring(e, d), f)), e = d, f = HSTextNodeKind.whitespace); else if ("\n" === b[d]) d > e && f !== HSTextNodeKind.whitespace && c.push(new HSToken(b.substring(e, d), f)), e = d, f = HSTextNodeKind.newline; else if (a.ZERO_WIDTH_JOINER.test(b[d]) && f === HSTextNodeKind.emoji) d += 1, this.isEmojiStartIndex(b, d) && (d += b.slice(d, d + 5).match(emoji.regex)[0].length - 1); else if (a.ONLY_VARIATION_SELECTORS.test(b[d]) && f !== HSTextNodeKind.text) { if (d > e) { var g = d; f === HSTextNodeKind.emoji && (g = d + 1), c.push(new HSToken(b.substring(e, g), f)) } e = d + 1, f = null } else if (this.isEmojiStartIndex(b, d)) { d > e && c.push(new HSToken(b.substring(e, d), f)), e = d, f = HSTextNodeKind.emoji; var h = 5; this.isUnicodeEmojiStartIndex(b, d) && (h = 2); var i = b.slice(d, d + h), j = a.emojiMatch(i); if (j) { var k = i.indexOf(j[0]), l = j[0].length - 1; d += k + l } } else !iOS && a.GEOMETRIC_SHAPES.test(b[d]) ? (d > e && c.push(new HSToken(b.substring(e, d), f)), e = d, f = HSTextNodeKind.geometricShape) : f !== HSTextNodeKind.text && (d > e && c.push(new HSToken(b.substring(e, d), f)), e = d, f = HSTextNodeKind.text); return d > e && null !== f && c.push(new HSToken(b.substring(e, d), f)), this.clearTokenCacheIfNecessary(), this.tokenizedStringsCache.set(b, c), c }, a.clearTokenCacheIfNecessary = function() { this.tokenizedStringsCache.size > 30 && this.tokenizedStringsCache.delete(this.tokenizedStringsCache.keys().next().value) }, a.isEmojiStartIndex = function(b, c) { var d = b.slice(c, c + 5); return a.startsWithEmojiRegex.test(d) || a.secondCharIsSurrogate.test(d) }, a.isUnicodeEmojiStartIndex = function(b, c) { var d = b.slice(c, c + 5); return !(a.startsWithEmojiRegex.test(d) || a.fitzRegex.test(d)) }, a.emojiMatch = function(b) { return b.match(emoji.regex) || b.match(a.secondCharIsSurrogate) }, a.rangeOfFirstEmojiStartingAtIndex = function(a, b) { var c = /[\ufe00-\ufe0f\u200d\u2640]$/, d = a.slice(b, b + 7).match(c); return 0 === d.length ? b : a.indexOf(d[0]) + 1 }, a }(); HSTokenizer.ONLY_VARIATION_SELECTORS = /^[\ufe00-\ufe0f]*$/, HSTokenizer.ZERO_WIDTH_JOINER = /[\u200d]/, HSTokenizer.GEOMETRIC_SHAPES = /[\u25A0-\u25CF\u25E0-\u25E1\u25E6-\u25FF]/, HSTokenizer.tokenizedStringsCache = new Map, HSTokenizer.surrogateRegex = RegExp("[" + HSTokenizer.lowSurrogates + HSTokenizer.highSurrogates + "]"), HSTokenizer.highSurrogates = "�-�", HSTokenizer.lowSurrogates = String.fromCharCode(56320) + "-" + String.fromCharCode(57343), HSTokenizer.secondCharIsSurrogate = RegExp("^.[" + HSTokenizer.lowSurrogates + "]"), HSTokenizer.startsWithEmojiRegex = RegExp("^" + emoji.regex.source), HSTokenizer.fitzpatricks = String.fromCharCode(55356) + "[" + String.fromCharCode(57088) + "-" + String.fromCharCode(57343) + "]", HSTokenizer.fitzRegex = RegExp("" + HSTokenizer.fitzpatricks); var HSRuleActivator = function() { function a() { this.stageObjects = [], this.currentCollisions = new HSCollisionPairCollection([]), this._stageObjectCache = new Set, this._stageRulesCache = null } return a.prototype.activateAllRulesForEventType = function(a) { this.stageObjects.forEach(function(b) { return b.activateAllStageRulesForEventType(a) }) }, a.prototype.allPossibleCollisionPairs = function() { var a = this; return this._collisionPairs || (this._collisionPairs = new HSCollisionPairCollection, this.stageObjects.forEach(function(b) { return a.addCollisionPairsForStageObject(b) })), this._collisionPairs }, a.prototype.addCollisionPairsForStageObject = function(a) { this._collisionPairs && (this._collisionPairs.add(Array.from(a.relatedCollisionRules).map(function(a) { return a.collisionPairs() }).reduce(function(a, b) { return a.concat(b) }, [])), this._collisionPairs.add(a.allPossibleCollisionPairs())) }, a.prototype.allStageRulesForEventType = function(a) { var b = this, c = this.stageRulesCache(); return this.stageObjects.filter(function(a) { return !b._stageObjectCache.has(a) }).forEach(function(a) { b.cacheRulesForStageObject(a) }), c[a] }, a.prototype.stageRulesCache = function() { if (this._stageRulesCache) return this._stageRulesCache; this._stageRulesCache = {}; for (var a = Object.keys(HSBlockType).filter(function(a) { return "string" == typeof a }), b = 0; b < a.length; b++) this._stageRulesCache[a[b]] = []; return this._stageRulesCache }, a.prototype.cacheRulesForStageObject = function(a) { var b = this.stageRulesCache(), c = a.stageRules; this._stageObjectCache.add(a), c.forEach(function(a) { return b[a.eventType()].push(a) }) }, a.prototype.activateCurrentCollisionRules = function() { var a, b = this, c = HSStageProject.sharedInstance.version < HSProjectVersion.WEBPLAYER_IN_APP; c && (a = this.bumpingCollisions ? this.bumpingCollisions.copy() : new HSCollisionPairCollection([])), this.allTouchingRules().forEach(function(d) { var e = d.collisionPairs().find(function(a) { return b.currentCollisions.contains(a) }); e && (d.activate(), c && a.add([e])) }), this.allBumpRules().forEach(function(d) { if (c) { var e = d.collisionPairs().filter(function(a) { return b.currentCollisions.contains(a) }); a.intersects(e) && d.activate(), a.add(e.slice(0, 1)) } else b.bumpingCollisions.intersects(d.collisionPairs()) && d.activate() }) }, a.prototype.allTouchingRules = function() { return this.allStageRulesForEventType(HSBlockType.EventOperatorIsTouching) }, a.prototype.allBumpRules = function() { return this.allStageRulesForEventType(HSBlockType.EventOperatorBump) }, a.prototype.executeAllActiveRules = function() { for (var a = this.stageObjects, b = a.length, c = 0; c < b; ++c) void 0 !== a[c] && a[c].executeActiveRules() }, a.prototype.activateAllRulesForEventWithObjects = function(a, b) { var c = this.allStageRulesForEventType(a); b.forEach(function(a) { c.forEach(function(b) { b.activateIfMatchesFirstObject(a) }) }) }, a }(), HSStageMethod = function() { function a(a, b) { void 0 === b && (b = []), this.type = a, this.parameters = b, this.isImmediate = [HSBlockType.PenDown, HSBlockType.StrokeColor, HSBlockType.StrokeWidth, HSBlockType.PenUp].includes(a) } return a.prototype.isOverStepSize = function(a, b) { return this.usesStepSize() && Math.abs(this.firstIntegerValue(b)) > a }, a.prototype.isWaitBlock = function() { return this.type === HSBlockType.Wait }, a.prototype.isFinishedTimestampBlock = function(a) { return this.type === HSBlockType.WaitTilTimestamp && this.firstIntegerValue(a) <= Date.now() }, a.prototype.isUnfinishedTimestampBlock = function(a) { return this.type === HSBlockType.WaitTilTimestamp && this.firstIntegerValue(a) > Date.now() }, a.prototype.usesStepSize = function() { return -1 !== [HSBlockType.ChangeX, HSBlockType.ChangeY, HSBlockType.Move, HSBlockType.Rotate].indexOf(this.type) }, a.prototype.firstIntegerValue = function(a) { return this.parameters.length > 0 ? this.parameters[0].computedValue(a) : null }, a.prototype.calculateValueMinusOneStep = function(a, b) { return this.isOverStepSize(a, b) ? this.signOfFirstValue(b) * (Math.abs(this.firstIntegerValue(b)) - Math.abs(a)) : 0 }, a.prototype.executableForStepSize = function(b, c) { if (this.isWaitBlock()) { var d = Date.now() + this.firstIntegerValue(c); return new a(HSBlockType.WaitTilTimestamp, [new HSStageParameter(d + "")]).executableForStepSize(b, c) } return new HSExecutable(this.blocksToExecuteNow(b, c), this.blocksToExecuteLater(b, c)) }, a.prototype.blocksToExecuteNow = function(b, c) { if (this.type === HSBlockType.WaitTilTimestamp) return []; if (!this.isOverStepSize(b, c)) return [this]; var d = new HSStageParameter("" + b * this.signOfFirstValue(c)); return [new a(this.type, [d])] }, a.prototype.toString = function() { return SourceFormatter.stageMethodToSrc(this) }, a.prototype.signOfFirstValue = function(a) { var b = this.firstIntegerValue(a); return b / Math.abs(b) }, a.prototype.blocksToExecuteLater = function(b, c) { if (this.isUnfinishedTimestampBlock(c)) return [this]; if (this.type === HSBlockType.PlaySound) return [new a(HSBlockType.Wait, [new HSStageParameter(this.parameters[1].computedValue(c) + "")])]; if (!this.usesStepSize()) return []; var d = this.calculateValueMinusOneStep(b, c), e = new HSStageParameter("" + d); return [new a(this.type, [e])] }, a }(), __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, HSStageScene = function(a) { function b(c) { var d = a.call(this) || this; return d.scene = c, d.renderList = new HSLinkedList, d.touchIsDown = !1, d.currentlyPressedObjects = [], d.tickCount = 0, d.container = new PIXI.Container, c.objects.forEach(function(a) { a.rebuildStageObject(), d.addStageObject(a.stageObject()) }), d.lastTouchX = b.stageWidth / 2, d.lastTouchY = b.stageHeight / 2, d.name = c.name, d } return __extends(b, a), b.prototype.addStageObject = function(a) { a.bringToFrontFunction = this.bringToFront.bind(this), a.sendToBackFunction = this.sendToBack.bind(this), a.cloneFunction = this.clone.bind(this), a.destroyFunction = this.destroy.bind(this), this.stageObjects.push(a), this.renderList.push(a) }, b.prototype.animationTick = function(a) { var b = this; this.container.removeChildren(), this.renderList.forEach(function(a) { a.update(), a.view.sprite && b.container.addChild(a.view.sprite) }), this.collisionTest(a), this.activateRules(), this.executeRules(), this.tickCount++ }, b.prototype.collisionTest = function(a) { if (a) { a.numberOfPixelCollisions = 0; var b = this.allPossibleCollisionPairs(); b.forEach(function(b) { return b.update(a) }), this.currentCollisions = b.filter(function(a) { return a.isTouching() }), this.bumpingCollisions = this.currentCollisions.filter(function(a) { return a.isBumping() }) } }, b.prototype.activateRules = function() { this.touchIsDown && this.activateAllRulesForEventWithObjects(HSBlockType.EventOperatorHold, this.currentlyPressedObjects), this.scene.context.hasAccelerometerEvent() && (this.activateTiltRules(), this.activateShakeRules()), this.activateAllNotPressedRules(), this.activateCurrentCollisionRules() }, b.prototype.activateAllNotPressedRules = function() { var a = this; this.allStageRulesForEventType(HSBlockType.EventOperatorNotPressed).forEach(function(b) { var c = !1; a.currentlyPressedObjects.forEach(function(a) { b.matchesFirstObject(a) && (c = !0) }), c || b.activate() }) }, b.prototype.executeRules = function() { this.executeAllActiveRules() }, b.prototype.receiveClickEvent = function(a, b) { this.setTouchPosition(a, b); var c = (this.scene.context, this.stageObjectsToReceiveTouchInRange(this.lastTouchX, this.lastTouchY, b)); this.activateAllRulesForEventWithObjects(HSBlockType.EventOperatorTap, c), this.activateAllRulesForEventWithObjects(HSBlockType.EventOperatorHold, c), this.currentlyPressedObjects = c }, b.prototype.receiveTouchDownEvent = function(a, b) { this.setTouchPosition(a, b), this.setTouchDownPosition(a, b), this.touchIsDown = !0 }, b.prototype.receiveTouchMoveEvent = function(a, b) { this.touchIsDown && (this.setTouchPosition(a, b), this.calculateSwipeEvents(a, b)) }, b.prototype.receiveTouchUpEvent = function(a, b) { this.touchIsDown = !1, this.currentlyPressedObjects = [] }, b.prototype.calculateSwipeEvents = function(a, b) { var c = this.horizontalSwipeForPoint(a), d = this.verticalSwipeForPoint(a), e = this.directionForSwipe(c, d); if (e) { var f = this.stageObjectsToReceiveTouchInRange(this.touchDownX, this.touchDownY, b); this.activateAllRulesForEventWithObjects(e, f), this.touchDownX = null, this.touchDownY = null } }, b.prototype.directionForSwipe = function(a, b) { switch (hs_direction(a, b, 10)) { case HSDirection.up: return HSBlockType.EventOperatorSwipeUp; case HSDirection.down: return HSBlockType.EventOperatorSwipeDown; case HSDirection.left: return HSBlockType.EventOperatorSwipeLeft; case HSDirection.right: return HSBlockType.EventOperatorSwipeRight; default: return null } }, b.prototype.horizontalSwipeForPoint = function(a) { return this.touchDownX ? a.point[0] - this.touchDownX : 0 }, b.prototype.verticalSwipeForPoint = function(a) { return this.touchDownY ? a.point[1] - this.touchDownY : 0 }, b.prototype.setTouchDownPosition = function(a, b) { this.touchDownX = a.point[0], this.touchDownY = a.point[1] }, b.prototype.setTouchPosition = function(a, b) { this.lastTouchX = a.point[0], this.lastTouchY = a.point[1] }, b.prototype.firstStageObjectWithinRange = function(a, b, c) { return this.renderList.findLast(function(d) { return c.hitTest(d, a, b) }) }, b.prototype.stageObjectsToReceiveTouchInRange = function(a, b, c) { var d = this.firstStageObjectWithinRange(a, b, c); return d ? [d, null] : [null] }, b.prototype.bringToFront = function(a) { this.renderList.remove(a), this.renderList.push(a) }, b.prototype.sendToBack = function(a) { this.renderList.remove(a), this.renderList.unshift(a) }, b.prototype.break = function() { this.stageObjects.forEach(function(a) { return a.break() }) }, b.prototype.destroy = function(a) { this.stageObjects.remove(a), this.renderList.remove(a), this.scene.context.findWithObjectID(HSObject.key, a.objectID).removeStageObject(a) }, b.prototype.clone = function(a, c) { if (void 0 === c && (c = 1), !(this.stageObjects.length >= b.MAX_CLONES)) { c = Math.min(b.MAX_CLONES - this.stageObjects.length, c); for (var d = this.scene.context, e = d.findWithObjectID(HSObject.key, a.objectID), f = 0; f < c; f++) { var g = a.deepCopy(d.version, e); g.creationTick = this.tickCount, e.addStageObject(g), g.relatedCollisionRules = a.relatedCollisionRules, this.addStageObject(g), this.cacheRulesForStageObject(g), this.addCollisionPairsForStageObject(g), g.activateAllStageRulesForEventType(HSBlockType.EventOperatorEnterTheWorld) } } }, b.prototype.activateTiltRules = function() { var a, b = HSAccelerometerManager.tiltDirection(); switch (b) { case HSDirection.up: a = HSBlockType.EventOperatorTiltUp; break; case HSDirection.down: a = HSBlockType.EventOperatorTiltDown; break; case HSDirection.left: a = HSBlockType.EventOperatorTiltLeft; break; case HSDirection.right: a = HSBlockType.EventOperatorTiltRight; break; default: a = HSBlockType.None } this.activateAllRulesForEventType(a) }, b.prototype.activateShakeRules = function() { HSAccelerometerManager.isShaking() && this.activateAllRulesForEventType(HSBlockType.EventOperatorShake) }, b }(HSRuleActivator); HSStageScene.stageHeight = 768, HSStageScene.stageWidth = 1024, HSStageScene.MAX_CLONES = 4096; var HSCharacterTextureFactory = function() { function a() {} return a.prototype.build = function(a, b) { return Promise.resolve(this._build(b)) }, a.prototype._build = function(a) { var b = document.getElementById(this.imageID(a)), c = this.quantizedScale(b, a), d = PIXI.Texture.fromImage(this.svgString(b, a), !1, PIXI.SCALE_MODES.LINEAR, c); return d.baseTexture.resolution = c, d }, a.prototype.quantizedScale = function(a, b) { var c = 4; a && (c = Math.floor(1024 / parseInt(a.getAttribute("width")))); var d = Math.abs(b.sizePercentWidth), e = Math.abs(b.sizePercentHeight), f = Math.max(d, e); return Math.min(Math.max(Math.ceil(.01 * f), 1), c) }, a.prototype.buildAll = function(a, b) { for (var c = [], d = b.willChangeCostume ? 4 : 1, e = 0; e < d; e++) b.animationNumber = e, c.push(this._build(b)); return Promise.resolve(c) }, a.prototype.imageID = function(a) { var b = a.type || 0, c = HSObjectType[b]; return c[0].toUpperCase() + c.slice(1) + a.animationNumber + ".svg" }, a.prototype.svgString = function(a, b) { var c = ""; if (a) { a.style.fill = HSColor.rgbWhiteColor; var d = this.quantizedScale(a, b); a.setAttribute("hsScale", "" + d), c = HSView.xmlSerializer.serializeToString(a) } return "data:image/svg+xml;charset=utf8," + c }, a }(); HSCharacterTextureFactory.instance = new HSCharacterTextureFactory; var HSTextTextureFactory = function() { function a() {} return a.setFont = function(b, c) { b.font = c / 2 + "px " + a.FONT_FAMILIES.join(", "), b.textAlign = "left", b.textBaseline = "top" }, a.prototype.key = function(a) { return JSON.stringify({ text: a.text, color: a.color }) }, a.prototype.buildAll = function(a, b) { return this.build(a, b).then(function(a) { return [a] }).catch(function(a) { return [] }) }, a.prototype.build = function(a, b) { var c = HSTextNode.fromString(b.text); if (!c) return Promise.reject(null); var a = this.canvas(a, b, c); if (!a) return Promise.reject(null); var d = a.getContext("2d"); return c.draw(d).then(function(b) { return PIXI.Texture.fromCanvas(a) }) }, a.scaleUp = function() { return HopscotchDrawingContext.MAX_TEXTURE_SIDE_LENGTH / HSTextNode.MAX_LINE_WIDTH }, a.prototype.canvas = function(b, c, d) { var e = b.getContext("2d"); a.setFont(e, c.fontSize); var f = c.text, g = HSColor.rgbWhiteColor; hasEmoji(f) && (g = c.color); var h = d.flow(e, HSTextNode.MAX_LINE_WIDTH); if (0 === h.width || 0 === h.height) return null; var i = a.scaleUp(); return b.width = Math.min(h.width * i, 4096), b.height = Math.min(h.height * i, 4096), a.setFont(e, c.fontSize), e.scale(i, i), e.fillStyle = HSColor.rgbStringFromHSBString(g), b }, a }(); HSTextTextureFactory.FONT_FAMILIES = ["Avenir-Book", "Hiragino Sans", "sans-serif", "AppleSymbols"], HSTextTextureFactory.instance = new HSTextTextureFactory, HSTextTextureFactory.textureCache = {}; var HSImageTextureFactory = function() { function a() { this.prefetchedImageCache = new Map } return a.prototype.build = function(a, b) { var c = this.prefetchedImageCache.get(b.imageName); return c ? c.then(function(a) { return PIXI.Texture.from(a) }) : Promise.reject(null) }, a.prototype.buildAll = function(a, b) { return this.build(a, b).then(function(a) { return [a] }) }, a.prototype.prefetchImage = function(a) { var b = this; if (a && !this.prefetchedImageCache.get(a.fileName)) { var c = this.getImageUrl(a.fileName).then(getImageFromUri).then(function(c) { return b.resizeImage(c, a.width, a.height) }); this.prefetchedImageCache.set(a.fileName, c) } }, a.prototype.resizeImage = function(a, b, c) { return a.width = b, a.height = c, Promise.resolve(a) }, a.prototype.getImageUrl = function(a) { return Object.prototype.hasOwnProperty.call(window, "BASE_IMAGE_URL") ? this.getImageUrlFromBaseUrl(a) : this.getImageUrlFromApp(a) }, a.prototype.getImageUrlFromBaseUrl = function(a) { return Promise.resolve(BASE_IMAGE_URL + a) }, a.prototype.getImageUrlFromApp = function(a) { return requestTextureFromApp({ fileName: a }).then(function(a) { return a.dataURI }) }, a }(); HSImageTextureFactory.instance = new HSImageTextureFactory; var HSView = function() { function a(a) { this.props = a, this.sprite = new PIXI.Sprite, this.canvas = null, this.textureExists = !1, this.buildTexture(), this.update(this.props) } return a.prototype.factory = function() { return this.shouldDrawText() ? HSTextTextureFactory.instance : this.canDrawImage() ? HSImageTextureFactory.instance : HSCharacterTextureFactory.instance }, a.prototype.imageSource = function() { return this.sprite ? this.sprite.texture.baseTexture.source : null }, a.prototype.bounds = function() { if (this.sprite) return this.sprite.getBounds() }, a.prototype.width = function() { return this.sprite.texture.baseTexture.width * this.sprite.scale.x }, a.prototype.height = function() { return this.sprite.texture.baseTexture.height * this.sprite.scale.y }, a.prototype.shouldDrawText = function() { return HSTokenizer.hasDrawableTokens(this.props.text) }, a.prototype.canDrawImage = function() { return !!this.props.imageName }, a.prototype.buildTexture = function() { var a = this; this.createCanvasIfNeeded(); var b = this; return this.hasEmoji = !!this.shouldDrawText() && hasEmoji(this.props.text), this.factory().build(this.canvas, this.props).then(function(c) { return c === b.sprite.texture ? c : (c.baseTexture === b.sprite.texture.baseTexture && b.sprite.texture.destroy(), a.shouldDrawText() && c.update(), b.sprite.texture = c, b.sprite.anchor.x = .5, b.sprite.anchor.y = .5, b.originalWidth = b.sprite.texture.baseTexture.width, b.originalHeight = b.sprite.texture.baseTexture.height, b.textureExists = !0, c) }).catch(function(a) { log("error in building texture", a, b.props) }) }, a.prototype.createCanvasIfNeeded = function() { this.canvas || this.shouldDrawText() && (this.canvas = document.createElement("canvas")) }, a.prototype.buildAllTextures = function() { return this.factory().buildAll(this.canvas, this.props) }, a.prototype.imageScale = function() { if (this.canDrawImage() && this.sprite.texture.baseTexture.source) { return this.sprite.texture.baseTexture.source.width / this.sprite.texture.baseTexture.width } return 1 }, a.prototype.update = function(a) { var b = this.props; if (this.props = a, this.needsNewTexture(b) && this.buildTexture(), this.sprite && this.sprite.texture && this.sprite.texture.baseTexture) { var c = a.baseObjectScale * a.sizePercentWidth * .01 * this.scaleForObjectType(this.props.type) * this.imageScale(), d = Math.abs(c), e = c / d; c = Math.min(d, 1024) * e; var f = a.baseObjectScale * a.sizePercentHeight * .01 * this.scaleForObjectType(this.props.type) * this.imageScale(), g = Math.abs(f), e = f / g; f = Math.min(g, 1024) * e; var h = a.isFlipped ? -1 : 1, i = this.sprite.texture.baseTexture.width, j = this.sprite.texture.baseTexture.height; this.sprite.scale.x = Math.round(i * c) / i * h, this.sprite.scale.y = Math.round(j * f) / j, this.sprite.position.x = Math.round(a.x), this.sprite.position.y = Math.round(a.stageHeight - a.y), this.sprite.alpha = a.opacity, this.sprite.rotation = -1 * a.headingInRadians; var k = a.color; this.hasEmoji && (k = HSColor.rgbWhiteColor), this.sprite.tint = HSColor.hexToTint(k) } }, a.prototype.needsNewTexture = function(a) { return a.text !== this.props.text || this.quantizedScaleY(a) !== this.quantizedScaleY(this.props) || this.quantizedScaleX(a) !== this.quantizedScaleX(this.props) || a.animationNumber !== this.props.animationNumber || a.type !== this.props.type || a.imageName !== this.props.imageName || a.color !== this.props.color && !onlyEmoji(a.text) && hasEmoji(a.text) }, a.prototype.quantizedScaleY = function(a) { var b = a.sizePercentHeight || 100; return Math.ceil(.01 * b) }, a.prototype.quantizedScaleX = function(a) { var b = a.sizePercentWidth || 100; return Math.ceil(.01 * b) }, a.prototype.scaleForObjectType = function(a) { if (this.shouldDrawText()) return 1 / HSTextTextureFactory.scaleUp(); switch (a) { case HSObjectType.hexagon: return 1.05; default: return 1 } }, a }(); HSView.xmlSerializer = new XMLSerializer, HSView.svgCache = {}, HTMLCanvasElement.prototype.unscaledWidth = function() { return this.width }, HTMLCanvasElement.prototype.unscaledHeight = function() { return this.height }, HTMLImageElement.prototype.unscaledWidth = function() { return this.naturalWidth }, HTMLImageElement.prototype.unscaledHeight = function() { return this.naturalHeight }; var HSCollisionImageFactory = function() { function a() {} return a.prototype.image = function(a) { if (this._image) return this._image; if (!a) return null; var b = document.createElement("canvas"), c = b.getContext("2d"), d = a.unscaledWidth(), e = a.unscaledHeight(), f = HSVisualContext.collisionResolution, g = this.getScaledImageDimensions({ width: d, height: e }, Math.pow(f, 2)), h = g.width, i = g.height; return b.width = h, b.height = i, c.drawImage(a, 0, 0, d, e, 0, 0, h, i), this._image = b, b }, a.prototype.getScaledImageDimensions = function(a, b) { var c = Math.max(Math.sqrt(a.width * a.height / b), 1); return { width: Math.round(a.width / c), height: Math.round(a.height / c) } }, a }(), HSManagedObjectFactory = function() { function a() { this.context = new HSProjectContext, this.scene = this.buildScene(), this.project = new HSProject(this.context), this.project.scenes = [this.scene] } return a.prototype.buildDemoScene = function() { for (var a = this.buildObject(HSObjectType.octopus, "", 400, 200), a = this.buildObject(HSObjectType.chillanna, "", 400, 350), b = "Hello World \n", c = 0; c < 100; c++) b += "😈"; this.buildObject(HSObjectType.text, b, 350, 200), this.buildOnStartRule(a); return this.scene.parseJSON(), this.scene }, a.prototype.buildScene = function() { var a = new HSScene(this.context); return a.parseJSON({}), a }, a.prototype.buildObject = function(a, b, c, d) { void 0 === a && (a = HSObjectType.monkey), void 0 === b && (b = ""), void 0 === c && (c = 750), void 0 === d && (d = 500); var e = new HSObject(this.scene.context); return e.type = a, e.text = b, e.x = c, e.y = d, e.objectID = Math.floor(Math.random() * Math.pow(2, 32)).toString(16), e }, a.prototype.buildObjectWithRule = function() { var a = this.buildObject(); this.buildOnStartRule(a); return a }, a.prototype.buildOnStartRule = function(a, b) { var c = this.context; b || (b = this.buildScript()), a || (a = this.buildObject(HSObjectType.monkey)); var d = new HSRule(c); d.script = b, a.addRule(d); var e = new HSParameter(c), f = new HSParameterBlock(c); return f.type = HSBlockType.EventOperatorStart, e.childBlock = f, d.parameters = [e], d.parameters[0].childBlock.parameters[0] = new HSParameter(d.context), d.parameters[0].childBlock.parameters[0].childBlock = new HSParameterBlock(d.context), d }, a.prototype.buildTapRule = function(a, b) { return this.buildRule(HSBlockType.EventOperatorTap, a, b) }, a.prototype.buildRule = function(a, b, c) { var d = this.context; c || (c = this.buildScript()), b || (b = this.buildObject(HSObjectType.monkey)); var e = new HSRule(d); e.script = c, b.addRule(e); var f = new HSParameter(d), g = new HSParameterBlock(d); return g.type = a, f.childBlock = g, e.parameters = [f], e }, a.prototype.buildScript = function() { return this.buildScript3() }, a.prototype.buildRecursiveScript = function() { var a = new HSScript(this.context); return a.blocks = [this.buildControlBlock(HSBlockType.Ability, [""], a)], a }, a.prototype.buildEmptyScript = function() { var a = new HSScript(this.context); return a.blocks = [], a }, a.prototype.buildScript3 = function() { var a = this.context, b = new HSScript(a), c = [this.buildControlBlock(HSBlockType.Repeat, ["100"], this.buildScript4())]; return b.blocks = c, b }, a.prototype.buildScript4 = function() { var a = this.context, b = new HSScript(a), c = [this.buildMethodBlock(HSBlockType.SetInvisibility, ["90"]), this.buildMethodBlock(HSBlockType.ChangeSpeed, ["1600"]), this.buildMethodBlock(HSBlockType.StrokeColor, ["HSB(74, 100, 100)"]), this.buildMethodBlock(HSBlockType.StrokeWidth, ["30"]), this.buildMethodBlock(HSBlockType.PenDown, []), this.buildMethodBlock(HSBlockType.Move, ["200"]), this.buildMethodBlock(HSBlockType.PenUp, []), this.buildMethodBlock(HSBlockType.Rotate, ["135"]), this.buildMethodBlock(HSBlockType.Move, ["200"]), this.buildMethodBlock(HSBlockType.Rotate, ["145"])]; return b.blocks = c, b }, a.prototype.buildScript2 = function() { var a = this.context, b = new HSScript(a), c = [this.buildMethodBlock(HSBlockType.ChangeSpeed, ["1000"]), this.buildMethodBlock(HSBlockType.Move, ["100"]), this.buildMethodBlock(HSBlockType.Rotate, ["30"]), this.buildMethodBlock(HSBlockType.Move, ["150"]), this.buildMethodBlock(HSBlockType.ChangeSpeed, ["100"]), this.buildMethodBlock(HSBlockType.Rotate, ["60"]), this.buildMethodBlock(HSBlockType.Move, ["200"])]; return b.blocks = c, b }, a.prototype.buildScript1 = function() { var a = this.context, b = new HSScript(a), c = [this.buildMethodBlock(HSBlockType.Grow, ["200"]), this.buildMethodBlock(HSBlockType.Shrink, ["50"])]; return b.blocks = c, b }, a.prototype.buildScript0 = function() { for (var a = this.context, b = new HSScript(a), c = [this.buildMethodBlock(HSBlockType.SetPosition, ["200", "200"])], d = 0; d < 50; d++) c.push(this.buildMethodBlock(HSBlockType.Move, ["200"])); return c.push(this.buildMethodBlock(HSBlockType.SetSize, ["200"])), b.blocks = c, b }, a.prototype.buildMethodBlock = function(a, b) { void 0 === a && (a = HSBlockType.Move), void 0 === b && (b = []); var c = (this.context, this.parametersFromValues(b)), d = new HSMethodBlock(this.context); return d.type = a, d.parameters = c, d }, a.prototype.parametersFromValues = function(a) { var b = this, c = []; return a.forEach(function(a, d, e) { var f = new HSParameter(b.context); f.value = a, c.push(f) }), c }, a.prototype.buildControlBlock = function(a, b, c) { void 0 === a && (a = HSBlockType.Repeat), void 0 === b && (b = []), c || (c = this.buildScript1()); var d = this.parametersFromValues(b), e = new HSControlBlock(this.context); return e.type = a, e.parameters = d, e.scripts = [c], e }, a.prototype.buildConditionalControlBlock = function(a, b, c) { void 0 === a && (a = HSBlockType.CheckOnceIf), void 0 === b && (b = []), c || (c = this.buildScript1()); var d = this.parametersFromValues(b), e = new HSConditionalControl(this.context); return e.type = a, e.parameters = d, e.scripts = [c], e }, a }(), HSAccelerometerManager = function() { function a() {} return a.listener = function(a) { var b = a.accelerationIncludingGravity, c = Math.hypot(b.x, b.y, b.z) || 9.8, d = Math.round(100 * b.x / c), e = Math.round(100 * b.y / c), f = window.orientation; null === f || void 0 === f || -90 === f ? (this.tiltUp = d, this.tiltRight = e) : 90 === f ? (this.tiltUp = -d, this.tiltRight = -e) : 0 === f ? (this.tiltUp = -e, this.tiltRight = d) : (this.tiltUp = e, this.tiltRight = -d), this.tiltDown = -this.tiltUp, this.tiltLeft = -this.tiltRight, this.updateShakeData(a.acceleration.x, a.acceleration.y, a.acceleration.z) }, a.startAccelerometerUpdates = function() { "DeviceMotionEvent" in window && !this.isListening && (this.isListening = !0, window.addEventListener("devicemotion", this.listener.bind(this), !1)) }, a.tiltDirection = function() { if (!this.tiltRight || !this.tiltUp) return null; return hs_direction(this.tiltRight, this.tiltUp, 30) }, a.updateShakeData = function(b, c, d) { this.xAccelerations.push(b), this.yAccelerations.push(c), this.zAccelerations.push(d), this.xAccelerations.length > a.SHAKE_MEMORY_COUNT && this.xAccelerations.shift(), this.yAccelerations.length > a.SHAKE_MEMORY_COUNT && this.yAccelerations.shift(), this.zAccelerations.length > a.SHAKE_MEMORY_COUNT && this.zAccelerations.shift() }, a.isShaking = function() { return [this.xAccelerations, this.yAccelerations, this.zAccelerations].some(function(b) { return Math.abs(mean(b)) < a.SUDDEN_ACCEL_THRESHOLD && variance(b) > a.SHAKE_SENSITIVITY }) }, a }(); HSAccelerometerManager.isListening = !1, HSAccelerometerManager.tiltUp = 0, HSAccelerometerManager.tiltDown = 0, HSAccelerometerManager.tiltLeft = 0, HSAccelerometerManager.tiltRight = 0, HSAccelerometerManager.xAccelerations = [], HSAccelerometerManager.yAccelerations = [], HSAccelerometerManager.zAccelerations = [], HSAccelerometerManager.SHAKE_MEMORY_COUNT = 10, HSAccelerometerManager.SHAKE_SENSITIVITY = 60, HSAccelerometerManager.SUDDEN_ACCEL_THRESHOLD = 2; var _this = this, main; window.addEventListener("load", function() { for (var a = document.querySelectorAll("hopscotch-player"), b = a.length; --b >= 0;) { var c = new HSMain(a[b]); main = c, window.addEventListener("resize", function() { return sendToApp("resize", "true") }) } }), window.addEventListener("error", function(a) { return sendToApp("error", JSON.stringify(a) + ";uuid: " + _this.projectData.uuid), !1 }); var HSMain = function() { function a(b) { this.root = b, this.context = new HSProjectContext, this.isMaximized = !1, this.hasDrawn = !1, this.setiOSStageSizeIfNecessary(); var c = document.getElementById("project_data"), d = b.dataset.projectJson || c && c.getAttribute("data"); d && (this.load(JSON.parse(d)), sendToApp("playerState", "loaded")), this.setSizeFromDataAttrs(), this.background = this.createCanvas("background"), this.screenshot = this.createCanvas("screenshot"), this.canvas = this.createCanvas("foreground"), window.gliEmbedDebug ? this.renderer = new PIXI.WebGLRenderer(HSStageScene.stageWidth, HSStageScene.stageHeight, { resolution: a.dpi, transparent: !0, view: this.canvas }) : this.renderer = PIXI.autoDetectRenderer(HSStageScene.stageWidth, HSStageScene.stageHeight, { resolution: a.dpi, backgroundColor: null, transparent: !0, view: this.canvas }), this.screenshotRenderer = new PIXI.CanvasRenderer(HSStageScene.stageWidth, HSStageScene.stageHeight, { resolution: a.dpi, backgroundColor: null, transparent: !0, view: this.screenshot }); var e = document.getElementById("play_container"); e && (e.style.width = "100%", e.style.height = "100%"); var f = this.drawBackground.bind(this); try { this.visualContext = new HSVisualContext(this.background, f) } catch (a) { console.log("No gl found in this context: ", a) } } return a.prototype.setSizeFromDataAttrs = function() { this.resizeRoot(+this.root.getAttribute("width"), +this.root.getAttribute("height")) }, a.prototype.createCanvas = function(a) { var b = document.createElement("canvas"); return b.setAttribute("name", a), b.style.background = "transparent", b.style.position = "absolute", b.style.top = "0", b.style.left = "0", b.style.width = "100%", b.style.height = "100%", this.root.appendChild(b), b }, a.prototype.toggleFullscreen = function() { isFullscreen() ? this.exitFullscreen() : this.enterFullscreen(window.innerWidth, window.innerHeight) }, a.prototype.enterFullscreen = function(a, b) { HSCollisionContext.DEBUG || enterFullscreen(this.root, a, b) }, a.prototype.exitFullscreen = function() { exitFullscreen() }, a.prototype.resizeRoot = function(b, c) { void 0 === b && (b = this._oldWidth), void 0 === c && (c = this._oldHeight), this._oldWidth = b, this._oldHeight = c; var d, e = HSStageScene.stageWidth, f = HSStageScene.stageHeight; b || c ? b && !c ? c = b * f / e : !b && c && (b = c * e / f) : (b = window.innerWidth - 20, c = window.innerHeight - 250), d = Math.min(c / f, b / e); var g = Math.max(Math.floor(e * d), a.MIN_STAGE_WIDTH), h = g * f / e; this.root.style.width = Math.floor(g) + "px", this.root.style.height = Math.floor(h) + "px", this.isMaximized && this.centerOnScreen(b, c) }, a.prototype.centerOnScreen = function(a, b) { var c = a || window.innerWidth, d = b || window.innerHeight; this.root.style.top = Math.floor((d - main.root.offsetHeight) / 2) + "px", this.root.style.left = Math.floor((c - main.root.offsetWidth) / 2) + "px" }, a.prototype.load = function(a) { this.projectData = a, this.context = new HSProjectContext, this.project = new HSProject(this.context, a), HSSoundManager.sharedInstance = new HSSoundManager(this.context.allSoundNames()) }, a.prototype.mute = function() { HSSoundManager.sharedInstance.mute() }, a.prototype.unmute = function() { HSSoundManager.sharedInstance.unmute() }, a.prototype.isMuted = function() { return HSSoundManager.sharedInstance.isMuted }, a.prototype.setiOSStageSizeIfNecessary = function() { if ("container" === this.root.getAttribute("stage-size")) { var a = this.root.getBoundingClientRect(); HSStageScene.stageWidth = a.width, HSStageScene.stageHeight = a.height } }, a.prototype.willPlay = function(a) { window.project_error && (window.project_error.style.display = "none"), a && this.load(a), this.stageProject = new HSStageProject(this.project), this.stageProject.activateAllRulesForEventType(HSBlockType.EventOperatorStart), this.stageProject.executeAllActiveRules(), this.hasDrawn || this.prepareForFirstPlay(), this.registerEventCallbacks() }, a.prototype.prepareForFirstPlay = function() { var a = this, b = [], c = this.renderer; this.stageProject.activeStageScene.stageObjects.forEach(function(a) { var d = a.view.buildAllTextures().then(function(a) { for (var b = 0; b < a.length; b++) c.bindTexture && c.bindTexture(a[b]) }); b.push(d) }), Promise.all(b).then(function() { a.hasDrawn = !0, sendToApp("playerState", "ready") }).catch(function(a) { setTimeout(function() { throw "error building initial textures " + JSON.stringify(a) }) }) }, a.prototype.startProject = function() { this.animationTick() }, a.prototype.play = function(a) { this.resetStage(), this.willPlay(a), this.startProject() }, a.prototype.resetStage = function() { this.animationFrameReq && (this.visualContext.drawingContext.clearBackground(), window.cancelAnimationFrame(this.animationFrameReq), this.animationFrameReq = null) }, a.prototype.drawBackground = function() { var a = this; if (DEBUG_DRAW_BOUNDING_BOXES) { var b = this.background; this.visualContext.drawingContext.bgContext.clearRect(0, 0, b.width, b.height) } this.stageProject.activeStageScene.stageObjects.forEach(function(b) { b.drawPath(a.visualContext.drawingContext) }) }, a.prototype.registerEventCallbacks = function() { var a = this; (this.project.context.hasAccelerometerEvent() || this.project.context.hasAccelerometerTrait()) && HSAccelerometerManager.startAccelerometerUpdates(), this.listeners && this.listeners.unregister(), this.listeners = UIRegisterEventCallbacks(this.root, { pointerDown: function(b) { a.stageProject && (a.stageProject.receiveClickEvent(b, a.visualContext.collisionContext), a.stageProject.receiveTouchDownEvent(b, a.visualContext.collisionContext)) }, pointerUp: function(b) { a.stageProject && a.stageProject.receiveTouchUpEvent(b, a.visualContext.collisionContext) }, pointerDrag: function(b) { a.stageProject && a.stageProject.receiveTouchMoveEvent(b, a.visualContext.collisionContext) }, pointerCancel: function(b) { a.stageProject && a.stageProject.receiveTouchUpEvent(b, a.visualContext.collisionContext) } }) }, a.prototype.animationTick = function() { this.stageProject.animationTick(this.visualContext.collisionContext), this.renderer.render(this.stageProject.activeStageScene.container), this.visualContext.drawingContext.renderFrame(), this.requestNextFrame() }, a.prototype.requestNextFrame = function() { var a = this; this.animationFrameReq = window.requestAnimationFrame(function(b) { a.animationTick() }) }, a.prototype.takeScreenshot = function() { this.screenshotRenderer.render(this.stageProject.activeStageScene.container), this.screenshot.style.zIndex = "99999", this.canvas.style.opacity = "0", this.screenshot.style.opacity = "1", setTimeout(sendToApp.bind(void 0, "screenshot", "done"), 400) }, a.prototype.releaseScreenshot = function() { this.screenshot.style.zIndex = "-99999", this.canvas.style.opacity = "1", this.screenshot.style.opacity = "0" }, a }(); HSMain.MIN_STAGE_WIDTH = 210, HSMain.dpi = Math.min(window.devicePixelRatio, 2); var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, FALSE_SCRIPT_KEY = "controlFalseScript", HSConditionalControl = function(a) { function b() { return a.apply(this, arguments) || this } return __extends(b, a), b.prototype.parseJSON = function(b) { void 0 === b && (b = {}), a.prototype.parseJSON.call(this, b); var c = b[FALSE_SCRIPT_KEY] || [], d = c[SCRIPT_ID_KEY] || "", e = this.context.findWithObjectID("HSScript", d); this.scripts.push(e || new HSScript(this.context)) }, b.prototype.stageBlock = function() { var a = this.trueScript(), b = this.falseScript(); return new HSStageControl(this.type, [a, b], this.stageParameters()) }, b.prototype.trueScript = function() { return this.scripts[0] }, b.prototype.falseScript = function() { return this.scripts[1] }, b }(HSControlBlock); HSConditionalControl.key = "HSConditionalControl"; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, EVENT_PARAMETER_OBJECT_ID_KEY = "id", EVENT_PARAMETER_TYPE_KEY = "blockType", EVENT_PARAMETER_OBJECT_KEY = "objectID", HSEventParameterBlock = function(a) { function b() { return a.apply(this, arguments) || this } return __extends(b, a), b.prototype.parseJSON = function(b) { void 0 === b && (b = {}), a.prototype.parseJSON.call(this, b), this.objectID = b[EVENT_PARAMETER_OBJECT_ID_KEY], this.type = b[EVENT_PARAMETER_TYPE_KEY]; var c = this.context.findWithObjectID(HSObject.key, b[EVENT_PARAMETER_OBJECT_KEY]); this.object = c }, b }(HSParameterBlock); HSEventParameterBlock.key = "HSEventParameterBlock"; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, HSMethodBlock = function(a) { function b() { return a.apply(this, arguments) || this } return __extends(b, a), b.prototype.stageBlock = function() { return this._stageBlock || (this._stageBlock = new HSStageMethod(this.type, this.stageParameters())), this._stageBlock }, b }(HSBlock); HSMethodBlock.key = "HSMethodBlock"; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, HSVariable = function(a) { function b(b) { var c = a.call(this, b) || this; return c.type = HSBlockType.Variable, c } return __extends(b, a), b.prototype.parseJSON = function(c) { void 0 === c && (c = {}), a.prototype.parseJSON.call(this, c), this.blockType = c.type, c.object && (this.object = this.context.findWithObjectID(HSObject.key, c.object)), this.type = HSBlockType.Variable; var d = this.context.findWithObjectID(HSVariablePrototype.key, c[VARIABLE_KEY]); d.name === b.skillComplete ? this.name = d.name : this.object && this.context.version < HSProjectVersion.ADD_SELF ? this.name = "_hs_" + this.object.objectID + "_" + d.name : this.name = "_hs_" + d.name }, b.prototype.isSkillComplete = function() { return this.name === b.skillComplete }, b.prototype.computedValue = function(a) { return this._object(a)[this.name] || 0 }, b.prototype.setValue = function(a, b) { this._object(b)[this.name] = a }, b.prototype._object = function(a) { return this.context.version < HSProjectVersion.ADD_SELF || this.blockType === HSBlockType.Device ? b.globalScope : this.blockType === HSBlockType.Object && this.object ? this.object.stageObject() : this.blockType === HSBlockType.OriginalObject ? a.originalObject(this.context) : a }, b }(HSParameterBlock); HSVariable.globalScope = {}, HSVariable.key = "HSVariable", HSVariable.skillComplete = "hsSkillComplete"; var HSCustomObject = function() { function a(a, b, c) { this.fileName = a, this.width = b, this.height = c } return a.prototype.computedValue = function() { return 0 }, a }(), __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, HSCustomRule = function(a) { function b() { return a.apply(this, arguments) || this } return __extends(b, a), b.prototype.parseJSON = function(a) { void 0 === a && (a = {}), this.name = a.name, this.objectID = a.id, this.addRulesFromJSON(a) }, b.prototype.addRulesFromJSON = function(a) { void 0 === a && (a = {}); var c = this.context; this.rules = a.rules.map(function(a) { var d = c.findWithObjectID(HSRule.key, a); return d || (d = c.findWithObjectID(b.key, a)), d }).filter(function(a) { return !!a }) }, b.prototype.stageRules = function(a) { var b = this; return this.rules.reduce(function(c, d) { return d === b ? c : c.concat(d.stageRules(a)) }, []) }, b }(HSManagedObject); HSCustomRule.key = "HSCustomRule"; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, OBJECT_ID_KEY = "objectID", X_POSITION_KEY = "xPosition", Y_POSITION_KEY = "yPosition", TEXT_KEY = "text", TYPE_KEY = "type", IMAGE_ID_KEY = "customObjectID", HSObject = function(a) { function b() { var b = a.apply(this, arguments) || this; return b.rules = [], b.heading = 0, b.customObject = null, b.willChangeCostume = !1, b._stageObjects = [], b.mostRecentCloneCache = new Map, b } return __extends(b, a), b.prototype.stageObject = function(a) { return this._stageObjects.length || this.rebuildStageObject(), a && a.objectID === this.objectID ? a : a && null != a.creationTick ? this.mostRecentCloneBeforeTimestamp(a.creationTick) : this.context.version < HSProjectVersion.ADD_SELF ? this.mostRecentClone() : this.originalStageObject() }, b.prototype.rebuildStageObject = function() { var a = new HSStageObject(this.x, this.y, this.text, this.type, this.context.baseObjectScale, this.context.fontSize, this.objectID, this.fileName(), this.willChangeCostume); a.originalWidth = this.width, a.originalHeight = this.height, this.latestCloneIndex = 1, a.stageRules = this.rules.reduce(function(b, c) { return c ? b.concat(c.stageRules(a)) : b }, []), this._stageObjects = [a], this.mostRecentCloneCache = new Map }, b.prototype.parseJSON = function(a) { void 0 === a && (a = {}), this.x = parseFloat(a[X_POSITION_KEY]), this.y = parseFloat(a[Y_POSITION_KEY]), this.text = a[TEXT_KEY], this.type = a[TYPE_KEY], this.width = parseFloat(a.width), this.height = parseFloat(a.height), this.objectID = a[OBJECT_ID_KEY], this.customObject = HSProjectContext.customObjectMap.get(a[IMAGE_ID_KEY]), this.customObject && HSImageTextureFactory.instance.prefetchImage(this.customObject) }, b.prototype.fileName = function() { if (this.customObject) return this.customObject.fileName }, b.prototype.addRule = function(a) { this.rules.push(a) }, b.prototype.allStageObjects = function() { return this._stageObjects }, b.prototype.addStageObject = function(a) { this.latestCloneIndex++, this.allStageObjects().push(a), a.cloneIndex = this.latestCloneIndex }, b.prototype.removeStageObject = function(a) { this._stageObjects.remove(a) }, b.prototype.mostRecentClone = function() { var a = this.allStageObjects(); return a[a.length - 1] }, b.prototype.originalStageObject = function() { return this.allStageObjects()[0] }, b.prototype.mostRecentCloneBeforeTimestamp = function(a) { return this.mostRecentCloneCache.has(a) || this.mostRecentCloneCache.set(a, findLast(this.allStageObjects(), function(b) { return b.creationTick <= a })), this.mostRecentCloneCache.get(a) }, b.prototype.canChangeCostume = function() { return this.type !== HSObjectType.text && (!(this.type >= HSObjectType.square && this.type < HSObjectType.HS_END_OF_SHAPES) && !(this.type > HSObjectType.HS_NUMBER_OF_OBJECTS)) }, b }(HSManagedObject); HSObject.key = "HSObject"; var HSObjectType; ! function(a) { a[a.monkey = 0] = "monkey", a[a.text = 1] = "text", a[a.octopus = 2] = "octopus", a[a.gorilla = 3] = "gorilla", a[a.cupcake = 4] = "cupcake", a[a.bear = 5] = "bear", a[a.dino = 6] = "dino", a[a.frog = 7] = "frog", a[a.greenman = 8] = "greenman", a[a.mustache = 9] = "mustache", a[a.spacepod = 10] = "spacepod", a[a.zombieBear = 11] = "zombieBear", a[a.ghoulopus = 12] = "ghoulopus", a[a.bats = 13] = "bats", a[a.frankenrilla = 14] = "frankenrilla", a[a.jodyWitch = 15] = "jodyWitch", a[a.cauldron = 16] = "cauldron", a[a.pumpkin = 17] = "pumpkin", a[a.broom = 18] = "broom", a[a.lantern = 19] = "lantern", a[a.parrotFlying = 20] = "parrotFlying", a[a.mandrill = 21] = "mandrill", a[a.mosquito = 22] = "mosquito", a[a.missChief = 23] = "missChief", a[a.venus = 24] = "venus", a[a.jeepers = 25] = "jeepers", a[a.banyan = 26] = "banyan", a[a.stargirl = 27] = "stargirl", a[a.astro = 28] = "astro", a[a.chillanna = 29] = "chillanna", a[a.robo = 30] = "robo", a[a.raccoon = 31] = "raccoon", a[a.bird = 32] = "bird", a[a.HS_END_OF_CHARACTERS = 33] = "HS_END_OF_CHARACTERS", a[a.square = 34] = "square", a[a.circle = 35] = "circle", a[a.hexagon = 36] = "hexagon", a[a.triangle = 37] = "triangle", a[a.rightTriangle = 38] = "rightTriangle", a[a.rectangle = 39] = "rectangle", a[a.heart = 40] = "heart", a[a.star = 41] = "star", a[a.arch = 42] = "arch", a[a.parallelogram = 43] = "parallelogram", a[a.squiggle = 44] = "squiggle", a[a.donut = 45] = "donut", a[a.tetrisZ = 46] = "tetrisZ", a[a.tetrisT = 47] = "tetrisT", a[a.tetrisL = 48] = "tetrisL", a[a.corner = 49] = "corner", a[a.flower = 50] = "flower", a[a.threeProngedBoomerang = 51] = "threeProngedBoomerang", a[a.squishedBox = 52] = "squishedBox", a[a.bead = 53] = "bead", a[a.chevron = 54] = "chevron", a[a.xShape = 55] = "xShape", a[a.tetrisLine = 56] = "tetrisLine", a[a.HS_END_OF_SHAPES = 57] = "HS_END_OF_SHAPES", a[a.toucan = 58] = "toucan", a[a.anteater = 59] = "anteater", a[a.crocodile = 60] = "crocodile", a[a.sloth = 61] = "sloth", a[a.iguana = 62] = "iguana", a[a.hut = 63] = "hut", a[a.penguin = 64] = "penguin", a[a.winterQueen = 65] = "winterQueen", a[a.shyYeti = 66] = "shyYeti", a[a.deer = 67] = "deer", a[a.elf = 68] = "elf", a[a.snowGlobe = 69] = "snowGlobe", a[a.polarbear = 70] = "polarbear", a[a.sleigh = 71] = "sleigh", a[a.mistletoe = 72] = "mistletoe", a[a.snowMan = 73] = "snowMan", a[a.snowflake = 74] = "snowflake", a[a.HS_NUMBER_OF_OBJECTS = 75] = "HS_NUMBER_OF_OBJECTS", a[a.image = 2e3] = "image", a[a.nil = 1e4] = "nil", a[a.edgeOfScreen = 3e4] = "edgeOfScreen" }(HSObjectType || (HSObjectType = {})); var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, VALUE_KEY = "value", CHILD_BLOCK_KEY = "datum", VARIABLE_KEY = "variable", PARAMETER_TYPE_KEY = "type", HSParameter = function(a) { function b() { return a.apply(this, arguments) || this } return __extends(b, a), b.prototype.stageParameter = function() { return new HSStageParameter(this.value, this.childBlock) }, b.prototype.parseJSON = function(a) { if (void 0 === a && (a = {}), this.value = a[VALUE_KEY], this.type = a[PARAMETER_TYPE_KEY], this.type === HSParameterType.Object && a[CHILD_BLOCK_KEY]) { var b = a[CHILD_BLOCK_KEY]; if (b.customObject) { var c = HSProjectContext.customObjectMap.get(b.customObject); this.childBlock = c, HSImageTextureFactory.instance.prefetchImage(c) } this.value = b.text ? b.text : b.type } else if (a[CHILD_BLOCK_KEY] && a[CHILD_BLOCK_KEY].variable) this.setChildBlockToVariableIfPossible(a[CHILD_BLOCK_KEY]); else if (a[CHILD_BLOCK_KEY]) { var d = new HSParameterBlock(this.context); d.parseJSON(a[CHILD_BLOCK_KEY]), this.childBlock = d } else a[VARIABLE_KEY] && (this.setChildBlockToVariableIfPossible(a), this.setChildBlockToTraitIfPossible(a), this.setChildBlockToEventParameterIfPossible(a)) }, b.prototype.toString = function() { return SourceFormatter.paramToSrc(this) }, b.prototype.setChildBlockToVariableIfPossible = function(a) { var b = a[VARIABLE_KEY]; if (this.context.findWithObjectID(HSVariablePrototype.key, b)) { var c = new HSVariable(this.context); c.parseJSON(a), this.childBlock = c } }, b.prototype.setChildBlockToTraitIfPossible = function(a) { var b = a[VARIABLE_KEY], c = this.context.findWithObjectID(HSParameterBlock.key, b); c && (this.childBlock = c) }, b.prototype.setChildBlockToEventParameterIfPossible = function(a) { var b = a[VARIABLE_KEY], c = this.context.findWithObjectID(HSEventParameterBlock.key, b); c && (this.childBlock = c) }, b }(HSManagedObject); HSParameter.key = "HSParameter"; var HSParameterType; ! function(a) { a[a.Default = 42] = "Default", a[a.LineWidth = 43] = "LineWidth", a[a.LineColor = 44] = "LineColor", a[a.RandomLow = 45] = "RandomLow", a[a.RandomHigh = 46] = "RandomHigh", a[a.Variable = 47] = "Variable", a[a.VariableValue = 48] = "VariableValue", a[a.Conditional = 49] = "Conditional", a[a.HSObject = 50] = "HSObject", a[a.Sound = 51] = "Sound", a[a.Event = 52] = "Event", a[a.SetText = 53] = "SetText", a[a.Object = 54] = "Object", a[a.TextOnly = 55] = "TextOnly", a[a.Scene = 56] = "Scene" }(HSParameterType || (HSParameterType = {})); var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, OBJECTS_KEY = "objects", RULES_KEY = "rules", VARIABLES_KEY = "variables", TRAITS_KEY = "traits", EVENT_PARAMETERS_KEY = "eventParameters", SCRIPTS_KEY = "abilities", SCENES_KEY = "scenes", HSProject = function(a) { function b(b, c) { void 0 === c && (c = {}); var d = a.call(this, b) || this; return d.context.parseJSON(c), d.parseObjectDictionaries(c[OBJECTS_KEY], c[SCENES_KEY]), d.parseVariableDictionaries(c[VARIABLES_KEY]), d.parseTraitsDictionaries(c[TRAITS_KEY]), d.parseEventParameters(c[EVENT_PARAMETERS_KEY]), d.parseScriptDictionaries(c[SCRIPTS_KEY]), d.parseRulesDictionaries(c[RULES_KEY]), d.importCustomRules(c.customRules), d.context.version >= HSProjectVersion.CUSTOM_WHENS && d.addRulesToObjects(c[OBJECTS_KEY]), d.parseScenesDictionaries(c[SCENES_KEY]), d } return __extends(b, a), b.prototype.parseEventParameters = function(a) { var b = this; void 0 === a && (a = []), a && a.forEach(function(a, c, d) { new HSEventParameterBlock(b.context).parseJSON(a) }) }, b.prototype.parseVariableDictionaries = function(a) { if (void 0 === a && (a = []), a) { var b = this.context; a.forEach(function(a, c, d) { new HSVariablePrototype(b).parseJSON(a) }) } }, b.prototype.parseTraitsDictionaries = function(a) { if (void 0 === a && (a = []), a) { var b = this.context; a.forEach(function(a, c, d) { new HSParameterBlock(b).parseJSON(a) }) } }, b.prototype.parseObjectDictionaries = function(a, b) { if (void 0 === a && (a = []), void 0 === b && (b = []), b.length > 0) var c = b.map(function(a) { return null === a[OBJECTS_KEY] ? [] : a[OBJECTS_KEY] }).reduce(function(a, b) { return a.concat(b) }); var d = this.context; a.forEach(function(a, e, f) { if (!(b.length > 0) || c.includes(a.objectID)) { new HSObject(d).parseJSON(a) } }) }, b.prototype.addRulesToObjects = function(a) { void 0 === a && (a = []); for (var b = this.context, c = 0, d = a; c < d.length; c++) { var e = d[c], f = b.findWithObjectID(HSObject.key, e.objectID); if (e.rules && f && f.rules) { var g = f.canChangeCostume(), h = !1, i = e.rules.map(function(a) { var c = b.findWithObjectID(HSRule.key, a); return !h && g && c && c.script.containsChangeCostume() && (h = !0), c || b.findWithObjectID(HSCustomRule.key, a) }); f.rules = i.filter(function(a) { return !!a }), f.willChangeCostume = h } } }, b.prototype.importCustomRules = function(a) { void 0 === a && (a = []); var b = this.context; a instanceof Array || (a = []), a.forEach(function(a, c, d) { new HSCustomRule(b).parseJSON(a) }), a.forEach(function(a, c, d) { b.findWithObjectID(HSCustomRule.key, a.id).addRulesFromJSON(a) }) }, b.prototype.parseScriptDictionaries = function(a) { void 0 === a && (a = []); for (var b = [], c = 0; c < a.length; c++) { var d = new HSScript(this.context); b.push(d), d.addObjectIDFromJSON(a[c]) } for (var c = 0; c < b.length; c++) { var d = b[c]; d.parseJSON(a[c]) } }, b.prototype.parseRulesDictionaries = function(a) { void 0 === a && (a = []); var b = this.context; a.forEach(function(a, c, d) { new HSRule(b).parseJSON(a) }) }, b.prototype.parseScenesDictionaries = function(a) { if (void 0 === a && (a = []), a.length > 0) { var b = this.context; this.scenes = a.map(function(a) { var c = new HSScene(b); return c.parseJSON(a), c }) } else { var c = new HSScene(this.context); c.parseJSON(), this.scenes = [c] } }, b }(HSManagedObject), VERSION_KEY = "version", CUSTOM_OBJECTS_KEY = "customObjects", SCALE_KEY = "baseObjectScale", FONT_SIZE_KEY = "fontSize", STAGE_SIZE = "stageSize", HSProjectVersion; ! function(a) { a[a.V13 = 13] = "V13", a[a.V14 = 14] = "V14", a[a.V15 = 15] = "V15", a[a.V16 = 16] = "V16", a[a.V17 = 17] = "V17", a[a.V18 = 18] = "V18", a[a.V19 = 19] = "V19", a[a.V24 = 24] = "V24", a[a.WEBPLAYER_IN_APP = 25] = "WEBPLAYER_IN_APP", a[a.ADD_SELF = 26] = "ADD_SELF", a[a.CUSTOM_WHENS = 28] = "CUSTOM_WHENS" }(HSProjectVersion || (HSProjectVersion = {})); var HSProjectContext = function() { function a() { this.projectObjects = {}, this.version = HSProjectVersion.CUSTOM_WHENS, this.baseObjectScale = 1, this.fontSize = 80, this._hasAccelerometerEvent = null, this._hasAccelerometerTrait = null } return a.prototype.findAllForClassName = function(a) { return this.projectObjects[a] ? this.projectObjects[a] : [] }, a.prototype.findWithObjectID = function(a, b) { return this.findAllForClassName(a).find(function(a) { return a.objectID === b }) }, a.prototype.insertObject = function(a) { var b = Object.getPrototypeOf(a).constructor.key; this.projectObjects[b] ? this.projectObjects[b].push(a) : this.projectObjects[b] = [a] }, a.prototype.deleteObject = function(a) { var b = Object.getPrototypeOf(a).constructor.key, c = this.projectObjects[b].indexOf(a); c > -1 && this.projectObjects[b].splice(c, 1) }, a.prototype.parseJSON = function(b) { if (void 0 === b && (b = {}), this.version = b[VERSION_KEY] || HSProjectVersion.V14, this.baseObjectScale = b[SCALE_KEY] || 1, this.fontSize = b[FONT_SIZE_KEY] || 80, HSEmojiTextNode.WIDTH = this.fontSize / 2, HSEmojiTextNode.HEIGHT = this.fontSize / 2, HSTextNode.LINE_HEIGHT = this.fontSize < 80 ? 49 : 55, this.version >= HSProjectVersion.V19) { var c = b[STAGE_SIZE]; c && (HSStageScene.stageWidth = c.width, HSStageScene.stageHeight = c.height, HSTextNode.MAX_LINE_WIDTH = Math.min(HSTextNode.MAX_LINE_WIDTH, c.width)) } Array.isArray(b[CUSTOM_OBJECTS_KEY]) && b[CUSTOM_OBJECTS_KEY].forEach(function(b) { var c = new HSCustomObject(b.fileName, b.size.width, b.size.height); a.customObjectMap.set(b.id, c) }) }, a.prototype.allSoundNames = function() { for (var a = this.findAllForClassName(HSParameter.key), b = [], c = 0; c < a.length; c++) { var d = a[c]; d.type === HSParameterType.Sound && -1 === b.indexOf(d.value) && b.push(d.value) } return b }, a.prototype.hasAccelerometerEvent = function() { if (null != this._hasAccelerometerEvent) return this._hasAccelerometerEvent; for (var a = this.findAllForClassName(HSRule.key), b = 0; b < a.length; b++) switch (a[b].eventType()) { case HSBlockType.EventOperatorTiltUp: case HSBlockType.EventOperatorTiltDown: case HSBlockType.EventOperatorTiltLeft: case HSBlockType.EventOperatorTiltRight: case HSBlockType.EventOperatorShake: return this._hasAccelerometerEvent = !0 } return !1 }, a.prototype.hasAccelerometerTrait = function() { if (null != this._hasAccelerometerTrait) return this._hasAccelerometerTrait; for (var a = this.findAllForClassName(HSParameterBlock.key), b = 0; b < a.length; b++) switch (a[b].type) { case HSBlockType.StageTraitTiltUp: case HSBlockType.StageTraitTiltDown: case HSBlockType.StageTraitTiltLeft: case HSBlockType.StageTraitTiltRight: return this._hasAccelerometerEvent = !0 } return !1 }, a }(); HSProjectContext.customObjectMap = new Map; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, SCRIPT_ID_KEY = "abilityID", OBJECT_ID_KEY = "objectID", HSRule = function(a) { function b(b) { var c = a.call(this, b) || this; return c.type = HSBlockType.Rule, c } return __extends(b, a), b.prototype.stageRule = function(a) { return new HSStageRule(this, a) }, b.prototype.stageRules = function(a) { return [this.stageRule(a)] }, b.prototype.parseJSON = function(b) { if (void 0 === b && (b = {}), this.context.version < HSProjectVersion.CUSTOM_WHENS) return void this.parseLowerThanCustomWhensJSON(b); var c = this.context.findWithObjectID("HSScript", b[SCRIPT_ID_KEY]); c ? (a.prototype.parseJSON.call(this, b), this.childBlock() ? (this.objectID = b.id, this.script = c) : this.context.deleteObject(this)) : this.context.deleteObject(this) }, b.prototype.parseLowerThanCustomWhensJSON = function(b) { void 0 === b && (b = {}); var c = this.context.findWithObjectID("HSScript", b[SCRIPT_ID_KEY]), d = this.context.findWithObjectID("HSObject", b[OBJECT_ID_KEY]); d && c ? (this.context.version < HSProjectVersion.V14 && this.parseLowerThanV14JSON(b, d), a.prototype.parseJSON.call(this, b), this.childBlock() ? (this.script = c, d.willChangeCostume = d.canChangeCostume() && c.containsChangeCostume(), d.addRule(this)) : this.context.deleteObject(this)) : this.context.deleteObject(this) }, b.prototype.parseLowerThanV14JSON = function(a, b) { var c = a.eventType, d = blockTypeForLegacyEventType(c), e = new HSParameterBlock(this.context); e.type = d; var f = new HSParameter(this.context); switch (this.parameters = [f], f.childBlock = e, d) { case HSBlockType.EventOperatorTap: case HSBlockType.EventOperatorHold: this.addObjectToEventOperator(e, b); break; case HSBlockType.EventOperatorBump: case HSBlockType.EventOperatorIsTouching: this.addObjectsToBumps(e, b, a) } }, b.prototype.addObjectToEventOperator = function(a, b) { var c = new HSEventParameterBlock(this.context); c.object = b; var d = new HSParameter(this.context); d.type = HSParameterType.HSObject, d.childBlock = c, a.parameters = [d] }, b.prototype.addObjectsToBumps = function(a, b, c) { var d = new HSEventParameterBlock(this.context); d.object = b; var e = new HSEventParameterBlock(this.context); e.object = this.context.findWithObjectID("HSObject", c.collisionReceiverObject); var f = new HSParameter(this.context); f.type = HSParameterType.HSObject, f.childBlock = d; var g = new HSParameter(this.context); g.type = HSParameterType.HSObject, g.childBlock = e, a.parameters = [f, g] }, b.prototype.firstObject = function() { return this.childBlock() && this.childBlock().parameters.length > 0 ? this.childBlock().parameters[0].childBlock.object : null }, b.prototype.firstParam = function() { return this.parameters[0] }, b.prototype.childBlock = function() { return this.firstParam().childBlock }, b.prototype.eventType = function() { return this.childBlock().type }, b.prototype.eventParameterBlocks = function() { var a = []; return this.childBlock() && this.childBlock().parameters.forEach(function(b) { b.childBlock && a.push(b.childBlock) }), a }, b.prototype.paramsBlock = function() { if (this.childBlock().parameters[0]) return this.childBlock().parameters[0].childBlock }, b.prototype.matchesEvent = function(a) { return this.childBlock().type === a }, b.prototype.conditionIsTrue = function(a) { return this.childBlock().computedBooleanValue(a) }, b }(HSBlock); HSRule.key = "HSRule"; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, HSScene = function(a) { function b() { var b = a.apply(this, arguments) || this; return b.objects = [], b } return __extends(b, a), b.prototype.parseJSON = function(a) { var b = this; void 0 === a && (a = {}), a[OBJECTS_KEY] && a[OBJECTS_KEY].length > 0 ? this.objects = a[OBJECTS_KEY].map(function(a) { return b.context.findWithObjectID(HSObject.key, a) }) : a[OBJECTS_KEY] && 0 === a[OBJECTS_KEY].length ? this.objects = [] : this.objects = this.context.findAllForClassName(HSObject.key), this.name = a.name }, b.prototype.stageScene = function() { return new HSStageScene(this) }, b }(HSManagedObject); HSScene.key = "HSScene"; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, SCRIPT_ID_KEY = "abilityID", BLOCKS_KEY = "blocks", HSScript = function(a) { function b() { var b = a.apply(this, arguments) || this; return b.blocks = [], b } return __extends(b, a), b.prototype.stageScript = function() { return new HSStageScript(this) }, b.prototype.addObjectIDFromJSON = function(a) { void 0 === a && (a = {}), this.objectID = a[SCRIPT_ID_KEY] }, b.prototype.isImmediatelyRecursive = function() { return this.blocks.length > 0 && this.blocks[0].scripts && this.blocks[0].scripts[0] === this || !this.firstMethod(0) }, b.prototype.firstMethod = function(a) { if (a > 5) return null; var b = this.blocks[0]; if (!b) return this; if (b.isControl) { if (b.scripts[0]) { return b.scripts[0].firstMethod(a + 1) } return null } return b }, b.prototype.containsChangeCostume = function(a) { void 0 === a && (a = {}); for (var b = 0; b < this.blocks.length; b++) { var c = this.blocks[b]; if (c.type === HSBlockType.ChangeCostume) return !0; var d = c; if (d.scripts) for (var e = 0; e < d.scripts.length; e++) { var f = d.scripts[e], g = f.objectID; if (!a[g] && (a[g] = !0, f.containsChangeCostume(a))) return !0 } } return !1 }, b.prototype.parseJSON = function(a) { var b = this; void 0 === a && (a = {}), (a[BLOCKS_KEY] || []).forEach(function(a) { var c; switch (HSBlock.blockClassForDict(a)) { case HSBlockClass.Control: c = new HSControlBlock(b.context); break; case HSBlockClass.Method: c = new HSMethodBlock(b.context); break; case HSBlockClass.ConditionalControl: c = new HSConditionalControl(b.context) } c.parseJSON(a), b.blocks.push(c) }) }, b }(HSManagedObject); HSScript.key = "HSScript"; var HSSound = function() { function a(b, c) { var d = this; this.name = b, this.context = c, this.sources = new Set, a.soundCache.has(b) || a.soundCache.set(b, new Promise(function(a, b) { var c = new XMLHttpRequest; c.open("GET", d.url(), !0), c.responseType = "arraybuffer", c.onload = function() { c.status >= 200 && c.status < 300 ? d.context.decodeAudioData(c.response, a, function() {}) : b(c) }, c.onerror = b, c.send() })), a.soundCache.get(b).then(function(a) { return d.buffer = a }) } return a.prototype.play = function() { var a = this; if (iOSApp) sendToApp("sound", this.name); else if (this.buffer) { var b = this.context.createBufferSource(); b.buffer = this.buffer, b.connect(this.context.destination), b.start(0), this.sources.add(b), b.onended = function() { return a.sources.delete(b) } } }, a.prototype.stop = function() { this.sources.forEach(function(a) { return a.stop() }), this.sources.clear() }, a.prototype.url = function() { return "https://d2jeqdlsh5ay24.cloudfront.net/" + this.name + ".mp3" }, a }(); HSSound.soundCache = new Map; var AudioContext = window.AudioContext || window.webkitAudioContext, HSSoundManager = function() { function a(b) { var c = this; this.sounds = {}, this.context = a.audioContext, this.isMuted = !1, b.forEach(function(a) { c.sounds[a] = new HSSound(a, c.context) }), a.hasUnlockListener || (a.hasUnlockListener = !0, this.eventListenerFunc = function() { var a = c.context.createBufferSource(); a.buffer = c.context.createBuffer(1, 1, 22050), a.connect(c.context.destination), a.start(0), window.removeEventListener("touchstart", c.eventListenerFunc), window.removeEventListener("touchend", c.eventListenerFunc) }, window.addEventListener("touchstart", this.eventListenerFunc), window.addEventListener("touchend", this.eventListenerFunc)) } return a.prototype.play = function(a) { this.sounds[a] && !this.isMuted && this.sounds[a].play() }, a.prototype.mute = function() { this.isMuted || Object.values(this.sounds).forEach(function(a) { return a.stop() }), this.isMuted = !0 }, a.prototype.unmute = function() { this.isMuted = !1 }, a }(); HSSoundManager.audioContext = new AudioContext, HSSoundManager.hasUnlockListener = !1; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, OBJECT_ID_STRING_KEY = "objectIdString", HSVariablePrototype = function(a) { function b(b) { return a.call(this, b) || this } return __extends(b, a), b.prototype.parseJSON = function(a) { void 0 === a && (a = {}), this.objectID = a[OBJECT_ID_STRING_KEY], this.name = a.name, this.type = a.type || HSBlockType.Object }, b }(HSManagedObject); HSVariablePrototype.key = "HSVariablePrototype"; var UIPointerEvent = function() { function a(a, b) { var c = a.target, d = c.clientWidth, e = c.clientHeight; this.point = [b[0] * HSStageScene.stageWidth / d, HSStageScene.stageHeight - b[1] * HSStageScene.stageHeight / e] } return a }(), UIEventListeners = function() { function a(a) { this.listeners = a } return a.prototype.unregister = function() { this.listeners.forEach(function(a) { return a.unregister() }) }, a }(), UIEventListener = function() { function a(a, b, c) { this.element = a, this.eventType = b, this.callback = c, a.addEventListener(b, c) } return a.prototype.unregister = function() { this.element.removeEventListener(this.eventType, this.callback) }, a }(), SourceFormatter = function() { function a() {} return a.blocksToSrc = function(a) { return a.join(", ") }, a.blockToSrc = function(a) { return HSBlockType[a.type] + "(" + a.parameters.join(", ") + ")" }, a.paramToSrc = function(a) { return HSParameterType[a.type] + ": " + a.value }, a.stageParamToSrc = function(a, b) { return a + (b ? "...\n" + b.toString() : "") }, a.stageControlToSrc = function(a) { var b = HSBlockType[a.type] + "(" + a.parameters.join(", ") + ")"; return a.scripts.length > 0 && (b += " { ", b += a.scripts.map(function(a) { return a.toString() }).join(" } ")), b }, a.stageMethodToSrc = function(a) { return HSBlockType[a.type] + "(" + a.parameters.join(", ") + ")" }, a.executableToSrc = function(a) { return "NOW {" + a.blocksToExecuteNow.map(function(a) { return a.toString() }).join(", ") + "}; LATER {" + a.blocksToExecuteLater.map(function(a) { return a.toString() }).join(", ") + "}" }, a }(), HSCollisionPair = function() { function a(a, b) { this.isOverlapping = !1, this.wasOverlapping = !1; var c = this.getSortedPair(a, b); this.stageObject1 = c[0], this.stageObject2 = c[1], this.uniqueKey = this.stageObject1.stageObjectID + "_" + this.stageObject2.stageObjectID } return a.prototype.getSortedPair = function(a, b) { return a.stageObjectID < b.stageObjectID ? [a, b] : [b, a] }, a.prototype.collisionTest = function(a) { return !!this.isVisible() && a.collisionTest(this.stageObject1, this.stageObject2) }, a.prototype.isVisible = function() { return !this.stageObject1.isInvisible() && !this.stageObject2.isInvisible() }, a.prototype.update = function(a) { this.wasOverlapping = this.isOverlapping, this.isOverlapping = this.collisionTest(a) }, a.prototype.isTouching = function() { return this.isOverlapping }, a.prototype.isBumping = function() { return this.isTouching() && !this.wasOverlapping }, a }(), HSCollisionPairCollection = function() { function a(a) { void 0 === a && (a = []), this.pairMap = new Map, this.add(a) } return a.prototype.add = function(a) { var b = this; a.forEach(function(a) { return b.addOne(a) }) }, a.prototype.filter = function(b) { return new a(this.toArray().filter(b)) }, a.prototype.contains = function(a) { return this.pairMap.has(a.uniqueKey) }, a.prototype.without = function(a) { return this.filter(function(b) { return !a.contains(b) }) }, a.prototype.addOne = function(a) { this.pairMap.set(a.uniqueKey, a) }, a.prototype.toArray = function() { return Array.from(this.pairMap.values()) }, a.prototype.intersects = function(a) { var b = this; return a.some(function(a) { return b.contains(a) }) }, a.prototype.copy = function() { return new a(Array.from(this)) }, a.prototype.forEach = function(a) { return this.pairMap.forEach(function(b) { return a(b) }) }, a.prototype[Symbol.iterator] = function() { return this.pairMap.values() }, a.prototype.length = function() { return this.pairMap.size }, a }(), HSColor = function() { function a() {} return a.textColor = function() { return a.rgbTextColor }, a.randomColor = function() { var b = a.RGBAColors.length, c = Math.floor(Math.random() * (b - 1)); return a.RGBAColors[c] }, a.rgb = function(a, b, c) { return "rgb(" + Math.round(a) + ", " + Math.round(b) + ", " + Math.round(c) + ")" }, a.hexColor = function(a) { return tinycolor(a).toHex() }, a.hexToTint = function(b) { return void 0 === this._colorMap.get(b) && this._colorMap.set(b, parseInt(a.hexColor(b), 16)), this._colorMap.get(b) }, a.hsb = function(b, c, d) { return a.convertHSBStringToRGBAString("HSB(" + b + ", " + c + "%, " + d + "%)") }, a.rgbStringFromHSBString = function(b) { var c = a.hsbRGBAColorMaps[b]; return c || (c = a.convertHSBStringToRGBAString(b)), c }, a.hsbStringFromRgbString = function(a) { var b = tinycolor(a).toHsv(); return "HSB(" + Math.round(b.h) + "," + Math.round(100 * b.s) + "," + Math.round(100 * b.v) + ")" }, a.rgbStringFromNumericColor = function(b) { var c = parseFloat(b); if (!isNaN(c)) { var d = Math.abs(Math.round(c) % a.RGBAColors.length); return a.RGBAColors[d] } return null }, a.convertHSBStringToTinyColor = function(a) { var b = a.replace("B", "V"); return tinycolor(b) }, a.convertHSBStringToRGBAString = function(a) { return this.convertHSBStringToTinyColor(a).toRgbString() }, a.convertHSBStringToRGB = function(a) { var b = this.convertHSBStringToTinyColor(a), c = b.toRgb(); return vec4.fromValues(c.r / 255, c.g / 255, c.b / 255, 1) }, a }(); HSColor.RGBAColors = ["rgb(100, 48, 112)", "rgb(134, 77, 209)", "rgb(168, 177, 255)", "rgb(215, 163, 227)", "rgb(255, 179, 207)", "rgb(232, 84, 96)", "rgb(214, 24, 100)", "rgb(212, 8, 29)", "rgb(255, 119, 0)", "rgb(250, 204, 0)", "rgb(255, 233, 38)", "rgb(159, 245, 165)", "rgb(134, 196, 63)", "rgb(64, 143, 50)", "rgb(86, 214, 186)", "rgb(140, 219, 255)", "rgb(10, 169, 209)", "rgb(39, 138, 219)", "rgb(29, 60, 117)", "rgb(77, 77, 77)", "rgb(51, 41, 50)", "rgb(122, 67, 29)", "rgb(204, 204, 204)", "rgb(255, 255, 255)"], HSColor.hsbRGBAColorMaps = { "HSB(289,57,44)": "rgb(100, 48, 112)", "HSB(266,63,82)": "rgb(134, 77, 209)", "HSB(234,34,100)": "rgb(168, 177, 255)", "HSB(289,28,89)": "rgb(215, 163, 227)", "HSB(338,30,100)": "rgb(255, 179, 207)", "HSB(355,64,91)": "rgb(232, 84, 96)", "HSB(336,89,84)": "rgb(214, 24, 100)", "HSB(354,96,83)": "rgb(212, 8, 29)", "HSB(28,100,100)": "rgb(255, 119, 0)", "HSB(49,100,98)": "rgb(250, 204, 0)", "HSB(54,85,100)": "rgb(255, 233, 38)", "HSB(124,35,96)": "rgb(159, 245, 165)", "HSB(88,68,77)": "rgb(134, 196, 63)", "HSB(111,65,56)": "rgb(64, 143, 50)", "HSB(167,60,84)": "rgb(86, 214, 186)", "HSB(199,45,100)": "rgb(140, 219, 255)", "HSB(192,95,82)": "rgb(10, 169, 209)", "HSB(207,82,86)": "rgb(39, 138, 219)", "HSB(219,75,46)": "rgb(29, 60, 117)", "HSB(0,0,30)": "rgb(77, 77, 77)", "HSB(306,20,20)": "rgb(51, 41, 50)", "HSB(24,76,48)": "rgb(122, 67, 29)", "HSB(0,0,80)": "rgb(204, 204, 204)", "HSB(0,0,100)": "rgb(255, 255, 255)" }, HSColor.rgbWhiteColor = "rgb(255, 255, 255)", HSColor.rgbTextColor = "rgb(0,0,0)", HSColor._colorMap = new Map; var HSExecutable = function() { function a(a, b) { this.blocksToExecuteNow = a, this.blocksToExecuteLater = b, this.isImmediate = !1 } return a.prototype.newWithNewBlocksToExecuteLater = function(b) { return new a(this.blocksToExecuteNow, b) }, a.prototype.execute = function(a) { var b = this; this.blocksToExecuteNow.forEach(function(c) { return b.executeBlock(c, a) }) }, a.prototype.toString = function() { return SourceFormatter.executableToSrc(this) }, a.prototype.executeBlock = function(a, b) { var c = (a.firstIntegerValue(b), a.parameters); switch (a.type) { case HSBlockType.PlaySound: var d = HSSoundManager.sharedInstance, e = c[0].computedStringValue(b); d.play(e); break; case HSBlockType.MakeAClone: var f = 1; c[0] && (f = c[0].computedValue(b)), b.clone(f); break; case HSBlockType.Destroy: b.destroy(); break; case HSBlockType.ChangeX: case HSBlockType.ChangeY: case HSBlockType.Move: case HSBlockType.Rotate: var g = b.x, h = b.y, i = b.headingInDegrees; b.executeBlock(a), b.x === g && b.y === h && b.headingInDegrees === i && this.blocksToExecuteLater.shift(); break; case HSBlockType.ChangeScene: HSStageProject.sharedInstance.changeScene(c[0].computedStringValue(b)); break; default: b.executeBlock(a) } }, a }(), HSLinkedList = function() { function a() { this.nodeMap = new Map, this.headNode = new HSLinkedListNode, this.length = 0, this.headNode.next = this.headNode, this.headNode.previous = this.headNode } return a.prototype.push = function(a) { if (!this.includes(a)) { var b = new HSLinkedListNode(a); b.next = this.headNode, b.previous = this.headNode.previous, b.previous.next = b, this.headNode.previous = b, this.nodeMap.set(a, b), this.length++ } }, a.prototype.unshift = function(a) { if (!this.includes(a)) { var b = new HSLinkedListNode(a); b.next = this.headNode.next, b.previous = this.headNode, b.next.previous = b, this.headNode.next = b, this.nodeMap.set(a, b), this.length++ } }, a.prototype.remove = function(a) { var b = this.nodeMap.get(a); b && (b.previous.next = b.next, b.next.previous = b.previous, this.nodeMap.delete(a), this.length--) }, a.prototype.includes = function(a) { return this.nodeMap.has(a) }, a.prototype[Symbol.iterator] = function() { return new HSLinkedListIterator(this.headNode) }, a.prototype.getReverseIterator = function() { return new HSLinkedListIterator(this.headNode, !0) }, a.prototype.forEach = function(a) { var b = this, c = 0; this[Symbol.iterator]().forEach(function(d) { return a(d, c++, b) }) }, a.prototype.forEachRight = function(a) { var b = this, c = this.length - 1; this.getReverseIterator().forEach(function(d) { return a(d, c--, b) }) }, a.prototype.find = function(a) { var b = this, c = 0; return this[Symbol.iterator]().find(function(d) { return a(d, c++, b) }) }, a.prototype.findLast = function(a) { var b = this, c = this.length - 1; return this.getReverseIterator().find(function(d) { return a(d, c--, b) }) }, a }(), HSLinkedListNode = function() { function a(a) { void 0 === a && (a = null), this.value = a, this.next = this, this.previous = this } return a }(), HSLinkedListIterator = function() { function a(a, b) { void 0 === b && (b = !1), this.headNode = a, this.isReversed = b, this.currentNode = a } return a.prototype.next = function() { var a = this.isReversed ? this.currentNode.previous : this.currentNode.next; return a !== this.headNode ? (this.currentNode = a, { value: this.currentNode.value, done: !1 }) : { value: void 0, done: !0 } }, a.prototype.forEach = function(a) { for (var b = this.next(); !b.done;) a(b.value), b = this.next() }, a.prototype.find = function(a) { for (var b = this.next(); !b.done;) { if (a(b.value)) return b.value; b = this.next() } }, a.prototype[Symbol.iterator] = function() { return this }, a }(), HSLinePoint = function() { function a(b, c, d) { this.point = b, this.radius = c, this.colorReference = d, this.point[0] = clamp(b[0], -a.MAX_POINT_VALUE, a.MAX_POINT_VALUE), this.point[1] = clamp(b[1], -a.MAX_POINT_VALUE, a.MAX_POINT_VALUE); var e = Math.ceil(2 * c) / 2; this.radius = e < 0 ? .5 : clamp(e, 0, a.MAX_POINT_VALUE) } return a.prototype.clone = function() { return new a(this.point, this.radius, this.colorReference) }, a }(); HSLinePoint.MAX_POINT_VALUE = 1e4; var HSPathDrawer = function() { function a(a) { this.currentPoint = a, this.shouldDraw = !1 } return a.prototype.drawDiff = function(a) { this.shouldDrawPath() && (this.currentPoint.radius && a.drawLine(this.previousPointWithRadiusAndColor(), this.currentPoint), this.shouldDraw = !1) }, a.prototype.shouldDrawPath = function() { return this.shouldDraw && this.currentPoint && this.previousPoint }, a.prototype.previousPointWithRadiusAndColor = function() { var a = this.previousPoint.clone(); return a.colorReference = this.currentPoint.colorReference, a.radius = this.currentPoint.radius, a }, a.prototype.addPoint = function(a, b) { b ? (this.shouldDraw = !0, this.previousPoint = this.currentPoint, this.currentPoint = a) : (this.currentPoint = a, this.shouldDraw = !1) }, a }(), HSStageControl = function() { function a(a, b, c) { void 0 === c && (c = []), this.type = a, this.scripts = b, this.parameters = c, this.isImmediate = !1 } return a.prototype.integerValue = function(a) { switch (this.type) { case HSBlockType.Repeat: return Math.round(this.firstParameterValue(a)); case HSBlockType.RepeatForever: return 1 / 0; default: return 0 } }, a.prototype.script = function(a) { switch (this.type) { case HSBlockType.CheckOnceIf: case HSBlockType.CheckIfElse: return this.parameters[0].computedValue(a) ? this.trueScript() : this.falseScript(); default: return this.trueScript() } }, a.prototype.trueScript = function() { return this.scripts[0].stageScript() }, a.prototype.falseScript = function() { return this.scripts[1].stageScript() }, a.prototype.toString = function() { return SourceFormatter.stageControlToSrc(this) }, a.prototype.firstParameterValue = function(a) { return this.parameters.length > 0 ? this.parameters[0].computedValue(a) : 0 }, a.prototype.executableForStepSize = function(a, b) { switch (this.type) { case HSBlockType.Repeat: case HSBlockType.RepeatForever: return this.executableForRepeat(a, b); case HSBlockType.LeaveATrail: return this.executableForLeaveATrail(a, b); case HSBlockType.CheckOnceIf: case HSBlockType.CheckIfElse: case HSBlockType.Ability: return this.scripts[0].isImmediatelyRecursive() ? new HSExecutable([], []) : this.script(b).executableForStepSize(a, b) } }, a.prototype.executableForRepeat = function(a, b) { switch (this.integerValue(b)) { case 0: return new HSExecutable([], []); case 1: return this.script(b).executableForStepSize(a, b); default: return this.executableWithRepeatOnTheEnd(a, b) } }, a.prototype.executableForLeaveATrail = function(a, b) { var c = this.script(b).executableForStepSize(a, b), d = [new HSStageMethod(HSBlockType.PenDown)]; this.parameters[0] && d.push(new HSStageMethod(HSBlockType.StrokeColor, [this.parameters[0]])), this.parameters[1] && d.push(new HSStageMethod(HSBlockType.StrokeWidth, [this.parameters[1]])); var e = new HSStageMethod(HSBlockType.PenUp); return new HSExecutable(d.concat(c.blocksToExecuteNow), c.blocksToExecuteLater.concat(e)) }, a.prototype.executableWithRepeatOnTheEnd = function(b, c) { var d = this.script(c).executableForStepSize(b, c), e = this.integerValue(c) - 1, f = new HSStageParameter("" + e), g = new a(this.type, this.scripts, [f]), h = d.blocksToExecuteLater; return h.push(g), d.newWithNewBlocksToExecuteLater(h) }, a }(), BASE_SPEED = 400, BASE_STEP_SIZE = 10, EDGE_OF_SCREEN_OBJECT_ID = "zzzEdge", DEBUG_DRAW_BOUNDING_BOXES = !1, HSStageObject = function() { function a(b, c, d, e, f, g, h, i, j) { this.x = b, this.y = c, this.text = d, this.type = e, this.baseObjectScale = f, this.fontSize = g, this.objectID = h, this.imageName = i, this.willChangeCostume = j, this._animationNumber = 0, this.sizePercentWidth = 100, this.sizePercentHeight = 100, this.headingInDegrees = 0, this.speed = BASE_SPEED, this.invisibilityPercent = 0, this.isFlipped = !1, this.drawingRadius = null, this.drawingColor = null, this.penDown = !1, this.creationTick = null, this.relatedCollisionRules = new Set, this.collisionImageFactory = new HSCollisionImageFactory, this.stageRules = [], this.cloneIndex = 1, this.color = this.colorForType(e), this.stageObjectID = a.uniqueIdCounter++, this.type === HSObjectType.text ? this.text = d : this.text = null, this.pathDrawer = new HSPathDrawer(this.currentPoint()), this.view = new HSView(this.viewProps()) } return a.prototype.setWidth = function(a) { 0 === a && (a = .01), a && (this.sizePercentWidth = a / this.originalWidth * (1 / this.baseScale()) * 100) }, a.prototype.setHeight = function(a) { 0 === a && (a = .01), a && (this.sizePercentHeight = a / this.originalHeight * (1 / this.baseScale()) * 100) }, a.prototype.width = function() { return this.view.textureExists ? this.view.width() : this.originalWidth }, a.prototype.height = function() { return this.view.textureExists ? this.view.height() : this.originalHeight }, a.prototype.colorForType = function(a) { return this.type === HSObjectType.text ? HSColor.rgbTextColor : this.type > HSObjectType.HS_END_OF_CHARACTERS && this.type < HSObjectType.HS_END_OF_SHAPES ? HSColor.rgbTextColor : HSColor.rgbWhiteColor }, a.prototype.originalObject = function(a) { var b = a.findWithObjectID(HSObject.key, this.objectID); return b ? b.stageObject() : null }, a.prototype.baseScale = function() { return this.shouldDrawText() ? 1 : this.isShape() ? 1 : this.canDrawImage() ? 1 : this.baseObjectScale }, a.prototype.isShape = function() { return this.type > HSObjectType.HS_END_OF_CHARACTERS && this.type < HSObjectType.HS_END_OF_SHAPES }, a.prototype.update = function() { this.view.update(this.viewProps()) }, a.prototype.viewProps = function() { return { type: this.type, text: this.text, color: this.color, x: this.x, y: this.y, headingInRadians: this.headingInRadians(), sizePercentWidth: this.sizePercentWidth, sizePercentHeight: this.sizePercentHeight, fontSize: this.fontSize, opacity: this.opacity(), isFlipped: this.isFlipped, animationNumber: this.animationNumber(), willChangeCostume: this.willChangeCostume, imageName: this.imageName, baseObjectScale: this.baseScale(), stageHeight: HSStageScene.stageHeight } }, a.prototype.imageForCollision = function() { return this.collisionImageFactory.image(this.view.imageSource()) }, a.prototype.boundingBox = function() { this._boundingBox || (this._boundingBox = new HSBoundingBox); var a = this.view.bounds(); return this._boundingBox.update(this.x, this.y, a.width / 2, a.height / 2), this._boundingBox }, a.prototype.drawPath = function(a) { this.pathDrawer.drawDiff(a) }, a.prototype.isBlankTextObject = function() { return this.type === HSObjectType.text && !this.shouldDrawText() }, a.prototype.shouldDrawText = function() { return HSTokenizer.hasDrawableTokens(this.text) }, a.prototype.canDrawCharacter = function() { return this.type !== HSObjectType.text }, a.prototype.canDrawImage = function() { return !!this.imageName }, a.prototype.opacity = function() { return .01 * Math.max(100 - this.invisibilityPercent, 0) }, a.prototype.clear = function() { HopscotchDrawingContext.shouldClear = !0 }, a.prototype.maxStepSize = function() { var a = this.speed / BASE_SPEED * BASE_STEP_SIZE; return Math.abs(a) >= 1 ? a : Math.sign(a) }, a.prototype.headingInRadians = function() { return this.headingInDegrees * Math.PI / 180 }, a.prototype.changeXBy = function(a) { this.x += a, this.moveToWithinBoundary(), this.pathDrawer.addPoint(this.currentPoint(), this.penDown) }, a.prototype.changeYBy = function(a) { this.y += a, this.moveToWithinBoundary(), this.pathDrawer.addPoint(this.currentPoint(), this.penDown) }, a.prototype.setPosition = function(a, b) { this.x = a, this.y = b, this.pathDrawer.addPoint(this.currentPoint(), this.penDown) }, a.prototype.rotateBy = function(b) { this.headingInDegrees = a.normalizeHeading(this.headingInDegrees + b * this.multiplier()) }, a.prototype.moveBy = function(a) { this.x += this.multiplier() * Math.cos(this.headingInRadians()) * a, this.y += this.multiplier() * Math.sin(this.headingInRadians()) * a, this.moveToWithinBoundary(), this.pathDrawer.addPoint(this.currentPoint(), this.penDown) }, a.prototype.setText = function(a, b) { this.text = a, this.color = b }, a.prototype.setCharacter = function(a) { this.type = a, this.color = this.colorForType(a), this._animationNumber = 0, this.text = null, this.imageName = void 0 }, a.prototype.setImage = function(a) { this.type = HSObjectType.image, this.color = this.colorForType(HSObjectType.image), this._animationNumber = 0, this.text = null, a && (this.imageName = a.fileName) }, a.prototype.changePose = function() { (this.type < HSObjectType.HS_END_OF_CHARACTERS || this.type > HSObjectType.HS_END_OF_SHAPES) && this._animationNumber++ }, a.prototype.animationNumber = function() { return this._animationNumber % 4 }, a.prototype.bringToFront = function() { this.bringToFrontFunction(this) }, a.prototype.sendToBack = function() { this.sendToBackFunction(this) }, a.prototype.clone = function(a) { this.cloneFunction(this, a) }, a.prototype.destroy = function() { this.view = null, this.stageRules = [], this.destroyFunction(this) }, a.prototype.isInvisible = function() { return this.invisibilityPercent >= 100 }, a.prototype.deepCopy = function(b, c) { var d = new a(c.x, c.y, c.text, c.type, c.context.baseObjectScale, c.context.fontSize, c.objectID, c.fileName(), c.willChangeCostume); return d.stageRules = this.stageRules.map(function(a) { return a.deepCopy(d) }), d.originalWidth = this.originalWidth, d.originalHeight = this.originalHeight, d }, a.prototype.break = function() { this.stageRules.forEach(function(a) { return a.break() }) }, a.normalizeHeading = function(a) { return (a % 360 + 360) % 360 }, a.prototype.currentPoint = function() { return new HSLinePoint([this.x, this.y], this.drawingRadius, this) }, a.prototype.moveToWithinBoundary = function() { this.x = Math.min(this.x, HSStageScene.stageWidth), this.x = Math.max(this.x, 0), this.y = Math.min(this.y, HSStageScene.stageHeight), this.y = Math.max(this.y, 0) }, a.prototype.multiplier = function() { return this.isFlipped ? -1 : 1 }, a.prototype.activateAllStageRulesForEventType = function(a, b) { this.allStageRulesForEventTypeAndObject(a, b).forEach(function(a) { return a.activate() }) }, a.prototype.allStageRulesForEventTypeAndObject = function(a, b) { return this.allStageRulesForEventType(a).filter(function(a) { return a.matchesFirstObject(b) }) }, a.prototype.allStageRulesForEventType = function(a) { return this.stageRules.filter(function(b) { return b.matchesEvent(a) }) }, a.prototype.allPossibleCollisionPairs = function() { return this.allStageRulesForEventType(HSBlockType.EventOperatorIsTouching).concat(this.allStageRulesForEventType(HSBlockType.EventOperatorBump)).reduce(function(a, b) { return a.concat(b.collisionPairs()) }, []) }, a.prototype.executeActiveRules = function() { for (var a = this.stageRules, b = a.length, c = 0; c !== b; ++c) a[c].conditionIsTrue(this) && (a[c].hasBlocksToExecute() || (a[c].isActive = !1), a[c].activate()), a[c].execute(this) }, a.prototype.executeBlock = function(b) { var c = b.firstIntegerValue(this), d = b.parameters; switch (b.type) { case HSBlockType.Move: this.moveBy(c); break; case HSBlockType.SetPosition: this.setPosition(d[0].computedValue(this), d[1].computedValue(this)); break; case HSBlockType.SetSize: this.sizePercentWidth = c, this.sizePercentHeight = c; break; case HSBlockType.Grow: var e = Math.max(100 + c, 0); this.sizePercentWidth *= .01 * e, this.sizePercentHeight *= .01 * e; break; case HSBlockType.Scale: this.sizePercentWidth *= .01 * c, this.sizePercentHeight *= .01 * c; break; case HSBlockType.Shrink: var e = Math.max(100 - c, 0), f = this.sizePercentWidth * e * .01; this.sizePercentWidth = Math.max(f, 1e-7); var f = this.sizePercentHeight * e * .01; this.sizePercentHeight = Math.max(f, 1e-7); break; case HSBlockType.SetHeading: this.headingInDegrees = a.normalizeHeading(c); break; case HSBlockType.ChangeX: this.changeXBy(c); break; case HSBlockType.ChangeY: this.changeYBy(c); break; case HSBlockType.Rotate: this.rotateBy(c); break; case HSBlockType.ChangeSpeed: this.speed = c; break; case HSBlockType.SetInvisibility: this.invisibilityPercent = c; break; case HSBlockType.Flip: this.isFlipped = !this.isFlipped; break; case HSBlockType.StrokeColor: this.drawingColor = d[0].computedColorString(this); break; case HSBlockType.StrokeWidth: this.drawingRadius = c / 2; break; case HSBlockType.Clear: this.clear(); break; case HSBlockType.PenDown: this.penDown = !0; break; case HSBlockType.PenUp: this.penDown = !1; break; case HSBlockType.ChangeCostume: this.changePose(); break; case HSBlockType.SetText: var g = HSColor.rgbTextColor; d.length >= 2 && (g = d[1].computedColorString(this)), this.setText(d[0].computedStringValue(this), g); break; case HSBlockType.SetVariable: var h = d[0].variable(); h && (h.isSkillComplete() && 1 === d[1].computedValue(this) && sendToApp("hsSkillComplete", "1"), h.setValue(d[1].computedValue(this), this)); break; case HSBlockType.ChangeVariable: var h = d[0].variable(); if (h) { var i = h.computedValue(this), j = d[1].computedValue(this), k = i + j; h.setValue(k, this) } break; case HSBlockType.BringToFront: this.bringToFront(); break; case HSBlockType.SendToBack: this.sendToBack(); break; case HSBlockType.SetImage: d[0].computedObjectType() === HSObjectType.text ? this.setText(d[0].value, HSColor.rgbTextColor) : d[0].computedObjectType() === HSObjectType.image ? this.setImage(d[0].childBlock) : this.setCharacter(d[0].computedObjectType()); break; case HSBlockType.SetColor: this.color = d[0].computedColorString(this); break; case HSBlockType.SetWidthAndHeight: this.setWidth(d[0].computedValue(this)), this.setHeight(d[1].computedValue(this)) } }, a }(); HSStageObject.uniqueIdCounter = 0, HSStageObject.edgeOfScreenObject = new HSStageObject(0, 0, "", HSObjectType.edgeOfScreen, 1, 80, EDGE_OF_SCREEN_OBJECT_ID, null, !1); var HSStageParameter = function() { function a(a, b) { void 0 === b && (b = null), this.value = a, this.childBlock = b } return a.prototype.variable = function() { if (this.childBlock && this.childBlock.type === HSBlockType.Variable) return this.childBlock }, a.prototype.computedStringValue = function(a) { return this.childBlock ? this.childBlock.computedStringValue(a) : this.value.toString() }, a.prototype.computedObjectType = function() { return this.childBlock ? HSObjectType.image : "string" == typeof this.value ? HSObjectType.text : this.value }, a.prototype.computedValue = function(a) { var b = this.childBlockValue(a); return null != b ? b : this.numberValue() }, a.prototype.computedColorString = function(a) { return this.childBlock ? this.childBlock.computedColorString(a) : HSColor.rgbStringFromHSBString(this.computedStringValue(a)) }, a.prototype.toString = function() { return SourceFormatter.stageParamToSrc(this.value, this.childBlock) }, a.prototype.childBlockValue = function(a) { return this.childBlock ? this.childBlock.computedValue(a) : null }, a.prototype.numberValue = function() { var a = parseFloat(this.value); return Number.isFinite(a) ? a : null }, a }(), HSStageParameterBlock = function() { function a(a) { this.parameterBlock = a } return a.prototype.matchesStageObject = function(a, b) { var c = this.stageObjects(b), d = c[0]; if (!d && !a) return !0; var e = this.parameterBlocks() && this.parameterBlocks().length > 0 && this.parameterBlocks()[0].type === HSBlockType.AnyObject; return this.parameterBlock.context.version < HSProjectVersion.ADD_SELF && !e ? d && a && d.objectID === a.objectID : c.includes(a) }, a.prototype.stageObjects = function(a) { return this.parameterBlocks().reduce(function(b, c) { return b.concat(c.stageObjects(a)) }, []) }, a.prototype.parameterBlocks = function() { return this.parameterBlock.parameters.filter(function(a) { return null != a.childBlock }).map(function(a) { return a.childBlock }) }, a }(), HSStageProject = function() { function a(b) { this.stageScenes = b.scenes.map(function(a) { return a.stageScene() }), this.version = b.context.version, this.activeStageScene = this.stageScenes[0], HSVariable.globalScope = {}, a.sharedInstance = this } return a.prototype.changeScene = function(a) { var b = this.stageScenes.find(function(b) { return b.name === a }); b && (HopscotchDrawingContext.shouldClear = !0, this.activeStageScene = b, this.activeStageScene.activateAllRulesForEventType(HSBlockType.EventOperatorStart)) }, a.prototype.activateAllRulesForEventType = function(a) { this.activeStageScene.activateAllRulesForEventType(a) }, a.prototype.executeAllActiveRules = function() { this.activeStageScene.executeAllActiveRules() }, a.prototype.animationTick = function(a) { this.activeStageScene.animationTick(a) }, a.prototype.receiveClickEvent = function(a, b) { this.activeStageScene.receiveClickEvent(a, b) }, a.prototype.receiveTouchDownEvent = function(a, b) { this.activeStageScene.receiveTouchDownEvent(a, b) }, a.prototype.receiveTouchMoveEvent = function(a, b) { this.activeStageScene.receiveTouchMoveEvent(a, b) }, a.prototype.receiveTouchUpEvent = function(a, b) { this.activeStageScene.receiveTouchUpEvent(a, b) }, a }(), HSStageRule = function() { function a(a, b) { this.rule = a, this.currentObject = b, this.isActive = !1, this._collisionPairs = [], this.numFirstParamObjects = 0, this.numSecondParamObjects = 0, this.stageScript = this.rule.script.stageScript(), this.eventBlock = this.rule.childBlock().stageParameterBlock() } return a.prototype.reset = function() { this.stageScript.reset() }, a.prototype.activate = function() { this.isActive || (this.reset(), this.isActive = !0) }, a.prototype.activateIfMatchesFirstObject = function(a) { this.matchesFirstObject(a) && this.activate() }, a.prototype.break = function() { this.isActive = !1, this.reset() }, a.prototype.collisionPairs = function() { var a = this, b = this.eventBlock.parameterBlocks()[0], c = this.eventBlock.parameterBlocks()[1], d = this.stageObjectsForParameter(b), e = this.stageObjectsForParameter(c); if (this._collisionPairs && this.numFirstParamObjects === d.length && this.numSecondParamObjects === e.length) return this._collisionPairs; var f = d.slice(this.numFirstParamObjects), g = e.slice(this.numSecondParamObjects), h = d.slice(0, this.numFirstParamObjects); return f.forEach(function(b) { e.filter(function(a) { return a !== b }).forEach(function(c) { a._collisionPairs.push(new HSCollisionPair(b, c)), b.relatedCollisionRules.add(a), c.relatedCollisionRules.add(a) }) }), h.forEach(function(b) { g.filter(function(a) { return a !== b }).forEach(function(c) { a._collisionPairs.push(new HSCollisionPair(b, c)) }) }), this.numFirstParamObjects = d.length, this.numSecondParamObjects = e.length, this._collisionPairs }, a.prototype.stageObjectsForParameter = function(a) { try { return a.type === HSBlockType.AnyObject ? HSStageProject.sharedInstance.activeStageScene.stageObjects : this.rule.context.version < HSProjectVersion.ADD_SELF && a.type === HSBlockType.Object && a.object ? a.object.allStageObjects() : a.stageObjects(this.currentObject) } catch (a) {} return [] }, a.prototype.eventType = function() { return this.rule.eventType() }, a.prototype.matchesEvent = function(a) { return this.eventType() === a }, a.prototype.matchesFirstObject = function(a) { return this.eventBlock.matchesStageObject(a, this.currentObject) }, a.prototype.execute = function(a) { this.isExecutable() ? (this.stageScript.isImmediate && (this.isActive = !1), this.stageScript.execute(a)) : this.isActive = !1 }, a.prototype.isExecutable = function() { return this.isValid() && this.isActive && this.hasBlocksToExecute() }, a.prototype.hasBlocksToExecute = function() { return this.stageScript.blocks.length > 0 }, a.prototype.isValid = function() { return null != this.stageScript }, a.prototype.conditionIsTrue = function(a) { return this.rule.conditionIsTrue(a) }, a.prototype.deepCopy = function(b) { var c = new a(this.rule, b); return c.stageScript = this.stageScript.deepCopy(), c }, a }(), HSStageScript = function() { function a(a) { this.script = a, this.reset() } return a.prototype.reset = function() { this.blocks = this.script.blocks.map(function(a) { return a.stageBlock() }), this.isImmediate = this.blocks.every(function(a) { return a.isImmediate }) }, a.prototype.execute = function(a) { var b = this.executableForStepSize(a.maxStepSize(), a); b.execute(a), this.blocks = b.blocksToExecuteLater, this.isImmediate = this.blocks.every(function(a) { return a.isImmediate }) }, a.prototype.executableForStepSize = function(a, b) { if (!this.blocks.length) return new HSExecutable([], []); for (var c = this.blocks.slice().reverse(), d = c.pop(), e = []; d && (d.isImmediate || d instanceof HSStageMethod && d.isFinishedTimestampBlock(b));) e.push(d), d = c.pop(); if (!d) return new HSExecutable(e, []); var f = d.executableForStepSize(a, b); return new HSExecutable(e.concat(f.blocksToExecuteNow), f.blocksToExecuteLater.concat(c.reverse())) }, a.prototype.deepCopy = function() { return new a(this.script) }, a.prototype.toString = function() { return SourceFormatter.blocksToSrc(this.blocks) }, a }(), HSVisualContext = function() { function a(a, b) { this.backgroundCanvas = a, this.drawingContext = new HopscotchDrawingContext(a, b, this), this.collisionContext = new HSCollisionContext } return a }(); HSVisualContext.collisionResolution = 64; var HopscotchDrawingContext = function() { function a(a, b, c) { this.bgCanvas = a, this.drawBackground = b, this.visualContext = c, this.bgContext = this.layerFromCanvas2d(a), this.clearBackground() } return a.prototype.layerFromCanvas2d = function(a) { var b = this.canvasWidth(), c = this.canvasHeight(); a.width = b, a.height = c; var d = a.getContext("2d"); return d && (d.translate(0, c), d.scale(1 * HSMain.dpi, -1 * HSMain.dpi)), d }, a.prototype.canvasWidth = function() { return HSStageScene.stageWidth * HSMain.dpi }, a.prototype.canvasHeight = function() { return HSStageScene.stageHeight * HSMain.dpi }, a.prototype.renderFrame = function() { a.shouldClear && (this.clearBackground(), a.shouldClear = !1), this.drawBackground() }, a.prototype.clearBackground = function() { this.bgContext && (this.bgContext.fillStyle = "white", this.bgContext.fillRect(0, 0, this.bgCanvas.width, this.bgCanvas.height)) }, a.prototype.drawLine = function(a, b) { var c = this.bgContext; c.beginPath(), c.moveTo.apply(c, a.point), a.point[0] === b.point[0] && a.point[1] === b.point[1] ? (c.fillStyle = b.colorReference.drawingColor, c.arc(b.point[0], b.point[1], b.radius, 0, 2 * Math.PI), c.fill()) : (c.lineWidth = 2 * b.radius, c.lineCap = "round", c.strokeStyle = b.colorReference.drawingColor, c.lineTo.apply(c, b.point), c.stroke()) }, a }(); HopscotchDrawingContext.shouldClear = !1, HopscotchDrawingContext.MAX_TEXTURE_SIDE_LENGTH = 1024; var HSBoundingBox = function() { function a(a, b, c, d) { void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = 0), this.centerX = a, this.centerY = b, this.halfWidth = c, this.halfHeight = d, this.vertices = [vec2.create(), vec2.create(), vec2.create(), vec2.create()], this.update(a, b, c, d) } return a.prototype.update = function(a, b, c, d) { this.halfWidth = c, this.halfHeight = d, this.centerX = a, this.centerY = b, this.vertices[0][0] = a - this.halfWidth, this.vertices[0][1] = b - this.halfHeight, this.vertices[1][0] = a + this.halfWidth, this.vertices[1][1] = b - this.halfHeight, this.vertices[2][0] = a + this.halfWidth, this.vertices[2][1] = b + this.halfHeight, this.vertices[3][0] = a - this.halfWidth, this.vertices[3][1] = b + this.halfHeight }, a.prototype.width = function() { return 2 * this.halfWidth }, a.prototype.height = function() { return 2 * this.halfHeight }, a.prototype.minX = function() { return this.vertices[0][0] }, a.prototype.minY = function() { return this.vertices[0][1] }, a.prototype.maxX = function() { return this.vertices[2][0] }, a.prototype.maxY = function() { return this.vertices[2][1] }, a.prototype.draw = function(a) { var b = HSColor.rgb(0, 0, 0), c = this.vertices.map(function(a) { return new HSLinePoint(a, 1, { drawingColor: b }) }); c.forEach(function(b, d) { a.drawLine(b, c[(d + 1) % c.length]) }) }, a.prototype.containsPoint = function(a, b) { this.pointTestVecs || (this.pointTestVecs = [vec2.create(), vec2.create(), vec2.create()]); var c = vec2.fromValues(a, b), d = this.vertices[0], e = this.vertices[1], f = this.vertices[3], g = vec2.subtract(this.pointTestVecs[0], e, d), h = vec2.subtract(this.pointTestVecs[1], f, d), i = vec2.subtract(this.pointTestVecs[2], c, d), j = vec2.dot(i, g) / vec2.length(g), k = vec2.dot(i, h) / vec2.length(h); return j > 0 && j < vec2.length(g) && k > 0 && k < vec2.length(h) }, a.prototype.area = function() { return this.width() * this.height() }, a.prototype.overlapsWithOtherBoundingBox = function(a) { return this.maxX() > a.minX() && this.minX() < a.maxX() && this.maxY() > a.minY() && this.minY() < a.maxY() }, a.prototype.intersectionRectWithOtherBoundingBox = function(b) { if (this.surroundingBox || (this.surroundingBox = new a), !this.overlapsWithOtherBoundingBox(b)) return a.zero; var c = this.minX(), d = this.minY(), e = this.maxX(), f = this.maxY(), g = b.minX(), h = b.minY(), i = b.maxX(), j = b.maxY(), k = Math.max(c, g), l = Math.max(d, h), m = Math.min(e, i), n = Math.min(f, j), o = .5 * (k + m), p = .5 * (l + n), q = .5 * (m - k), r = .5 * (n - l); return this.surroundingBox.update(o, p, q, r), this.surroundingBox }, a }(); HSBoundingBox.zero = new HSBoundingBox; var HSCollisionContext = function() { function a() { this.numberOfPixelCollisions = 0, this.debugTwoObjects = function() { function b(a, b, c, d, e) { e(a, b, c, d) } function c(a, b) { var c = b.imageForCollision(), d = c.width > 2 * h || c.height > 2 * h ? 2 * h / Math.max(c.width, c.height) : 1; a.width = Math.ceil(c.width * d), a.height = Math.ceil(c.height * d); var e = a.getContext("2d"); c && (e.clearRect(0, 0, a.width, a.height), e.drawImage(c, 0, 0, c.width, c.height, 0, 0, a.width, a.height)) } if (a.DEBUG) var d = makeDebugCanvas.apply(this, a.DEBUG_VIEW_OBJECT1_POS), e = (d.getContext("2d"), makeDebugCanvas.apply(this, a.DEBUG_VIEW_OBJECT2_POS)), f = (e.getContext("2d"), makeDebugCanvas.apply(this, a.DEBUG_VIEW_OBJECT3_POS)), g = (f.getContext("2d"), makeDebugCanvas.apply(this, a.DEBUG_VIEW_OBJECT4_POS)), h = (g.getContext("2d"), HSVisualContext.collisionResolution); return a.DEBUG ? function(a, h, i, j) { c(d, a), c(e, h); var k = this.boundingBoxForObject(a), l = this.boundingBoxForObject(h); b(f, a, k, i, j), b(g, h, l, i, j) } : function(a, b, c) {} }(), this.canvas1 = document.createElement("canvas"), this.canvas2 = document.createElement("canvas") } return a.prototype.hitTest = function(a, b, c) { if (a.isInvisible()) return !1; var d = this.boundingBoxForObject(a); if (d.containsPoint(b, c)) { if (a.type === HSObjectType.text) return !0; var e = this.generatePixelTestData(this.canvas1, a, d, d), f = e.width / (d.maxX() - d.minX()), g = e.height / (d.maxY() - d.minY()), h = (b - d.minX()) * f, i = e.height - (c - d.minY()) * g, b = Math.round(h), c = Math.round(i); return this.pixelCoordinateHasAlpha(b, c, e) } return !1 }, a.prototype.collisionTest = function(a, b) { return b.type === HSObjectType.edgeOfScreen ? this.objectIsTouchingEdgeOfScreen(a) : a.type === HSObjectType.edgeOfScreen ? this.objectIsTouchingEdgeOfScreen(b) : this.objectsAreColliding(a, b) }, a.prototype.objectsAreColliding = function(b, c) { var d = this.boundingBoxForObject(b), e = this.boundingBoxForObject(c); if (0 === d.area() || 0 === e.area()) return !1; var f = this.intersectionBoxBetweenTwoBoxes(d, e); return !!this.bigEnoughCollisionIntersectionTest(b, c, d, e, f) || !!this.boundingBoxIntersectionTest(f) && (a.DEBUG && this.debugTwoObjects(b, c, f, this.prepareCanvasForPixelTest), this.pixelTest(b, d, c, e, f)) }, a.prototype.pixelTest = function(b, c, d, e, f) { if (this.numberOfPixelCollisions >= a.PIXEL_TESTING_THRESHOLD) return !0; this.numberOfPixelCollisions += 1; var g = this.generatePixelTestData(this.canvas1, b, c, f), h = this.generatePixelTestData(this.canvas2, d, e, f); return this.testPixelData(g, h) }, a.prototype.objectIsTouchingEdgeOfScreen = function(a) { var b = this.boundingBoxForObject(a); if (0 === b.area()) return !1; var c = b.centerX, d = b.centerY; return c <= 0 || c >= HSStageScene.stageWidth || d <= 0 || d >= HSStageScene.stageHeight }, a.prototype.testPixelData = function(b, c) { if (!b || !c) return !1; var d = b, e = c; b.width < c.width && (d = c, e = b); var f = null, g = null; if (a.DEBUG) { this._debugCanvas || (this._debugCanvas = makeDebugCanvas.apply(this, a.DEBUG_VIEW_INTERSECTION_POS)), f = this._debugCanvas, g = f.getContext("2d"); var h = d.width, i = d.height; f.width = h, f.height = i; var j = Math.min(5 * h, 400), k = Math.min(5 * i, 400); f.style.width = j + "px", f.style.height = k + "px" } for (var l = e.width / d.width, m = e.height / d.height, n = !1, o = 1; o < d.height - 1; o++) for (var p = 1; p < d.width - 1; p++) { var q = Math.round(p * l), r = Math.round(o * m); if (f) this.pixelCoordinateHasAlpha(p, o, d) ? this.pixelCoordinateHasAlpha(q, r, e) ? (g.fillStyle = "white", n = !0) : g.fillStyle = "red" : this.pixelCoordinateHasAlpha(q, r, e) ? g.fillStyle = "blue" : g.fillStyle = "black", g.fillRect(p, o, 1, 1); else if (this.pixelCoordinateHasAlpha(p, o, d) && this.pixelCoordinateHasAlpha(q, r, e)) return !0 } return n }, a.prototype.pixelCoordinateHasAlpha = function(a, b, c) { var d = 4 * (b * c.width + a) + 3; return c.data[d] > 0 }, a.prototype.intersectionBoxBetweenTwoBoxes = function(a, b) { return a.intersectionRectWithOtherBoundingBox(b) }, a.prototype.bigEnoughCollisionIntersectionTest = function(a, b, c, d, e) { var f = .4; a.type > HSObjectType.HS_END_OF_CHARACTERS && (f = .7); var g = .4; b.type > HSObjectType.HS_END_OF_CHARACTERS && (g = .7); var h = e.area(); return h > f * c.area() && h > g * d.area() }, a.prototype.boundingBoxIntersectionTest = function(a) { return a.halfWidth > 0 && a.halfHeight > 0 }, a.prototype.boundingBoxForObject = function(a) { return a.boundingBox() }, a.prototype.generatePixelTestData = function(a, b, c, d) { a = this.prepareCanvasForPixelTest(a, b, c, d); var e = a.getContext("2d"), f = a.width / c.width(), g = a.height / c.height(), h = Math.round((d.minX() - c.minX()) * f), i = Math.round((c.maxY() - d.maxY()) * g), j = Math.max(Math.ceil((d.maxX() - d.minX()) * f), 1), k = Math.max(Math.ceil((d.maxY() - d.minY()) * g), 1); return e.getImageData(h, i, j, k) }, a.prototype.prepareCanvasForPixelTest = function(a, b, c, d) { var e = b.imageForCollision(); if (!e) return a; var f = Math.ceil(e.width * c.halfWidth / c.halfWidth), g = Math.ceil(e.height * c.halfHeight / c.halfHeight), h = function(a, b, c) { var d = Math.cos(c), e = Math.sin(c); return e < 0 && (e = -e), d < 0 && (d = -d), { width: b * e + a * d, height: b * d + a * e } }(f, g, b.headingInRadians()); a.width = Math.ceil(h.width), a.height = Math.ceil(h.height); var i = a.getContext("2d"); i.imageSmoothingEnabled = !1, i.oImageSmoothingEnabled = !1, i.msImageSmoothingEnabled = !1, i.mozImageSmoothingEnabled = !1, i.webkitImageSmoothingEnabled = !1, i.clearRect(0, 0, a.width, a.height); var j = a.width / 2, k = a.height / 2; return i.translate(j, k), i.rotate(-b.headingInRadians()), b.isFlipped && i.scale(-1, 1), e.width * e.height == 0 ? a : (i.drawImage(e, -e.width / 2, -e.height / 2), i.setTransform(1, 0, 0, 1, 0, 0), a) }, a }(); HSCollisionContext.DEBUG = !1, HSCollisionContext.PIXEL_TESTING_THRESHOLD = 10, HSCollisionContext.DEBUG_VIEW_OBJECT1_POS = [10, 0], HSCollisionContext.DEBUG_VIEW_OBJECT2_POS = [200, 0], HSCollisionContext.DEBUG_VIEW_OBJECT3_POS = [10, 200], HSCollisionContext.DEBUG_VIEW_OBJECT4_POS = [200, 200], HSCollisionContext.DEBUG_VIEW_INTERSECTION_POS = [300, 0]; var __extends = this && this.__extends || function(a, b) { function c() { this.constructor = a } for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]); a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c) }, HSLineBox = function() { function a() { this.width = 0 } return a }(), HSTextJustify; ! function(a) { a[a.center = 1] = "center", a[a.left = 2] = "left" }(HSTextJustify || (HSTextJustify = {})); var HSTextNode = function() { function a(a, b) { return this.text = a, this.kind = b, b === HSTextNodeKind.emoji ? new HSEmojiTextNode(a) : b === HSTextNodeKind.geometricShape ? new HSGeometricShapeTextNode(a) : void 0 } return a.prototype.prevWhitespace = function() { return this.kind === HSTextNodeKind.whitespace ? this : this.kind !== HSTextNodeKind.newline && this.prev ? this.prev.prevWhitespace() : null }, a.prototype.tail = function() { return this.next ? this.next.tail() : this }, a.concat = function(a, b) { if (a) { var c = a.tail(); c.next = b, b && (b.prev = c) } return a || b }, a.prototype.concat = function(b) { return a.concat(this, b) }, a.prototype.replace = function(a) { a.prev = this.prev, a.prev && (a.prev.next = a); var b = a.tail(); return b.next = this.next, b.next && (b.next.prev = b), a }, a.prototype.flow = function(b, c, d) { function e() { var c = f.x + f.measure(b).width, d = f.y + a.LINE_HEIGHT; g = { width: Math.max(c, g.width), height: d }, f = f.next } d = d || HSTextJustify.center; for (var f = this, g = { width: 0, height: 0 }; f;) { var h = f.measure(b); if (f.prev) { var i = f.prev.measure(b).width; f.x = f.prev.x + i, f.y = f.prev.y, f.lineBox = f.prev.lineBox } else f.x = 0, f.y = 0, f.lineBox = new HSLineBox; switch (f.lineBox.width = f.x + h.width, f.kind) { case HSTextNodeKind.newline: f.y += a.LINE_HEIGHT, f.x = 0, f.lineBox = new HSLineBox, e(); break; default: if (f.x + h.width > c) { var j = f.prevWhitespace(); if (j) { var k = new a("\n", HSTextNodeKind.newline); f = j.replace(k) } else f = f.replace(f.forceLineBreak(b, c)) } else e() } } return d === HSTextJustify.center && this.center(g), g }, a.prototype.center = function(a) { this.x += (a.width - this.lineBox.width) / 2, this.next && this.next.center(a) }, a.prototype.measure = function(a) { return this.kind === HSTextNodeKind.newline ? { width: 0 } : a.measureText(this.text) }, a.prototype.allNodes = function() { return (this.next ? this.next.allNodes() : []).concat(this) }, a.prototype.draw = function(a) { return Promise.all(this.allNodes().map(function(b) { return b.drawNode(a) })) }, a.prototype.drawNode = function(a) { return a.fillText(this.text, this.x, this.y), null }, a.prototype.forceLineBreak = function(b, c) { for (var d = "", e = this.text, f = 0; f !== e.length; ++f) { var g = d + e[f]; if (b.measureText(g).width > c) { var h = a.parse(d).head, i = new a("\n", HSTextNodeKind.newline); h.concat(i); var j = new a(this.text.substr(d.length), this.kind); return i.concat(j), h } d = g } return this }, a.prototype.toString = function() { return this.text + (this.next ? this.next.toString() : "") }, a.fromString = function(b) { return a.parse(b).head }, a.parse = function(b) { var c, d; return HSTokenizer.tokenize(b).forEach(function(b) { var e = new a(b.text, b.kind); a.concat(c, e), c = e, d || (d = c) }), { head: d, tail: c } }, a }(); HSTextNode.MAX_LINE_WIDTH = 600, HSTextNode.LINE_HEIGHT = 55; var HSEmojiTextNode = function(a) { function b(b) { var c = a.call(this, b, null) || this; return c.kind = HSTextNodeKind.emoji, c } return __extends(b, a), b.prototype.drawNode = function(c) { var d = this; return b.getImage({ text: this.text, color: HSColor.hsbStringFromRgbString(c.fillStyle) }).then(function(a) { if (iOSApp) c.drawImage(a, d.x, d.y, a.width, a.height); else { var e = a.width - 2 * b.EMOJI_IMAGE_BORDER_SIZE, f = a.height - 2 * b.EMOJI_IMAGE_BORDER_SIZE; c.drawImage(a, b.EMOJI_IMAGE_BORDER_SIZE, b.EMOJI_IMAGE_BORDER_SIZE, e, f, d.x, d.y + b.HEIGHT_OFFSET, b.WIDTH, b.HEIGHT) } }).catch(function(b) { return a.prototype.drawNode.call(d, c) }) }, b.getImageInfo = function(a) { return iOSApp ? requestTextureFromApp({ type: "emoji", props: a }).then(function(a) { return { dataURI: a.dataURI, scaleFactor: window.devicePixelRatio } }) : Promise.resolve({ dataURI: emoji.getImage(a.text), scaleFactor: 1 }) }, b.getImage = function(a) { return this.getImageInfo(a).then(function(a) { return getImageFromUri(a.dataURI).then(function(b) { return b.width /= a.scaleFactor, b.height /= a.scaleFactor, b }) }) }, b.prototype.measure = function(a) { return { width: b.WIDTH } }, b.prototype.forceLineBreak = function(a, c) { var d = HSTextNode.fromString("\n"), e = new b(this.text); return d.concat(e), d }, b }(HSTextNode); HSEmojiTextNode.HEIGHT = 40, HSEmojiTextNode.WIDTH = 40, HSEmojiTextNode.EMOJI_IMAGE_BORDER_SIZE = 4.5, HSEmojiTextNode.HEIGHT_OFFSET = 4.5; var HSGeometricShapeTextNode = function(a) { function b(b) { var c = a.call(this, b, null) || this; return c.kind = HSTextNodeKind.geometricShape, c.kind = HSTextNodeKind.geometricShape, c } return __extends(b, a), b.prototype.drawNode = function(a) { var c = a.font, d = +a.font.match(/^\d*/), e = Math.round(d * this.getScaleFactor()), f = this.measure(a).width; a.font = e + "px " + b.FONT_FAMILIES.join(", "); var g = a.measureText(this.text).width; return a.fillText(this.text, this.x + (f - g) / 2, this.y + f - g + 1.5), a.font = c, Promise.resolve(null) }, b.prototype.getScaleFactor = function() { return "■" === this.text ? .85 : .81 }, b.prototype.measure = function(a) { var c = a.font, d = +a.font.match(/^\d*/); a.font = d + "px " + b.FONT_FAMILIES.join(", "); var e = a.measureText(this.text); return a.font = c, e }, b }(HSTextNode); HSGeometricShapeTextNode.FONT_FAMILIES = [/*"Avenir-Book", "STIXGeneral", "sans-serif"*/"GillSans-Light"];
